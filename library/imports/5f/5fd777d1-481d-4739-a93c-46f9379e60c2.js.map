{"version":3,"sources":["assets\\scripts\\ComCollectionData.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","defineProperty","value","ComCollectionData","r","n","s","c","l","u","p","g","d","isGet","finished","adTip","isTips","h","index","itemData","endtime","process","f","apply","arguments","ecrypt","gameKey","GameConfig","AppCacheName","showRed","createData","data","Number","ComDataMgr","getInstance","getCommonParam","CommonParamType","colloctionTime","TimeUtils","GetTimeBySecond","initData","getCollectionCfgById","itemId","split","splitNum","length","id","getCollectionItemById","tips","goodId","num","push","saveData","refreData","getCurrentReward","rewards","checkCanRefresh","nextData","UIUtils","scheduleOnce","getCollectionData","getAllCollectionData","colloctionCanNext","getAllCollectionCfg","colloctionRepet","LogMgr","debug","splice","checkShowRed","receiveTaskReward","unSchedule","checkFinshed","needNum","EventMgr","emit","CommonEventName","RefreshCollectionRed","addAdTips","addData","RefreshCollection","getProcess","getEndtime","finishData","BaseData"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n});\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n}),\no.ComCollectionData = void 0;\nvar r = t(\"BaseData\"),\nn = t(\"EventMgr\"),\ns = t(\"LogMgr\"),\nc = t(\"TimeUtils\"),\nl = t(\"UIUtils\"),\nu = t(\"Config\"),\np = t(\"CommonCfg\"),\ng = t(\"ComDataMgr\"),\nd = function() {\n    this.isGet = !1,\n    this.finished = !1,\n    this.adTip = !1,\n    this.isTips = !1\n},\nh = function() {\n    this.index = 1,\n    this.itemData = [],\n    this.isGet = !1,\n    this.endtime = -1,\n    this.process = 0\n},\nf = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.ecrypt = !1,\n        e.gameKey = u.GameConfig.AppCacheName + \"collection\",\n        e.showRed = !1,\n        e\n    }\n    return i(e, t),\n    e.prototype.createData = function() {\n        this.data = new h;\n        var t = Number(g.ComDataMgr.getInstance().getCommonParam(g.CommonParamType.colloctionTime));\n        return t > 0 && (this.data.endtime = c.TimeUtils.GetTimeBySecond() + 60 * t),\n        this.data\n    },\n    e.prototype.initData = function(t) {\n        if (t) {\n            for (var e = g.ComDataMgr.getInstance().getCollectionCfgById(this.data.index).itemId.split(u.GameConfig.splitNum), o = 0; o < e.length; o++) {\n                var a = Number(e[o]),\n                i = new d;\n                i.id = o,\n                i.itemId = a;\n                var r = g.ComDataMgr.getInstance().getCollectionItemById(a);\n                null == r.tips ? i.adTip = !1 : i.adTip = !0,\n                i.goodId = r.goodId,\n                i.isGet = !1,\n                i.num = 0,\n                i.finished = !1,\n                this.data.itemData.push(i)\n            }\n            this.saveData()\n        } else this.refreData()\n    },\n    e.prototype.getCurrentReward = function() {\n        var t = g.ComDataMgr.getInstance().getCollectionCfgById(this.data.index);\n        return t ? t.rewards: null\n    },\n    e.prototype.refreData = function() {\n        if (this.checkCanRefresh() && this.data.endtime > 1) if (this.data.endtime - c.TimeUtils.GetTimeBySecond() <= 0) this.nextData();\n        else {\n            var t = this.data.endtime - c.TimeUtils.GetTimeBySecond();\n            l.UIUtils.scheduleOnce(this.nextData, this, t)\n        }\n    },\n    e.prototype.getCollectionData = function(t) {\n        for (var e = 0; e < this.data.itemData.length; e++) {\n            var o = this.data.itemData[e];\n            if (o.id == t) return o\n        }\n        return null\n    },\n    e.prototype.getAllCollectionData = function() {\n        return this.data.itemData\n    },\n    e.prototype.checkCanRefresh = function() {\n        var t = g.ComDataMgr.getInstance();\n        if (Number(t.getCommonParam(g.CommonParamType.colloctionCanNext)) <= 0) return ! 1;\n        var e = t.getAllCollectionCfg();\n        if (this.data.index == e.length) {\n            if (Number(t.getCommonParam(g.CommonParamType.colloctionRepet)) <= 0) return ! 1;\n            this.data.index = 1\n        }\n        if (this.data.isGet) return ! 0;\n        if (this.data.process == this.data.itemData.length) return ! 1;\n        for (var o = [], a = 0; a < this.data.itemData.length; a++) {\n            var i = this.data.itemData[a]; (i.isGet || i.finished) && o.push(!0)\n        }\n        return o.length != this.data.itemData.length && (s.LogMgr.getInstance().debug(\"其他情况 可以清掉\"), !0)\n    },\n    e.prototype.nextData = function() {\n        var t = g.ComDataMgr.getInstance().getAllCollectionCfg();\n        this.data.index >= t.length && (this.data.index = 0);\n        var e = g.ComDataMgr.getInstance().getCollectionCfgById(this.data.index + 1).itemId.split(u.GameConfig.splitNum);\n        this.data.itemData.splice(0, this.data.itemData.length);\n        for (var o = 0; o < e.length; o++) {\n            var a = Number(e[o]),\n            i = new d;\n            i.id = o,\n            i.itemId = a,\n            i.isGet = !1,\n            i.num = 0;\n            var r = g.ComDataMgr.getInstance().getCollectionItemById(a);\n            i.goodId = r.goodId,\n            i.finished = !1,\n            this.data.itemData.push(i)\n        }\n        var n = Number(g.ComDataMgr.getInstance().getCommonParam(g.CommonParamType.colloctionTime));\n        this.data.endtime = n > 0 ? c.TimeUtils.GetTimeBySecond() + 60 * n: -1,\n        this.data.process = 0,\n        this.data.index += 1,\n        this.data.isGet = !1,\n        this.saveData(),\n        this.checkShowRed()\n    },\n    e.prototype.receiveTaskReward = function(t) {\n        if (this.data.isGet = !0, this.checkCanRefresh()) {\n            if (this.data.endtime > 1) if (this.data.endtime - c.TimeUtils.GetTimeBySecond() <= 0) this.nextData(),\n            t && t(!0);\n            else {\n                var e = this.data.endtime - c.TimeUtils.GetTimeBySecond();\n                l.UIUtils.unSchedule(this.nextData, this),\n                l.UIUtils.scheduleOnce(this.nextData, this, e),\n                t && t(!1)\n            }\n        } else t && t(!1);\n        this.checkShowRed(),\n        this.saveData()\n    },\n    e.prototype.checkFinshed = function() {\n        if (this.data.isGet) return ! 0;\n        for (var t = [], e = 0; e < this.data.itemData.length; e++) {\n            var o = this.data.itemData[e];\n            if (o.isGet || o.finished) t.push(!0);\n            else {\n                var a = g.ComDataMgr.getInstance().getCollectionItemById(o.itemId);\n                a && o.num >= a.needNum && (t.push(!0), o.finished = !0)\n            }\n        }\n        return t.length >= this.data.itemData.length\n    },\n    e.prototype.checkShowRed = function() {\n        for (var t = !1,\n        e = 0; e < this.data.itemData.length; e++) {\n            var o = this.data.itemData[e]; ! o.isGet && o.finished && (t = !0)\n        }\n        t || this.data.isGet || this.data.process != this.data.itemData.length || (t = !0),\n        t ? this.showRed || (this.showRed = !0, n.EventMgr.getInstance().emit(p.CommonEventName.RefreshCollectionRed, !0)) : this.showRed && (this.showRed = !1, n.EventMgr.getInstance().emit(p.CommonEventName.RefreshCollectionRed, !1))\n    },\n    e.prototype.addAdTips = function(t) {\n        var e = this.getCollectionData(t);\n        e.adTip && (e.isTips = !0, this.saveData())\n    },\n    e.prototype.addData = function(t, e, o) {\n        void 0 === o && (o = !0);\n        for (var a = [], i = 0; i < this.data.itemData.length; i++) {\n            var r = this.data.itemData[i];\n            if (r.goodId == t) {\n                r.num += e;\n                var s = g.ComDataMgr.getInstance().getCollectionItemById(r.itemId);\n                s && r.num >= s.needNum && (r.finished = !0),\n                a.push(r.id)\n            }\n        }\n        a.length > 0 && (this.saveData(), o && n.EventMgr.getInstance().emit(p.CommonEventName.RefreshCollection, a)),\n        this.checkShowRed()\n    },\n    e.prototype.getProcess = function() {\n        return this.data.process\n    },\n    e.prototype.getEndtime = function() {\n        return this.data.endtime\n    },\n    e.prototype.finishData = function(t) {\n        var e = this.getCollectionData(t);\n        e && (e.finished = !0, e.isGet = !0, this.data.process += 1, this.saveData()),\n        this.checkShowRed()\n    },\n    e\n} (r.BaseData);\no.ComCollectionData = f"]}