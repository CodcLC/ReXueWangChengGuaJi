{"version":3,"sources":["assets\\scripts\\ComSignData.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","defineProperty","value","ComSignData","r","n","s","c","l","u","lastSignTime","firstLoginTime","firstLoginDayTime","p","apply","arguments","ecrypt","gameKey","GameConfig","AppCacheName","curentDay","redshowing","canSign","createData","data","TimeUtils","GetTimeBySecond","dayStart","alredyIdx","saveData","initData","overDay","getCurentDay","getAlredySign","checkIsSigned","length","checkReissue","checkCanSign","startSign","push","checkShowRed","checkTodyCanSign","compareIsToday","EventMgr","getInstance","emit","CommonEventName","RefreshSignRed","getCanSigned","BaseData"],"mappings":";;;;;;AAAA,IAAIA,CAAC,GAAGC,OAAR;AACA,IAAIC,CAAC,GAAGC,MAAR;AACA,IAAIC,CAAC,GAAGC,OAAR;;AACA,IAAIC,EAAJ;AAAA,IAAOC,CAAC,GAAG,UAAQ,SAAKC,SAAb,KAA2BF,EAAC,GAAG,WAASN,CAAT,EAAYE,CAAZ,EAAe;EACrD,OAAO,CAACI,EAAC,GAAGG,MAAM,CAACC,cAAP,IAAyB;IACjCC,SAAS,EAAE;EADsB,aAG1BC,KAH0B,IAIrC,UAASZ,CAAT,EAAYE,CAAZ,EAAe;IACXF,CAAC,CAACW,SAAF,GAAcT,CAAd;EACH,CANW,IAOZ,UAASF,CAAT,EAAYE,CAAZ,EAAe;IACX,KAAK,IAAIE,CAAT,IAAcF,CAAd;MAAiBO,MAAM,CAACI,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCb,CAArC,EAAwCE,CAAxC,MAA+CJ,CAAC,CAACI,CAAD,CAAD,GAAOF,CAAC,CAACE,CAAD,CAAvD;IAAjB;EACH,CATM,EASJJ,CATI,EASDE,CATC,CAAP;AAUH,CAXqC,EAYtC,UAASF,CAAT,EAAYE,CAAZ,EAAe;EACX,SAASE,CAAT,GAAa;IACT,KAAKY,WAAL,GAAmBhB,CAAnB;EACH;;EACDM,EAAC,CAACN,CAAD,EAAIE,CAAJ,CAAD,EACAF,CAAC,CAACa,SAAF,GAAc,SAASX,CAAT,GAAaO,MAAM,CAACQ,MAAP,CAAcf,CAAd,CAAb,IAAiCE,CAAC,CAACS,SAAF,GAAcX,CAAC,CAACW,SAAhB,EAA2B,IAAIT,CAAJ,EAA5D,CADd;AAEH,CAlBU,CAAX;;AAmBAK,MAAM,CAACS,cAAP,CAAsBd,CAAtB,EAAyB,YAAzB,EAAuC;EACnCe,KAAK,EAAE,CAAC;AAD2B,CAAvC,GAGAf,CAAC,CAACgB,WAAF,GAAgB,KAAK,CAHrB;;AAIA,IAAIC,CAAC,GAAGrB,CAAC,CAAC,UAAD,CAAT;AAAA,IACAsB,CAAC,GAAGtB,CAAC,CAAC,UAAD,CADL;AAAA,IAEAuB,CAAC,GAAGvB,CAAC,CAAC,WAAD,CAFL;AAAA,IAGAwB,CAAC,GAAGxB,CAAC,CAAC,QAAD,CAHL;AAAA,IAIAyB,CAAC,GAAGzB,CAAC,CAAC,WAAD,CAJL;AAAA,IAKA0B,CAAC,GAAG,SAAJA,CAAI,GAAW;EACX,KAAKC,YAAL,GAAoB,CAAC,CAArB,EACA,KAAKC,cAAL,GAAsB,CAAC,CADvB,EAEA,KAAKC,iBAAL,GAAyB,CAAC,CAF1B;AAGH,CATD;AAAA,IAUAC,CAAC,GAAG,UAAS9B,CAAT,EAAY;EACZ,SAASE,CAAT,GAAa;IACT,IAAIA,CAAC,GAAG,SAASF,CAAT,IAAcA,CAAC,CAAC+B,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAd,IAA0C,IAAlD;IACA,OAAO9B,CAAC,CAAC+B,MAAF,GAAW,CAAC,CAAZ,EACP/B,CAAC,CAACgC,OAAF,GAAYV,CAAC,CAACW,UAAF,CAAaC,YAAb,GAA4B,MADjC,EAEPlC,CAAC,CAACmC,SAAF,GAAc,CAFP,EAGPnC,CAAC,CAACoC,UAAF,GAAe,CAAC,CAHT,EAIPpC,CAAC,CAACqC,OAAF,GAAY,CAAC,CAJN,EAKPrC,CALA;EAMH;;EACD,OAAOK,CAAC,CAACL,CAAD,EAAIF,CAAJ,CAAD,EACPE,CAAC,CAACW,SAAF,CAAY2B,UAAZ,GAAyB,YAAW;IAChC,OAAO,KAAKC,IAAL,GAAY,IAAIf,CAAJ,EAAZ,EACP,KAAKe,IAAL,CAAUb,cAAV,GAA2BL,CAAC,CAACmB,SAAF,CAAYC,eAAZ,EADpB,EAEP,KAAKF,IAAL,CAAUZ,iBAAV,GAA8BN,CAAC,CAACmB,SAAF,CAAYE,QAAZ,EAFvB,EAGP,KAAKH,IAAL,CAAUI,SAAV,GAAsB,EAHf,EAIP,KAAKR,SAAL,GAAiB,CAJV,EAKP,KAAKS,QAAL,EALO,EAMP,KAAKL,IANL;EAOH,CATM,EAUPvC,CAAC,CAACW,SAAF,CAAYkC,QAAZ,GAAuB,UAAS/C,CAAT,EAAY;IAC/B,IAAI,CAACA,CAAL,EAAQ;MACJ,IAAIE,CAAC,GAAGqB,CAAC,CAACmB,SAAF,CAAYM,OAAZ,CAAoB,KAAKP,IAAL,CAAUZ,iBAA9B,CAAR;MACA3B,CAAC,IAAI,CAAL,KAAWA,CAAC,GAAG,CAAf,GACA,KAAKmC,SAAL,GAAiBnC,CAAC,GAAG,CADrB;IAEH;EACJ,CAhBM,EAiBPA,CAAC,CAACW,SAAF,CAAYoC,YAAZ,GAA2B,YAAW;IAClC,OAAO,KAAKZ,SAAZ;EACH,CAnBM,EAoBPnC,CAAC,CAACW,SAAF,CAAYqC,aAAZ,GAA4B,YAAW;IACnC,OAAO,KAAKT,IAAL,CAAUI,SAAjB;EACH,CAtBM,EAuBP3C,CAAC,CAACW,SAAF,CAAYsC,aAAZ,GAA4B,UAASnD,CAAT,EAAY;IACpC,KAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKuC,IAAL,CAAUI,SAAV,CAAoBO,MAAxC,EAAgDlD,CAAC,EAAjD;MAAqD,IAAIF,CAAC,IAAI,KAAKyC,IAAL,CAAUI,SAAV,CAAoB3C,CAApB,CAAT,EAAiC,OAAO,CAAE,CAAT;IAAtF;;IACA,OAAO,CAAE,CAAT;EACH,CA1BM,EA2BPA,CAAC,CAACW,SAAF,CAAYwC,YAAZ,GAA2B,UAASrD,CAAT,EAAY;IACnC,OAAOA,CAAC,GAAG,KAAKqC,SAAhB;EACH,CA7BM,EA8BPnC,CAAC,CAACW,SAAF,CAAYyC,YAAZ,GAA2B,UAAStD,CAAT,EAAY;IACnC,OAAOA,CAAC,IAAI,KAAKqC,SAAjB;EACH,CAhCM,EAiCPnC,CAAC,CAACW,SAAF,CAAY0C,SAAZ,GAAwB,UAASvD,CAAT,EAAY;IAChC,KAAKyC,IAAL,CAAUI,SAAV,CAAoBW,IAApB,CAAyBxD,CAAzB,GACA,KAAKyC,IAAL,CAAUd,YAAV,GAAyBJ,CAAC,CAACmB,SAAF,CAAYC,eAAZ,EADzB,EAEA,KAAKG,QAAL,EAFA,EAGA,KAAKW,YAAL,EAHA;EAIH,CAtCM,EAuCPvD,CAAC,CAACW,SAAF,CAAY6C,gBAAZ,GAA+B,YAAW;IACtC,IAAI,KAAKjB,IAAL,CAAUI,SAAV,CAAoBO,MAApB,IAA8B,CAAlC,EAAqC,OAAO,CAAE,CAAT;;IACrC,KAAK,IAAIpD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKqC,SAAzB,EAAoCrC,CAAC,EAArC;MAAyC,IAAI,CAAC,KAAKmD,aAAL,CAAmBnD,CAAnB,CAAL,EAA4B,OAAO,CAAE,CAAT;IAArE;;IACA,IAAI,KAAKyC,IAAL,CAAUd,YAAV,GAAyB,EAAzB,IAA+BJ,CAAC,CAACmB,SAAF,CAAYiB,cAAZ,CAA2B,KAAKlB,IAAL,CAAUd,YAArC,CAAnC,EAAuF;MACnF,KAAK3B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKyC,IAAL,CAAUI,SAAV,CAAoBO,MAApC,EAA4CpD,CAAC,EAA7C;QAAiD,IAAI,KAAKqC,SAAL,IAAkB,KAAKI,IAAL,CAAUI,SAAV,CAAoB7C,CAApB,CAAtB,EAA8C,OAAO,CAAE,CAAT;MAA/F;;MACA,OAAO,CAAE,CAAT;IACH;;IACD,OAAO,KAAKsD,YAAL,CAAkB,KAAKjB,SAAvB,CAAP;EACH,CA/CM,EAgDPnC,CAAC,CAACW,SAAF,CAAY4C,YAAZ,GAA2B,YAAW;IAClC,IAAIzD,CAAC,GAAG,KAAK0D,gBAAL,EAAR;IACA1D,CAAC,GAAG,KAAKsC,UAAL,KAAoB,KAAKA,UAAL,GAAkB,CAAC,CAAnB,EAAsBhB,CAAC,CAACsC,QAAF,CAAWC,WAAX,GAAyBC,IAAzB,CAA8BrC,CAAC,CAACsC,eAAF,CAAkBC,cAAhD,EAAgE,CAAC,CAAjE,CAA1C,CAAH,GAAoH,KAAK1B,UAAL,KAAoB,KAAKA,UAAL,GAAkB,CAAC,CAAnB,EAAsBhB,CAAC,CAACsC,QAAF,CAAWC,WAAX,GAAyBC,IAAzB,CAA8BrC,CAAC,CAACsC,eAAF,CAAkBC,cAAhD,EAAgE,CAAC,CAAjE,CAA1C,CAArH,EACA,KAAKzB,OAAL,GAAevC,CADf;EAEH,CApDM,EAqDPE,CAAC,CAACW,SAAF,CAAYoD,YAAZ,GAA2B,YAAW;IAClC,OAAO,KAAK1B,OAAZ;EACH,CAvDM,EAwDPrC,CAxDA;AAyDH,CAnEG,CAmEDmB,CAAC,CAAC6C,QAnED,CAVJ;;AA8EA9D,CAAC,CAACgB,WAAF,GAAgBU,CAAhB","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n});\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n}),\no.ComSignData = void 0;\nvar r = t(\"BaseData\"),\nn = t(\"EventMgr\"),\ns = t(\"TimeUtils\"),\nc = t(\"Config\"),\nl = t(\"CommonCfg\"),\nu = function() {\n    this.lastSignTime = -1,\n    this.firstLoginTime = -1,\n    this.firstLoginDayTime = -1\n},\np = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.ecrypt = !1,\n        e.gameKey = c.GameConfig.AppCacheName + \"sign\",\n        e.curentDay = 1,\n        e.redshowing = !1,\n        e.canSign = !1,\n        e\n    }\n    return i(e, t),\n    e.prototype.createData = function() {\n        return this.data = new u,\n        this.data.firstLoginTime = s.TimeUtils.GetTimeBySecond(),\n        this.data.firstLoginDayTime = s.TimeUtils.dayStart(),\n        this.data.alredyIdx = [],\n        this.curentDay = 1,\n        this.saveData(),\n        this.data\n    },\n    e.prototype.initData = function(t) {\n        if (!t) {\n            var e = s.TimeUtils.overDay(this.data.firstLoginDayTime);\n            e <= 0 && (e = 0),\n            this.curentDay = e + 1\n        }\n    },\n    e.prototype.getCurentDay = function() {\n        return this.curentDay\n    },\n    e.prototype.getAlredySign = function() {\n        return this.data.alredyIdx\n    },\n    e.prototype.checkIsSigned = function(t) {\n        for (var e = 0; e < this.data.alredyIdx.length; e++) if (t == this.data.alredyIdx[e]) return ! 0;\n        return ! 1\n    },\n    e.prototype.checkReissue = function(t) {\n        return t < this.curentDay\n    },\n    e.prototype.checkCanSign = function(t) {\n        return t == this.curentDay\n    },\n    e.prototype.startSign = function(t) {\n        this.data.alredyIdx.push(t),\n        this.data.lastSignTime = s.TimeUtils.GetTimeBySecond(),\n        this.saveData(),\n        this.checkShowRed()\n    },\n    e.prototype.checkTodyCanSign = function() {\n        if (this.data.alredyIdx.length >= 7) return ! 1;\n        for (var t = 1; t < this.curentDay; t++) if (!this.checkIsSigned(t)) return ! 0;\n        if (this.data.lastSignTime > 10 && s.TimeUtils.compareIsToday(this.data.lastSignTime)) {\n            for (t = 0; t < this.data.alredyIdx.length; t++) if (this.curentDay == this.data.alredyIdx[t]) return ! 1;\n            return ! 0\n        }\n        return this.checkCanSign(this.curentDay)\n    },\n    e.prototype.checkShowRed = function() {\n        var t = this.checkTodyCanSign();\n        t ? this.redshowing || (this.redshowing = !0, n.EventMgr.getInstance().emit(l.CommonEventName.RefreshSignRed, !0)) : this.redshowing && (this.redshowing = !1, n.EventMgr.getInstance().emit(l.CommonEventName.RefreshSignRed, !1)),\n        this.canSign = t\n    },\n    e.prototype.getCanSigned = function() {\n        return this.canSign\n    },\n    e\n} (r.BaseData);\no.ComSignData = p"]}