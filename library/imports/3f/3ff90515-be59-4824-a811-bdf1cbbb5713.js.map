{"version":3,"sources":["assets\\scripts\\UICollection.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","r","__decorate","arguments","length","n","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","u","p","g","d","cc","_decorator","h","ccclass","f","property","m","apply","btnClose","timeNode","itemLayout","spriteBar","processNum","giftNode","tipNode","tipText","rootAddClick","start","addEvent","CommonEventName","RefreshCollection","refreshItemData","collectionData","ComPlayerMgr","getInstance","getCollectionData","initBtnListener","initTimeData","initData","initBottomData","giftLayoutPos","getPosition","getEndtime","active","TimeUtils","GetTimeBySecond","getChildByName","getComponent","Label","string","refreData","SecondToHours","schedule","unscheduleAllCallbacks","macro","REPEAT_FOREVER","children","name","id","TweenMgr","stopTween","isGet","finished","playHeartAni","adTip","isTips","ComDataMgr","getCollectionItemById","itemId","num","needNum","getGoodsById","goodId","loadSpriteFrame","bundleName","rewardIcon","Sprite","spriteFrame","on","Node","EventType","TOUCH_END","clickItem","childrenCount","getProcess","getAllCollectionData","fillRange","data","targetOff","jumpAniForever","getCurrentReward","tween","to","position","Vec3","openUI","ComUIID","UIReward","setPosition","receiveTaskReward","comit","convertToWorldSpaceAR","Vec2","ZERO","checkOpenReward","finishData","popTips","tips","SdkMgr","playVideo","AdType","Collection","addAdTips","addData","getNum","parent","convertToNodeSpaceAR","scaleX","node","TOUCH_START","popRightTween","popLeftTween","scheduleOnce","popDis","opacity","closeUI","onClose"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n}),\nr = this && this.__decorate ||\nfunction(t, e, o, a) {\n    var i, r = arguments.length,\n    n = r < 3 ? e: null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);\n    else for (var s = t.length - 1; s >= 0; s--)(i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);\n    return r > 3 && n && Object.defineProperty(e, o, n),\n    n\n};\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n});\nvar n = t(\"BaseUI\"),\ns = t(\"SdkMgr\"),\nc = t(\"TweenMgr\"),\nl = t(\"TimeUtils\"),\nu = t(\"CommonCfg\"),\np = t(\"ComDataMgr\"),\ng = t(\"ComPlayerMgr\"),\nd = cc._decorator,\nh = d.ccclass,\nf = d.property,\nm = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.btnClose = null,\n        e.timeNode = null,\n        e.itemLayout = null,\n        e.spriteBar = null,\n        e.processNum = null,\n        e.giftNode = null,\n        e.tipNode = null,\n        e.tipText = null,\n        e.rootAddClick = !1,\n        e\n    }\n    return i(e, t),\n    e.prototype.start = function() {\n        this.addEvent(u.CommonEventName.RefreshCollection, this.refreshItemData),\n        this.collectionData = g.ComPlayerMgr.getInstance().getCollectionData(),\n        this.initBtnListener(),\n        this.initTimeData(),\n        this.initData(),\n        this.initBottomData(),\n        this.giftLayoutPos = this.giftNode.getPosition()\n    },\n    e.prototype.initTimeData = function() {\n        var t = this,\n        e = this.collectionData.getEndtime();\n        if ( - 1 == e) this.timeNode.active = !1;\n        else {\n            var o = e - l.TimeUtils.GetTimeBySecond(),\n            a = this.timeNode.getChildByName(\"timeLable\").getComponent(cc.Label);\n            o <= 0 ? (a.string = \"00:00:00\", this.collectionData.refreData()) : (a.string = l.TimeUtils.SecondToHours(o), a.schedule(function() {\n                var o = e - l.TimeUtils.GetTimeBySecond();\n                o > 0 ? a.string = l.TimeUtils.SecondToHours(o) : (a.unscheduleAllCallbacks(), a.string = \"00:00:00\", t.collectionData.refreData(), t.refreshItemData())\n            },\n            1, cc.macro.REPEAT_FOREVER))\n        }\n    },\n    e.prototype.initData = function(t) {\n        var e = this;\n        void 0 === t && (t = !0);\n        for (var o = function(o) {\n            var i = a.itemLayout.children[o],\n            r = a.collectionData.getCollectionData(o);\n            if (null == r) return i.getChildByName(\"empty\").active = !0,\n            \"continue\";\n            i.getChildByName(\"empty\").active = !1,\n            i.name = r.id + \"\";\n            var n = i.getChildByName(\"btnOk\");\n            c.TweenMgr.getInstance().stopTween(n);\n            var s = void 0;\n            r.isGet ? s = \"button/btn_finished\": r.finished && !r.isGet ? (s = \"button/btn_submit\", c.TweenMgr.getInstance().playHeartAni(n)) : r.adTip ? (s = \"button/btn_adtips\", r.isTips && (s = \"button/btn_tips\")) : s = \"button/btn_adget\";\n            var l = i.getChildByName(\"icon\"),\n            u = i.getChildByName(\"process\").getComponent(cc.Label),\n            g = p.ComDataMgr.getInstance().getCollectionItemById(r.itemId);\n            u.string = r.num + \"/\" + g.needNum;\n            var d = p.ComDataMgr.getInstance().getGoodsById(r.goodId);\n            a.loadSpriteFrame(d.bundleName, d.rewardIcon,\n            function(t) {\n                l.getComponent(cc.Sprite).spriteFrame = t\n            }),\n            a.loadSpriteFrame(\"comimgs\", s,\n            function(t) {\n                n.getComponent(cc.Sprite).spriteFrame = t\n            }),\n            t && n.on(cc.Node.EventType.TOUCH_END,\n            function() {\n                e.clickItem(r.id, i)\n            })\n        },\n        a = this, i = 0; i < this.itemLayout.childrenCount; i++) o(i)\n    },\n    e.prototype.initBottomData = function() {\n        var t = this,\n        e = this.collectionData.getProcess(),\n        o = this.collectionData.getAllCollectionData();\n        this.processNum.string = e + \"/\" + o.length,\n        this.spriteBar.fillRange = e / o.length,\n        this.collectionData.data.isGet ? this.giftNode.active = !1 : (this.giftNode.targetOff(cc.Node.EventType.TOUCH_END), c.TweenMgr.getInstance().stopTween(this.giftNode), this.spriteBar.fillRange >= 1 && (c.TweenMgr.getInstance().jumpAniForever(this.giftNode), this.giftNode.on(cc.Node.EventType.TOUCH_END,\n        function() {\n            c.TweenMgr.getInstance().stopTween(t.giftNode);\n            var e = t.collectionData.getCurrentReward();\n            e && cc.tween(t.giftNode).to(.8, {\n                position: new cc.Vec3(0, 400)\n            }).call(function() {\n                t.openUI(u.ComUIID.UIReward, e),\n                t.giftNode.setPosition(t.giftLayoutPos),\n                t.collectionData.receiveTaskReward(function(e) {\n                    e ? t.refreshItemData() : t.giftNode.active = !1\n                })\n            }).start()\n        })))\n    },\n    e.prototype.clickItem = function(t, e) {\n        var o = this,\n        a = this.collectionData.getCollectionData(t);\n        if (!a.isGet) {\n            var i = e.getChildByName(\"btnOk\"),\n            r = p.ComDataMgr.getInstance().getCollectionItemById(a.itemId);\n            if (a.finished) {\n                if (r && r.comit) {\n                    var n = e.convertToWorldSpaceAR(cc.Vec2.ZERO);\n                    g.ComPlayerMgr.getInstance().checkOpenReward(r.comit, n, !1)\n                }\n                return this.collectionData.finishData(t),\n                this.loadSpriteFrame(\"comimgs\", \"button/btn_finished\",\n                function(t) {\n                    i.getComponent(cc.Sprite).spriteFrame = t\n                }),\n                c.TweenMgr.getInstance().stopTween(i),\n                void this.initBottomData()\n            }\n            a.isTips && a.adTip ? this.popTips(e, t, r.tips) : s.SdkMgr.getInstance().playVideo(s.AdType.Collection,\n            function() {\n                a.adTip ? (o.collectionData.addAdTips(t), o.loadSpriteFrame(\"comimgs\", \"button/btn_tips\",\n                function(t) {\n                    i.getComponent(cc.Sprite).spriteFrame = t\n                }), o.popTips(e, t, r.tips)) : o.collectionData.addData(a.goodId, r.getNum, !0)\n            })\n        }\n    },\n    e.prototype.popTips = function(t, e, o) {\n        var a = this;\n        this.tipText.unscheduleAllCallbacks();\n        var i = t.convertToWorldSpaceAR(cc.Vec2.ZERO),\n        r = this.tipNode.parent.convertToNodeSpaceAR(i);\n        this.tipNode.setPosition(r);\n        var n = !0;\n        2 == e || 5 == e ? (n = !1, this.tipNode.scaleX = -1, this.tipText.node.scaleX = -.5) : (n = !0, this.tipNode.scaleX = 1, this.tipText.node.scaleX = .5),\n        this.tipText.string = o,\n        this.tipNode.active = !0;\n        var s = this.node.getChildByName(\"root\");\n        this.rootAddClick || (this.rootAddClick = !0, s.on(cc.Node.EventType.TOUCH_START,\n        function() {\n            a.tipNode.active = !1\n        })),\n        n ? this.popRightTween ? this.popRightTween.start() : (this.popRightTween = cc.tween(this.tipNode).to(.1, {\n            scaleX: .9\n        }).to(.05, {\n            scaleX: 1.1\n        }).to(.1, {\n            scaleX: 1\n        }), this.popRightTween.start()) : this.popLeftTween ? this.popLeftTween.start() : (this.popLeftTween = cc.tween(this.tipNode).to(.1, {\n            scaleX: -.9\n        }).to(.05, {\n            scaleX: -1.1\n        }).to(.1, {\n            scaleX: -1\n        }), this.popLeftTween.start()),\n        this.tipText.scheduleOnce(function() {\n            a.popDis = cc.tween(a.tipNode).to(.5, {\n                opacity: 122\n            }).call(function() {\n                a.tipNode.active = !1,\n                a.tipNode.opacity = 255\n            }).start()\n        },\n        2)\n    },\n    e.prototype.refreshItemData = function() {\n        this.initData(!1),\n        this.initBottomData(),\n        this.initTimeData()\n    },\n    e.prototype.initBtnListener = function() {\n        var t = this;\n        this.btnClose.on(cc.Node.EventType.TOUCH_END,\n        function() {\n            t.closeUI()\n        })\n    },\n    e.prototype.onClose = function() {\n        this.unscheduleAllCallbacks()\n    },\n    r([f(cc.Node)], e.prototype, \"btnClose\", void 0),\n    r([f(cc.Node)], e.prototype, \"timeNode\", void 0),\n    r([f(cc.Node)], e.prototype, \"itemLayout\", void 0),\n    r([f(cc.Sprite)], e.prototype, \"spriteBar\", void 0),\n    r([f(cc.Label)], e.prototype, \"processNum\", void 0),\n    r([f(cc.Node)], e.prototype, \"giftNode\", void 0),\n    r([f(cc.Node)], e.prototype, \"tipNode\", void 0),\n    r([f(cc.Label)], e.prototype, \"tipText\", void 0),\n    r([h], e)\n} (n.default);\no.default = m"]}