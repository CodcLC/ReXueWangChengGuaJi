{"version":3,"sources":["assets\\scripts\\PoolMgr.js"],"names":["t","require","e","module","o","exports","Object","defineProperty","value","PoolMgr","PoolNode","a","_isReady","_createCount","_warterMark","_node","_nodes","cc","NodePool","prototype","init","instantiate","put","getNode","size","get","freeNode","isValid","destroy","setWaterMark","destory","clear","i","poolMap","Map","getInstance","instance","creatrePool","has","r","set","clearPool"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n}),\no.PoolMgr = o.PoolNode = void 0;\nvar a = function() {\n    function t() {\n        this._isReady = !1,\n        this._createCount = 0,\n        this._warterMark = 50,\n        this._node = null,\n        this._nodes = new cc.NodePool\n    }\n    return t.prototype.init = function(t, e) {\n        this._node = t,\n        this._isReady = !0;\n        for (var o = 0; o < e; o++) {\n            var a = cc.instantiate(t);\n            this._createCount++,\n            this._nodes.put(a)\n        }\n    },\n    t.prototype.getNode = function() {\n        return this._nodes.size() > 0 ? this._nodes.get() : (this._createCount++, cc.instantiate(this._node))\n    },\n    t.prototype.freeNode = function(t) {\n        t && cc.isValid(t) ? this._warterMark < this._nodes.size() ? (this._createCount--, t.destroy()) : this._nodes.put(t) : this._createCount--\n    },\n    t.prototype.setWaterMark = function(t) {\n        this._warterMark = t\n    },\n    t.prototype.destory = function() {\n        this._createCount -= this._nodes.size();\n        for (var t = 0; t < this._nodes.size(); t++) {\n            var e = this._nodes.get(t);\n            e && e.destroy()\n        }\n        this._nodes.clear()\n    },\n    t\n} ();\no.PoolNode = a;\nvar i = function() {\n    function t() {\n        this.poolMap = new Map\n    }\n    return t.getInstance = function() {\n        return null == this.instance && (this.instance = new t),\n        this.instance\n    },\n    t.prototype.creatrePool = function(t, e, o) {\n        if (void 0 === o && (o = 1), this.poolMap.has(t)) {\n            var i = this.poolMap.get(t);\n            i.destory(),\n            i = null\n        }\n        var r = new a;\n        e && r.init(e, o),\n        this.poolMap.set(t, r)\n    },\n    t.prototype.getNode = function(t) {\n        return this.poolMap.has(t) ? this.poolMap.get(t).getNode() : null\n    },\n    t.prototype.freeNode = function(t, e) {\n        this.poolMap.has(t) ? this.poolMap.get(t).freeNode(e) : e.destroy()\n    },\n    t.prototype.clearPool = function(t) {\n        this.poolMap.has(t) && (this.poolMap.get(t).destory(), this.poolMap.delete(t))\n    },\n    t.instance = null,\n    t\n} ();\no.PoolMgr = i"]}