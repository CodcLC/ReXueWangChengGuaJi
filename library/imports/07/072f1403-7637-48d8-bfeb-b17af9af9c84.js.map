{"version":3,"sources":["assets\\scripts\\ComLottyData.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","defineProperty","value","ComLottyData","r","n","s","c","l","u","p","g","lottyNum","dontMustIds","lottyTickNum","d","apply","arguments","ecrypt","gameKey","GameConfig","AppCacheName","indexString","numString","getMapData","lottyIndexs","CacheUtils","getDataDecrypt","pwd","getData","Utils","jsonToMap","Map","lottyIdNumMap","initData","EventMgr","getInstance","on","CommonEventName","callRefreshTick","refreshTickNum","getLottyNum","data","addLottyNum","saveData","createData","ComDataMgr","getCommonParam","CommonParamType","defTickNum","getGirldIdIndex","has","Number","get","setGirldReward","set","saveMapData","addLottyIdOutNum","saveNumMapData","getLottyIdOutNum","getInDontMust","length","addInDontMust","push","getLottyTickNum","emit","RefreshTickNum","mapToJson","saveDataEncrypt","BaseData"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n});\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n}),\no.ComLottyData = void 0;\nvar r = t(\"BaseData\"),\nn = t(\"EventMgr\"),\ns = t(\"CacheUtils\"),\nc = t(\"Utils\"),\nl = t(\"Config\"),\nu = t(\"CommonCfg\"),\np = t(\"ComDataMgr\"),\ng = function() {\n    this.lottyNum = 0,\n    this.dontMustIds = [],\n    this.lottyTickNum = 0\n},\nd = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.ecrypt = !1,\n        e.gameKey = l.GameConfig.AppCacheName + \"lotty\",\n        e.indexString = \"mapIndex\",\n        e.numString = \"mapNum\",\n        e\n    }\n    return i(e, t),\n    e.prototype.getMapData = function() {\n        if (null == this.lottyIndexs) {\n            var t = null;\n            t = this.ecrypt ? s.CacheUtils.getDataDecrypt(this.gameKey + this.indexString, this.pwd) : s.CacheUtils.getData(this.gameKey + this.indexString),\n            this.lottyIndexs = t ? c.Utils.jsonToMap(t) : new Map\n        }\n        null == this.lottyIdNumMap && (t = null, t = this.ecrypt ? s.CacheUtils.getDataDecrypt(this.gameKey + this.numString, this.pwd) : s.CacheUtils.getData(this.gameKey + this.numString), this.lottyIdNumMap = t ? c.Utils.jsonToMap(t) : new Map)\n    },\n    e.prototype.initData = function() {\n        this.getMapData(),\n        n.EventMgr.getInstance().on(u.CommonEventName.callRefreshTick, this, this.refreshTickNum)\n    },\n    e.prototype.getLottyNum = function() {\n        return this.data.lottyNum\n    },\n    e.prototype.addLottyNum = function() {\n        this.data.lottyNum += 1,\n        this.saveData()\n    },\n    e.prototype.createData = function() {\n        this.data = new g,\n        this.data.lottyNum = 0,\n        this.data.dontMustIds = [];\n        var t = p.ComDataMgr.getInstance().getCommonParam(p.CommonParamType.defTickNum);\n        return this.data.lottyTickNum = t,\n        this.data\n    },\n    e.prototype.getGirldIdIndex = function(t) {\n        return this.lottyIndexs.has(t) ? Number(this.lottyIndexs.get(t)) : 0\n    },\n    e.prototype.setGirldReward = function(t, e) {\n        this.lottyIndexs.set(t, e),\n        this.saveMapData()\n    },\n    e.prototype.addLottyIdOutNum = function(t) {\n        var e = 1;\n        this.lottyIdNumMap.has(t) && (e = this.lottyIdNumMap.get(t) + 1),\n        this.lottyIdNumMap.set(t, e),\n        this.saveNumMapData()\n    },\n    e.prototype.getLottyIdOutNum = function(t) {\n        var e = 1;\n        return this.lottyIdNumMap.has(t) ? e = this.lottyIdNumMap.get(t) : this.lottyIdNumMap.set(t, e),\n        e\n    },\n    e.prototype.getInDontMust = function(t) {\n        for (var e = 0; e < this.data.dontMustIds.length; e++) if (this.data.dontMustIds[e] == t) return ! 0;\n        return ! 1\n    },\n    e.prototype.addInDontMust = function(t) {\n        this.data.dontMustIds.push(t),\n        this.saveData()\n    },\n    e.prototype.getLottyTickNum = function() {\n        return this.data.lottyTickNum\n    },\n    e.prototype.refreshTickNum = function(t, e) {\n        if (e) this.data.lottyTickNum += t;\n        else {\n            if (this.data.lottyTickNum < t) return ! 1;\n            this.data.lottyTickNum -= t\n        }\n        n.EventMgr.getInstance().emit(u.CommonEventName.RefreshTickNum, t, e),\n        this.saveData()\n    },\n    e.prototype.saveMapData = function() {\n        var t = c.Utils.mapToJson(this.lottyIndexs);\n        this.ecrypt ? s.CacheUtils.saveDataEncrypt(this.gameKey + this.indexString, t, this.pwd) : s.CacheUtils.saveData(this.gameKey + this.indexString, t)\n    },\n    e.prototype.saveNumMapData = function() {\n        var t = c.Utils.mapToJson(this.lottyIdNumMap);\n        this.ecrypt ? s.CacheUtils.saveDataEncrypt(this.gameKey + this.numString, t, this.pwd) : s.CacheUtils.saveData(this.gameKey + this.numString, t)\n    },\n    e\n} (r.BaseData);\no.ComLottyData = d"]}