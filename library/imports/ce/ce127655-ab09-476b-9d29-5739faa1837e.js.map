{"version":3,"sources":["assets\\scripts\\UIReward.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","r","__decorate","arguments","length","n","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","u","p","cc","_decorator","g","ccclass","d","property","h","apply","root","btnOk","num","icon","quanLight","muiltNode","item","addCollection","init","indexOf","CommonCfg","splitNum","rewardStr","split","splitCount","rewardId","Number","rewardNum","AudioMgr","getInstance","playEffect","ComAudioId","reward","start","on","Node","EventType","TOUCH_END","ComPlayerMgr","addReward","closeUI","active","ComDataMgr","getGoodsById","loadSpriteFrame","bundleName","rewardIcon","spriteFrame","rewardtype","string","name","instantiate","parent","getChildByName","getComponent","Sprite","Label","Animation","FINISHED","opacity","tween","by","angle","repeatForever","onClose","stopEffect"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n}),\nr = this && this.__decorate ||\nfunction(t, e, o, a) {\n    var i, r = arguments.length,\n    n = r < 3 ? e: null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);\n    else for (var s = t.length - 1; s >= 0; s--)(i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);\n    return r > 3 && n && Object.defineProperty(e, o, n),\n    n\n};\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n});\nvar n = t(\"BaseUI\"),\ns = t(\"AudioMgr\"),\nc = t(\"CommonCfg\"),\nl = t(\"ComDataMgr\"),\nu = t(\"ComPlayerMgr\"),\np = cc._decorator,\ng = p.ccclass,\nd = p.property,\nh = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.root = null,\n        e.btnOk = null,\n        e.num = null,\n        e.icon = null,\n        e.quanLight = null,\n        e.muiltNode = null,\n        e.item = null,\n        e.addCollection = !0,\n        e\n    }\n    return i(e, t),\n    e.prototype.init = function(t, e, o) {\n        if (void 0 === o && (o = !0), -1 != t.indexOf(c.CommonCfg.splitNum)) {\n            if (this.rewardStr = t, 1 == this.rewardStr.split(c.CommonCfg.splitCount).length) {\n                var a = this.rewardStr.split(c.CommonCfg.splitNum);\n                this.rewardId = Number(a[0]),\n                this.rewardNum = Number(a[1]),\n                this.rewardStr = null\n            }\n        } else this.rewardId = Number(t);\n        this.rewardNum = e,\n        this.addCollection = o,\n        s.AudioMgr.getInstance().playEffect(c.ComAudioId.reward)\n    },\n    e.prototype.start = function() {\n        var t = this;\n        if (this.btnOk.on(cc.Node.EventType.TOUCH_END,\n        function() {\n            var e = t.rewardStr;\n            null == e && (e = t.rewardId + c.CommonCfg.splitNum + t.rewardNum),\n            u.ComPlayerMgr.getInstance().addReward(e, 1, t.addCollection),\n            t.closeUI()\n        }), null == this.rewardStr) {\n            this.muiltNode.active = !1;\n            var e = l.ComDataMgr.getInstance().getGoodsById(this.rewardId);\n            this.loadSpriteFrame(e.bundleName, e.rewardIcon,\n            function(e) {\n                t.icon.spriteFrame = e\n            }),\n            1 == e.rewardtype ? this.num.string = \"+\" + this.rewardNum: this.num.string = e.name\n        } else {\n            this.muiltNode.active = !0;\n            for (var o = this.rewardStr.split(c.CommonCfg.splitCount), a = function(t) {\n                var e = cc.instantiate(i.item);\n                e.parent = i.muiltNode;\n                var a = o[t].split(c.CommonCfg.splitNum),\n                r = Number(a[0]),\n                n = Number(a[1]);\n                e.active = !0;\n                var s = e.getChildByName(\"icon\").getComponent(cc.Sprite),\n                u = e.getChildByName(\"num\").getComponent(cc.Label),\n                p = l.ComDataMgr.getInstance().getGoodsById(r);\n                i.loadSpriteFrame(p.bundleName, p.rewardIcon,\n                function(t) {\n                    s.spriteFrame = t\n                }),\n                1 == p.rewardtype ? u.string = \"+\" + n: u.string = p.name\n            },\n            i = this, r = 0; r < o.length; r++) a(r)\n        }\n        this.root.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,\n        function() {\n            t.quanLight.opacity = 225,\n            t.quanLight.active = !0,\n            cc.tween(t.quanLight).by(.2, {\n                angle: 10\n            }).repeatForever().start()\n        })\n    },\n    e.prototype.onClose = function() {\n        s.AudioMgr.getInstance().stopEffect()\n    },\n    r([d(cc.Node)], e.prototype, \"root\", void 0),\n    r([d(cc.Node)], e.prototype, \"btnOk\", void 0),\n    r([d(cc.Label)], e.prototype, \"num\", void 0),\n    r([d(cc.Sprite)], e.prototype, \"icon\", void 0),\n    r([d(cc.Node)], e.prototype, \"quanLight\", void 0),\n    r([d(cc.Node)], e.prototype, \"muiltNode\", void 0),\n    r([d(cc.Node)], e.prototype, \"item\", void 0),\n    r([g], e)\n} (n.default);\no.default = h"]}