{"version":3,"sources":["assets\\scripts\\NodeWearEquip.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","r","__decorate","arguments","length","n","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","u","p","g","d","cc","_decorator","h","ccclass","f","property","m","apply","LabStrengthenLv","uiView","UIID","UIEquip","curBagIndex","equipData","start","registerEvent","EventMgr","getInstance","on","EventName","RefreshStrengthenLv","strengthenEquip","registerBtnEvent","node","Node","EventType","TOUCH_END","Utils","posTransform","parent","getPosition","UIMgr","getUIRoot","PlayerMgr","getAbType","UIEquipInfoNew","UIEquipInfo","openUI","EnumEquipInfo","EnumStrengthen","initData","refreshStrengthenRedDot","id","type","IDCard","strengthenLv","refreshStrengthenLv","active","string","DataMgr","getEquipCfg","getTabelArr1","consume","strengthenMaxLv","Number","Math","floor","getEquipStrengthenCfg","geUserData","getGoldNum","getChildByName","getOwmedEquipForEquipType","starLevel","onDestroy","off","Label","Component"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n}),\nr = this && this.__decorate ||\nfunction(t, e, o, a) {\n    var i, r = arguments.length,\n    n = r < 3 ? e: null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);\n    else for (var s = t.length - 1; s >= 0; s--)(i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);\n    return r > 3 && n && Object.defineProperty(e, o, n),\n    n\n};\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n});\nvar n = t(\"EventMgr\"),\ns = t(\"UIMgr\"),\nc = t(\"Utils\"),\nl = t(\"Config\"),\nu = t(\"DataMgr\"),\np = t(\"EquipMgr\"),\ng = t(\"PlayerMgr\"),\nd = cc._decorator,\nh = d.ccclass,\nf = d.property,\nm = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.LabStrengthenLv = null,\n        e.uiView = l.UIID.UIEquip,\n        e.curBagIndex = 1,\n        e.equipData = null,\n        e\n    }\n    return i(e, t),\n    e.prototype.start = function() {},\n    e.prototype.registerEvent = function() {\n        n.EventMgr.getInstance().on(l.EventName.RefreshStrengthenLv, this, this.strengthenEquip)\n    },\n    e.prototype.registerBtnEvent = function() {\n        var t = this;\n        this.node.on(cc.Node.EventType.TOUCH_END,\n        function() {\n            var e = c.Utils.posTransform(t.node.parent, t.node.getPosition(), s.UIMgr.getInstance().getUIRoot(t.uiView)),\n            o = g.PlayerMgr.getInstance().getAbType(),\n            a = \"D\" == o || \"B\" == o ? l.UIID.UIEquipInfoNew: l.UIID.UIEquipInfo;\n            s.UIMgr.getInstance().openUI(a, -1, t.equipData, t.equipData, e, p.EnumEquipInfo.EnumStrengthen, t.curBagIndex)\n        })\n    },\n    e.prototype.initData = function(t, e, o) {\n        this.curBagIndex = t,\n        this.equipData = e,\n        this.uiView = o,\n        this.registerEvent(),\n        this.registerBtnEvent()\n    },\n    e.prototype.strengthenEquip = function(t) {\n        this.equipData && (this.refreshStrengthenRedDot(), t && t.id == this.equipData.id && t.type == this.equipData.type && t.IDCard == this.equipData.IDCard && (this.equipData.strengthenLv = t.strengthenLv, this.refreshStrengthenLv()))\n    },\n    e.prototype.refreshStrengthenLv = function() {\n        this.equipData.strengthenLv > 0 ? (this.LabStrengthenLv.node.active = !0, this.LabStrengthenLv.string = \"+\" + this.equipData.strengthenLv) : this.LabStrengthenLv.node.active = !1\n    },\n    e.prototype.refreshStrengthenRedDot = function() {\n        var t = 0,\n        e = g.PlayerMgr.getInstance().getAbType();\n        if (\"D\" == e || \"B\" == e) {\n            var o = u.DataMgr.getInstance().getEquipCfg(this.equipData.id),\n            a = c.Utils.getTabelArr1(o.consume),\n            i = this.equipData.strengthenLv;\n            i < o.strengthenMaxLv && (t = Number(a[Math.floor(i / 10)][1]))\n        } else t = u.DataMgr.getInstance().getEquipStrengthenCfg(this.equipData.id, this.equipData.strengthenLv).consume;\n        var r;\n        if (r = g.PlayerMgr.getInstance().geUserData().getGoldNum() >= t, this.node.getChildByName(\"SpRedDot\").active = r, !r && (\"D\" == e || \"B\" == e)) {\n            for (var n = !1,\n            s = p.default.getInstance().getOwmedEquipForEquipType(this.equipData.type), l = 0; l < s.length; l++) if (s[l].IDCard != this.equipData.IDCard && s[l].id == this.equipData.id && s[l].type == this.equipData.type && s[l].starLevel == this.equipData.starLevel) {\n                n = !0;\n                break\n            }\n            this.node.getChildByName(\"SpRedDot\").active = n\n        }\n    },\n    e.prototype.onDestroy = function() {\n        n.EventMgr.getInstance().off(l.EventName.RefreshStrengthenLv, this, this.strengthenEquip)\n    },\n    r([f(cc.Label)], e.prototype, \"LabStrengthenLv\", void 0),\n    r([h], e)\n} (cc.Component);\no.default = m"]}