{"version":3,"sources":["assets\\scripts\\ShareData.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","defineProperty","value","ShareData","r","n","s","c","l","u","p","path","dayShareNum","daylastShareTime","g","apply","arguments","gameKey","GameConfig","AppCacheName","timeTotalStop","needRecordVideo","recordTime","canShare","isStart","isPause","isStop","createData","data","initData","TimeUtils","compareIsToday","saveData","startRecord","LogMgr","getInstance","debug","SdkMgr","recordScreen","UIUtils","schedule","secondUpdate","playRecord","restartRecord","pauseRecord","stopRecord","unSchedule","getSharePath","getCanShare","getRecordTime","toShare","share","clearData","getTodayCanShare","checkStop","BaseData"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n});\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n}),\no.ShareData = void 0;\nvar r = t(\"BaseData\"),\nn = t(\"LogMgr\"),\ns = t(\"SdkMgr\"),\nc = t(\"TimeUtils\"),\nl = t(\"UIUtils\"),\nu = t(\"Config\"),\np = function() {\n    this.path = \"\",\n    this.dayShareNum = 0,\n    this.daylastShareTime = -1\n},\ng = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.gameKey = u.GameConfig.AppCacheName + \"shareData\",\n        e.timeTotalStop = 15,\n        e.needRecordVideo = !0,\n        e.recordTime = 0,\n        e.canShare = !1,\n        e.isStart = !1,\n        e.isPause = !1,\n        e.isStop = !1,\n        e\n    }\n    return i(e, t),\n    e.prototype.createData = function() {\n        return this.data = new p,\n        this.data\n    },\n    e.prototype.initData = function(t) {\n        t || -1 != this.data.daylastShareTime && (c.TimeUtils.compareIsToday(this.data.daylastShareTime) || (this.data.daylastShareTime = -1, this.data.dayShareNum = 0, this.saveData()))\n    },\n    e.prototype.startRecord = function() {\n        this.needRecordVideo && (n.LogMgr.getInstance().debug(\"开始录屏\"), this.isStart = !0, this.isPause = !1, s.SdkMgr.getInstance().recordScreen(), this.needRecordVideo = !1, this.canShare = !1, l.UIUtils.schedule(this.secondUpdate, this, 1), this.data.path = \"\", this.saveData())\n    },\n    e.prototype.playRecord = function() {\n        this.isStart ? this.isPause ? this.restartRecord() : this.pauseRecord() : this.startRecord()\n    },\n    e.prototype.pauseRecord = function() {\n        this.isStart && (s.SdkMgr.getInstance().pauseRecord(), this.isPause = !0, n.LogMgr.getInstance().debug(\"暂停录屏\"))\n    },\n    e.prototype.restartRecord = function() {\n        this.isPause && (this.isPause = !1, s.SdkMgr.getInstance().restartRecord(), n.LogMgr.getInstance().debug(\"重新录屏\"))\n    },\n    e.prototype.stopRecord = function(t, e) {\n        var o = this;\n        this.recordTime <= 0 || (n.LogMgr.getInstance().debug(\"停止录屏\"), l.UIUtils.unSchedule(this.secondUpdate, this), this.isStart = !1, this.isPause = !1, s.SdkMgr.getInstance().stopRecord(t,\n        function(t) {\n            o.data.path = t,\n            o.recordTime >= 15 && (o.canShare = !0),\n            o.isStop = !0,\n            o.recordTime = 0,\n            o.saveData(),\n            e && e()\n        }))\n    },\n    e.prototype.getSharePath = function() {\n        return this.data.path\n    },\n    e.prototype.getCanShare = function() {\n        return this.recordTime >= 15 || this.canShare\n    },\n    e.prototype.getRecordTime = function() {\n        return this.recordTime\n    },\n    e.prototype.toShare = function(t, e) {\n        var o = this;\n        s.SdkMgr.getInstance().share(this.data.path,\n        function() {\n            o.data.path = \"\",\n            t && o.data.dayShareNum++,\n            o.needRecordVideo = !0,\n            o.canShare = !1,\n            o.isStop = !1,\n            o.clearData(),\n            o.saveData(),\n            e && e()\n        })\n    },\n    e.prototype.getTodayCanShare = function() {\n        return ! 0\n    },\n    e.prototype.secondUpdate = function() {\n        this.isPause || (this.recordTime++, this.recordTime >= 290 && this.stopRecord(!1))\n    },\n    e.prototype.checkStop = function(t) {\n        return this.isStop ? (t && t(), !0) : (this.recordTime >= this.timeTotalStop || this.recordTime >= 290) && (this.stopRecord(!1, t), !0)\n    },\n    e.prototype.clearData = function() {\n        this.isStop = !1,\n        this.isStart = !1,\n        this.needRecordVideo = !0,\n        this.data.path = \"\",\n        this.recordTime = 0,\n        this.saveData()\n    },\n    e\n} (r.BaseData);\no.ShareData = g"]}