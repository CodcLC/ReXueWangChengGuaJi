{"version":3,"sources":["assets\\scripts\\NodeMainTask.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","r","__decorate","arguments","length","n","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","NodeMainTask","c","l","u","cc","_decorator","p","ccclass","g","property","d","apply","spFinished1","spFinished","labDec","start","registerEvent","initView","EventMgr","getInstance","on","EventName","RefreshMainTask","refreshTask","RefreshMainTaskDec","refreshTaskDec","RefreshMainTaskFinished","refreshTaskFinished","initTask","playAnim","PlayerMgr","getMainTaskData","DataMgr","getMission","getCurrentId","string","Desc1","TaskParameter","Desc2","getCurrentParameter","active","getCurrentState","carrayTaskForType","Type","node","destroy","update","onDestroy","off","type","Node","displayName","RichText","Component"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n}),\nr = this && this.__decorate ||\nfunction(t, e, o, a) {\n    var i, r = arguments.length,\n    n = r < 3 ? e: null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);\n    else for (var s = t.length - 1; s >= 0; s--)(i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);\n    return r > 3 && n && Object.defineProperty(e, o, n),\n    n\n};\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n}),\no.NodeMainTask = void 0;\nvar n = t(\"EventMgr\"),\ns = t(\"Config\"),\nc = t(\"DataMgr\"),\nl = t(\"PlayerMgr\"),\nu = cc._decorator,\np = u.ccclass,\ng = u.property,\nd = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.spFinished1 = null,\n        e.spFinished = null,\n        e.labDec = null,\n        e\n    }\n    return i(e, t),\n    e.prototype.start = function() {\n        this.registerEvent(),\n        this.initView()\n    },\n    e.prototype.registerEvent = function() {\n        n.EventMgr.getInstance().on(s.EventName.RefreshMainTask, this, this.refreshTask),\n        n.EventMgr.getInstance().on(s.EventName.RefreshMainTaskDec, this, this.refreshTaskDec),\n        n.EventMgr.getInstance().on(s.EventName.RefreshMainTaskFinished, this, this.refreshTaskFinished)\n    },\n    e.prototype.initView = function() {\n        this.initTask(),\n        this.playAnim()\n    },\n    e.prototype.playAnim = function() {},\n    e.prototype.initTask = function() {\n        var t = l.PlayerMgr.getInstance().getMainTaskData(),\n        e = c.DataMgr.getInstance().getMission(t.getCurrentId());\n        e ? (this.labDec.string = \"<outline color=#000000 width = 3><color=#ffffff>\" + e.Desc1 + e.TaskParameter + e.Desc2 + \"</c><color=#42FF61>  \" + t.getCurrentParameter() + \"/\" + e.TaskParameter + \"</color></outline>\", this.spFinished.active = t.getCurrentState(), t.getCurrentState() || t.carrayTaskForType(t.getCurrentId(), e.Type)) : this.node.destroy()\n    },\n    e.prototype.refreshTask = function(t) {\n        void 0 === t && (t = !1),\n        this.refreshTaskFinished(t),\n        this.refreshTaskDec()\n    },\n    e.prototype.refreshTaskFinished = function(t) {\n        this.spFinished.active = t\n    },\n    e.prototype.refreshTaskDec = function() {\n        var t = l.PlayerMgr.getInstance().getMainTaskData(),\n        e = c.DataMgr.getInstance().getMission(t.getCurrentId());\n        e ? this.labDec.string = \"<outline color=#000000 width = 3><color=#ffffff>\" + e.Desc1 + e.TaskParameter + e.Desc2 + \"</c><color=#42FF61>  \" + t.getCurrentParameter() + \"/\" + e.TaskParameter + \"</color></outline>\": this.node.destroy()\n    },\n    e.prototype.update = function() {},\n    e.prototype.onDestroy = function() {\n        n.EventMgr.getInstance().off(s.EventName.RefreshMainTask, this, this.refreshTask),\n        n.EventMgr.getInstance().off(s.EventName.RefreshMainTaskDec, this, this.refreshTaskDec),\n        n.EventMgr.getInstance().off(s.EventName.RefreshMainTaskFinished, this, this.refreshTaskFinished)\n    },\n    r([g({\n        type: cc.Node,\n        displayName: \"\"\n    })], e.prototype, \"spFinished1\", void 0),\n    r([g({\n        type: cc.Node,\n        displayName: \"\"\n    })], e.prototype, \"spFinished\", void 0),\n    r([g({\n        type: cc.RichText,\n        displayName: \"\"\n    })], e.prototype, \"labDec\", void 0),\n    r([p(\"NodeMainTask\")], e)\n} (cc.Component);\no.NodeMainTask = d"]}