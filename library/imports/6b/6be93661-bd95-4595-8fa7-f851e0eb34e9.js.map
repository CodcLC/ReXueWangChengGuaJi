{"version":3,"sources":["assets\\scripts\\CardMgr.js"],"names":["t","require","e","module","o","exports","a","__decorate","i","r","arguments","length","n","Object","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","u","p","cc","_decorator","g","ccclass","d","property","verifykey","verifyWCNkey","isWcn","getInstance","instance","prototype","isVerify","CacheUtils","getData","isWCN","toGame","getBirthday","getIsEnjoyTime","sceduleEndGame","UIMgr","openUI","UIID","UITips","EventMgr","emit","vifyCardId","Utils","isCardID","HttpMgr","httpPost","ai","Date","getTime","cardId","name","JSON","parse","code","data","status","saveData","checkAdult","UIExit","holiday","type","week","getHours","getMinutes","UIUtils","scheduleOnce"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a = this && this.__decorate ||\nfunction(t, e, o, a) {\n    var i, r = arguments.length,\n    n = r < 3 ? e: null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);\n    else for (var s = t.length - 1; s >= 0; s--)(i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);\n    return r > 3 && n && Object.defineProperty(e, o, n),\n    n\n};\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n});\nvar i = t(\"EventMgr\"),\nr = t(\"HttpMgr\"),\nn = t(\"UIMgr\"),\ns = t(\"CacheUtils\"),\nc = t(\"UIUtils\"),\nl = t(\"Utils\"),\nu = t(\"Config\"),\np = cc._decorator,\ng = p.ccclass,\nd = (p.property,\nfunction() {\n    function t() {\n        this.verifykey = \"realName_sf\",\n        this.verifyWCNkey = \"realName_sf_wcn\",\n        this.isWcn = !1\n    }\n    var e;\n    return e = t,\n    t.getInstance = function() {\n        return null == this.instance && (this.instance = new e),\n        this.instance\n    },\n    t.prototype.isVerify = function() {\n        return !! s.CacheUtils.getData(this.verifykey)\n    },\n    t.prototype.isWCN = function() {\n        var t = s.CacheUtils.getData(this.verifyWCNkey);\n        return ! (!t || \"1\" != t)\n    },\n    t.prototype.toGame = function(t) {\n        var e = this;\n        this.isWCN() ? this.getBirthday(function(o) {\n            o ? e.getIsEnjoyTime() ? (t && t(), e.sceduleEndGame(), n.UIMgr.getInstance().openUI(u.UIID.UITips, -1, \"未成年只能在晚上8-9点玩一个小时\")) : i.EventMgr.getInstance().emit(\"WCNGameEnd\", \"未成年只能在晚上8-9点玩一个小时\") : i.EventMgr.getInstance().emit(\"WCNGameEnd\", \"未成年只有周五，周六，周日和节假日才能玩\")\n        }) : t && t()\n    },\n    t.prototype.vifyCardId = function(t, e, o) {\n        var a = this;\n        if (null == t || t.length <= 0 || null == e || e.length <= 0) n.UIMgr.getInstance().openUI(u.UIID.UITips, -1, \"不能为空\");\n        else {\n            var i = l.Utils.isCardID(e);\n            if (0 == i) r.HttpMgr.getInstance().httpPost({\n                ai: new Date().getTime() + \"\",\n                cardId: e,\n                name: t\n            },\n            function(t) {\n                var i = JSON.parse(t);\n                if (200 == i.code && 0 == i.data.status) s.CacheUtils.saveData(a.verifykey, \"1\"),\n                l.Utils.checkAdult(e) ? (o && o(!0), s.CacheUtils.saveData(a.verifyWCNkey, \"0\")) : (s.CacheUtils.saveData(a.verifyWCNkey, \"1\"), a.isWcn = !0, a.getBirthday(function(t) {\n                    t ? a.getIsEnjoyTime() ? (o(!0), a.sceduleEndGame(), n.UIMgr.getInstance().openUI(u.UIID.UIExit, -1)) : n.UIMgr.getInstance().openUI(u.UIID.UIExit, -1) : o && n.UIMgr.getInstance().openUI(u.UIID.UIExit, -1)\n                }));\n                else {\n                    var r = \"校验失败\";\n                    1001 == i.code ? r = \"系统错误\": 1002 == i.code ? r = \"接口请求的资源不存在\": 1003 == i.code ? r = \"接口请求方式错误\": 1004 == i.code ? r = \"接口请求核心参数缺失\": 1005 == i.code ? r = \"接口请求IP地址非法\": 1006 == i.code ? r = \"接口请求超出流量限制\": 1007 == i.code ? r = \"接口请求过期\": 1008 == i.code ? r = \"接口请求方身份非法\": 1009 == i.code ? r = \"接口请求方权限未启用\": 1010 == i.code ? r = \"接口请求方无该接口权限\": 1011 == i.code ? r = \"接口请求方身份核验错误\": 1012 == i.code ? r = \"接口请求报文核验失败\": 2001 == i.code ? r = \"身份证号格式校验失败\": 2002 == i.code ? r = \"实名认证条目已达上限\": 2003 == i.code ? r = \"无该编码提交的实名认证记录\": 2004 == i.code ? r = \"编码已经被占用\": 2005 == i.code && (r = \"姓名校验失败\"),\n                    2 == i.data.status && (r = \"姓名校验失败\"),\n                    n.UIMgr.getInstance().openUI(u.UIID.UITips, -1, r)\n                }\n            },\n            \"https://yuema.sfplay.net:8002/rncheck\");\n            else {\n                var c = \"校验失败\"; - 1 == i ? c = \"身份证长度或格式错误\": -2 == i ? c = \"身份证地区非法\": -3 == i ? c = \"身份证上的出生日期非法\": -4 == i && (c = \"身份证号非法\"),\n                n.UIMgr.getInstance().openUI(u.UIID.UITips, -1, c)\n            }\n        }\n    },\n    t.prototype.getBirthday = function(t) {\n        r.HttpMgr.getInstance().httpPost(null,\n        function(e) {\n            var o = JSON.parse(e);\n            null == o.holiday && 5 != o.type.week && 6 != o.type.week && 1 != o.type.week ? t && t(!1) : t && t(!0)\n        },\n        \"https://yuema.sfplay.net:8002/isholiday\")\n    },\n    t.prototype.getIsEnjoyTime = function() {\n        var t = new Date().getHours();\n        return ! (t > 20 || t < 21)\n    },\n    t.prototype.sceduleEndGame = function() {\n        var t = 1e3 * (60 - new Date().getMinutes());\n        c.UIUtils.scheduleOnce(function() {\n            i.EventMgr.getInstance().emit(\"WCNGameEnd\", \"由于您是未成年只能玩一个小时\")\n        },\n        this, t)\n    },\n    e = a([g], t)\n} ());\no.default = d"]}