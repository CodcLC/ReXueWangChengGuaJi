{"version":3,"sources":["assets\\scripts\\NodeEquipComposite.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","r","__decorate","arguments","length","n","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","u","p","cc","_decorator","g","ccclass","d","property","apply","uiView","UIID","UIEquip","curBagIndex","equipData","start","registerBtnEvent","node","on","Node","EventType","TOUCH_END","getChildByName","active","starLevel","UIMgr","getInstance","openUI","UITips","EventMgr","emit","EventName","PlaceCompositeEquip","initData","equipHCForRedDot","refresData","PlayerMgr","getAbType","getOwmedEquipForEquipType","type","IDCard","id","Component"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n}),\nr = this && this.__decorate ||\nfunction(t, e, o, a) {\n    var i, r = arguments.length,\n    n = r < 3 ? e: null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);\n    else for (var s = t.length - 1; s >= 0; s--)(i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);\n    return r > 3 && n && Object.defineProperty(e, o, n),\n    n\n};\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n});\nvar n = t(\"EventMgr\"),\ns = t(\"UIMgr\"),\nc = t(\"Config\"),\nl = t(\"EquipMgr\"),\nu = t(\"PlayerMgr\"),\np = cc._decorator,\ng = p.ccclass,\nd = (p.property,\nfunction(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.uiView = c.UIID.UIEquip,\n        e.curBagIndex = 1,\n        e.equipData = null,\n        e\n    }\n    return i(e, t),\n    e.prototype.start = function() {},\n    e.prototype.registerBtnEvent = function() {\n        var t = this;\n        this.node.on(cc.Node.EventType.TOUCH_END,\n        function() {\n            t.node.getChildByName(\"SpMask\").active || (t.equipData.starLevel >= 5 ? s.UIMgr.getInstance().openUI(c.UIID.UITips, -1, \"该装备已达到最大星级\") : n.EventMgr.getInstance().emit(c.EventName.PlaceCompositeEquip, t.curBagIndex, t.equipData))\n        })\n    },\n    e.prototype.initData = function(t, e, o) {\n        this.curBagIndex = t,\n        this.equipData = e,\n        this.uiView = o,\n        this.registerBtnEvent(),\n        this.equipHCForRedDot()\n    },\n    e.prototype.refresData = function(t, e) {\n        this.curBagIndex = t,\n        this.equipData = e\n    },\n    e.prototype.equipHCForRedDot = function() {\n        var t = u.PlayerMgr.getInstance().getAbType();\n        if (\"D\" == t || \"B\" == t) {\n            for (var e = !1,\n            o = l.default.getInstance().getOwmedEquipForEquipType(this.equipData.type), a = 0; a < o.length; a++) if (o[a].IDCard != this.equipData.IDCard && o[a].id == this.equipData.id && o[a].type == this.equipData.type && o[a].starLevel == this.equipData.starLevel) {\n                e = !0;\n                break\n            }\n            this.node.getChildByName(\"SpRedDot\").active = e\n        }\n    },\n    r([g], e)\n} (cc.Component));\no.default = d"]}