{"version":3,"sources":["assets\\scripts\\NodeUISkillBook.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","r","__decorate","arguments","length","n","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","u","p","g","d","h","cc","_decorator","f","ccclass","m","property","y","apply","SpBar","SpUp","LabLv","LabBar","SpBarBg","SpSkillBook","LabSkilllName","SpFetter1","SpFetter2","LabFetter1","LabFetter2","curWindow","skillBookId","onLoad","start","TweenMgr","getInstance","animUpLv","registerEvent","EventMgr","on","EventName","RefreshUISkillBookShow","refreshSkillBookShow","registerBtnEvent","node","Node","EventType","TOUCH_END","PlayerMgr","getTrackData","youmengTrack","TrackId","guide13","Utils","posTransform","parent","getPosition","UIMgr","getUIRoot","UIID","UISkillBook","openUI","UISkillBookInfo","initData","playEnterAnim","refreshSkillBookLvInfo","geUserData","getSkillBookForId","DataMgr","getSkillBook","getSkillBookLevelCfg1","StartLevelID","level","fillRange","iCount","ConsumeSkillBookNum","active","string","MaxLevel","showAnim","isValid","tween","to","opacity","onDestroy","off","Sprite","Label","Component"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n}),\nr = this && this.__decorate ||\nfunction(t, e, o, a) {\n    var i, r = arguments.length,\n    n = r < 3 ? e: null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);\n    else for (var s = t.length - 1; s >= 0; s--)(i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);\n    return r > 3 && n && Object.defineProperty(e, o, n),\n    n\n};\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n});\nvar n = t(\"EventMgr\"),\ns = t(\"TweenMgr\"),\nc = t(\"UIMgr\"),\nl = t(\"Utils\"),\nu = t(\"Config\"),\np = t(\"TrackDataEvent\"),\ng = t(\"DataMgr\"),\nd = t(\"PlayerMgr\"),\nh = cc._decorator,\nf = h.ccclass,\nm = h.property,\ny = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.SpBar = null,\n        e.SpUp = null,\n        e.LabLv = null,\n        e.LabBar = null,\n        e.SpBarBg = null,\n        e.SpSkillBook = null,\n        e.LabSkilllName = null,\n        e.SpFetter1 = null,\n        e.SpFetter2 = null,\n        e.LabFetter1 = null,\n        e.LabFetter2 = null,\n        e.curWindow = null,\n        e.skillBookId = 1,\n        e\n    }\n    return i(e, t),\n    e.prototype.onLoad = function() {},\n    e.prototype.start = function() {\n        s.TweenMgr.getInstance().animUpLv(this.SpUp)\n    },\n    e.prototype.registerEvent = function() {\n        n.EventMgr.getInstance().on(u.EventName.RefreshUISkillBookShow, this, this.refreshSkillBookShow)\n    },\n    e.prototype.registerBtnEvent = function() {\n        var t = this;\n        this.node.on(cc.Node.EventType.TOUCH_END,\n        function() {\n            d.PlayerMgr.getInstance().getTrackData().youmengTrack(p.TrackId.guide13);\n            var e = l.Utils.posTransform(t.node.parent, t.node.getPosition(), c.UIMgr.getInstance().getUIRoot(u.UIID.UISkillBook));\n            c.UIMgr.getInstance().openUI(u.UIID.UISkillBookInfo, -1, t.skillBookId, e, t.curWindow)\n        })\n    },\n    e.prototype.initData = function(t, e) {\n        this.skillBookId = t,\n        this.curWindow = e,\n        this.registerEvent(),\n        this.registerBtnEvent(),\n        this.playEnterAnim()\n    },\n    e.prototype.refreshSkillBookShow = function(t) {\n        this.skillBookId === t && this.refreshSkillBookLvInfo()\n    },\n    e.prototype.refreshSkillBookLvInfo = function() {\n        var t = d.PlayerMgr.getInstance().geUserData().getSkillBookForId(this.skillBookId),\n        e = g.DataMgr.getInstance().getSkillBook(this.skillBookId),\n        o = g.DataMgr.getInstance().getSkillBookLevelCfg1(e.StartLevelID, t.level);\n        this.SpBar.fillRange = t.iCount / o.ConsumeSkillBookNum,\n        this.SpUp.active = t.iCount >= o.ConsumeSkillBookNum,\n        this.LabLv.string = \"Lv.\" + t.level,\n        t.level >= e.MaxLevel ? this.LabBar.string = \"MAX\": this.LabBar.string = t.iCount + \"/\" + o.ConsumeSkillBookNum\n    },\n    e.prototype.playEnterAnim = function() {},\n    e.prototype.showAnim = function(t, e) {\n        void 0 === e && (e = function() {}),\n        cc.isValid(t) && cc.tween(t).to(.1, {\n            opacity: 255\n        }).call(function() {\n            e && e()\n        }).start()\n    },\n    e.prototype.onDestroy = function() {\n        n.EventMgr.getInstance().off(u.EventName.RefreshUISkillBookShow, this, this.refreshSkillBookShow)\n    },\n    r([m(cc.Sprite)], e.prototype, \"SpBar\", void 0),\n    r([m(cc.Node)], e.prototype, \"SpUp\", void 0),\n    r([m(cc.Label)], e.prototype, \"LabLv\", void 0),\n    r([m(cc.Label)], e.prototype, \"LabBar\", void 0),\n    r([m(cc.Node)], e.prototype, \"SpBarBg\", void 0),\n    r([m(cc.Node)], e.prototype, \"SpSkillBook\", void 0),\n    r([m(cc.Node)], e.prototype, \"LabSkilllName\", void 0),\n    r([m(cc.Node)], e.prototype, \"SpFetter1\", void 0),\n    r([m(cc.Node)], e.prototype, \"SpFetter2\", void 0),\n    r([m(cc.Node)], e.prototype, \"LabFetter1\", void 0),\n    r([m(cc.Node)], e.prototype, \"LabFetter2\", void 0),\n    r([f], e)\n} (cc.Component);\no.default = y"]}