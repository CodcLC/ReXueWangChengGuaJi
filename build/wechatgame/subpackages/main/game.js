window.__require=function t(e,o,i){function a(r,s){if(!o[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return a(e[r][1][t]||t)},u,u.exports,t,e,o,i)}return o[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<i.length;r++)a(i[r]);return a}({AndroidManager:[function(t,e,o){"use strict";cc._RF.push(e,"40133XcA2tDz76REDE3IcGD","AndroidManager");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.AndroidManager=void 0;var n=i("PlatformManager"),r=function(){function t(){this.infostr=[],this.nativeCode="xx2"}return t.prototype.showBlockAd=function(){},t.prototype.hideBlockAd=function(){},t.prototype.canShare=function(){return!1},t.prototype.pauseRecord=function(){},t.prototype.resumeRecord=function(){},t.prototype.toAppStore=function(){},t.prototype.openNotify=function(){},t.prototype.shareImg=function(){},t.prototype.showWxNativeAD=function(t){5==t&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SdkManager","showAllAd","()V")},t.prototype.hideWxNativeAD=function(){},t.prototype.hasVerify=function(){return!1},t.prototype.youmengTrack=function(t,e,o){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SdkManager","onEventObject","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",t,e,o)},t.prototype.initSdk=function(){var t=n.AdConfig[n.PlatformManager.currentPlatform];t&&JSON.stringify(t)},t.prototype.verifyKey=function(){},t.prototype.getCode=function(t){return t&&t(this.nativeCode),this.nativeCode},t.prototype.login=function(t,e){e&&e()},t.prototype.pay=function(t,e){e&&e()},t.prototype.share=function(t,e){e&&e()},t.prototype.showBanner=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SdkManager","showBanner","()V")},t.prototype.hideBanner=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SdkManager","hideBanner","()V")},t.prototype.showInsertAd=function(t){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SdkManager","showInsertAd","(Ljava/lang/String;)V",t)},t.prototype.showVideoAd=function(t,e,o){this.callback=e,this.errorcallback=o,jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SdkManager","showVideoAd","(Ljava/lang/String;Ljava/lang/String;)V","window.AndroidManager.videoCallback",t)},t.prototype.videoCallback=function(t){console.log("----statu-----",t),1==t?this.callback():this.errorcallback()},t.prototype.otherFun=function(t,e){e&&e()},t.prototype.shark=function(t,e){e&&e()},t.prototype.recordVideo=function(t,e){e&&e()},t.prototype.shareVideo=function(t,e){e&&e()},t.prototype.stopRecorderManager=function(t,e){e&&e()},t.prototype.setLanguage=function(t,e){return e&&e(),"zh"},t}();a.AndroidManager=r,cc._RF.pop()},{}],Appcfg:[function(t,e,o){"use strict";cc._RF.push(e,"46718hiYJ9I55/9A6LpFoqh","Appcfg");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.BaseEventName=i.ObjectWeightValue=i.ObjectValue=i.WeightObject=i.LoadingProcess=i.OrderLayer=i.LanguageType=void 0,function(t){t.zh="zh",t.zh_tw="fz",t.en="en",t.jp="jp"}(i.LanguageType||(i.LanguageType={})),function(t){t[t.main0=-1]="main0",t[t.main=0]="main",t[t.main1=10]="main1",t[t.special=50]="special",t[t.pop=100]="pop",t[t.top=200]="top",t[t.pop2=300]="pop2",t[t.tip=400]="tip",t[t.guide=900]="guide",t[t.touch=1e3]="touch",t[t.Log=2e3]="Log"}(i.OrderLayer||(i.OrderLayer={})),function(t){t[t.StartLoading=5]="StartLoading",t[t.ExcelCfg=10]="ExcelCfg",t[t.PlayerCfg=20]="PlayerCfg",t[t.ResCfg=40]="ResCfg",t[t.AudioCfg=60]="AudioCfg",t[t.OtherCfg=80]="OtherCfg",t[t.EndLoading=100]="EndLoading"}(i.LoadingProcess||(i.LoadingProcess={})),i.WeightObject=function(){},i.ObjectValue=function(){},i.ObjectWeightValue=function(){},function(t){t.Loading="Loading",t.OpenUI="openUi",t.CloseUI="CloseUI",t.ShowTopUI="ShowTopUI",t.blocktouch="blocktouch",t.GoGame="GoGame"}(i.BaseEventName||(i.BaseEventName={})),cc._RF.pop()},{}],ArgsParseUtils:[function(t,e,o){"use strict";cc._RF.push(e,"14743rQ6f9BObX51QcWz3Un","ArgsParseUtils");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.ArgsParseUtils=void 0;var a=function(){function t(){}return t._makeLoadResArgs=function(){if(arguments.length<1||"string"!=typeof arguments[0])return console.error("_makeLoadResArgs error "+arguments),null;for(var t={bundle:arguments[0],path:arguments[1],type:arguments[2],callback:arguments[3],autoRelese:!1,cacheTme:10,saveKey:null},e=4;e<arguments.length;++e)4==e&&"boolean"==typeof arguments[e]&&(t.autoRelese=arguments[e]),5==e&&"number"==typeof arguments[e]?t.cacheTme=arguments[e]:e==arguments.length-1&&"string"==typeof arguments[e]&&(t.saveKey=arguments[e]);return t},t._makeloadSpriteFrameResrgs=function(){if(arguments.length<1||"string"!=typeof arguments[0])return console.error("_makeloadSpriteFrameResrgs error "+arguments),null;for(var t={bundle:arguments[0],path:arguments[1],callback:arguments[2],autoRelese:!1,cacheTme:10,saveKey:null},e=3;e<arguments.length;++e)3==e&&"boolean"==typeof arguments[e]&&(t.autoRelese=arguments[e]),4==e&&"number"==typeof arguments[e]?t.cacheTme=arguments[e]:e==arguments.length-1&&"string"==typeof arguments[e]&&(t.saveKey=arguments[e]);return t},t}();i.ArgsParseUtils=a,cc._RF.pop()},{}],AudioMgr:[function(t,e,o){"use strict";cc._RF.push(e,"01e28yg0bJGMoJ+TmUHgvk/","AudioMgr");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.AudioMgr=void 0;var s=a("Config"),c=a("BaseMgr"),l=a("CacheUtils"),u=a("LogMgr"),p=a("ResourceMgr"),d=function(t){function e(){var e=t.call(this)||this;return e.audioSourceMap=new Map,e.audioClipMap=new Map,e.ADConf={},e.otherADConf=[],e.musicKeys=[],e}return r(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(t){this.ADConf=t,this.setButtonNomalAudio(s.AudioId.btnClick)},e.prototype.loadAudio=function(t,e){var o=this,i=this.getAdConf(t);i?p.ResourceMgr.getInstance().loadRes(i.bundle,i.path,cc.AudioClip,function(t){o.audioClipMap.set(i.path,t),e&&e()}):u.LogMgr.getInstance().error("\u97f3\u6548\u6ca1\u6709\u914d\u7f6e\uff1a",t)},e.prototype.addAdConf=function(t){this.otherADConf.push(t)},e.prototype.getAdConf=function(t){var e=this.ADConf[t];if(e)return e;for(var o=0;o<this.otherADConf.length;o++){var i=this.otherADConf[o][t];if(i)return i}return null},e.prototype.addMusicKey=function(t){for(var e=0;e<this.musicKeys.length;e++)if(this.musicKeys[e]==t)return!1;return this.musicKeys.push(t),!0},e.prototype.removeMusicKey=function(t){for(var e=0;e<this.musicKeys.length;e++)if(this.musicKeys[e]==t)return this.musicKeys.splice(e,1),!0;return!1},e.prototype.creatreAudioSource=function(t){var e=new cc.AudioSource;return this.audioSourceMap.has(t)&&this.audioSourceMap.get(t).destroy(),this.audioSourceMap.set(t,e),e},e.prototype.getAudioSource=function(t){return this.audioSourceMap.has(t)?this.audioSourceMap.get(t):this.creatreAudioSource(t)},e.prototype.playMusic=function(t,e,o,i){var a=this;if(void 0===o&&(o=!0),void 0===i&&(i=1),l.CacheUtils.canPlayMusin()){var n=this.getAudioSource(e);if(null==n)return void u.LogMgr.getInstance().error("audioSourceName\uff1a"+e+"\u4e0d\u5b58\u5728");n.stop();var r=this.getAdConf(t);if(null==r)return void u.LogMgr.getInstance().error("audio id:"+t+"\u4e0d\u5b58\u5728");if(o&&this.addMusicKey(e),this.audioClipMap.has(r.path)){var s=this.audioClipMap.get(r.path);n.clip=s,n.loop=o,n.volume=i,n.play()}else p.ResourceMgr.getInstance().loadRes(r.bundle,r.path,cc.AudioClip,function(t){n.clip=t,a.audioClipMap.set(r.path,t),n.loop=o,n.volume=i,n.play()})}},e.prototype.pauseMusic=function(t){if(l.CacheUtils.canPlayMusin()){var e=this.getAudioSource(t);if(null==e)return void u.LogMgr.getInstance().error("audioSourceName\uff1a"+t+"\u4e0d\u5b58\u5728");e.pause()}},e.prototype.resumeMusic=function(t){if(l.CacheUtils.canPlayMusin()){var e=this.getAudioSource(t);if(null==e)return void u.LogMgr.getInstance().error("audioSourceName\uff1a"+t+"\u4e0d\u5b58\u5728");e.resume()}},e.prototype.pauseAllMusic=function(){var t=this;this.musicKeys.forEach(function(e){t.pauseMusic(e)})},e.prototype.resumeAllMusic=function(){var t=this;this.musicKeys.forEach(function(e){t.resumeMusic(e)})},e.prototype.stopMusic=function(t){var e=this.getAudioSource(t);null!=e?(this.removeMusicKey(t),e.stop()):u.LogMgr.getInstance().error("audioSourceName\uff1a"+t+"\u4e0d\u5b58\u5728")},e.prototype.stopAll=function(){this.audioSourceMap.forEach(function(t){t.stop()})},e.prototype.playEffect=function(t,e){var o=this;if(void 0===e&&(e=1),l.CacheUtils.canPlayEffect()){var i=this.EffectAduioSource;null==i&&(i=this.getAudioSource("effect"));var a=this.getAdConf(t);if(this.audioClipMap.has(a.path)){var n=this.audioClipMap.get(a.path);i.clip=n,i.volume=e,i.play()}else p.ResourceMgr.getInstance().loadRes(a.bundle,a.path,cc.AudioClip,function(t){o.audioClipMap.set(a.path,t),i.clip=t,i.volume=e,i.play()})}},e.prototype.playEffectByPath=function(t,e,o,i){var a=this;if(void 0===o&&(o=1),void 0===i&&(i=!1),l.CacheUtils.canPlayEffect()){var n=this.EffectAduioSource;if(null==n&&(n=this.getAudioSource(e)),this.audioClipMap.has(t)){var r=this.audioClipMap.get(t);n.clip=r,n.volume=o,n.loop=i,n.play()}else p.ResourceMgr.getInstance().loadRes("audio",t,cc.AudioClip,function(e){a.audioClipMap.set(t,e),n.clip=e,n.volume=o,n.loop=i,n.play()})}},e.prototype.playAudioFromPath=function(t,e,o,i,a){var n=this;if(l.CacheUtils.canPlayMusin()){var r=this.getAudioSource(o);if(null==r)return void u.LogMgr.getInstance().error("audioSourceName\uff1a"+o+"\u4e0d\u5b58\u5728");if(r.stop(),this.audioClipMap.has(e)){var s=this.audioClipMap.get(e);r.clip=s,r.volume=1,i?(r.loop=!0,this.addMusicKey(o)):r.loop=!1,r.play(),a&&a(r)}else p.ResourceMgr.getInstance().loadRes(t,String(e),cc.AudioClip,function(t){r.clip=t,n.audioClipMap.set(e,t),r.volume=1,i?(r.loop=!0,n.addMusicKey(o)):r.loop=!1,r.play(),a&&a(r)})}},e.prototype.stopEffect=function(){var t=this.getAudioSource("effect");t&&t.stop()},e.prototype.setButtonNomalAudio=function(t){this.normalButtonAudio=t},e.prototype.playAudioButtonClicked=function(){this.normalButtonAudio&&this.playEffect(this.normalButtonAudio)},e}(c.default);n.AudioMgr=d,cc._RF.pop()},{}],BaseButton:[function(t,e,o){"use strict";cc._RF.push(e,"08526eaTJpCXYM9VKuRXAnP","BaseButton");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseButton=void 0;var c=a("AudioMgr"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.invertTime=1,e.touched=!1,e.touchmil=0,e}return r(e,t),e.prototype._onTouchBegan=function(e){this.interactable&&this.enabledInHierarchy&&(this.touched?this._resetState():t.prototype._onTouchBegan.call(this,e))},e.prototype._onTouchEnded=function(e){if(this.interactable&&this.enabledInHierarchy){if(this.touched)return this.node.pauseSystemEvents(!0),void this._resetState();c.AudioMgr.getInstance().playAudioButtonClicked(),this.touched=!0,this.touchmil=0,t.prototype._onTouchEnded.call(this,e)}},e.prototype.update=function(e){t.prototype.update.call(this,e),this.touched&&(this.touchmil=this.touchmil+e,this.touchmil>this.invertTime&&(this.touchmil=0,this.touched=!1,this.node.resumeSystemEvents(!0)))},e.prototype.onDestroy=function(){this.touched=!1},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.touched=!1},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.touched=!1},s([p],e.prototype,"invertTime",void 0),s([u],e)}(cc.Button);n.BaseButton=d,cc._RF.pop()},{}],BaseCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"de51cCKuzdF55057kR0mitQ","BaseCtrl");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("EventMgr"),l=a("ResCacheMgr"),u=a("ResourceMgr"),p=cc._decorator,d=p.ccclass,g=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cache=!1,e.resArray=[],e.eventList=[],e.isDestroy=!1,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.addEvent=function(t,e){c.EventMgr.getInstance().on(t,this,e);var o=new Map;o.set(t,e),this.eventList.push(o)},e.prototype.sendEvent=function(t,e,o,i,a,n){c.EventMgr.getInstance().emit(t,e,o,i,a,n)},e.prototype.loadSpriteFrame=function(t,e,o,i,a){var n=this;void 0===i&&(i=!0),void 0===a&&(a=10),u.ResourceMgr.getInstance().loadSpriteframe(t,e,function(a){i&&n.addRes(t,e,cc.SpriteFrame),n.isDestroy||o(a)},i,a)},e.prototype.loadRemoteSpriteFrame=function(t,e,o,i){var a=this;void 0===o&&(o=!0),void 0===i&&(i=10),u.ResourceMgr.getInstance().loadRemoteSpriteFrame(t,function(i){o&&a.addRes("",t,cc.SpriteFrame),a.isDestroy||e(i)},o,i)},e.prototype.loadPrefab=function(t,e,o,i,a){var n=this;void 0===i&&(i=!0),void 0===a&&(a=10),u.ResourceMgr.getInstance().loadRes(t,e,cc.Prefab,function(a){i&&n.addRes(t,e,cc.Prefab),n.isDestroy||o(a)},i,a)},e.prototype.loadTexture2D=function(t,e,o,i,a){var n=this;void 0===i&&(i=!0),void 0===a&&(a=10),u.ResourceMgr.getInstance().loadRes(t,e,cc.Texture2D,function(a){i&&n.addRes(t,e,cc.Texture2D),n.isDestroy||o(a)},i,a)},e.prototype.loadResFromBundle=function(t,e,o,i,a,n){var r=this;void 0===a&&(a=!0),void 0===n&&(n=10),u.ResourceMgr.getInstance().loadRes(t,e,o,function(n){a&&r.addRes(t,e,o),r.isDestroy||i(n)},a,n)},e.prototype.loadFromRes=function(t,e,o,i){var a=this;void 0===i&&(i=10),u.ResourceMgr.getInstance().loadFromRes(t,e,function(i){a.addRes("",t,e),a.isDestroy||o(i)})},e.prototype.addRes=function(t,e,o){if(this.resArray){var i=l.ResCacheMgr.getInstance().isExistKey(t+"/"+e,o.name,this.resArray);if(-1!=i)this.resArray[i].defCount||(this.resArray[i].defCount=0),this.resArray[i].defCount++;else{var a=new u.ResCacheKey(t,e,o);this.resArray.push(a)}}},e.prototype.release=function(){!this.cache&&this.resArray&&(l.ResCacheMgr.getInstance().refreshTime(this.resArray),this.resArray=[])},e.prototype.setListenerUI=function(){},e.prototype.onDestroy=function(){var t=this;if(this.eventList&&this.eventList.length>0){for(var e=0;e<this.eventList.length;e++)this.eventList[e].forEach(function(e,o){c.EventMgr.getInstance().off(o,t,e)});this.eventList=null}this.isDestroy=!0,this.release()},s([g({displayName:"\u662f\u5426\u9700\u8981\u7f13\u5b58\u8d44\u6e90"})],e.prototype,"cache",void 0),s([d],e)}(cc.Component);n.default=h,cc._RF.pop()},{}],BaseData:[function(t,e,o){"use strict";cc._RF.push(e,"49fe1VrQRREfYC23YMs7HGr","BaseData");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.BaseData=void 0;var n=i("CacheUtils"),r=function(){function t(){this.pwd="SFPLAY"}return t.prototype.getData=function(){var t;return null==this.data&&((t=this.ecrypt?n.CacheUtils.getDataDecrypt(this.gameKey,this.pwd):n.CacheUtils.getData(this.gameKey))?(this.data=JSON.parse(t),this.initData(!1)):(this.data=this.createData(),this.initData(!0))),this.data},t.prototype.initData=function(){},t.prototype.saveData=function(){var t=JSON.stringify(this.data);this.ecrypt?n.CacheUtils.saveDataEncrypt(this.gameKey,t,this.pwd):n.CacheUtils.saveData(this.gameKey,t)},t}();a.BaseData=r,cc._RF.pop()},{}],BaseMgr:[function(t,e,o){"use strict";cc._RF.push(e,"9b26fp4xRlDqIrlgM98Byc9","BaseMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("EventMgr"),r=function(){function t(){this.resArray=[],this.eventList=[],this.isDestroy=!1}return t.prototype.addEvent=function(t,e){n.EventMgr.getInstance().on(t,this,e);var o=new Map;o.set(t,e),this.eventList.push(o)},t.prototype.sendEvent=function(t,e,o,i,a,r){n.EventMgr.getInstance().emit(t,e,o,i,a,r)},t.prototype.addRes=function(){},t.prototype.release=function(){},t.prototype.setListenerUI=function(){},t.prototype.offEvents=function(){var t=this;if(this.eventList&&this.eventList.length>0){for(var e=0;e<this.eventList.length;e++)this.eventList[e].forEach(function(e,o){n.EventMgr.getInstance().off(o,t,e)});this.eventList=null}},t.prototype.onDestroy=function(){this.isDestroy=!0,this.release()},t}();a.default=r,cc._RF.pop()},{}],BasePlatform:[function(t,e,o){"use strict";cc._RF.push(e,"99a91f+tQxEWIiBgY/dL3bP","BasePlatform");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.Platform=void 0,function(t){t.EDITOR="editor",t.KUAIKAN="h5_kuaikan",t.WECHAT="h5_wechat",t.BYTEDANCE="h5_bytedance",t.VIVO="h5_vivo",t.BAIDU="h5_baidu",t.OPPO="h5_oppo",t.QQ="h5_qq",t.ANDROID_233="android_233",t.ANDROID_XIAOMI="android_xiaomi",t.ANDROID_VIVO="android_vivo",t.ANDROID_OPPO="android_oppo",t.ANDROID_oyahoo="android_ohayoo",t.ANDROID_MMY="android_mmy",t.ANDROID_4399="android_4399",t.ANDROID_DOUYIN="android_bytedance",t.GOOGLE="Google",t.Ios="ios",t.KuaiShou="kuaishou",t.HUAWEI_QUICK="huawei",t.WEB_LINK="weblink",t.ANDROID_TAP="android_tap"}(i.Platform||(i.Platform={})),cc._RF.pop()},{}],BaseUI:[function(t,e,o){"use strict";cc._RF.push(e,"aaf34+Thw5BRKGowfSnf24h","BaseUI");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.OpenAin=void 0;var c,l=a("EventMgr"),u=a("LanguageMgr"),p=a("ResCacheMgr"),d=a("ResourceMgr"),g=a("TweenMgr"),h=a("UIMgr"),f=a("ArgsParseUtils"),y=cc._decorator,m=y.ccclass,v=y.property;(function(t){t[t.None=0]="None",t[t.Pop=1]="Pop"})(c=n.OpenAin||(n.OpenAin={})),cc.Enum(c);var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cache=!1,e.openAniType=c.None,e.goldLable=null,e.uid=-1,e.resArray=[],e.eventList=[],e.isclose=!1,e.fromId=-1,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.refreshUI=function(){},e.prototype.init=function(){this.isclose=!1},e.prototype.onOpen=function(){},e.prototype.onClose=function(){},e.prototype.onToggleHide=function(){},e.prototype.onToggleShow=function(){},e.prototype.addEvent=function(t,e){l.EventMgr.getInstance().on(t,this,e);var o=new Map;o.set(t,e),this.eventList.push(o)},e.prototype.sendEvent=function(t,e,o,i,a,n){l.EventMgr.getInstance().emit(t,e,o,i,a,n)},e.prototype.getUid=function(){return this.uid},e.prototype.onOpened=function(){this.isclose=!1},e.prototype.setUid=function(t){this.uid=t},e.prototype.openAni=function(){var t=this;if(this.openAniType==c.Pop){this.node.active=!0;var e=this.node.getChildByName("bg");e&&(e.opacity=0,cc.tween(e).to(.2,{opacity:200}).start());var o=this.node.getChildByName("root");if(o){var i=o.scale;o.scale=0;var a=g.TweenMgr.getInstance().getTween(o);g.TweenMgr.getInstance().popOpenAin(a,function(){o.scale!=i&&cc.tween(o).to(.15,{scale:i}).start(),t.onOpen()})}else this.node.active=!0,this.onOpen()}},e.prototype.closeAni=function(t){if(this.openAniType==c.None)t();else if(this.openAniType==c.Pop){var e=this.node.getChildByName("bg");e&&(e.opacity=200,cc.tween(e).to(.4,{opacity:0}).start());var o=this.node.getChildByName("root");if(o){var i=g.TweenMgr.getInstance().getTween(o);g.TweenMgr.getInstance().popCloseAin(i,function(){t()})}else t()}},e.prototype.openUI=function(t,e,o,i,a,n){h.UIMgr.getInstance().openUI(t,this.uid,e,o,i,a,n)},e.prototype.openUICallBack=function(t,e,o,i,a,n,r){h.UIMgr.getInstance().openUIOfCallback(t,this.uid,e,o,i,a,n,r)},e.prototype.closeUI=function(t,e,o,i,a){var n=this;if(this.eventList&&this.eventList.length>0)for(var r=0;r<this.eventList.length;r++)this.eventList[r].forEach(function(t,e){l.EventMgr.getInstance().off(e,n,t)});this.isclose=!0,this.release(),this.scheduleOnce(function(){h.UIMgr.getInstance().closeUI(n.node,t,e,o,i,a)})},e.prototype.closeNotAni=function(t,e,o,i,a){this.openAniType=c.None,this.closeUI(t,e,o,i,a)},e.prototype.loadSpriteFrame=function(){var t=this,e=f.ArgsParseUtils._makeloadSpriteFrameResrgs.apply(this,arguments),o=e.bundle,i=e.path,a=e.callback,n=!0,r=e.saveKey;d.ResourceMgr.getInstance().loadSpriteframe(o,i,function(e){n&&t.addRes(o,i,cc.SpriteFrame),t.isclose||a(e)},n,e.cacheTme,r)},e.prototype.loadRemoteSpriteFrame=function(t,e,o,i){var a=this;void 0===o&&(o=!0),void 0===i&&(i=10),d.ResourceMgr.getInstance().loadRemoteSpriteFrame(t,function(i){o&&a.addRes("",t,cc.SpriteFrame),a.isclose||e(i)},o,i)},e.prototype.loadPrefab=function(t,e,o,i,a){var n=this;void 0===i&&(i=!0),void 0===a&&(a=10),d.ResourceMgr.getInstance().loadRes(t,e,cc.Prefab,function(a){i&&n.addRes(t,e,cc.Prefab),n.isclose||o(a)},i,a)},e.prototype.loadTexture2D=function(t,e,o,i,a){var n=this;void 0===i&&(i=!0),void 0===a&&(a=10),d.ResourceMgr.getInstance().loadRes(t,e,cc.Texture2D,function(a){i&&n.addRes(t,e,cc.Texture2D),n.isclose||o(a)},i,a)},e.prototype.loadResFromBundle=function(){var t=this,e=f.ArgsParseUtils._makeLoadResArgs.apply(this,arguments),o=e.bundle,i=e.path,a=e.callback,n=!0,r=e.type;d.ResourceMgr.getInstance().loadRes(o,i,r,function(e){n&&t.addRes(o,i,r),t.isclose||a(e)},n,e.cacheTme,e.saveKey)},e.prototype.loadFromRes=function(t,e,o,i){var a=this;void 0===i&&(i=10),d.ResourceMgr.getInstance().loadFromRes(t,e,function(i){a.addRes("",t,e),a.isclose||o(i)})},e.prototype.addRes=function(t,e,o){if(this.resArray){var i=p.ResCacheMgr.getInstance().isExistKey(t+"/"+e,o.name,this.resArray);if(-1!=i)this.resArray[i].defCount||(this.resArray[i].defCount=0),this.resArray[i].defCount++;else{var a=new d.ResCacheKey(t,e,o);this.resArray.push(a)}}},e.prototype.release=function(){!this.cache&&this.resArray&&(p.ResCacheMgr.getInstance().refreshTime(this.resArray),this.resArray=[])},e.prototype.setListenerUI=function(){},e.prototype.onDestroy=function(){var t=this;if(this.eventList&&this.eventList.length>0){for(var e=0;e<this.eventList.length;e++)this.eventList[e].forEach(function(e,o){l.EventMgr.getInstance().off(o,t,e)});this.eventList=null}this.isclose=!0,this.release()},e.prototype.T=function(t){return u.LanguageMgr.getInstance().T(t)},e.prototype.getImgstr=function(t){return u.LanguageMgr.getInstance().getImgstr(t)},s([v({displayName:"\u662f\u5426\u9700\u8981\u7f13\u5b58"})],e.prototype,"cache",void 0),s([v({type:c,tooltip:"\u6ce8\u610f\uff1a\u4e3b\u8282\u70b9\u4e0b\u53ea\u9700bg \u548c root",displayName:"\u6253\u5f00\u52a8\u753b"})],e.prototype,"openAniType",void 0),s([v({type:cc.Node,tooltip:"\u91d1\u5e01\u6846"})],e.prototype,"goldNode",void 0),s([v({type:cc.Node,tooltip:"\u91d1\u5e01\u56fe"})],e.prototype,"goldIcon",void 0),s([v({type:cc.Label,tooltip:"\u91d1\u5e01label"})],e.prototype,"goldLable",void 0),s([m],e)}(cc.Component);n.default=I,cc._RF.pop()},{}],ByteDanceManager:[function(t,e,o){"use strict";cc._RF.push(e,"8689fthaktNl4kLM0x7QkR+","ByteDanceManager");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.BytedanceManager=void 0;var n=i("TimeUtils"),r=i("CacheUtils"),s=function(){function t(){var t=this;this.videoAd=null,this.BannerAd=null,this.InterstitialAd=null,this.BannerAdHight=0,this.BannerAdWight=0,this.showInsertTime=0,this.isLogin=!1,this.videpPath=null,this.preTime=-1,this.numVideo=1,this.errorFun=function(e,o){o&&o.length>0?t.errorCb&&t.errorCb(o):t.errorCb&&t.errorCb("\u6682\u65e0\u5e7f\u544a")},this.closefunc=function(e){if(e&&e.isEnded){var o=!0,i=(new Date).getTime();-1==t.preTime?o=!0:i-t.preTime<1e4&&(o=!1),t.preTime=i,o?t.successCb&&(t.successCb(),r.CacheUtils.getData("game_addiction")||2!=t.numVideo||(t.incidentReturn("game_addiction"),r.CacheUtils.saveData("game_addiction","true")),t.numVideo++,t.incidentReturn("active_pay")):t.errorCb&&t.errorCb()}else t.errorCb&&t.errorCb();t.videoAd.load()},this.isLoginByte=!1,this.loginState=!1}return t.prototype.showBlockAd=function(){},t.prototype.hideBlockAd=function(){},t.prototype.showWxNativeAD=function(){},t.prototype.hideWxNativeAD=function(){},t.prototype.incidentReturn=function(t){var e,o=this.launchOpt.ad_params;(e=o&&o.length>0?JSON.parse(o).clickid:this.launchOpt.query.clickid)&&tt.request({url:"https://analytics.oceanengine.com/api/v2/conversion",data:{event_type:t,context:{ad:{callback:e}},timestamp:Date.now()},header:{"content-type":"application/json"},method:"POST",dataType:"JSON",responseType:"text",success:function(t){console.log("\u8c03\u7528\u6210\u529f",t.data)},fail:function(t){console.log("\u8c03\u7528\u5931\u8d25",t.errMsg)}})},t.prototype.initSdk=function(){var t=this;tt.login({force:!1,success:function(e){t.isLogin=e.isLogin,console.log("login \u8c03\u7528\u6210\u529f"+e.code+" "+e.anonymousCode)},fail:function(){t.isLogin=!1,console.log("login \u8c03\u7528\u5931\u8d25")}}),this.systemInfo=tt.getSystemInfoSync(),this.launchOpt=tt.getLaunchOptionsSync(),r.CacheUtils.getData("activeOnce")||(this.incidentReturn("active"),this.incidentReturn("active_register"),r.CacheUtils.saveData("activeOnce","true")),this.initVieo()},t.prototype.initVieo=function(){var t=this,e=this.systemInfo.windowWidth,o=this.systemInfo.windowHeight;this.videoAd=tt.createRewardedVideoAd({adUnitId:"79ke0h1eaami21bhf7"}),this.videoAd&&(this.videoAd.onClose(this.closefunc),this.videoAd.onError(this.errorFun),this.videoAd.load()),this.BannerAd=tt.createBannerAd({adUnitId:"20d28p599p4h51j3k4",style:{left:(e-300)/2,top:0,adIntervals:30,width:300}}),this.BannerAd.onResize(function(i){console.log(i.width,i.height),t.BannerAdHight=i.height,t.BannerAdWight=i.width,t.BannerAd.style.top=o-t.BannerAdHight,t.BannerAd.style.left=(e-t.BannerAdWight)/2}),this.BannerAd.onError(function(t){console.log(" banner \u5e7f\u544a\u9519\u8bef",t.errCode)})},t.prototype.shareVideo=function(t,e){var o=this.videpPath,i=this;null!=o&&0!=o.length&&null!=o?tt.shareAppMessage({channel:"video",query:"",templateId:"81f5ada24aigo4hdcd",title:"\u5f00\u5c40\u4e00\u628a\u5200",desc:"\u5f00\u5c40\u4e00\u628a\u5200",extra:{videoPath:o,videoTopics:["\u5f00\u5c40\u4e00\u628a\u5200"],withVideoId:!0},success:function(){i.videpPath=null,tt.showToast({title:"\u5206\u4eab\u89c6\u9891\u6210\u529f",duration:2e3,success:function(){},fail:function(){}}),e&&e()},fail:function(){tt.showToast({title:"\u5206\u4eab\u89c6\u9891\u5931\u8d25",duration:2e3,success:function(){},fail:function(){}})}}):tt.showToast({title:"\u8fd8\u6ca1\u6709\u5206\u4eab\u5185\u5bb9",duration:2e3,success:function(){},fail:function(){}})},t.prototype.shareImg=function(t,e){var o=Math.floor(3*Math.random());tt.shareAppMessage({title:["\u5e2e\u6211\u770b\u770b\u54ea\u4e2a\u5b57\u9519\u4e86\uff1f","\u4f60\u662f\u9003\u4e0d\u8fc7\u6211\u7684\u773c\u775b\u7684\uff01","\u5e2e\u6211\u770b\u770b\u54ea\u4e00\u53ea\u4e0d\u662f\u4f01\u9e45"][o],desc:"",imageUrl:"https://game2.sfplay.net/werid_assets/wechat/shareIcon/"+["1.jpeg","2.jpeg","3.jpeg"][o],query:"",success:function(){e&&e(),console.log("\u5206\u4eab\u6210\u529f")},fail:function(){console.log("\u5206\u4eab\u5931\u8d25")}})},t.prototype.checkShortcut=function(t,e){tt.checkShortcut({success:function(t){t.status.exist?e&&e(!0):e&&e(!1)},fail:function(){e&&e(!0)}})},t.prototype.addShortcut=function(t,e){tt.addShortcut({success:function(){e&&e("\u684c\u9762\u56fe\u6807\u6dfb\u52a0\u6210\u529f")},fail:function(){e&&e("\u684c\u9762\u56fe\u6807\u6dfb\u52a0\u5931\u8d25")}})},t.prototype.hasVerify=function(){return!1},t.prototype.getUserInfo=function(t){tt.login({force:!1,success:function(){console.log("\u767b\u5f55\u6210\u529f"),tt.getUserInfo({success:function(e){"getUserInfo:ok"==e.errMsg?t(e.userInfo.nickName,e.userInfo.avatarUrl):t(null,null)},fail:function(){t(null,null)}})}})},t.prototype.showGamePortalAd=function(t,e){tt.onMoreGamesModalClose(function(){}),tt.onNavigateToMiniGameBox(function(){}),"ios"!==this.systemInfo.platform&&tt.showMoreGamesModal?tt.showMoreGamesModal({appLaunchOptions:[{appId:"ttd63da0804905658f02"},{appId:"tt3b934d2ea4ab8a8202"},{appId:"tta7dcd16138e7e202"},{appId:"tt9325e5980c1e8576"},{appId:"ttf1bf87026e84c9f9"},{appId:"tt93c9e5740cf268b9"},{appId:"ttf21484a96d2f6816"},{appId:"tt6a4c1cf1f5761949"},{appId:"tt0c7a7ac793413665"},{appId:"tt914ae7f70e72364302"}],success:function(){},fail:function(){e&&e("error")}}):e&&e(null)},t.prototype.canShare=function(){return!0},t.prototype.pauseRecord=function(){tt.getGameRecorderManager().pause()},t.prototype.resumeRecord=function(){tt.getGameRecorderManager().resume()},t.prototype.youmengTrack=function(t,e,o){tt.uma&&(e&&o?"userA"==e?tt.uma.trackEvent(t,{userA:o}):"userB"==e?tt.uma.trackEvent(t,{userB:o}):"userD"==e?tt.uma.trackEvent(t,{userD:o}):tt.uma.trackEvent(t,{userC:o}):tt.uma.trackEvent(t))},t.prototype.recordVideo=function(){var t=tt.getGameRecorderManager();t&&(this.videpPath=null,t.onStart(function(){console.log("\u5f55\u5c4f\u5f00\u59cb")}),t.start({duration:300,isMarkOpen:!1}))},t.prototype.showVideoAd=function(t,e,o){var i=this;if(this.successCb=e,this.errorCb=o,!this.videoAd)return this.initVieo(),void this.errorCb("\u6682\u65e0\u5e7f\u544a");this.videoAd.show().then(function(){}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),i.videoAd.load().then(function(){return console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),i.videoAd.show()})})},t.prototype.setLanguage=function(){return""},t.prototype.stopRecorderManager=function(t,e){var o=this,i=tt.getGameRecorderManager();i.onStop(function(t){o.videpPath=t.videoPath,e&&e(t.videoPath)}),i.stop()},t.prototype.getAppName=function(){return this.systemInfo.appName},t.prototype.login=function(t,e){if(this.isLoginByte)e(this.loginState);else{var o=this;tt.login({force:!1,success:function(t){o.isLoginByte=!0,o.loginState=t.isLogin,e(t.isLogin)}})}},t.prototype.pay=function(){},t.prototype.showBanner=function(){null!=this.BannerAd&&"XiGua"!==this.systemInfo.appName&&this.BannerAd.show()},t.prototype.hideBanner=function(){null==this.BannerAd&&"XiGua"!==this.systemInfo.appName||this.BannerAd.hide()},t.prototype.showInsertAd=function(t,e){var o=this;if(n.TimeUtils.GetTimeBySecond()-this.showInsertTime>=31){var i=this.systemInfo.appName;"Toutiao"!=i&&"Douyin"!=i||(this.InterstitialAd&&(this.InterstitialAd.destroy(),this.InterstitialAd=null),this.InterstitialAd=tt.createInterstitialAd({adUnitId:"b5b23i03ha9k1ij807"}),this.InterstitialAd.load().then(function(){o.InterstitialAd.show().then(function(){o.showInsertTime=n.TimeUtils.GetTimeBySecond(),e&&e()}).catch(function(){e&&e()})}).catch(function(){e&&e()}))}},t.prototype.canCare=function(){return"Douyin"==this.systemInfo.appName},t.prototype.otherFun=function(t,e){"Douyin"==this.systemInfo.appName?tt.login({force:!1,success:function(t){console.log("\u767b\u5f55\u6210\u529f"),t.isLogin?tt.openAwemeUserProfile?(tt.openAwemeUserProfile(),setTimeout(function(){e&&e()},3500)):tt.showToast({title:"\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd",duration:2e3,success:function(){},fail:function(){}}):tt.showToast({title:"\u8bf7\u5148\u767b\u5f55",duration:2e3,success:function(){},fail:function(){}})}}):tt.showToast({title:"\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd",duration:2e3,success:function(){},fail:function(){}})},t.prototype.homeToBackgroud=function(){},t.prototype.backgroudToHome=function(){},t.prototype.openNotify=function(){},t.prototype.registerNotify=function(){},t.prototype.deleteNotify=function(){},t.prototype.shark=function(t){1==t?tt.vibrateLong():tt.vibrateShort()},t.prototype.openShare=function(){},t.prototype.compareVersion=function(t,e){t=t.split("."),e=e.split(".");for(var o=Math.max(t.length,e.length);t.length<o;)t.push("0");for(;e.length<o;)e.push("0");for(var i=0;i<o;i++){var a=parseInt(t[i]),n=parseInt(e[i]);if(a>n)return 1;if(a<n)return-1}return 0},t.prototype.share=function(t,e){var o=this.videpPath,i=this;null!=o&&0!=o.length&&null!=o?tt.shareAppMessage({channel:"video",query:"",templateId:"81f5ada24aigo4hdcd",title:"\u5f00\u5c40\u4e00\u628a\u5200",desc:"\u5f00\u5c40\u4e00\u628a\u5200",extra:{videoPath:o,videoTopics:["\u5f00\u5c40\u4e00\u628a\u5200"],withVideoId:!0},success:function(){i.videpPath=null,tt.showToast({title:"\u5206\u4eab\u89c6\u9891\u6210\u529f",duration:2e3,success:function(){},fail:function(){}}),e&&e()},fail:function(){tt.showToast({title:"\u5206\u4eab\u89c6\u9891\u5931\u8d25",duration:2e3,success:function(){},fail:function(){}})}}):tt.showToast({title:"\u8fd8\u6ca1\u6709\u5206\u4eab\u5185\u5bb9",duration:2e3,success:function(){},fail:function(){}})},t.prototype.getCode=function(){return"134"},t.prototype.verifyKey=function(){},t.prototype.toAppStore=function(){},t}();a.BytedanceManager=s,cc._RF.pop()},{}],CacheUtils:[function(t,e,o){"use strict";cc._RF.push(e,"10a38ih4QhFgKSieTDoZOM5","CacheUtils");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.CacheUtils=void 0;var n=i("Utils"),r=function(){function t(){}return t.saveData=function(t,e){localStorage.setItem(t,e)},t.getData=function(t){return localStorage.getItem(t)},t.saveDataEncrypt=function(t,e,o){var i=n.Utils.encrypt(e,o);this.saveData(t,i)},t.getDataDecrypt=function(t,e){var o=this.getData(t);return n.Utils.decrypt(o,e)},t.canPlayMusin=function(){var t=this.getData("MUSIC");return!t||"0"!=t},t.canPlayEffect=function(){var t=this.getData("EFFECT");return!t||"0"!=t},t.setPlayMusic=function(t){t?this.saveData("MUSIC","1"):this.saveData("MUSIC","0")},t.setPlayEffect=function(t){t?this.saveData("EFFECT","1"):this.saveData("EFFECT","0")},t}();a.CacheUtils=r,cc._RF.pop()},{}],CameraMgr:[function(t,e,o){"use strict";cc._RF.push(e,"bdbc4VXBTFMq7Kf0c9zdi09","CameraMgr");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("Main"),l=a("Config"),u=a("GameDataMgr"),p=cc._decorator,d=p.ccclass,g=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.posIndex=cc.Vec2.ZERO,e.gameCamera=null,e.isShake=!1,e.tween_shake=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.lateUpdate=function(){if(!u.default.getInstance().isCurGameState(l.EnumGameState.GameOver)&&!this.isShake&&c.default.instance.player&&c.default.instance.player.object){var t=c.default.instance.player.object.x-this.node.x,e=4*cc.director.getDeltaTime();this.node.x+=t*e}},e.prototype.resetPos=function(){this.gameCamera.zoomRatio=1,this.node.setPosition(cc.Vec2.ZERO)},e.prototype.shakeAnim=function(){var t=this;this.tween_shake&&(this.tween_shake.stop(),this.tween_shake=null,this.node.y=0,this.isShake=!1),this.isShake=!0,this.tween_shake=cc.tween(this.node).parallel(cc.tween().by(.02,{x:-10}),cc.tween().by(.02,{y:-10})).by(.02,{x:10}).parallel(cc.tween().by(.02,{x:-15}),cc.tween().by(.02,{y:15})).parallel(cc.tween().by(.02,{x:5}),cc.tween().by(.02,{y:5})).parallel(cc.tween().by(.02,{x:5}),cc.tween().by(.02,{y:-20})).parallel(cc.tween().by(.02,{x:5}),cc.tween().by(.02,{y:10})).call(function(){t.isShake=!1}).start()},e.prototype.controlCameraZoom=function(t,e,o){cc.tween(this.gameCamera).to(t,{zoomRatio:e}).call(function(){o&&o()}).start()},s([g(cc.Camera)],e.prototype,"gameCamera",void 0),s([d],e)}(cc.Component);n.default=h,cc._RF.pop()},{}],CardMgr:[function(t,e,o){"use strict";cc._RF.push(e,"6be93ZhvZVFlY+n+FHg6zTp","CardMgr");var i=t,a=o,n=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var r=i("EventMgr"),s=i("HttpMgr"),c=i("UIMgr"),l=i("CacheUtils"),u=i("UIUtils"),p=i("Utils"),d=i("Config"),g=cc._decorator,h=g.ccclass,f=(g.property,function(){function t(){this.verifykey="realName_sf",this.verifyWCNkey="realName_sf_wcn",this.isWcn=!1}var e;return e=t,t.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},t.prototype.isVerify=function(){return!!l.CacheUtils.getData(this.verifykey)},t.prototype.isWCN=function(){var t=l.CacheUtils.getData(this.verifyWCNkey);return!(!t||"1"!=t)},t.prototype.toGame=function(t){var e=this;this.isWCN()?this.getBirthday(function(o){o?e.getIsEnjoyTime()?(t&&t(),e.sceduleEndGame(),c.UIMgr.getInstance().openUI(d.UIID.UITips,-1,"\u672a\u6210\u5e74\u53ea\u80fd\u5728\u665a\u4e0a8-9\u70b9\u73a9\u4e00\u4e2a\u5c0f\u65f6")):r.EventMgr.getInstance().emit("WCNGameEnd","\u672a\u6210\u5e74\u53ea\u80fd\u5728\u665a\u4e0a8-9\u70b9\u73a9\u4e00\u4e2a\u5c0f\u65f6"):r.EventMgr.getInstance().emit("WCNGameEnd","\u672a\u6210\u5e74\u53ea\u6709\u5468\u4e94\uff0c\u5468\u516d\uff0c\u5468\u65e5\u548c\u8282\u5047\u65e5\u624d\u80fd\u73a9")}):t&&t()},t.prototype.vifyCardId=function(t,e,o){var i=this;if(null==t||t.length<=0||null==e||e.length<=0)c.UIMgr.getInstance().openUI(d.UIID.UITips,-1,"\u4e0d\u80fd\u4e3a\u7a7a");else{var a=p.Utils.isCardID(e);if(0==a)s.HttpMgr.getInstance().httpPost({ai:(new Date).getTime()+"",cardId:e,name:t},function(t){var a=JSON.parse(t);if(200==a.code&&0==a.data.status)l.CacheUtils.saveData(i.verifykey,"1"),p.Utils.checkAdult(e)?(o&&o(!0),l.CacheUtils.saveData(i.verifyWCNkey,"0")):(l.CacheUtils.saveData(i.verifyWCNkey,"1"),i.isWcn=!0,i.getBirthday(function(t){t?i.getIsEnjoyTime()?(o(!0),i.sceduleEndGame(),c.UIMgr.getInstance().openUI(d.UIID.UIExit,-1)):c.UIMgr.getInstance().openUI(d.UIID.UIExit,-1):o&&c.UIMgr.getInstance().openUI(d.UIID.UIExit,-1)}));else{var n="\u6821\u9a8c\u5931\u8d25";1001==a.code?n="\u7cfb\u7edf\u9519\u8bef":1002==a.code?n="\u63a5\u53e3\u8bf7\u6c42\u7684\u8d44\u6e90\u4e0d\u5b58\u5728":1003==a.code?n="\u63a5\u53e3\u8bf7\u6c42\u65b9\u5f0f\u9519\u8bef":1004==a.code?n="\u63a5\u53e3\u8bf7\u6c42\u6838\u5fc3\u53c2\u6570\u7f3a\u5931":1005==a.code?n="\u63a5\u53e3\u8bf7\u6c42IP\u5730\u5740\u975e\u6cd5":1006==a.code?n="\u63a5\u53e3\u8bf7\u6c42\u8d85\u51fa\u6d41\u91cf\u9650\u5236":1007==a.code?n="\u63a5\u53e3\u8bf7\u6c42\u8fc7\u671f":1008==a.code?n="\u63a5\u53e3\u8bf7\u6c42\u65b9\u8eab\u4efd\u975e\u6cd5":1009==a.code?n="\u63a5\u53e3\u8bf7\u6c42\u65b9\u6743\u9650\u672a\u542f\u7528":1010==a.code?n="\u63a5\u53e3\u8bf7\u6c42\u65b9\u65e0\u8be5\u63a5\u53e3\u6743\u9650":1011==a.code?n="\u63a5\u53e3\u8bf7\u6c42\u65b9\u8eab\u4efd\u6838\u9a8c\u9519\u8bef":1012==a.code?n="\u63a5\u53e3\u8bf7\u6c42\u62a5\u6587\u6838\u9a8c\u5931\u8d25":2001==a.code?n="\u8eab\u4efd\u8bc1\u53f7\u683c\u5f0f\u6821\u9a8c\u5931\u8d25":2002==a.code?n="\u5b9e\u540d\u8ba4\u8bc1\u6761\u76ee\u5df2\u8fbe\u4e0a\u9650":2003==a.code?n="\u65e0\u8be5\u7f16\u7801\u63d0\u4ea4\u7684\u5b9e\u540d\u8ba4\u8bc1\u8bb0\u5f55":2004==a.code?n="\u7f16\u7801\u5df2\u7ecf\u88ab\u5360\u7528":2005==a.code&&(n="\u59d3\u540d\u6821\u9a8c\u5931\u8d25"),2==a.data.status&&(n="\u59d3\u540d\u6821\u9a8c\u5931\u8d25"),c.UIMgr.getInstance().openUI(d.UIID.UITips,-1,n)}},"https://yuema.sfplay.net:8002/rncheck");else{var n="\u6821\u9a8c\u5931\u8d25";-1==a?n="\u8eab\u4efd\u8bc1\u957f\u5ea6\u6216\u683c\u5f0f\u9519\u8bef":-2==a?n="\u8eab\u4efd\u8bc1\u5730\u533a\u975e\u6cd5":-3==a?n="\u8eab\u4efd\u8bc1\u4e0a\u7684\u51fa\u751f\u65e5\u671f\u975e\u6cd5":-4==a&&(n="\u8eab\u4efd\u8bc1\u53f7\u975e\u6cd5"),c.UIMgr.getInstance().openUI(d.UIID.UITips,-1,n)}}},t.prototype.getBirthday=function(t){s.HttpMgr.getInstance().httpPost(null,function(e){var o=JSON.parse(e);null==o.holiday&&5!=o.type.week&&6!=o.type.week&&1!=o.type.week?t&&t(!1):t&&t(!0)},"https://yuema.sfplay.net:8002/isholiday")},t.prototype.getIsEnjoyTime=function(){var t=(new Date).getHours();return!(t>20||t<21)},t.prototype.sceduleEndGame=function(){var t=1e3*(60-(new Date).getMinutes());u.UIUtils.scheduleOnce(function(){r.EventMgr.getInstance().emit("WCNGameEnd","\u7531\u4e8e\u60a8\u662f\u672a\u6210\u5e74\u53ea\u80fd\u73a9\u4e00\u4e2a\u5c0f\u65f6")},this,t)},e=n([h],t)}());a.default=f,cc._RF.pop()},{}],CityMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b39c9FYOklMSYxKAdaKEyOo","CityMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.CityMgr=void 0;var n=i("HttpMgr"),r=i("LogMgr"),s=function(){function t(){this.firstCity=["\u5317\u4eac","\u4e0a\u6d77","\u5e7f\u5dde","\u6df1\u5733"],this.isget=!1,this.isFirstCity=!0}return t.getInstance=function(){return null==this.instance&&(this.instance=new t,this.instance.init()),this.instance},t.prototype.init=function(){this.parseIp()},t.prototype.parseIp=function(){var t=this;n.HttpMgr.getInstance().httpGet("https://yuema.sfplay.net:9090/getIpInfo",null,function(e,o){if(r.LogMgr.getInstance().debug("res: ",o),e){t.isget=!0;for(var i=0;i<t.firstCity.length;i++)if(o.match(t.firstCity[i])){t.isFirstCity=!1;break}}})},t.prototype.getIsFirstCity=function(){return this.isget||this.parseIp(),this.isFirstCity},t}();a.CityMgr=s,cc._RF.pop()},{}],ComCollectionData:[function(t,e,o){"use strict";cc._RF.push(e,"5fd77fRSB1HOak8Rvk3nmDC","ComCollectionData");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.ComCollectionData=void 0;var s=a("BaseData"),c=a("EventMgr"),l=a("LogMgr"),u=a("TimeUtils"),p=a("UIUtils"),d=a("Config"),g=a("CommonCfg"),h=a("ComDataMgr"),f=function(){this.isGet=!1,this.finished=!1,this.adTip=!1,this.isTips=!1},y=function(){this.index=1,this.itemData=[],this.isGet=!1,this.endtime=-1,this.process=0},m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ecrypt=!1,e.gameKey=d.GameConfig.AppCacheName+"collection",e.showRed=!1,e}return r(e,t),e.prototype.createData=function(){this.data=new y;var t=Number(h.ComDataMgr.getInstance().getCommonParam(h.CommonParamType.colloctionTime));return t>0&&(this.data.endtime=u.TimeUtils.GetTimeBySecond()+60*t),this.data},e.prototype.initData=function(t){if(t){for(var e=h.ComDataMgr.getInstance().getCollectionCfgById(this.data.index).itemId.split(d.GameConfig.splitNum),o=0;o<e.length;o++){var i=Number(e[o]),a=new f;a.id=o,a.itemId=i;var n=h.ComDataMgr.getInstance().getCollectionItemById(i);null==n.tips?a.adTip=!1:a.adTip=!0,a.goodId=n.goodId,a.isGet=!1,a.num=0,a.finished=!1,this.data.itemData.push(a)}this.saveData()}else this.refreData()},e.prototype.getCurrentReward=function(){var t=h.ComDataMgr.getInstance().getCollectionCfgById(this.data.index);return t?t.rewards:null},e.prototype.refreData=function(){if(this.checkCanRefresh()&&this.data.endtime>1)if(this.data.endtime-u.TimeUtils.GetTimeBySecond()<=0)this.nextData();else{var t=this.data.endtime-u.TimeUtils.GetTimeBySecond();p.UIUtils.scheduleOnce(this.nextData,this,t)}},e.prototype.getCollectionData=function(t){for(var e=0;e<this.data.itemData.length;e++){var o=this.data.itemData[e];if(o.id==t)return o}return null},e.prototype.getAllCollectionData=function(){return this.data.itemData},e.prototype.checkCanRefresh=function(){var t=h.ComDataMgr.getInstance();if(Number(t.getCommonParam(h.CommonParamType.colloctionCanNext))<=0)return!1;var e=t.getAllCollectionCfg();if(this.data.index==e.length){if(Number(t.getCommonParam(h.CommonParamType.colloctionRepet))<=0)return!1;this.data.index=1}if(this.data.isGet)return!0;if(this.data.process==this.data.itemData.length)return!1;for(var o=[],i=0;i<this.data.itemData.length;i++){var a=this.data.itemData[i];(a.isGet||a.finished)&&o.push(!0)}return o.length!=this.data.itemData.length&&(l.LogMgr.getInstance().debug("\u5176\u4ed6\u60c5\u51b5 \u53ef\u4ee5\u6e05\u6389"),!0)},e.prototype.nextData=function(){var t=h.ComDataMgr.getInstance().getAllCollectionCfg();this.data.index>=t.length&&(this.data.index=0);var e=h.ComDataMgr.getInstance().getCollectionCfgById(this.data.index+1).itemId.split(d.GameConfig.splitNum);this.data.itemData.splice(0,this.data.itemData.length);for(var o=0;o<e.length;o++){var i=Number(e[o]),a=new f;a.id=o,a.itemId=i,a.isGet=!1,a.num=0;var n=h.ComDataMgr.getInstance().getCollectionItemById(i);a.goodId=n.goodId,a.finished=!1,this.data.itemData.push(a)}var r=Number(h.ComDataMgr.getInstance().getCommonParam(h.CommonParamType.colloctionTime));this.data.endtime=r>0?u.TimeUtils.GetTimeBySecond()+60*r:-1,this.data.process=0,this.data.index+=1,this.data.isGet=!1,this.saveData(),this.checkShowRed()},e.prototype.receiveTaskReward=function(t){if(this.data.isGet=!0,this.checkCanRefresh()){if(this.data.endtime>1)if(this.data.endtime-u.TimeUtils.GetTimeBySecond()<=0)this.nextData(),t&&t(!0);else{var e=this.data.endtime-u.TimeUtils.GetTimeBySecond();p.UIUtils.unSchedule(this.nextData,this),p.UIUtils.scheduleOnce(this.nextData,this,e),t&&t(!1)}}else t&&t(!1);this.checkShowRed(),this.saveData()},e.prototype.checkFinshed=function(){if(this.data.isGet)return!0;for(var t=[],e=0;e<this.data.itemData.length;e++){var o=this.data.itemData[e];if(o.isGet||o.finished)t.push(!0);else{var i=h.ComDataMgr.getInstance().getCollectionItemById(o.itemId);i&&o.num>=i.needNum&&(t.push(!0),o.finished=!0)}}return t.length>=this.data.itemData.length},e.prototype.checkShowRed=function(){for(var t=!1,e=0;e<this.data.itemData.length;e++){var o=this.data.itemData[e];!o.isGet&&o.finished&&(t=!0)}t||this.data.isGet||this.data.process!=this.data.itemData.length||(t=!0),t?this.showRed||(this.showRed=!0,c.EventMgr.getInstance().emit(g.CommonEventName.RefreshCollectionRed,!0)):this.showRed&&(this.showRed=!1,c.EventMgr.getInstance().emit(g.CommonEventName.RefreshCollectionRed,!1))},e.prototype.addAdTips=function(t){var e=this.getCollectionData(t);e.adTip&&(e.isTips=!0,this.saveData())},e.prototype.addData=function(t,e,o){void 0===o&&(o=!0);for(var i=[],a=0;a<this.data.itemData.length;a++){var n=this.data.itemData[a];if(n.goodId==t){n.num+=e;var r=h.ComDataMgr.getInstance().getCollectionItemById(n.itemId);r&&n.num>=r.needNum&&(n.finished=!0),i.push(n.id)}}i.length>0&&(this.saveData(),o&&c.EventMgr.getInstance().emit(g.CommonEventName.RefreshCollection,i)),this.checkShowRed()},e.prototype.getProcess=function(){return this.data.process},e.prototype.getEndtime=function(){return this.data.endtime},e.prototype.finishData=function(t){var e=this.getCollectionData(t);e&&(e.finished=!0,e.isGet=!0,this.data.process+=1,this.saveData()),this.checkShowRed()},e}(s.BaseData);n.ComCollectionData=m,cc._RF.pop()},{}],ComDataMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ca6f5Xwu71BZr9PwBi/3WFU","ComDataMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.ComDataMgr=a.CommonParamType=void 0;var n=i("ResourceMgr");(function(t){t[t.defTickNum=1]="defTickNum",t[t.freeLottyNum=2]="freeLottyNum",t[t.colloctionTime=3]="colloctionTime",t[t.colloctionCanNext=4]="colloctionCanNext",t[t.colloctionRepet=5]="colloctionRepet"})(a.CommonParamType||(a.CommonParamType={}));var r=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.preload=function(t){var e=this;n.ResourceMgr.getInstance().loadRes("comconfig","GameJsonCfg",cc.JsonAsset,function(o){e.data=o.json,o.decRef(),n.ResourceMgr.getInstance().releaseBundle("comconfig"),t&&t()})},t.prototype.orderCfgs=function(){this.data.SignCfg.sort(function(t,e){return t.id-e.id})},t.prototype.getAllSignCfg=function(){return this.data.SignCfg},t.prototype.getSignById=function(t){return this.data.SignCfg[t-1]},t}();a.ComDataMgr=r,cc._RF.pop()},{}],ComFreeTimeData:[function(t,e,o){"use strict";cc._RF.push(e,"c53c4wNRmZJ5pF+TzXYBDsy","ComFreeTimeData");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.ComFreeTimeData=n.FreeData=void 0;var s=a("BaseData"),c=a("Config"),l=a("ComDataMgr"),u=function(){this.index=0};n.FreeData=u;var p=function(){},d=function(){},g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ecrypt=!1,e.gameKey=c.GameConfig.AppCacheName+"FreeTime",e.currentGoodsIds=[],e}return r(e,t),e.prototype.createData=function(){this.data=new d,this.data.itemData=[];for(var t=l.ComDataMgr.getInstance().getAllFreeTimeCfg(),e=0;e<t.length;e++){var o=t[e],i=new u;i.id=o.id,i.index=0;var a=o.itemIds.split(c.GameConfig.splitNum),n=Number(a[0]);i.itemId=n;var r=l.ComDataMgr.getInstance().getFreeTimeItemById(n);i.isTarget=!1,i.adNum=0,this.currentGoodsIds.push(r.goodsId),i.goodsId=r.goodsId,this.data.itemData.push(i)}return this.checkSame(),this.saveData(),this.data},e.prototype.checkSame=function(){for(var t=[],e=0;e<this.data.itemData.length;e++)for(var o=this.data.itemData[e],i=0;i<t.length;i++)if(t[i]==o.goodsId){var a=this.check(o.id,o.index,o.goodsId,o.index);o.index=a.index,o.goodsId=a.goodId}else t.push(o.goodsId);t.splice(0,t.length)},e.prototype.check=function(t,e,o,i){e++;var a=l.ComDataMgr.getInstance().getFreeTimeById(t).itemIds.split(c.GameConfig.splitNum);if(e==a.length&&(e=0),i==e)return(n=new p).goodId=o,n.index=e,n;var n,r=l.ComDataMgr.getInstance().getFreeTimeItemById(Number(a[e]));if(r.goodsId!=o)return(n=new p).goodId=r.goodsId,n.index=e,n;this.check(t,e,o,i)},e.prototype.changleFreeTimedata=function(t){var e=this.getDataById(t),o=l.ComDataMgr.getInstance().getFreeTimeById(t).itemIds.split(c.GameConfig.splitNum),i=e.index+1;i>=o.length&&(i=0);var a=Number(o[i]);e.adNum=0;var n=l.ComDataMgr.getInstance().getFreeTimeItemById(a);e.goodsId=n.goodsId,e.index=i,e.itemId=n.id,e.isTarget=!1,this.checkSame(),this.saveData()},e.prototype.addAdNum=function(t){var e=this.getDataById(t);return e.adNum++,this.saveData(),e},e.prototype.addAdNumByData=function(t){return t.adNum+=1,this.saveData(),t},e.prototype.initData=function(){},e.prototype.getDataById=function(t){for(var e=0;e<this.data.itemData.length;e++){var o=this.data.itemData[e];if(Number(o.id)==t)return o}return null},e}(s.BaseData);n.ComFreeTimeData=g,cc._RF.pop()},{}],ComGameData:[function(t,e,o){"use strict";cc._RF.push(e,"70993Lvi/tPZaTFdGTe3dve","ComGameData");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.ComGameData=void 0,i.ComGameData=function(){},cc._RF.pop()},{}],ComLottyData:[function(t,e,o){"use strict";cc._RF.push(e,"072f1QDdjdI2L/rsXr5r5yE","ComLottyData");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.ComLottyData=void 0;var s=a("BaseData"),c=a("EventMgr"),l=a("CacheUtils"),u=a("Utils"),p=a("Config"),d=a("CommonCfg"),g=a("ComDataMgr"),h=function(){this.lottyNum=0,this.dontMustIds=[],this.lottyTickNum=0},f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ecrypt=!1,e.gameKey=p.GameConfig.AppCacheName+"lotty",e.indexString="mapIndex",e.numString="mapNum",e}return r(e,t),e.prototype.getMapData=function(){if(null==this.lottyIndexs){var t=null;t=this.ecrypt?l.CacheUtils.getDataDecrypt(this.gameKey+this.indexString,this.pwd):l.CacheUtils.getData(this.gameKey+this.indexString),this.lottyIndexs=t?u.Utils.jsonToMap(t):new Map}null==this.lottyIdNumMap&&(t=null,t=this.ecrypt?l.CacheUtils.getDataDecrypt(this.gameKey+this.numString,this.pwd):l.CacheUtils.getData(this.gameKey+this.numString),this.lottyIdNumMap=t?u.Utils.jsonToMap(t):new Map)},e.prototype.initData=function(){this.getMapData(),c.EventMgr.getInstance().on(d.CommonEventName.callRefreshTick,this,this.refreshTickNum)},e.prototype.getLottyNum=function(){return this.data.lottyNum},e.prototype.addLottyNum=function(){this.data.lottyNum+=1,this.saveData()},e.prototype.createData=function(){this.data=new h,this.data.lottyNum=0,this.data.dontMustIds=[];var t=g.ComDataMgr.getInstance().getCommonParam(g.CommonParamType.defTickNum);return this.data.lottyTickNum=t,this.data},e.prototype.getGirldIdIndex=function(t){return this.lottyIndexs.has(t)?Number(this.lottyIndexs.get(t)):0},e.prototype.setGirldReward=function(t,e){this.lottyIndexs.set(t,e),this.saveMapData()},e.prototype.addLottyIdOutNum=function(t){var e=1;this.lottyIdNumMap.has(t)&&(e=this.lottyIdNumMap.get(t)+1),this.lottyIdNumMap.set(t,e),this.saveNumMapData()},e.prototype.getLottyIdOutNum=function(t){var e=1;return this.lottyIdNumMap.has(t)?e=this.lottyIdNumMap.get(t):this.lottyIdNumMap.set(t,e),e},e.prototype.getInDontMust=function(t){for(var e=0;e<this.data.dontMustIds.length;e++)if(this.data.dontMustIds[e]==t)return!0;return!1},e.prototype.addInDontMust=function(t){this.data.dontMustIds.push(t),this.saveData()},e.prototype.getLottyTickNum=function(){return this.data.lottyTickNum},e.prototype.refreshTickNum=function(t,e){if(e)this.data.lottyTickNum+=t;else{if(this.data.lottyTickNum<t)return!1;this.data.lottyTickNum-=t}c.EventMgr.getInstance().emit(d.CommonEventName.RefreshTickNum,t,e),this.saveData()},e.prototype.saveMapData=function(){var t=u.Utils.mapToJson(this.lottyIndexs);this.ecrypt?l.CacheUtils.saveDataEncrypt(this.gameKey+this.indexString,t,this.pwd):l.CacheUtils.saveData(this.gameKey+this.indexString,t)},e.prototype.saveNumMapData=function(){var t=u.Utils.mapToJson(this.lottyIdNumMap);this.ecrypt?l.CacheUtils.saveDataEncrypt(this.gameKey+this.numString,t,this.pwd):l.CacheUtils.saveData(this.gameKey+this.numString,t)},e}(s.BaseData);n.ComLottyData=f,cc._RF.pop()},{}],ComPlayerMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1cc6cpUCMFChLaWr6d16f4v","ComPlayerMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.ComPlayerMgr=void 0;var n=i("ComSignData"),r=function(){function t(){this.isPreload=!1}return t.getInstance=function(){return null==this.instance&&(this.instance=new t,this.instance.initData()),this.instance},t.prototype.initData=function(){},t.prototype.preload=function(t){this.isPreload||(this.isPreload=!0,this.signData=new n.ComSignData,this.signData.getData(),t&&t())},t.prototype.getSignData=function(){return this.signData},t}();a.ComPlayerMgr=r,cc._RF.pop()},{}],ComSignData:[function(t,e,o){"use strict";cc._RF.push(e,"0e2c3INcqdJXJe8AbOCzi36","ComSignData");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.ComSignData=void 0;var s=a("BaseData"),c=a("EventMgr"),l=a("TimeUtils"),u=a("Config"),p=a("CommonCfg"),d=function(){this.lastSignTime=-1,this.firstLoginTime=-1,this.firstLoginDayTime=-1},g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ecrypt=!1,e.gameKey=u.GameConfig.AppCacheName+"sign",e.curentDay=1,e.redshowing=!1,e.canSign=!1,e}return r(e,t),e.prototype.createData=function(){return this.data=new d,this.data.firstLoginTime=l.TimeUtils.GetTimeBySecond(),this.data.firstLoginDayTime=l.TimeUtils.dayStart(),this.data.alredyIdx=[],this.curentDay=1,this.saveData(),this.data},e.prototype.initData=function(t){if(!t){var e=l.TimeUtils.overDay(this.data.firstLoginDayTime);e<=0&&(e=0),this.curentDay=e+1}},e.prototype.getCurentDay=function(){return this.curentDay},e.prototype.getAlredySign=function(){return this.data.alredyIdx},e.prototype.checkIsSigned=function(t){for(var e=0;e<this.data.alredyIdx.length;e++)if(t==this.data.alredyIdx[e])return!0;return!1},e.prototype.checkReissue=function(t){return t<this.curentDay},e.prototype.checkCanSign=function(t){return t==this.curentDay},e.prototype.startSign=function(t){this.data.alredyIdx.push(t),this.data.lastSignTime=l.TimeUtils.GetTimeBySecond(),this.saveData(),this.checkShowRed()},e.prototype.checkTodyCanSign=function(){if(this.data.alredyIdx.length>=7)return!1;for(var t=1;t<this.curentDay;t++)if(!this.checkIsSigned(t))return!0;if(this.data.lastSignTime>10&&l.TimeUtils.compareIsToday(this.data.lastSignTime)){for(t=0;t<this.data.alredyIdx.length;t++)if(this.curentDay==this.data.alredyIdx[t])return!1;return!0}return this.checkCanSign(this.curentDay)},e.prototype.checkShowRed=function(){var t=this.checkTodyCanSign();t?this.redshowing||(this.redshowing=!0,c.EventMgr.getInstance().emit(p.CommonEventName.RefreshSignRed,!0)):this.redshowing&&(this.redshowing=!1,c.EventMgr.getInstance().emit(p.CommonEventName.RefreshSignRed,!1)),this.canSign=t},e.prototype.getCanSigned=function(){return this.canSign},e}(s.BaseData);n.ComSignData=g,cc._RF.pop()},{}],CommonBirge:[function(t,e,o){"use strict";cc._RF.push(e,"f7f63KH5RlOnaWwZRgGeTZR","CommonBirge");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.CommonBrige=void 0;var n=i("LogMgr"),r=function(){function t(){}return t.Instance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setGameBrige=function(t){this.gameIpml=t},t.prototype.subGoodsNum=function(t,e){if(this.gameIpml)return this.gameIpml.subGoodsNum(t,e);n.LogMgr.getInstance().error("\u6e38\u620f\u6ca1\u6709\u5b9e\u73b0\u63a5\u53e3\uff1a","subGoodsNum")},t.prototype.addReward=function(t,e,o){this.gameIpml?this.gameIpml.addComReward(t,e,o):n.LogMgr.getInstance().error("\u6e38\u620f\u6ca1\u6709\u5b9e\u73b0\u63a5\u53e3\uff1a","addReward")},t}();a.CommonBrige=r,cc._RF.pop()},{}],CommonCfg:[function(t,e,o){"use strict";cc._RF.push(e,"c018fs3KB5MWpARwmJ9VS9/","CommonCfg");var i,a,n=t,r=o;Object.defineProperty(r,"__esModule",{value:!0}),r.CommonCfg=r.CommonEventName=r.ComAudioCF=r.ComAudioId=r.ComUICF=r.ComUIID=void 0;var s,c,l=n("Appcfg");(function(t){t.UISign="com_UISign",t.UIReward="com_UIReward",t.UILotty="com_UILotty",t.UICollection="com_UICollection",t.UIFreeTime="com_UIFreeTime"})(s=r.ComUIID||(r.ComUIID={})),r.ComUICF=((i={})[s.UISign]={prefab:"ui/UISign",name:"UISign",showTop:!0,zIndex:l.OrderLayer.pop2,bundleName:"comprefabs"},i[s.UIReward]={prefab:"ui/UIReward",name:"UIReward",showTop:!0,zIndex:l.OrderLayer.pop2,bundleName:"comprefabs"},i[s.UILotty]={prefab:"ui/UILotty",name:"UILotty",showTop:!0,zIndex:l.OrderLayer.pop,bundleName:"comprefabs"},i[s.UICollection]={prefab:"ui/UICollection",name:"UICollection",showTop:!0,zIndex:l.OrderLayer.pop,bundleName:"comprefabs"},i[s.UIFreeTime]={prefab:"ui/UIFreeTime",name:"UIFreeTime",showTop:!0,zIndex:l.OrderLayer.pop,bundleName:"comprefabs"},i),function(t){t.btnClick="Sound_Click",t.success="common_success",t.reward="common_reward",t.lottyRun="common_lottyRun",t.lottyDown="common_lottyDown",t.ding="common_ding",t.lottyMusic="common_lottyMusic",t.goldEffect="common_goldEffect"}(c=r.ComAudioId||(r.ComAudioId={})),r.ComAudioCF=((a={})[c.btnClick]={path:"Sound_Click",bundle:"audio"},a[c.success]={path:"success",bundle:"comaudio"},a[c.reward]={path:"reward",bundle:"comaudio"},a[c.lottyRun]={path:"lottyRun",bundle:"comaudio"},a[c.lottyDown]={path:"lottyDown",bundle:"comaudio"},a[c.ding]={path:"ding",bundle:"comaudio"},a[c.lottyMusic]={path:"lotty_music",bundle:"comaudio"},a[c.goldEffect]={path:"goldEffect",bundle:"comaudio"},a),function(t){t.RefreshGold="CommonRefreshGold",t.RefreshSignRed="CommonRefreshSignRed",t.RefreshTickNum="CommonRefreshTickNum",t.callRefreshTick="CommoncallRefreshTick",t.RefreshCollection="CommonRefreshCollection",t.RefreshCollectionRed="CommonRefreshCollectionRed",t.AddCollection="AddCollection",t.GetReward="GetReward",t.GetRewardEnd="GetRewardEnd"}(r.CommonEventName||(r.CommonEventName={}));var u=function(){function t(){}return t.splitCount="|",t.splitNum=";",t.signBundle="comimgs",t}();r.CommonCfg=u,cc._RF.pop()},{}],CommonModel:[function(t,e,o){"use strict";cc._RF.push(e,"d6fa0r5epZCha9FIIqEM9Af","CommonModel");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.CommonModel=void 0;var n=i("AudioMgr"),r=i("UIMgr"),s=i("CommonBirge"),c=i("CommonCfg"),l=i("ComDataMgr"),u=i("ComPlayerMgr"),p=function(){function t(){}return t.Instance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initCommon=function(t){r.UIMgr.getInstance().addUICnf(c.ComUICF),n.AudioMgr.getInstance().addAdConf(c.ComAudioCF),l.ComDataMgr.getInstance().preload(function(){u.ComPlayerMgr.getInstance().preload(function(){t&&t()})})},t.prototype.setGameBrige=function(t){s.CommonBrige.Instance().setGameBrige(t)},t.prototype.addReward=function(t,e,o){void 0===o&&(o=!0),o&&u.ComPlayerMgr.getInstance().addCollection(t,e)},t}();a.CommonModel=p,cc._RF.pop()},{}],Config:[function(t,e,o){"use strict";cc._RF.push(e,"eebb8XKHHVJirIvdjyt6Bjr","Config");var i,a,n=t,r=o;Object.defineProperty(r,"__esModule",{value:!0}),r.EnumEffID=r.SkillBookClassData=r.DropGoodsData=r.SkillBookData=r.EnumParams=r.GeneralWindowType=r.EnumMonsterType=r.CountData=r.EnumObjectProp=r.WeightData=r.EnumGameState=r.GameConfig=r.EventName=r.AudioCF=r.AudioId=r.UICF=r.UIID=void 0;var s,c,l=n("Appcfg"),u=n("PlayerMgr");(function(t){t[t.UIHome=0]="UIHome",t[t.UITop=1]="UITop",t[t.UITips=2]="UITips",t[t.UITouch=3]="UITouch",t[t.UIGuide=4]="UIGuide",t[t.UICacheExample=5]="UICacheExample",t[t.UIRealName=6]="UIRealName",t[t.UIGameExist=7]="UIGameExist",t[t.UIGame=8]="UIGame",t[t.UIDrawCard=9]="UIDrawCard",t[t.UISettle=10]="UISettle",t[t.UIFetterInfo=11]="UIFetterInfo",t[t.UISkillBookInfo=12]="UISkillBookInfo",t[t.UISkillInfo=13]="UISkillInfo",t[t.UIEquip=14]="UIEquip",t[t.UIEquipInfo=15]="UIEquipInfo",t[t.UISellView=16]="UISellView",t[t.UIFastPass=17]="UIFastPass",t[t.UIShop=18]="UIShop",t[t.UISkillBook=19]="UISkillBook",t[t.UIMysticalShop=20]="UIMysticalShop",t[t.UISetting=21]="UISetting",t[t.UIPause=22]="UIPause",t[t.UIGeneralWindow=23]="UIGeneralWindow",t[t.UISalutation=24]="UISalutation",t[t.UIOnlineReward=25]="UIOnlineReward",t[t.UITask=26]="UITask",t[t.UINotBagIndex=27]="UINotBagIndex",t[t.UIPet=28]="UIPet",t[t.UIShareVideo=29]="UIShareVideo",t[t.UIExit=30]="UIExit",t[t.UIBecoming=31]="UIBecoming",t[t.UIMainTask=32]="UIMainTask",t[t.UIHomeNew=33]="UIHomeNew",t[t.UIEquipInfoNew=34]="UIEquipInfoNew",t[t.UIEquipComposite=35]="UIEquipComposite",t[t.UICompositeEnd=36]="UICompositeEnd",t[t.UIGeneralWindow1=37]="UIGeneralWindow1"})(s=r.UIID||(r.UIID={})),r.UICF=((i={})[s.UIHome]={prefab:"ui/UIHome",name:"UIHome",showTop:!0,showMult:!1,zIndex:l.OrderLayer.main0,bundleName:"prefabs"},i[s.UIHomeNew]={prefab:"ui/UIHomeNew",name:"UIHomeNew",showTop:!0,showMult:!1,zIndex:l.OrderLayer.main,bundleName:"prefabs"},i[s.UITop]={prefab:"ui/UITop",name:"UITop",showTop:!0,showMult:!1,zIndex:l.OrderLayer.top,bundleName:"prefabs"},i[s.UITips]={prefab:"ui/UITips",name:"UITips",showTop:!0,showMult:!0,zIndex:l.OrderLayer.tip,bundleName:"prefabs"},i[s.UITouch]={prefab:"ui/UITouch",name:"UITouch",showTop:!0,zIndex:l.OrderLayer.touch,bundleName:"prefabs"},i[s.UIGuide]={prefab:"ui/UIGuide",name:"UIGuide",showTop:!0,zIndex:l.OrderLayer.guide,bundleName:"prefabs"},i[s.UIRealName]={prefab:"ui/UIRealName",name:"UIRealName",showTop:!1,showMult:!1,zIndex:l.OrderLayer.pop,bundleName:"prefabs"},i[s.UIGameExist]={prefab:"UIGameExist",name:"UIGameExist",showTop:!1,showMult:!1,zIndex:l.OrderLayer.touch,bundleName:"prefabs"},i[s.UIExit]={prefab:"ui/UIExit",name:"UIExit",showTop:!1,showMult:!1,zIndex:l.OrderLayer.pop2,bundleName:"prefabs"},i[s.UIBecoming]={prefab:"ui/UIBecoming",name:"UIBecoming",showTop:!1,showMult:!1,zIndex:l.OrderLayer.pop2,bundleName:"prefabs"},i[s.UICacheExample]={prefab:"ui/UICacheExample",name:"UICacheExample",showTop:!1,showMult:!1,zIndex:l.OrderLayer.touch,bundleName:"prefabs"},i[s.UIGame]={prefab:"ui/UIGame",name:"UIGame",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main,bundleName:"prefabs"},i[s.UIDrawCard]={prefab:"ui/UIDrawCard",name:"UIDrawCard",showTop:!0,showMult:!0,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UISettle]={prefab:"ui/UISettle",name:"UISettle",showTop:!0,showMult:!1,zIndex:l.OrderLayer.main,bundleName:"prefabs"},i[s.UIFetterInfo]={prefab:"ui/UIFetterInfo",name:"UIFetterInfo",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UISkillBookInfo]={prefab:"ui/UISkillBookInfo",name:"UISkillBookInfo",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UISkillInfo]={prefab:"ui/UISkillInfo",name:"UISkillInfo",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UIEquip]={prefab:"ui/UIEquip",name:"UIEquip",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main,bundleName:"prefabs"},i[s.UIEquipInfo]={prefab:"ui/UIEquipInfo",name:"UIEquipInfo",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UISellView]={prefab:"ui/UISellView",name:"UISellView",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UIFastPass]={prefab:"ui/UIFastPass",name:"UIFastPass",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UIShop]={prefab:"ui/UIShop",name:"UIShop",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main,bundleName:"prefabs"},i[s.UISkillBook]={prefab:"ui/UISkillBook",name:"UISkillBook",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main,bundleName:"prefabs"},i[s.UISetting]={prefab:"ui/UISetting",name:"UISetting",showTop:!1,showMult:!1,zIndex:l.OrderLayer.pop2,bundleName:"prefabs"},i[s.UIPause]={prefab:"ui/UIPause",name:"UIPause",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main,bundleName:"prefabs"},i[s.UIGeneralWindow]={prefab:"ui/UIGeneralWindow",name:"UIGeneralWindow",showTop:!1,showMult:!1,zIndex:l.OrderLayer.pop2,bundleName:"prefabs"},i[s.UISalutation]={prefab:"ui/UISalutation",name:"UISalutation",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UIOnlineReward]={prefab:"ui/UIOnlineReward",name:"UIOnlineReward",showTop:!1,showMult:!1,zIndex:l.OrderLayer.pop2,bundleName:"prefabs"},i[s.UITask]={prefab:"ui/UITask",name:"UITask",showTop:!1,showMult:!1,zIndex:l.OrderLayer.pop2,bundleName:"prefabs"},i[s.UINotBagIndex]={prefab:"ui/UINotBagIndex",name:"UINotBagIndex",showTop:!1,showMult:!1,zIndex:l.OrderLayer.pop2,bundleName:"prefabs"},i[s.UIPet]={prefab:"ui/UIPet",name:"UIPet",showTop:!1,showMult:!1,zIndex:l.OrderLayer.pop2,bundleName:"prefabs"},i[s.UIShareVideo]={prefab:"ui/UIShareVideo",name:"UIShareVideo",showTop:!1,showMult:!1,zIndex:l.OrderLayer.pop2,bundleName:"prefabs"},i[s.UIMysticalShop]={prefab:"ui/UIMysticalShop",name:"UIMysticalShop",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UIMainTask]={prefab:"ui/UIMainTask",name:"UIMainTask",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UIEquipInfoNew]={prefab:"ui/UIEquipInfoNew",name:"UIEquipInfoNew",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UIEquipComposite]={prefab:"ui/UIEquipComposite",name:"UIEquipComposite",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UICompositeEnd]={prefab:"ui/UICompositeEnd",name:"UICompositeEnd",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i[s.UIGeneralWindow1]={prefab:"ui/UIGeneralWindow1",name:"UIGeneralWindow1",showTop:!1,showMult:!1,zIndex:l.OrderLayer.main1,bundleName:"prefabs"},i),function(t){t.btnClick="Sound_Click",t.BGM_Main="BGM_Main",t.BGM_Battle="BGM_Battle",t.Sound_Victory="Sound_Victory",t.Sound_Fail="Sound_Fail",t.BattleSound_Mobile="BattleSound_Mobile",t.BattleSound_Drop="BattleSound_Drop",t.BattleSound_Die="BattleSound_Die",t.BattleSound_MonsterDeath="BattleSound_MonsterDeath",t.BattleSound_PickUpThings="BattleSound_PickUpThings",t.BattleSound_BossWarn="BattleSound_BossWarn",t.BattleSound_skills1="BattleSound_skills1",t.BattleSound_skills2="BattleSound_skills2",t.BattleSound_skills3="BattleSound_skills3",t.BattleSound_skills4="BattleSound_skills4",t.BattleSound_skills5="BattleSound_skills5",t.BattleSound_skills6="BattleSound_skills6",t.BattleSound_skills7="BattleSound_skills7",t.BattleSound_skills8="BattleSound_skills8",t.BattleSound_skills9="BattleSound_skills9",t.BattleSound_Attack01="BattleSound_Attack01",t.BattleSound_Attack02="BattleSound_Attack02",t.BattleSound_Attack03="BattleSound_Attack03",t.BattleSound_Attack04="BattleSound_Attack04",t.Sound_WearEquip="Sound_WearEquip",t.Sound_LuckDraw="Sound_LuckDraw",t.Sound_SellEquip="Sound_SellEquip",t.Sound_Upgrade="Sound_Upgrade"}(c=r.AudioId||(r.AudioId={})),r.AudioCF=((a={})[c.btnClick]={path:"Sound_Click",bundle:"audio"},a[c.BGM_Main]={path:"BGM_Main",bundle:"audio"},a[c.BGM_Battle]={path:"BGM_Battle",bundle:"audio"},a[c.Sound_Victory]={path:"Sound_Victory",bundle:"audio"},a[c.Sound_Fail]={path:"Sound_Fail",bundle:"audio"},a[c.BattleSound_Mobile]={path:"BattleSound_Mobile",bundle:"audio"},a[c.BattleSound_Drop]={path:"BattleSound_Drop",bundle:"audio"},a[c.BattleSound_Die]={path:"BattleSound_Die",bundle:"audio"},a[c.BattleSound_MonsterDeath]={path:"BattleSound_MonsterDeath",bundle:"audio"},a[c.BattleSound_PickUpThings]={path:"BattleSound_PickUpThings",bundle:"audio"},a[c.BattleSound_BossWarn]={path:"BattleSound_BossWarn",bundle:"audio"},a[c.BattleSound_skills1]={path:"BattleSound_skills1",bundle:"audio"},a[c.BattleSound_skills2]={path:"BattleSound_skills2",bundle:"audio"},a[c.BattleSound_skills3]={path:"BattleSound_skills3",bundle:"audio"},a[c.BattleSound_skills4]={path:"BattleSound_skills4",bundle:"audio"},a[c.BattleSound_skills5]={path:"BattleSound_skills5",bundle:"audio"},a[c.BattleSound_skills6]={path:"BattleSound_skills6",bundle:"audio"},a[c.BattleSound_skills7]={path:"BattleSound_skills7",bundle:"audio"},a[c.BattleSound_skills8]={path:"BattleSound_skills8",bundle:"audio"},a[c.BattleSound_skills9]={path:"BattleSound_skills9",bundle:"audio"},a[c.BattleSound_Attack01]={path:"BattleSound_Attack01",bundle:"audio"},a[c.BattleSound_Attack02]={path:"BattleSound_Attack02",bundle:"audio"},a[c.BattleSound_Attack03]={path:"BattleSound_Attack03",bundle:"audio"},a[c.BattleSound_Attack04]={path:"BattleSound_Attack04",bundle:"audio"},a[c.Sound_WearEquip]={path:"Sound_WearEquip",bundle:"audio"},a[c.Sound_LuckDraw]={path:"Sound_LuckDraw",bundle:"audio"},a[c.Sound_SellEquip]={path:"Sound_SellEquip",bundle:"audio"},a[c.Sound_Upgrade]={path:"Sound_Upgrade",bundle:"audio"},a),function(t){t.RefreshPower="RefreshPower",t.RefreshGold="RefreshGold",t.RefreshInGot="RefreshInGot",t.showText="showText",t.RefreshLevel="RefreshLevel",t.RefreshMonsterCount="RefreshMonsterCount",t.ShowUITop="ShowUITop",t.AddSkillBook="AddSkillBook",t.RefreshFetterShow="RefreshFetterShow",t.RefreshLight="RefreshLight",t.RefreshSkillBookShow="RefreshSkillBookShow",t.ControlDrawCardView="ControlDrawCardView",t.ControlBackSelectSkill="ControlBackSelectSkill",t.GameLayerTouch="GameLayerTouch",t.RefreshUISkillBookShow="RefreshUISkillBookShow",t.RefreshOnlineTime="RefreshOnlineTime",t.RefreshTaskList="RefreshTaskList",t.RefreshRedDot="RefreshRedDot",t.RefreshPowerTime="RefreshPowerTime",t.GameGuideShow="GameGuideShow",t.RefreshPetViewTime="RefreshPetViewTime",t.RefreshSalutationRedDot="RefreshSalutationRedDot",t.RefreshShopRedDot="RefreshShopRedDot",t.RefreshGoldNumAndShow="RefreshGoldNumAndShow",t.RefreshInGotNumAndShow="RefreshInGotNumAndShow",t.SkillBookGuideShow="SkillBookGuideShow",t.RefreshEquipViewInfo="RefreshEquipViewInfo",t.RefreshBagIndexCount="RefreshBagIndexCount",t.WearEquip="WearEquip",t.UnloadEquip="UnloadEquip",t.SellEquip="SellEquip",t.ReplaceEquip="ReplaceEquip",t.SellQuickEquip="SellQuickEquip",t.RefreshStrengthenLv="RefreshStrengthenLv",t.UnlockEquip="UnlockEquip",t.EquipGuideShow="EquipGuideShow",t.RefreshSalutation="RefreshSalutation",t.GoGame="GoGame",t.RefreshMysticalShopTime="RefreshMysticalShopTime",t.RefreshMainTask="RefreshMainTask",t.RefreshMainTaskDec="RefreshMainTaskDec",t.RefreshMainTaskFinished="RefreshMainTaskFinished",t.OpenRecoverTrudge="OpenRecoverTrudge",t.PlaceCompositeEquip="PlaceCompositeEquip"}(r.EventName||(r.EventName={}));var p=function(){function t(){}return t.AppCacheName="KaiJuYiBaDao:",t.splitCount="|",t.splitNum=";",t.PreBundle=["iconImg"],t.ecrypt=!1,t.abTestType=u.ABTestType.ABD_Test,t}();r.GameConfig=p,function(t){t[t.GamePrePare=0]="GamePrePare",t[t.GameDoing=1]="GameDoing",t[t.GamePause=2]="GamePause",t[t.GameBuffer=3]="GameBuffer",t[t.GameOver=4]="GameOver"}(r.EnumGameState||(r.EnumGameState={})),r.WeightData=function(){},function(t){t[t.SkillProp=0]="SkillProp",t[t.AtkProp=1]="AtkProp",t[t.HpProp=2]="HpProp",t[t.AtkSpeed=3]="AtkSpeed",t[t.AtkCrazyProp=4]="AtkCrazyProp",t[t.AtkCrazyHurtProp=5]="AtkCrazyHurtProp",t[t.SubHurtProp=6]="SubHurtProp",t[t.DodgeHurtProbProp=7]="DodgeHurtProbProp",t[t.AtkProp_value=8]="AtkProp_value",t[t.HpProp_value=9]="HpProp_value"}(r.EnumObjectProp||(r.EnumObjectProp={})),r.CountData=function(){},function(t){t[t.NormalMonster=1]="NormalMonster",t[t.EliteMonster=2]="EliteMonster",t[t.BossMonster=3]="BossMonster"}(r.EnumMonsterType||(r.EnumMonsterType={})),function(t){t[t.PowerWindow=1]="PowerWindow",t[t.GoldWindow=2]="GoldWindow",t[t.InGotWindow=3]="InGotWindow"}(r.GeneralWindowType||(r.GeneralWindowType={})),function(t){t[t.StartGold=1]="StartGold",t[t.StartIngot=2]="StartIngot",t[t.StartPower=3]="StartPower",t[t.LimitPower=4]="LimitPower",t[t.AddPowerTime=5]="AddPowerTime",t[t.LevelCostPowerNum=6]="LevelCostPowerNum",t[t.OnHookMaxTime=7]="OnHookMaxTime",t[t.SkillBookRefreshCount=8]="SkillBookRefreshCount",t[t.SkillBookRefreshCountForVideo=9]="SkillBookRefreshCountForVideo",t[t.AddSkillBookRefreshCount=10]="AddSkillBookRefreshCount",t[t.TrudgeMaxValue=11]="TrudgeMaxValue",t[t.TrudgeCostValue=12]="TrudgeCostValue",t[t.TrudgeRecoverValue=13]="TrudgeRecoverValue",t[t.TrudgeSpeedValue=14]="TrudgeSpeedValue"}(r.EnumParams||(r.EnumParams={})),r.SkillBookData=function(){},r.DropGoodsData=function(){},r.SkillBookClassData=function(){this.NClass=[],this.RClass=[],this.SRClass=[],this.SSRClass=[],this.SSSRClass=[]},function(t){t[t.EffGoodEquip1=1]="EffGoodEquip1",t[t.EffGoodEquip2=2]="EffGoodEquip2",t[t.EffGoodEquip3=3]="EffGoodEquip3",t[t.EffPropUp=4]="EffPropUp",t[t.EffTaskGet=5]="EffTaskGet",t[t.EffUpLv=6]="EffUpLv"}(r.EnumEffID||(r.EnumEffID={})),cc._RF.pop()},{}],DataMgr:[function(t,e,o){"use strict";cc._RF.push(e,"a3d71eFHL9IW7ks0mgrQcIp","DataMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.DataMgr=void 0;var n=i("Appcfg"),r=i("EventMgr"),s=i("ResourceMgr"),c=function(){function t(){this.bSheetNames=["SecFactorCfg","EliteFactorCfg","BossFactorCfg","EquipCfg","EquipStarCfg"]}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.preload=function(){var t=this;s.ResourceMgr.getInstance().loadRes("configs","GameJsonCfg",cc.JsonAsset,function(e){t.data=e.json,e.decRef(),r.EventMgr.getInstance().emit(n.BaseEventName.Loading,n.LoadingProcess.ExcelCfg)})},t.prototype.reloadConfig=function(t,e){var o=this;if("A"!=t&&"C"!=t)if(this.bSheetNames.length<=0)e&&e();else{var i="configsB";"B"==t?i="configsB":"D"==t&&(i="configsD"),s.ResourceMgr.getInstance().loadRes(i,"GameJsonCfg",cc.JsonAsset,function(t){for(var i=t.json,a=0;a<o.bSheetNames.length;a++){var n=o.bSheetNames[a];i[n]&&(o.data[n]=i[n])}t.decRef(),e&&e()})}else e&&e()},t.prototype.getTextCfgs=function(){return this.data&&this.data.TextCfg?this.data.TextCfg:[]},t.prototype.getText=function(t){var e=this.getTextCfgs();if(e)for(var o=0;o<e.length;o++){var i=e[o];if(i.zh==t)return i}return null},t.prototype.T=function(e,o){if(o==n.LanguageType.zh)return e;var i=t.getInstance().getText(e);return i&&i[o]?i[o]:e},t.prototype.getPlayerBaseProp=function(){return this.data.RoleBasePropCfg||console.log("\u8bf7\u914d\u7f6e\u73a9\u5bb6\u5c5e\u6027\u8868\uff01\uff01\uff01"),this.data.RoleBasePropCfg[0]},t.prototype.getAllGoodsCfg=function(){return this.data.GoodsCfg||console.log("\u8bf7\u914d\u7f6e\u7269\u54c1\u8868\uff01\uff01\uff01"),this.data.GoodsCfg},t.prototype.getGoodsCfg=function(t){var e=this.getAllGoodsCfg();return e[t-1]||console.log("\u7b2c"+t+"\u4e2a\u7269\u54c1\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e[t-1]},t.prototype.getAllSecCfg=function(){return this.data.SecCfg||console.log("\u8bf7\u914d\u7f6e\u7ae0\u8282\u8868\uff01\uff01\uff01"),this.data.SecCfg},t.prototype.getSecCfg=function(t){var e=this.getAllSecCfg();return e?e[t-1]:this.data.SecCfg[0]},t.prototype.getAllLevelCfg=function(t){return this.data["Sec"+t+"Cfg"]?this.data["Sec"+t+"Cfg"]:(console.log("\u5f53\u524d\u7ae0\u8282\u4e0d\u5b58\u5728\uff0c\u8bf7\u914d\u7f6e\u7ae0\u8282\u8868\uff01\uff01\uff01"),this.data.Sec1Cfg)},t.prototype.getLevelCfg=function(t,e){return this.getAllLevelCfg(t)[e-1]?this.data["Sec"+t+"Cfg"][e-1]:(console.log("\u7b2c"+t+"\u7ae0\u8282\u7b2c"+e+"\u5173\u4e0d\u5b58\u5728"),this.data.Sec1Cfg[0])},t.prototype.getAllMonsterProbCfg=function(){return this.data.MonsterProCfg||console.log("\u5f53\u524d\u602a\u7269\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),this.data.MonsterProCfg},t.prototype.getMonsterProbCfg=function(t){var e=this.getAllMonsterProbCfg();return e[t-1]?e[t-1]:(console.log("monsterId:",t),console.log("\u7b2c"+t+"\u602a\u7269\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e[0])},t.prototype.getSkillBookCfg=function(){return this.data.SkillBookCfg||console.log("\u6280\u80fd\u4e66\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),this.data.SkillBookCfg},t.prototype.getSkillBook=function(t){var e=this.getSkillBookCfg();return e[t-1]?e[t-1]:e[0]},t.prototype.getSkillQualityCfg=function(){return this.data.SkillQualityCfg||console.log("\u6280\u80fd\u54c1\u8d28\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),this.data.SkillQualityCfg},t.prototype.getSkillQuality=function(t){var e=this.getSkillQualityCfg();return e[t-1]?e[t-1]:e[0]},t.prototype.getFetterCfg=function(){return this.data.FetterCfg||console.log("\u7f81\u7eca\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),this.data.FetterCfg},t.prototype.getFetter=function(t){var e=this.getFetterCfg();return e[t-1]?e[t-1]:e[0]},t.prototype.getSkillBookProbCfg=function(){return this.data.SkillBookProbCfg||console.log("\u6280\u80fd\u4e66\u6982\u7387\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),this.data.SkillBookProbCfg},t.prototype.getSkillBookProb=function(t){var e=this.getSkillBookProbCfg();return e[t-1]?e[t-1]:e[0]},t.prototype.getAllSkillBookLevelCfg=function(){return this.data.SkillBookLevelCfg||console.log("\u6280\u80fd\u4e66\u5347\u7ea7\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),this.data.SkillBookLevelCfg},t.prototype.getSkillBookLevelCfg=function(t,e){var o=this.getSkillBook(t);e>o.MaxLevel&&console.log("\u5347\u7ea7\u8d85\u51fa\u6700\u5927\u7b49\u7ea7\uff0c\u62a5\u9519\uff01\uff01\uff01");var i=this.getAllSkillBookLevelCfg(),a=o.StartLevelID+e;return i[a-1]?i[a-1]:(console.log("\u5347\u7ea7"+(a-1)+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),i[0])},t.prototype.getSkillBookLevelCfg1=function(t,e){var o=this.getAllSkillBookLevelCfg(),i=t+e-1;return o[i-1]?o[i-1]:(console.log("\u5347\u7ea7"+(i-1)+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),o[0])},t.prototype.getSkillCfg=function(){return this.data.SkillCfg||console.log("\u6280\u80fd\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),this.data.SkillCfg},t.prototype.getSkill=function(t){var e=this.getSkillCfg();return e[t-1]?e[t-1]:e[0]},t.prototype.getSecFactorCfg=function(t){var e=this.data.SecFactorCfg;switch(t){case 1:this.data.SecFactorCfg||console.log("\u666e\u901a\u602a\u7cfb\u6570\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e=this.data.SecFactorCfg;break;case 2:this.data.EliteFactorCfg||console.log("\u7cbe\u82f1\u602a\u7cfb\u6570\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e=this.data.EliteFactorCfg;break;case 3:this.data.BossFactorCfg||console.log("Boss\u7cfb\u6570\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e=this.data.BossFactorCfg;break;default:this.data.SecFactorCfg||console.log("\u666e\u901a\u602a\u7cfb\u6570\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e=this.data.SecFactorCfg}return e},t.prototype.getSecFactor=function(t,e){var o=this.getSecFactorCfg(t);return o[e-1]?o[e-1]:(console.log("\u5173\u5361\u7cfb\u6570\u5217\u8868\u4e0d\u5b58\u5728\uff01\uff01\uff01"),o[0])},t.prototype.getSecFactorForLevelToAtk=function(t,e,o){var i=this.getSecFactor(t,o);return i["atkSec"+e]?i["atkSec"+e]:(console.log("\u5f53\u524d\u7ae0\u8282\u4e0d\u5b58\u5728\uff01\uff01\uff01"),1)},t.prototype.getSecFactorForLevelToHp=function(t,e,o){var i=this.getSecFactor(t,o);return i["hpSec"+e]?i["hpSec"+e]:(console.log("\u5f53\u524d\u7ae0\u8282\u4e0d\u5b58\u5728\uff01\uff01\uff01"),1)},t.prototype.getAllEquipCfg=function(){return this.data.EquipCfg||console.log("\u8bf7\u914d\u7f6e\u88c5\u5907\u8868"),this.data.EquipCfg},t.prototype.getEquipCfg=function(t){var e=this.getAllEquipCfg();return e[t-1]?e[t-1]:(console.log("\u88c5\u5907"+t+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e[0])},t.prototype.getAllEquipStrengthenCfg=function(){return this.data.EquipStrengthenCfg||console.log("\u8bf7\u914d\u7f6e\u88c5\u5907\u5f3a\u5316\u8868"),this.data.EquipStrengthenCfg},t.prototype.getEquipStrengthenCfg=function(t,e){var o=this.getEquipCfg(t);e>o.strengthenMaxLv&&console.log("\u5f3a\u5316\u8d85\u51fa\u6700\u5927\u7b49\u7ea7\uff0c\u62a5\u9519\uff01\uff01\uff01");var i=this.getAllEquipStrengthenCfg(),a=o.strengthenStartId+e;return i[a-1]?i[a-1]:(console.log("\u5f3a\u5316"+(a-1)+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),i[0])},t.prototype.getEquipStrengthenCfg1=function(t,e){var o=this.getAllEquipStrengthenCfg(),i=t+e;return o[i-1]?o[i-1]:(console.log("\u5f3a\u5316"+(i-1)+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),o[0])},t.prototype.getAllEquipStarCfg=function(){return this.data.EquipStarCfg||console.log("\u8bf7\u914d\u7f6e\u88c5\u5907\u5347\u661f\u8868"),this.data.EquipStarCfg},t.prototype.getEquipStarCfg=function(t,e){var o=e;o>5?console.log("\u5347\u661f\u8d85\u51fa\u6700\u5927\u7b49\u7ea7\uff0c\u62a5\u9519\uff01\uff01\uff01"):o||(o=0);var i=this.getEquipCfg(t),a=this.getAllEquipStarCfg(),n=6*i.id-6+1+o;return a[n-1]?a[n-1]:(console.log("\u5347\u661f"+(n-1)+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),a[0])},t.prototype.getEquipStarCfg1=function(t,e){var o=e;o>5?console.log("\u5347\u661f\u8d85\u51fa\u6700\u5927\u7b49\u7ea7\uff0c\u62a5\u9519\uff01\uff01\uff01"):o||(o=0);var i=this.getAllEquipStarCfg(),a=t+e;return i[a-1]?i[a-1]:(console.log("\u5347\u661f"+(a-1)+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),i[0])},t.prototype.getAllEquipSuitCfg=function(){return this.data.EquipSuitCfg||console.log("\u8bf7\u914d\u7f6e\u88c5\u5907\u5957\u88c5\u8868"),this.data.EquipSuitCfg},t.prototype.getEquipSuitCfg=function(t){var e=this.getAllEquipSuitCfg();return e[t-1]?e[t-1]:(console.log("\u5957\u88c5"+t+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e[0])},t.prototype.getAllShopCfg=function(){return this.data.DrawCardCfg||console.log("\u8bf7\u914d\u7f6e\u5546\u54c1\u8868"),this.data.DrawCardCfg},t.prototype.getShopCfg=function(t){var e=this.getAllShopCfg();return e[t-1]?e[t-1]:(console.log("\u5546\u54c1"+t+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e[0])},t.prototype.getAllRewardPoolCfg=function(){return this.data.DrawCardLibraryCfg||console.log("\u8bf7\u914d\u7f6e\u5956\u52b1\u6c60\u8868"),this.data.DrawCardLibraryCfg},t.prototype.getRewardPoolCfg=function(t){var e=this.getAllRewardPoolCfg();return e[t-1]?e[t-1]:(console.log("\u5956\u52b1\u6c60"+t+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e[0])},t.prototype.getResourceAcquisitionCfg=function(){return this.data.ResourceAcquisitionCfg||console.log("\u8bf7\u914d\u7f6e\u8d44\u6e90\u83b7\u53d6\u8868"),this.data.ResourceAcquisitionCfg},t.prototype.getGoodsCountForTypeAndSec=function(t,e){for(var o=this.getResourceAcquisitionCfg(),i=0;i<o.length;i++)if(t==o[i].Type&&e==o[i].Parameter)return o[i].GetNum;return console.log("\u6ca1\u6709\u5f53\u524d\u914d\u7f6e"),100},t.prototype.getGoodsCountForType=function(t){for(var e=this.getResourceAcquisitionCfg(),o=0;o<e.length;o++)if(t==e[o].Type)return e[o].GetNum;return console.log("\u6ca1\u6709\u5f53\u524d\u914d\u7f6e"),100},t.prototype.getSalutationCfg=function(){return this.data.TitleCfg||console.log("\u8bf7\u914d\u7f6e\u79f0\u53f7\u8868"),this.data.TitleCfg},t.prototype.getSalutation=function(t){var e=this.getSalutationCfg();return e[t-1]?e[t-1]:(console.log("\u79f0\u53f7"+t+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e[0])},t.prototype.getTaskCfg=function(){return this.data.TaskCfg||console.log("\u8bf7\u914d\u7f6e\u4efb\u52a1\u8868"),this.data.TaskCfg},t.prototype.getTaskCfgForId=function(t,e){for(var o=this.getTaskCfg(),i=0;i<o.length;i++)if(o[i].ID==t&&o[i].Type==e)return o[i];return null},t.prototype.getParamsCfg=function(){return this.data.ParamsCfg||console.log("\u8bf7\u914d\u7f6e\u57fa\u7840\u53c2\u6570\u8868"),this.data.ParamsCfg},t.prototype.getParamsCfgForSingle=function(t){return this.data.ParamsCfg[t-1]||console.log("\u53c2\u6570"+t+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),this.data.ParamsCfg[t-1]},t.prototype.getAllPetsCfg=function(){return this.data.PetsCfg||console.log("\u8bf7\u914d\u7f6e\u5ba0\u7269\u8868"),this.data.PetsCfg},t.prototype.getPetsCfg=function(t){void 0===t&&(t=1);var e=this.getAllPetsCfg();return e[t-1]?e[t-1]:(console.log("\u5ba0\u7269"+t+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e[0])},t.prototype.getAllEffectCfg=function(){return this.data.EffectCfg||console.log("\u8bf7\u914d\u7f6e\u7279\u6548\u8868"),this.data.EffectCfg},t.prototype.getEffectCfg=function(t){var e=this.getAllEffectCfg();return e[t-1]?e[t-1]:(console.log("\u7279\u6548"+t+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e[0])},t.prototype.getMysticalShopCfg=function(){return this.data.MysteriousShop||console.log("\u8bf7\u914d\u7f6e\u795e\u79d8\u5546\u5e97\u8868"),this.data.MysteriousShop},t.prototype.getMysticalShop=function(t){var e=this.getMysticalShopCfg();return e[t-1]?e[t-1]:(console.log("\u795e\u79d8id"+t+"\u4e0d\u5b58\u5728\uff01\uff01\uff01"),e[0])},t.prototype.getMissionCfg=function(){return this.data.MainTaskCfg||console.error("\u8bf7\u914d\u7f6eTitleCfg\u8868"),this.data.MainTaskCfg},t.prototype.getMission=function(t){var e=this.getMissionCfg();return e[t-1]?e[t-1]:null},t}();a.DataMgr=c,cc._RF.pop()},{}],EditorManager:[function(t,e,o){"use strict";cc._RF.push(e,"e84c9h26/pDL5ehMU5LlXD7","EditorManager");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.EditorManager=void 0;var a=function(){function t(){this.infostr=[]}return t.prototype.showBlockAd=function(){},t.prototype.hideBlockAd=function(){},t.prototype.getCode=function(){},t.prototype.pauseRecord=function(){},t.prototype.resumeRecord=function(){},t.prototype.verifyKey=function(){},t.prototype.toAppStore=function(){},t.prototype.openNotify=function(){},t.prototype.shareImg=function(){},t.prototype.showWxNativeAD=function(){},t.prototype.hideWxNativeAD=function(){},t.prototype.hasVerify=function(){return!1},t.prototype.canShare=function(){return!1},t.prototype.youmengTrack=function(){},t.prototype.initSdk=function(t,e){e&&e()},t.prototype.login=function(t,e){e&&e()},t.prototype.pay=function(t,e){e&&e()},t.prototype.share=function(t,e){e&&e()},t.prototype.showBanner=function(t,e){e&&e()},t.prototype.hideBanner=function(t,e){e&&e()},t.prototype.showInsertAd=function(t,e){e&&e()},t.prototype.showVideoAd=function(t,e){e&&e()},t.prototype.otherFun=function(t,e){e&&e()},t.prototype.shark=function(t,e){e&&e()},t.prototype.recordVideo=function(t,e){e&&e()},t.prototype.shareVideo=function(t,e){e&&e()},t.prototype.stopRecorderManager=function(t,e){e&&e()},t.prototype.setLanguage=function(t,e){return e&&e(),"zh"},t}();i.EditorManager=a,cc._RF.pop()},{}],EffectMgr:[function(t,e,o){"use strict";cc._RF.push(e,"aae7eHiIrFCo5ETBFbubB5c","EffectMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("PoolMgr"),r=i("ResourceMgr"),s=i("Utils"),c=i("DataMgr"),l=function(){function t(){}return t.playEff=function(t,e,o,i,a,s,c,l,u){var p=this;if(void 0===c&&(c=0),void 0===l&&(l=0),void 0===u&&(u=0),i){var d=n.PoolMgr.getInstance().getNode(o);d?(cc.isValid(a)&&(d.parent=a),s&&d.setPosition(cc.v2(s.x,s.y+c)),d.zIndex=u,d.getComponent(sp.Skeleton).setAnimation(0,i,!1),d.getComponent(sp.Skeleton).setCompleteListener(function(){p.recycleNodeEff(d,o)})):(console.log("\u52a8\u6001\u52a0\u8f7d"),r.ResourceMgr.getInstance().loadRes(t,e,cc.Prefab,function(t){d=cc.instantiate(t),cc.isValid(a)&&(d.parent=a),s&&d.setPosition(cc.v2(s.x,s.y+c)),d.zIndex=u,d.getComponent(sp.Skeleton).setCompleteListener(function(){p.recycleNodeEff(d,o)})}))}},t.playEffectForEffId=function(t,e,o,i,a,l,u,p,d){var g=this;void 0===o&&(o=null),void 0===i&&(i=0),void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=1),void 0===p&&(p=1),void 0===d&&(d=function(){});var h=c.DataMgr.getInstance().getEffectCfg(t),f=n.PoolMgr.getInstance().getNode(h.effName);if(f){f.parent=e,f.zIndex=l;var y=cc.v2();cc.isValid(o)&&(y=s.Utils.posTransform(o.parent,o.getPosition(),e)),f.setPosition(cc.v2(y.x+i,y.y+a)),this.isDestroy(f,h)}else r.ResourceMgr.getInstance().loadRes(h.bundleName,h.pathName,cc.Prefab,function(t){(f=cc.instantiate(t)).parent=e,f.zIndex=l;var n=cc.v2();cc.isValid(o)&&(n=s.Utils.posTransform(o.parent,o.getPosition(),e)),f.setPosition(cc.v2(n.x+i,n.y+a)),g.isDestroy(f,h)})},t.isDestroy=function(t,e){var o=this;switch(e.type){case 1:var i=1;1==e.isLoop?i=1e4:e.playCount&&(i=e.playCount);var a=t.getComponent(cc.Animation);a.play().repeatCount=i,a.on(cc.Animation.EventType.FINISHED,function(){o.recycleNodeEff(t,t.name)});break;case 2:var n=!1;1==e.isLoop&&(n=!0);var r=t.getComponent(sp.Skeleton);r.setAnimation(0,r.defaultAnimation,n),r.setCompleteListener(function(){o.recycleNodeEff(t,t.name)});break;default:if(1==e.isLoop)break;var s=1;e.playTime&&(s=e.playTime),cc.tween(t).delay(s).call(function(){o.recycleNodeEff(t,t.name)}).start()}},t.recycleNodeEff=function(t,e){cc.isValid(t)&&n.PoolMgr.getInstance().freeNode(e,t)},t}();a.default=l,cc._RF.pop()},{}],EquipMgr:[function(t,e,o){"use strict";cc._RF.push(e,"84c9dMl5y1J5rBvj+RBOooX","EquipMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.SuitData=a.EnumEquipInfo=void 0;var n=i("EventMgr"),r=i("UIMgr"),s=i("Utils"),c=i("Main"),l=i("Config"),u=i("DataMgr"),p=i("EffectMgr"),d=i("PlayerMgr"),g=i("RoleMgr"),h=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getAllSuitList=function(){for(var e=[],o=u.DataMgr.getInstance().getAllEquipSuitCfg(),i=0;i<o.length;i++){var a={id:o[i].id,count:0};e.push(a)}var n=t.getInstance().getWearEquipList();for(i=0;i<n.length;i++)for(var r=u.DataMgr.getInstance().getEquipCfg(n[i].id),s=0;s<e.length;s++)if(r.suitId==e[s].id){e[s].count++;break}return e},t.prototype.getWearEquipList=function(){return d.PlayerMgr.getInstance().geUserData().getWearEquipList()},t.prototype.getWearEquipData=function(t){for(var e=d.PlayerMgr.getInstance().geUserData().getWearEquipList(),o=0;o<e.length;o++)if(e[o].type==t)return e[o];return null},t.prototype.getOwnedEquipList=function(t){void 0===t&&(t=1);for(var e=[],o=d.PlayerMgr.getInstance().geUserData().getOwnedEquipList(),i=0;i<o.length;i++)o[i].sort(function(t,e){return e.id-t.id}),o[i].sort(function(t,e){return e.quality-t.quality});for(i=0;i<o.length;i++)for(var a=0;a<o[i].length;a++)e.push(o[i][a]);return 1==t?e.sort(function(t,e){return e.quality-t.quality}):2==t&&e.sort(function(t,e){return t.type-e.type}),e},t.prototype.getOwmedEquipForEquipType=function(t){var e=t-1;return(e<0||e>5)&&(e=0),d.PlayerMgr.getInstance().geUserData().getOwnedEquipList()[e]},t.prototype.getOwmedEquipForQualityId=function(t){var e=d.PlayerMgr.getInstance().geUserData().getOwnedEquipList(),o=[];return e.forEach(function(e){var i=e.filter(function(e){return e.quality==t});o=o.concat(i)}),o},t.prototype.getOwnedEquipCount=function(){for(var t=0,e=d.PlayerMgr.getInstance().geUserData().getOwnedEquipList(),o=0;o<e.length;o++)t+=e[o].length;return t},t.prototype.isExistEquipForType=function(t){return d.PlayerMgr.getInstance().geUserData().isExistEquip(t)},t.prototype.addManyEquip=function(t){d.PlayerMgr.getInstance().geUserData().addManyEquip(t)},t.prototype.addEquip=function(t){t&&(this.getOwnedEquipCount()>=134?console.log("\u88c5\u5907\u4ed3\u5e93\u5feb\u6ee1\u4e86\uff0c\u8bf7\u53ca\u65f6\u6e05\u7406\u4ed3\u5e93\uff01\uff01\uff01"):this.getOwnedEquipCount()>=144?console.log("\u88c5\u5907\u4ed3\u5e93\u5df2\u6ee1\u4e86\uff0c\u8bf7\u53ca\u65f6\u6e05\u7406\u4ed3\u5e93\uff01\uff01\uff01"):d.PlayerMgr.getInstance().geUserData().addEquip(t))},t.prototype.abandonEquip=function(t){t&&d.PlayerMgr.getInstance().geUserData().abandonEquip(t)},t.prototype.replaceEquip=function(t,e,o){if(e&&o){d.PlayerMgr.getInstance().geUserData().replaceEquip(e,o),d.PlayerMgr.getInstance().geUserData().refreshWearEquipQuality(o.type,o.quality),g.default.getInstance().getPropForAllEquip(!0),n.EventMgr.getInstance().emit(l.EventName.ReplaceEquip,t,e,o);var i=u.DataMgr.getInstance().getEquipCfg(o.id);console.log("\u5f53\u524d\u88c5\u5907id\uff1a",o.id),1==i.isSkin?c.default.instance.rolePlay(o.id):4==i.equipType&&c.default.instance.rolePlay_reset(o.id)}},t.prototype.wearEquip=function(t,e){if(e){d.PlayerMgr.getInstance().geUserData().wearEquip(e),d.PlayerMgr.getInstance().geUserData().refreshWearEquipQuality(e.type,e.quality),g.default.getInstance().getPropForAllEquip(!0),n.EventMgr.getInstance().emit(l.EventName.WearEquip,t,e);var o=u.DataMgr.getInstance().getEquipCfg(e.id);console.log("\u5f53\u524d\u88c5\u5907id\uff1a",e.id),1==o.isSkin&&c.default.instance.rolePlay(e.id)}},t.prototype.unloadEquip=function(t){if(t){d.PlayerMgr.getInstance().geUserData().unloadEquip(t),g.default.getInstance().getPropForAllEquip(!0),n.EventMgr.getInstance().emit(l.EventName.UnloadEquip,t);var e=u.DataMgr.getInstance().getEquipCfg(t.id);console.log("\u5f53\u524d\u88c5\u5907id\uff1a",t.id),1==e.isSkin&&c.default.instance.rolePlay_reset(t.id)}},t.prototype.sellEquip=function(t,e){e&&(d.PlayerMgr.getInstance().geUserData().abandonEquip(e),n.EventMgr.getInstance().emit(l.EventName.SellEquip,t,e))},t.prototype.strengthenEquip=function(t,e){t&&(d.PlayerMgr.getInstance().geUserData().strengthenEquip(t,e),g.default.getInstance().getPropForAllEquip(!0),n.EventMgr.getInstance().emit(l.EventName.RefreshStrengthenLv,t),n.EventMgr.getInstance().emit(l.EventName.RefreshEquipViewInfo))},t.prototype.unlockEquip=function(t,e){e&&(d.PlayerMgr.getInstance().geUserData().unlockEquip(e),n.EventMgr.getInstance().emit(l.EventName.UnlockEquip,t,e))},t.prototype.getPropNameForPropType=function(t){var e="\u653b\u51fb\u529b";switch(t){case 1:e="\u653b\u51fb\u529b";break;case 2:e="\u8840\u91cf\u4e0a\u9650";break;case 3:e="\u653b\u51fb\u901f\u5ea6";break;case 4:e="\u66b4\u51fb\u7387";break;case 5:e="\u66b4\u51fb\u4f24\u5bb3";break;case 6:e="\u4f24\u5bb3\u51cf\u514d";break;case 7:e="\u95ea\u907f\u7387";break;case 8:e="\u653b\u51fb\u529b";break;case 9:e="\u8840\u91cf\u4e0a\u9650"}return e},t.prototype.getPropPercent=function(t){var e="%";switch(t){case 3:case 8:case 9:e="";break;default:e="%"}return e},t.prototype.quickSellForSaveData=function(t){var e=t;if(e&&!(e.length<=0)){for(var o=0,i=d.PlayerMgr.getInstance().geUserData().getOwnedEquipList(),a=0;a<i.length;a++)for(var n=0;n<i[a].length;n++)for(var s=0;s<e.length;s++)if(i[a][n].quality==e[s]){"D"==d.PlayerMgr.getInstance().getAbType()?o+=this.getEquipSellValue(i[a][n].id,i[a][n].type,i[a][n].IDCard,i[a][n]):o+=u.DataMgr.getInstance().getEquipStrengthenCfg(i[a][n].id,i[a][n].strengthenLv).sellPrice,d.PlayerMgr.getInstance().geUserData().abandonEquip(i[a][n]),n--;break}o>0&&(d.PlayerMgr.getInstance().geUserData().addGoldNum(o),r.UIMgr.getInstance().openUI(l.UIID.UITips,-1,"\u51fa\u552e\u6210\u529f\uff0c\u83b7\u5f97"+o+"\u91d1\u5e01"))}},t.prototype.getEquipFightForId=function(t,e,o,i,a){var n=null;if(a)n=a;else if(!e)for(var r=this.getOwmedEquipForEquipType(o),c=0;c<r.length;c++)if(t==r[c].id&&i==r[c].IDCard){n=r[c];break}if(!n){var l=u.DataMgr.getInstance().getEquipCfg(t);n={id:t,type:l.equipType,quality:l.qualityId,strengthenLv:0,isUnlock:!0,isWear:!1,videoCount:0,IDCard:1,starLevel:0}}var p=n.strengthenLv,d=n.starLevel,g=u.DataMgr.getInstance().getEquipCfg(n.id),h=[0,0],f=0;if(g.atk){var y,m=s.Utils.getTabelArr(g.atk);if(h=[Number(m[0]),Number(m[1])],g.LvAtk){var v=s.Utils.getTabelArr(g.LvAtk);h[0]+=Number(v[0])*p,h[1]+=Number(v[1])*p}d&&d>0&&(y=u.DataMgr.getInstance().getEquipStarCfg(n.id,d)).atk&&(v=s.Utils.getTabelArr(y.atk),h[0]+=Number(v[0]),h[1]+=Number(v[1]))}return g.hp&&(f=g.hp,g.LvHp&&(f+=g.LvHp*p),d&&d>0&&(y=u.DataMgr.getInstance().getEquipStarCfg(n.id,d)).hp&&(f+=y.hp*d)),4*(h[0]+h[1])+f},t.prototype.getEquipSellValue=function(t,e,o,i){var a;if(i)a=i;else for(var n=this.getOwmedEquipForEquipType(e),r=0;r<n.length;r++)if(t==n[r].id&&o==n[r].IDCard){a=n[r];break}var c=u.DataMgr.getInstance().getEquipCfg(t),l=s.Utils.getTabelArr1(c.consume),p=a.strengthenLv>=c.strengthenMaxLv?c.strengthenMaxLv-1:a.strengthenLv,d=Math.floor(p/10),g=Math.floor(p%10),h=0;for(r=0;r<=d;r++)h+=r==d?Number(l[r][1])*g:10*Number(l[r][1]);var f=i.starLevel?i.starLevel:0;return h+Math.pow(2,f)*c.sellPrice},t.prototype.getEquipSellValue_QH=function(t,e,o,i){var a;if(i)a=i;else for(var n=this.getOwmedEquipForEquipType(e),r=0;r<n.length;r++)if(t==n[r].id&&o==n[r].IDCard){a=n[r];break}var c=u.DataMgr.getInstance().getEquipCfg(t),l=s.Utils.getTabelArr1(c.consume),p=a.strengthenLv>=c.strengthenMaxLv?c.strengthenMaxLv-1:a.strengthenLv,d=Math.floor(p/10),g=Math.floor(p%10),h=0;for(r=0;r<=d;r++)h+=r==d?Number(l[r][1])*g:10*Number(l[r][1]);return h},t.prototype.playEffForQuality=function(t,e){cc.isValid(t)&&(5==e?(p.default.playEffectForEffId(l.EnumEffID.EffGoodEquip3,t),p.default.playEffectForEffId(l.EnumEffID.EffGoodEquip1,t,null,0,0,1)):4==e&&p.default.playEffectForEffId(l.EnumEffID.EffGoodEquip2,t,null,0,0,1))},t}();a.default=h,function(t){t[t.EnumNoShow=1]="EnumNoShow",t[t.EnumStrengthen=2]="EnumStrengthen",t[t.EnumSell=3]="EnumSell"}(a.EnumEquipInfo||(a.EnumEquipInfo={})),a.SuitData=function(){},cc._RF.pop()},{}],EventMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1679c2ub2tJ4L/kArQZViBz","EventMgr");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.EventMgr=i.Listener=void 0;var a=function(){function t(t,e){this.mListener=e,this.mtarget=t}return Object.defineProperty(t.prototype,"listener",{get:function(){return this.mListener},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.mtarget},enumerable:!1,configurable:!0}),t}();i.Listener=a;var n=function(){function t(){this.global_event_list=new Array}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.on=function(t,e,o,i){if(void 0===i&&(i=!1),null!=t&&null!=o){if(null==this.global_event_list[t]&&(this.global_event_list[t]=new Array),!i&&this.global_event_list[t])for(var n=0;n<this.global_event_list[t].length;n++)if(this.global_event_list[t][n].listener==o&&this.global_event_list[t][n].target==e)return;var r=new a(e,o);this.global_event_list[t].push(r)}else console.error("RegistEvent Error")},t.prototype.off=function(t,e,o){if(null!=t&&null!=o&&null!=this.global_event_list[t])for(var i=0;i<this.global_event_list[t].length;i++)this.global_event_list[t][i].listener==o&&this.global_event_list[t][i].target==e&&this.global_event_list[t].splice(i,1)},t.prototype.removeAll=function(){this.global_event_list=new Array},t.prototype.emit=function(t,e,o,i,a,n,r){if(null!=t){if(null!=this.global_event_list[t])for(var s=0;s<this.global_event_list[t].length;s++){var c=this.global_event_list[t][s];c&&c.listener.call(c.target,e,o,i,a,n,r)}}else console.error("FireEvent Error")},t.instance=null,t}();i.EventMgr=n,cc._RF.pop()},{}],FetterMgr:[function(t,e,o){"use strict";cc._RF.push(e,"49291DkcltDP41zD39UipO7","FetterMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("Utils"),r=i("DataMgr"),s=i("RoleMgr"),c=function(){function t(){this.addSkillAndHurtProp=0,this.recoverHp_levelEnd_base=0,this.recoverHp_levelEnd_add=0,this.atkCount_base=0,this.atkCount=0,this.recoverHp_atkEnd_base=0,this.alwaysAtkHurt_base=0,this.alwaysAtkHurt=0,this.firstAtkToCrazyProp_base=0}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.WarriorFetter=function(){},t.prototype.MasterFetter=function(t){this.addSkillAndHurtProp=this.getSuitPropValue(2,t)},t.prototype.isHaveMasterFetter=function(){return!!s.default.getInstance().isExistFetterForFetterId(2)},t.prototype.getAddSkillAndHurtProp=function(){return this.addSkillAndHurtProp},t.prototype.TaoistFetter=function(){},t.prototype.IntensifyFetter=function(){},t.prototype.SpeedFetter=function(){},t.prototype.WishFetter=function(t){this.recoverHp_levelEnd_base=this.getSuitPropValue(6,t)},t.prototype.isHaveWishFetter=function(){return!!s.default.getInstance().isExistFetterForFetterId(6)},t.prototype.addRecoverHp_levelEnd_add=function(){this.recoverHp_levelEnd_add+=this.recoverHp_levelEnd_base},t.prototype.getRecoverHp_levelEnd_add=function(){return this.recoverHp_levelEnd_add},t.prototype.ShieldFetter=function(){},t.prototype.RuinFetter=function(t){this.atkCount_base=this.getSuitPropValue(8,t)},t.prototype.isHaveRuinFetter=function(){return!!s.default.getInstance().isExistFetterForFetterId(8)},t.prototype.isAccomplishRuin=function(){return this.atkCount>=this.atkCount_base?(this.atkCount=0,!0):(this.atkCount++,!1)},t.prototype.getDamageValueRuin=function(t){return Math.ceil(2.5*t)},t.prototype.MagicArtsFetter=function(){},t.prototype.SummonFetter=function(){},t.prototype.SpecialFetter=function(t){this.recoverHp_atkEnd_base=this.getSuitPropValue(11,t)},t.prototype.isHaveSpecialFetter=function(){return!!s.default.getInstance().isExistFetterForFetterId(11)},t.prototype.getRecoverHp_atkEnd_base=function(){return this.recoverHp_atkEnd_base},t.prototype.CurseFetter=function(t){this.alwaysAtkHurt_base=this.getSuitPropValue(12,t)},t.prototype.isHaveCurseFetter=function(){return!!s.default.getInstance().isExistFetterForFetterId(12)},t.prototype.getDamageForCurse=function(){var t=s.default.getInstance().getPlayerPro();return[t.attack_min*this.alwaysAtkHurt/100,t.attack_min*this.alwaysAtkHurt/100]},t.prototype.addDamageForCurse=function(){this.alwaysAtkHurt+=this.alwaysAtkHurt_base},t.prototype.ThreatenFetter=function(t){this.firstAtkToCrazyProp_base=this.getSuitPropValue(13,t)},t.prototype.isHaveThreatenFetter=function(){return!!s.default.getInstance().isExistFetterForFetterId(13)},t.prototype.getFirstAtkToCrazyProp_base=function(){return this.firstAtkToCrazyProp_base},t.prototype.getSuitPropValue=function(t,e){e||(e=1);var o=r.DataMgr.getInstance().getFetter(t),i=n.Utils.getTabelArr(o.fetterFun),a=Number(i[e-1]);return a||(a=0),a},t.prototype.resetFetterValue=function(){this.recoverHp_levelEnd_base=0,this.atkCount_base=0,this.atkCount=0,this.recoverHp_atkEnd_base=0,this.alwaysAtkHurt_base=0,this.alwaysAtkHurt=0,this.firstAtkToCrazyProp_base=0},t}();a.default=c,cc._RF.pop()},{}],GameDataMgr:[function(t,e,o){"use strict";cc._RF.push(e,"de006t861FBAIsNVVJ1xtME","GameDataMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("PoolMgr"),r=i("ResourceMgr"),s=i("Utils"),c=i("Config"),l=i("NodeDropGoods"),u=i("DataMgr"),p=i("FetterMgr"),d=i("PlayerMgr"),g=i("RoleMgr"),h=i("TipsMgr"),f=i("GoodsManager"),y=i("TaskMgr"),m=function(){function t(){this.curGame=c.EnumGameState.GamePrePare,this.hightY=-40,this.skillBookClass=[[],[],[],[],[]],this.curSkillBoolClass=[[],[],[],[],[]],this.skillBookIdArr=[],this.fetterSuitCount=0,this.fetterIdArr=[],this.skillIdArr=[],this.curTotalSkillBookCount=24,this.dropGoodsIdList=[],this.skillBookRefreshCount=5,this.weightFoBothBtn=0,this.weightAddForBothBtn=20,this.isFirstGame=!1}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getGameState=function(){return this.curGame},t.prototype.setGameState=function(t){this.curGame=t},t.prototype.isCurGameState=function(t){return this.curGame==t},t.prototype.randomPlayerSkill=function(t){if(!t||t.length<=0)return 0;var e=s.Utils.randomRang(0,t.length);return e==t.length&&(e=t.length-1),e},t.prototype.classifySkillBook=function(){var t=d.PlayerMgr.getInstance().geUserData().getSkillBookArr();if(t.length>0)for(var e=0;e<t.length;e++)(a=(i=u.DataMgr.getInstance().getSkillBook(t[e].id)).qualityId-1)<0&&(a=0),this.skillBookClass[a].push(i.id);else{var o=u.DataMgr.getInstance().getSkillBookCfg();for(e=0;e<o.length;e++){var i,a;0!=(i=o[e]).freeUnlock&&((a=i.qualityId-1)<0&&(a=0),this.skillBookClass[a].push(i.id),d.PlayerMgr.getInstance().geUserData().addSkillBookId(i.id),y.default.getInstance().addSkillBookCountForTask())}}},t.prototype.classifyCurSkillBook=function(){for(var t=this.getSkillBookDataArr(),e=0;e<t.length;e++){var o=u.DataMgr.getInstance().getSkillBook(t[e].id),i=o.qualityId-1;i<0&&(i=0),this.curSkillBoolClass[i].push(o.id)}},t.prototype.randomSkillBook=function(t){for(var e=[],o=u.DataMgr.getInstance().getSkillBookProbCfg(),i=0;i<o.length;i++){var a=s.Utils.getTabelArr(o[i].levelRange);if(t>=Number(a[0])&&t<=Number(a[1])){for(var n=o[i],r=1;r<=5;r++)if(this.isExistSkillBookForQuality(r)){var c={id:r,weight:this.selectPropNum(n,r)};e.push(c)}break}}var l=s.Utils.weight_rand(e),p=this.skillBookClass[l.id-1];if(p&&!(p.length<=0)){var d=s.Utils.randomRang(0,p.length);return d>=p.length&&(d=p.length-1),p[d]}},t.prototype.selectPropNum=function(t,e){var o=0;switch(e){case 1:o=t.NBook;break;case 2:o=t.RBook;break;case 3:o=t.SRBook;break;case 4:o=t.SSRBook;break;case 5:o=t.SSSRBook}return o},t.prototype.isExistSkillBookForQuality=function(t){return this.skillBookClass?this.skillBookClass[t-1].length>0:(this.skillBookClass=[[],[],[],[],[]],!1)},t.prototype.getSkillBookDataArr=function(){return this.skillBookIdArr||(this.skillBookIdArr=[]),this.skillBookIdArr},t.prototype.pushSkillBookData=function(t,e,o,i){void 0===e&&(e=1),this.skillBookIdArr||(this.skillBookIdArr=[]);var a=this.isExistSkillBookId(t);if(-1!=a)return this.skillBookIdArr[a].iCount+=1,void(3==this.skillBookIdArr[a].iCount?o&&o(this.skillBookIdArr[a].iCount):7==this.skillBookIdArr[a].iCount&&i&&i(this.skillBookIdArr[a].iCount));var n={id:t,iCount:e};this.skillBookIdArr.push(n)},t.prototype.isExistSkillBookId=function(t){this.skillBookIdArr||(this.skillBookIdArr=[]);for(var e=0;e<this.skillBookIdArr.length;e++)if(t==this.skillBookIdArr[e].id)return e;return-1},t.prototype.getStarNumForSkillBookId=function(t){var e=this.isExistSkillBookId(t),o=1;if(-1==e)return[1,o-=1,2,o];var i=this.getSkillBookDataArr()[e].iCount;return(o=i)>=1&&o<3?[1,o-=1,2,i]:o>=3&&o<7?[2,o-=3,4,i]:[3,0,0,i]},t.prototype.getStarNumForSkillBookCount=function(t){var e=1;return t<3?e=1:t>=3&&t<7?e=2:t>=7&&(e=3),e},t.prototype.getFetterSuitCount=function(){return this.fetterSuitCount},t.prototype.addFetterSuitCount=function(t){void 0===t&&(t=1),this.fetterSuitCount+=t},t.prototype.getFetterIdArr=function(){return this.fetterIdArr||(this.fetterIdArr=[]),this.fetterIdArr},t.prototype.pushFetterData=function(t,e,o,i,a){void 0===e&&(e=1),this.fetterIdArr||(this.fetterIdArr=[]);var n=this.isExistFetterId(t),r=1;if(-1!=n)this.fetterIdArr[n].iCount+=1,r=this.fetterIdArr[n].iCount;else{var c={id:t,iCount:e};this.fetterIdArr.push(c),r=e}var l=u.DataMgr.getInstance().getFetter(t),p=s.Utils.getTabelArr(l.fetterCount),d=r;d==Number(p[0])?o&&o(r):d==Number(p[1])?i&&i(r):d==Number(p[2])&&a&&a(r)},t.prototype.isExistFetterId=function(t){this.fetterIdArr||(this.fetterIdArr=[]);for(var e=0;e<this.fetterIdArr.length;e++)if(t==this.fetterIdArr[e].id)return e;return-1},t.prototype.getFetterNumForFetterId=function(t){var e=this.isExistFetterId(t),o=0;return-1!==e&&(o=this.getFetterIdArr()[e].iCount),o},t.prototype.getSuitCountForFetterId=function(t){var e=u.DataMgr.getInstance().getFetter(t),o=s.Utils.getTabelArr(e.fetterCount),i=this.getFetterNumForFetterId(t);return i<Number(o[0])?0:i>=Number(o[0])&&i<Number(o[1])?1:i>=Number(o[1])&&i<Number(o[2])?2:3},t.prototype.getSuitCountForFetterIdAndCount=function(t,e){var o=u.DataMgr.getInstance().getFetter(t),i=s.Utils.getTabelArr(o.fetterCount),a=e;return a<Number(i[0])?0:a>=Number(i[0])&&a<Number(i[1])?1:a>=Number(i[1])&&a<Number(i[2])?2:3},t.prototype.getStringForFetterId=function(t){var e=u.DataMgr.getInstance().getFetter(t),o=s.Utils.getTabelArr(e.fetterCount),i=this.getFetterNumForFetterId(t);return i<Number(o[0])?"<outline color=#000000 width=3>"+i+" / "+o[0]+"</outline>":i>=Number(o[0])&&i<Number(o[1])?"<outline color=#000000 width=3><color=#00ff00>"+o[0]+"</color><"+o[1]+"<"+o[2]+"</outline>":i>=Number(o[1])&&i<Number(o[2])?"<outline color=#000000 width=3>"+o[0]+"<<color=#00ff00>"+o[1]+"</color><"+o[2]+"</outline>":"<outline color=#000000 width=3>"+o[0]+"<"+o[1]+"<<color=#00ff00>"+o[2]+"</color></outline>"},t.prototype.getSkillIdArr=function(){return this.skillIdArr||(this.skillIdArr=[]),this.skillIdArr},t.prototype.pushSkillIdArrData=function(t){this.skillIdArr||(this.skillIdArr=[]),this.isExistSkillId(t)||this.skillIdArr.push(t)},t.prototype.isExistSkillId=function(t){this.skillIdArr||(this.skillIdArr=[]);for(var e=0;e<this.skillIdArr.length;e++)return t==this.skillIdArr[e]},t.prototype.resetSkillBookAndFetter=function(){this.skillBookIdArr=[],this.fetterIdArr=[],this.skillIdArr=[],this.fetterSuitCount=0,g.default.getInstance().clearPropData(),p.default.getInstance().resetFetterValue(),h.default.getInstance().resetData()},t.prototype.isFullForSkillBook=function(){return this.getSkillBookDataArr().length>=this.curTotalSkillBookCount},t.prototype.isFullStarForSkillBookId=function(t){var e=this.isExistSkillBookId(t);return-1!==e&&this.getSkillBookDataArr()[e].iCount>=7},t.prototype.dropGoodsFun=function(t,e){var o=u.DataMgr.getInstance().getSecCfg(t);if(e<1||e>3)return[];var i=[];if(3==e&&1==d.PlayerMgr.getInstance().geUserData().getCurSec())i.push({id:4,goodsId:16,goodsType:"equip",iCount:1},{id:4,goodsId:27,goodsType:"equip",iCount:1},{id:5,goodsId:4,goodsType:"equip",iCount:1},{id:9,goodsId:16,goodsType:"skillBook",iCount:1});else for(var a=s.Utils.getTabelArr(o["type"+e+"DropId"]),n=s.Utils.getTabelArr(o["type"+e+"DropNum"]),r=s.Utils.getTabelArr(o["type"+e+"DropProbability"]),c=0;c<a.length;c++){var l=f.default.getInstance().getGoodsCfgForGoodsType(Number(a[c]));if(l&&s.Utils.weight_randSingle(Number(r[c]))){var p={id:Number(a[c]),goodsId:Number(l[1]),goodsType:l[0].toString(),iCount:Number(n[c])};i.push(p)}}return i},t.prototype.getDropGoodsList=function(){return this.dropGoodsIdList||(this.dropGoodsIdList=[]),this.dropGoodsIdList},t.prototype.addDropGoods=function(t,e,o){var i=this,a=n.PoolMgr.getInstance().getNode("NodeDropGoods");a?(a.parent=e,a.getComponent(l.default).initData(t,o),this.addDataToDropGoodsList(t)):r.ResourceMgr.getInstance().loadRes("prefabs","widget/NodeDropGoods",cc.Prefab,function(n){a.parent=e,(a=cc.instantiate(n)).getComponent(l.default).initData(t,o),i.addDataToDropGoodsList(t)})},t.prototype.addDataToDropGoodsList=function(t){for(var e=!1,o=0;o<this.dropGoodsIdList.length;o++)if((1==t.id||2==t.id)&&this.dropGoodsIdList[o].id==t.id){this.dropGoodsIdList[o].iCount+=t.iCount,e=!0;break}e||this.dropGoodsIdList.push(t)},t.prototype.sortDropGoodsList=function(){this.dropGoodsIdList.sort(function(t,e){return t.id-e.id})},t.prototype.resetDropGoodsData=function(){this.dropGoodsIdList=[]},t.prototype.initGameData=function(){this.initSkillBookRefreshCount(),this.skillBookBothBtnForWeight()},t.prototype.initSkillBookRefreshCount=function(){this.skillBookRefreshCount=Number(u.DataMgr.getInstance().getParamsCfgForSingle(c.EnumParams.SkillBookRefreshCount).value)},t.prototype.skillBookBothBtnForWeight=function(){var t=d.PlayerMgr.getInstance().geUserData().getCurSec(),e=u.DataMgr.getInstance().getSecCfg(t),o=s.Utils.getTabelArr(e.AllGetProbability);this.weightFoBothBtn=Number(o[0]),this.weightAddForBothBtn=Number(o[1])},t}();a.default=m,cc._RF.pop()},{}],GameData:[function(t,e,o){"use strict";cc._RF.push(e,"62303xKiPFJn6vULyxEWJxB","GameData");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.GameData=void 0,i.GameData=function(){},cc._RF.pop()},{}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0c4ecmtvD9H5a+Ua2aqA4F9","GameMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("UIMgr"),r=i("Utils"),s=i("Config"),c=i("DataMgr"),l=i("GoodsManager"),u=i("PlayerMgr"),p=function(){function t(){this.isAdddUp=!1,this.trudgeCount=0}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.openHomeUI=function(){var t=s.UIID.UIHomeNew;n.UIMgr.getInstance().openUI(t,-1)},t.prototype.refreshMysticalShopData=function(){for(var t=0;t<9;t++){for(var e=[],o=c.DataMgr.getInstance().getMysticalShopCfg(),i=0;i<o.length;i++)if(o[i].Position==t+1){var a={id:o[i].ID,weight:o[i].RefreshWeight};e.push(a)}var n=r.Utils.weight_rand(e),s=c.DataMgr.getInstance().getMysticalShop(n.id),p=l.default.getInstance().getGoodsCfgForGoodsType(s.GoodsID),d={id:s.ID,itemId:Number(p[1]),isBuy:!1,videoCount:0};u.PlayerMgr.getInstance().getMysticalShopData().refreshMysticalShopList(t,d)}},t}();a.default=p,cc._RF.pop()},{}],GoodsManager:[function(t,e,o){"use strict";cc._RF.push(e,"6a0a0RQ/opOB5RtMd1Qpx1a","GoodsManager");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("UIMgr"),r=i("Utils"),s=i("Config"),c=i("DataMgr"),l=i("EquipMgr"),u=i("PlayerMgr"),p=i("TaskMgr"),d=function(){function t(){this.equipClassForQuality=[[],[],[],[],[]],this.equipClassForType=[[],[],[],[],[],[]],this.skillBookClassForQuality=[[],[],[],[],[]],this.skillBookOwned=[[],[],[],[],[]],this.skillBookNotGet=[[],[],[],[],[]],this.skillBookOwnedForQuality=[],this.skillBookNotGetForQuality=[]}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getGoodsCfgForGoodsType=function(t){var e=c.DataMgr.getInstance().getGoodsCfg(t);if("equip"==e.goodsType){var o=this.equipClassForQuality[e.goodsQualityId-1];if(!o||o.length<=0)return null;var i=r.Utils.randomRang(0,o.length);return[e.goodsType,o[i]]}if("skillBook"==e.goodsType){var a=this.skillBookClassForQuality[e.goodsQualityId-1];if(!a||a.length<=0)return null;var n=r.Utils.randomRang(0,a.length);return[e.goodsType,a[n]]}return[e.goodsType,t]},t.prototype.seleCfg=function(t,e){e&&e[0]},t.prototype.initClassData=function(){this.classifyEquipForQuality(),this.classifyEquipForType(),this.classifySkillBookForQuality()},t.prototype.classifyEquipForQuality=function(){for(var t=c.DataMgr.getInstance().getAllEquipCfg(),e=0;e<t.length;e++){var o=t[e].qualityId;this.equipClassForQuality[o-1].push(t[e].id)}},t.prototype.classifyEquipForType=function(){for(var t=c.DataMgr.getInstance().getAllEquipCfg(),e=0;e<t.length;e++){var o=t[e].equipType;this.equipClassForType[o-1].push(t[e].id)}},t.prototype.classifySkillBookForQuality=function(){for(var t=c.DataMgr.getInstance().getSkillBookCfg(),e=0;e<t.length;e++){var o=t[e].qualityId;this.skillBookClassForQuality[o-1].push(t[e].id)}},t.prototype.classifySkillBookForQualityAndIsOwn=function(){for(var t=u.PlayerMgr.getInstance().geUserData().getSkillBookArr(),e=0;e<t.length;e++){var o=c.DataMgr.getInstance().getSkillBook(t[e].id);this.skillBookOwned[o.qualityId-1].push(t[e].id)}var i=c.DataMgr.getInstance().getSkillBookCfg();for(e=0;e<i.length;e++){var a=i[e].qualityId;this.isExistSkillBookForId(a,i[e].id)||this.skillBookNotGet[a-1].push(i[e].id)}this.classifyAllSkillBookForQuality()},t.prototype.classifyAllSkillBookForQuality=function(){for(var t=this.skillBookOwned.length-1;t>=0;t--)for(var e=0;e<this.skillBookOwned[t].length;e++)this.skillBookOwnedForQuality.push(this.skillBookOwned[t][e]);for(t=this.skillBookNotGet.length-1;t>=0;t--)for(e=0;e<this.skillBookNotGet[t].length;e++)this.skillBookNotGetForQuality.push(this.skillBookNotGet[t][e])},t.prototype.isExistSkillBookForId=function(t,e){if(!this.skillBookOwned||!this.skillBookOwned[t-1]||this.skillBookOwned[t-1].length<=0)return!1;for(var o=0;o<this.skillBookOwned[t-1].length;o++)if(this.skillBookOwned[t-1][o]==e)return!0;return!1},t.prototype.initOwnedSkillBookData=function(){this.skillBookOwned=[[],[],[],[],[]],this.skillBookNotGet=[[],[],[],[],[]],this.skillBookOwnedForQuality=[],this.skillBookNotGetForQuality=[],this.classifySkillBookForQualityAndIsOwn()},t.prototype.getColorForQuality=function(t){var e="ffffff";switch(t){case 1:e="c0bebe";break;case 2:e="a3ec19";break;case 3:e="21f9eb";break;case 4:e="cd3dfd";break;case 5:e="ffd722"}return e},t.prototype.seleColor=function(t){var e=cc.color();switch(t){case 1:e=cc.color(192,190,190);break;case 2:e=cc.color(163,236,25);break;case 3:e=cc.color(33,249,235);break;case 4:e=cc.color(205,61,253);break;case 5:e=cc.color(255,215,34)}return e},t.prototype.getRewardForType=function(t,e){var o=u.PlayerMgr.getInstance().geUserData();switch(t){case 1:o.addGoldNum(e);break;case 2:o.addInGotNum(e);break;case 3:o.addPowerNum(e)}},t.prototype.getReward=function(e){if(e){for(var o=0,i="\u91d1\u5e01",a=u.PlayerMgr.getInstance().geUserData(),l=0;l<e.length;l++)switch(e[l].goodsType){case"gold":a.addGoldNum(e[l].iCount);break;case"inGot":a.addInGotNum(e[l].iCount);break;case"power":a.addPowerNum(e[l].iCount);break;case"equip":a.addEquipForId(e[l].goodsId),p.default.getInstance().addEquipCountForTask();break;case"skillBook":a.addSkillBookId(e[l].goodsId),p.default.getInstance().addSkillBookCountForTask();var d=c.DataMgr.getInstance().getSkillBook(e[l].goodsId);if(u.PlayerMgr.getInstance().geUserData().getSkillBookForId(e[l].goodsId).level>=d.MaxLevel){var g=c.DataMgr.getInstance().getSkillQuality(d.qualityId),h=r.Utils.getTabelArr(g.FullGradeCompensate);u.PlayerMgr.getInstance().geUserData().subSkillBookCount(d.id),t.getInstance().getRewardForType(Number(h[0]),Number(h[1])),o+=Number(h[1]),i=c.DataMgr.getInstance().getGoodsCfg(Number(h[0])).goodsName}}this.isOverEquipBagForIndex()?n.UIMgr.getInstance().openUI(s.UIID.UINotBagIndex,-1):n.UIMgr.getInstance().openUI(s.UIID.UITips,-1,"\u9886\u53d6\u6210\u529f"),o>0&&n.UIMgr.getInstance().openUI(s.UIID.UITips,-1,"\u90e8\u5206\u6280\u80fd\u4e66\u5df2\u8fbe\u5230\u6700\u5927\u7b49\u7ea7\uff0c\u81ea\u52a8\u8f6c\u5316\u4e3a "+i+"x"+o)}},t.prototype.getRewardDouble=function(e){if(e){for(var o=0,i="\u91d1\u5e01",a=u.PlayerMgr.getInstance().geUserData(),l=0;l<e.length;l++)switch(e[l].goodsType){case"gold":a.addGoldNum(2*e[l].iCount);break;case"inGot":a.addInGotNum(2*e[l].iCount);break;case"power":a.addPowerNum(2*e[l].iCount);break;case"equip":a.addEquipForId(e[l].goodsId),a.addEquipForId(e[l].goodsId),p.default.getInstance().addEquipCountForTask(2);break;case"skillBook":a.addSkillBookId(e[l].goodsId,2),p.default.getInstance().addSkillBookCountForTask(2);var d=c.DataMgr.getInstance().getSkillBook(e[l].goodsId);if(u.PlayerMgr.getInstance().geUserData().getSkillBookForId(e[l].goodsId).level>=d.MaxLevel){var g=c.DataMgr.getInstance().getSkillQuality(d.qualityId),h=r.Utils.getTabelArr(g.FullGradeCompensate);u.PlayerMgr.getInstance().geUserData().subSkillBookCount(d.id,2),t.getInstance().getRewardForType(Number(h[0]),Number(h[1])),o+=2*Number(h[1]),i=c.DataMgr.getInstance().getGoodsCfg(Number(h[0])).goodsName}}this.isOverEquipBagForIndex()?n.UIMgr.getInstance().openUI(s.UIID.UINotBagIndex,-1):n.UIMgr.getInstance().openUI(s.UIID.UITips,-1,"\u9886\u53d6\u6210\u529f"),o>0&&n.UIMgr.getInstance().openUI(s.UIID.UITips,-1,"\u90e8\u5206\u6280\u80fd\u4e66\u5df2\u8fbe\u5230\u6700\u5927\u7b49\u7ea7\uff0c\u81ea\u52a8\u8f6c\u5316\u4e3a "+i+"x"+o)}},t.prototype.isOverEquipBagForIndex=function(t){void 0===t&&(t=function(){});var e=u.PlayerMgr.getInstance().geUserData().getBagIndexCount();return l.default.getInstance().getOwnedEquipCount()>e},t}();a.default=d,cc._RF.pop()},{}],GuideData:[function(t,e,o){"use strict";cc._RF.push(e,"1ef9eLCRs1PY6Q8jW+I/UGk","GuideData");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.GuideData=void 0;var s=a("BaseData"),c=a("Config"),l=function(){this.currentId=1},u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ecrypt=!1,e.gameKey=c.GameConfig.AppCacheName+"guide",e.endId=20,e.putGuideNum=0,e}return r(e,t),e.prototype.initAbTypeData=function(){this.endId=20,this.putGuideNum=0},e.prototype.createData=function(){return this.data=new l,this.saveData(),this.data},e.prototype.getCurrentId=function(){return this.data.currentId},e.prototype.setCurrentId=function(t){this.data.currentId=t},e.prototype.addCurrentId=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=1),this.data.currentId+=e,t&&this.saveData()},e.prototype.getGuideEnd=function(){return this.data.currentId>=this.endId},e}(s.BaseData);n.GuideData=u,cc._RF.pop()},{}],HttpMgr:[function(t,e,o){"use strict";cc._RF.push(e,"42ee6Jx1bBC86XD6EEtNiA3","HttpMgr");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.HttpMgr=void 0;var a=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.httpGet=function(t,e,o){var i=new XMLHttpRequest;if(e){var a="";Object.keys(e).forEach(function(t){a+=t+"="+encodeURIComponent(e[t])+"&"}),""!==a&&(t=t+"?"+(a=a.substr(0,a.lastIndexOf("&"))))}i.withCredentials=!0,i.open("GET",t,!0),i.setRequestHeader("Access-Control-Allow-Origin","*"),i.setRequestHeader("Access-Control-Allow-Methods","GET, POST"),i.setRequestHeader("Access-Control-Allow-Headers","x-requested-with,content-type"),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(4===i.readyState){var t=i.responseText;i.status>=200&&i.status<300?(i.statusText,o(!0,t)):o(!1,"")}},i.ontimeout=function(){o&&o(null)},i.onerror=function(){o&&o(null)},i.send()},t.prototype.httpPost=function(e,o,i){void 0===e&&(e=null);var a=JSON.stringify(e);console.log(a,JSON.parse(a),"sffs");var n=null;e&&(n="",Object.keys(e).forEach(function(t){n+=t+"="+encodeURIComponent(e[t])+"&"}),""!==n&&(n=n.substr(0,n.lastIndexOf("&"))));var r=i,s=new XMLHttpRequest;s.timeout=7e3,s.withCredentials=!0,s.open("POST",r,!0),s.setRequestHeader("Access-Control-Allow-Origin","*"),s.setRequestHeader("Access-Control-Allow-Methods","GET, POST"),s.setRequestHeader("Access-Control-Allow-Headers","x-requested-with,content-type"),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){if(4===s.readyState)if(s.status>=200&&s.status<400){var e=s.responseText;t.isPass(e)&&o&&o(e)}else o&&o(null)},s.ontimeout=function(){o&&o(null)},s.onerror=function(){o&&o(null)},n?s.send(n):s.send()},t.isPass=function(){return!0},t}();i.HttpMgr=a,cc._RF.pop()},{}],IosManager:[function(t,e,o){"use strict";cc._RF.push(e,"ac68brqS5pPp5dddhvdjsy2","IosManager");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.IosManager=void 0;var a=function(){function t(){}return t.prototype.needDouyVefiy=function(){},t.prototype.interVefiy=function(){},t.prototype.showNative=function(){},t.prototype.hideNative=function(){},t.prototype.showInterNative=function(){},t.prototype.hideInterNative=function(){},t.prototype.showFloatIconAd=function(){},t.prototype.hideFloatIconAd=function(){},t.prototype.canCare=function(){return!1},t.prototype.canShowBtnMore=function(){return!1},t.prototype.canShowEnergyForverVersion=function(){return!0},t.prototype.hasVerify=function(){return!1},t.prototype.initSdk=function(t,e){e&&e(null)},t.prototype.login=function(t,e){e&&e(null)},t.prototype.pay=function(t,e){e&&e(null)},t.prototype.share=function(t,e){e&&e(null)},t.prototype.showBanner=function(){jsb.reflection.callStaticMethod("IOS_JSB","showBannerAd")},t.prototype.hideBanner=function(){jsb.reflection.callStaticMethod("IOS_JSB","closeBannerAd")},t.prototype.showInsertAd=function(){jsb.reflection.callStaticMethod("IOS_JSB","showInsertAd")},t.prototype.showVideoAd=function(t,e,o){this.callback=e,this.errorcallback=o,window.SDK=this,jsb.reflection.callStaticMethod("IOS_JSB","showVideoAd:","window.SDK.videoCallback")},t.prototype.videoCallback=function(t){this.callback&&1==t?this.callback(t):this.errorcallback&&-1==t&&this.errorcallback(t)},t.prototype.toAppStore=function(t){this.appCallback=t,window.SDK=this,jsb.reflection.callStaticMethod("IOS_JSB","toAppStore:","window.SDK.toAppStoreCallback")},t.prototype.toAppStoreCallback=function(t){this.appCallback&&this.appCallback(t)},t.prototype.otherFun=function(t,e){e&&e()},t.prototype.shark=function(t){t.isLong?jsb.reflection.callStaticMethod("IOS_JSB","shark:",1):jsb.reflection.callStaticMethod("IOS_JSB","shark:",0)},t.prototype.canShare=function(){return!1},t.prototype.recordVideo=function(){},t.prototype.shareVideo=function(){},t.prototype.stopRecorderManager=function(){},t.prototype.setLanguage=function(){return"zh"},t.prototype.initTrack=function(){},t.prototype.youmengTrack=function(t,e,o){jsb.reflection.callStaticMethod("IOS_JSB","onEvent:ab:attributes:",t,e,o)},t.prototype.openNotify=function(){jsb.reflection.callStaticMethod("IOS_JSB","openNotify")},t.prototype.addNotify=function(t,e){jsb.reflection.callStaticMethod("IOS_JSB","addNotify:text:",t+"",e)},t.prototype.showGamePortalAd=function(){},t.prototype.initNativeAd=function(){},t.prototype.showNativeAd=function(t){jsb.reflection.callStaticMethod("IOS_JSB","showNativeAd:",t)},t.prototype.closeNativeAd=function(){jsb.reflection.callStaticMethod("IOS_JSB","closeNativeAd")},t.prototype.getUserInfo=function(t){t&&t(null)},t.prototype.shareImg=function(){},t.prototype.addShortcut=function(){},t.prototype.checkShortcut=function(){},t}();i.IosManager=a,cc._RF.pop()},{}],KSManager:[function(t,e,o){"use strict";cc._RF.push(e,"d401aN+AipKmZRsb6z0GhKk","KSManager");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.KSManager=void 0;var a=function(){function t(){this.hasAd=!0,this.hasBanner=!0,this.hasInsertAd=!0,this.hasVideoAd=!0}return t.prototype.closeNativeAd=function(){},t.prototype.hasVerify=function(){return!1},t.prototype.toAppStore=function(){},t.prototype.addNotify=function(){},t.prototype.needDouyVefiy=function(){},t.prototype.interVefiy=function(){},t.prototype.showNative=function(){},t.prototype.hideNative=function(){},t.prototype.showInterNative=function(){},t.prototype.hideInterNative=function(){},t.prototype.canShowBtnMore=function(){return!1},t.prototype.canShowEnergyForverVersion=function(){return!0},t.prototype.shareVideo=function(){},t.prototype.showFloatIconAd=function(){},t.prototype.hideFloatIconAd=function(){},t.prototype.canCare=function(){return!1},t.prototype.canShare=function(){return!0},t.prototype.initTrack=function(){},t.prototype.getUserInfo=function(t){ks.login({success:function(e){console.log("\u767b\u5f55\u6210\u529f:"+JSON.stringify(e)),ks.authorize({scope:"scope.userInfo",success:function(){ks.getUserInfo({success:function(e){e?t(e.userName,e.userHead):t(null,null),console.log("head"+JSON.stringify(e.userHead))},fail:function(e){t(null,null),console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25: "+JSON.stringify(e))},complete:function(){}})},fail:function(e){t(null,null),console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25: "+JSON.stringify(e))},complete:function(){}})},fail:function(e){console.log("\u767b\u5f55\u5931\u8d25:"+JSON.stringify(e)),t(null,null)}})},t.prototype.shareImg=function(t){console.log("\u5206\u4eab"),ks.shareAppMessage({success:function(e){console.log("\u5206\u4eab\u6210\u529f",e),t&&t()},fail:function(){},complete:function(){}})},t.prototype.follow=function(){},t.prototype.showGamePortalAd=function(){},t.prototype.addShortcut=function(t,e){ks.saveAPKShortcut(function(t){-10005===t.code?e("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):1===t.code?e("\u684c\u9762\u56fe\u6807\u6dfb\u52a0\u6210\u529f"):e("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd")})},t.prototype.checkShortcut=function(t,e){e&&e(!0)},t.prototype.gameVersion=function(){return"1.0.3"},t.prototype.insertAdSwitchVersion=function(){return 7},t.prototype.caidanSwitchVersion=function(){return 2},t.prototype.initNativeAd=function(){},t.prototype.showNativeAd=function(){},t.prototype.youmengTrack=function(t,e,o){ks.uma&&(e&&o?"userA"==e?ks.uma.trackEvent(t,{userA:o}):"userB"==e?ks.uma.trackEvent(t,{userB:o}):"userC"==e?ks.uma.trackEvent(t,{userC:o}):"userD"==e&&ks.uma.trackEvent(t,{userD:o}):ks.uma.trackEvent(t))},t.prototype.goToSuperXiuXian=function(){},t.prototype.showBlockAd=function(){},t.prototype.hideBlockAd=function(){},t.prototype.initSdk=function(){this.rewardedVideoAd=ks.createRewardedVideoAd({adUnitId:"2300001143_01"})},t.prototype.login=function(){},t.prototype.pay=function(){},t.prototype.share=function(t,e){var o=cc.sys.localStorage.getItem("sfkqlhgvideoId");null!=o&&""!==o&&null!=o?this.recorder.publishVideo({video:o,callback:function(t){null!=t&&null!=t||e&&(cc.sys.localStorage.setItem("sfkqlhgvideoId",""),e())}}):e("\u8fd8\u6ca1\u6709\u5206\u4eab\u7684\u5185\u5bb9")},t.prototype.showBanner=function(){},t.prototype.hideBanner=function(){},t.prototype.showInsertAd=function(t,e){e&&e()},t.prototype.showVideoAd=function(t,e,o){var i=this,a=function(t){console.log(t),o&&o()};this.rewardedVideoAd.onError(a),this.rewardedVideoAd.onClose(function t(n){n&&n.isEnded||void 0===n?e&&e():o&&o(),i.rewardedVideoAd.offError(a),i.rewardedVideoAd.offClose(t)}),this.rewardedVideoAd.show().then(function(){return console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")})},t.prototype.otherFun=function(){},t.prototype.homeToBackgroud=function(){},t.prototype.backgroudToHome=function(){},t.prototype.openNotify=function(){},t.prototype.registerNotify=function(){},t.prototype.deleteNotify=function(){},t.prototype.shark=function(){},t.prototype.openShare=function(){},t.prototype.recordVideo=function(){this.recorder=ks.getGameRecorder(),this.recorder.on("start",function(){}),this.recorder.on("error",function(){}),this.recorder.start()},t.prototype.stopRecorderManager=function(t,e){this.recorder.on("stop",function(t){t&&t.videoID&&(cc.sys.localStorage.setItem("sfkqlhgvideoId",t.videoID),e&&e(t.videoID))}),this.recorder.stop()},t.prototype.setLanguage=function(){return"CN"},t.prototype.exit=function(){},t}();i.KSManager=a,cc._RF.pop()},{}],LabPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"00670D/i/NP07JwCxPWGZf1","LabPlatform");var i,a=o,n=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=this;this.scheduleOnce(function(){console.log("\u5f53\u524d\u8282\u70b9\u5927\u5c0f\uff1a",t.node.scale),"\u66b4\u51fb"==t.node.getComponent(cc.Label).string&&console.log("\u5f53\u524d\u8282\u70b9\u5927\u5c0f\uff1a",t.node.getContentSize().width,t.node.getContentSize().height),console.log("\u5f53\u524d\u5b57\u4f53\u5927\u5c0f\uff1a",t.node.getComponent(cc.Label).fontSize)})},r([c],e)}(cc.Component));a.default=l,cc._RF.pop()},{}],LabelPlus:[function(t,e,o){"use strict";cc._RF.push(e,"80a9cOuqOFHQLCOKoZabFcU","LabelPlus");var i,a=o,n=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.start=function(){},r([c],e)}(cc.Label));a.default=l,cc._RF.pop()},{}],LadleWordMgr:[function(t,e,o){"use strict";cc._RF.push(e,"d0c2cY/ROZDxLAJUQBp7rUC","LadleWordMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("PoolMgr"),r=i("ResourceMgr"),s=function(){function t(){}return t.LabLoad=function(t,e,o,i,a,s,c){var l=this;if(void 0===i&&(i=60),cc.isValid(t)){var u=n.PoolMgr.getInstance().getNode("LabLadleWord");if(u){u.parent=t,u.opacity=255,e&&u.setPosition(cc.v2(e.x,e.y+i));var p=u.getChildByName("labStr");o&&(p.getComponent(cc.Label).string=o),a&&(p.getComponent(cc.Label).fontSize=a),s&&(p.color=s),this.LadEff(u),c&&c()}else console.log("\u52a8\u6001\u52a0\u8f7d"),r.ResourceMgr.getInstance().loadRes("prefabs","widget/LabLadleWord",cc.Prefab,function(i){(u=cc.instantiate(i)).parent=t,u.opacity=255,e&&u.setPosition(e);var n=u.getChildByName("labStr");o&&(n.getComponent(cc.Label).string=o),a&&(n.getComponent(cc.Label).fontSize=a),s&&(n.color=s),l.LadEff(u),c&&c()})}else console.log("\u74e2\u5b57\u7236\u8282\u70b9\u4e0d\u5b58\u5728\uff01\uff01\uff01")},t.LabLoadForSkill=function(t,e,o,i,a,s,c){var l=this;if(void 0===i&&(i=60),cc.isValid(t)){var u=n.PoolMgr.getInstance().getNode("LabLadleWord");if(u){u.parent=t,u.opacity=127,u.scale=3.5,e&&u.setPosition(cc.v2(e.x,e.y+i));var p=u.getChildByName("labStr");o&&(p.getComponent(cc.Label).string=o),a&&(p.getComponent(cc.Label).fontSize=a),s&&(p.color=s),this.LadEffForSkill(u),c&&c()}else console.log("\u52a8\u6001\u52a0\u8f7d"),r.ResourceMgr.getInstance().loadRes("prefabs","widget/LabLadleWord",cc.Prefab,function(i){(u=cc.instantiate(i)).parent=t,u.opacity=127,u.scale=3.5,e&&u.setPosition(e);var n=u.getChildByName("labStr");o&&(n.getComponent(cc.Label).string=o),a&&(n.getComponent(cc.Label).fontSize=a),s&&(n.color=s),l.LadEffForSkill(u),c&&c()})}else console.log("\u74e2\u5b57\u7236\u8282\u70b9\u4e0d\u5b58\u5728\uff01\uff01\uff01")},t.LadEff=function(t){var e=this;cc.isValid(t)&&cc.tween(t).parallel(cc.tween().by(1,{y:50}),cc.tween().to(1,{opacity:0})).call(function(){e.LabPool("LabLadleWord",t)}).start()},t.LadEffForSkill=function(t){var e=this;cc.isValid(t)&&cc.tween(t).parallel(cc.tween().to(.1,{opacity:255}),cc.tween().to(.1,{scale:1.2})).delay(.6).parallel(cc.tween().to(.3,{opacity:0}),cc.tween().to(.3,{scale:4})).call(function(){e.LabPool("LabLadleWord",t)}).start()},t.LabPool=function(t,e){cc.isValid(e)&&(e.opacity=255,e.scale=1,n.PoolMgr.getInstance().freeNode(t,e))},t.height_ladleWord={height_type:75,height_number:35,hegiht_skill:115},t}();a.default=s,cc._RF.pop()},{}],LanguageMgr:[function(t,e,o){"use strict";cc._RF.push(e,"a4129gp1IZPuLMnmeyFSgVu","LanguageMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.LanguageMgr=void 0;var n=i("DataMgr"),r=i("Appcfg"),s=function(){function t(){this.currentLan=r.LanguageType.zh}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setCurrentLanguage=function(t){this.currentLan=t},t.prototype.getCurrentLanguage=function(){return this.currentLan},t.prototype.getImgstr=function(t){var e=this.currentLan;return e==r.LanguageType.en?t+"-y":e==r.LanguageType.jp?t+"-r":e==r.LanguageType.zh_tw?t+"-f":t},t.prototype.T=function(t){return n.DataMgr.getInstance().T(t,this.currentLan)},t}();a.LanguageMgr=s,cc._RF.pop()},{}],ListItem:[function(t,e,o){"use strict";cc._RF.push(e,"2cddajDLl9PcoTX+6iQF3fJ","ListItem");var i,a=o,n=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,c=cc._decorator,l=c.ccclass,u=c.property,p=c.disallowMultiple,d=c.menu,g=c.executionOrder;(function(t){t[t.NONE=0]="NONE",t[t.TOGGLE=1]="TOGGLE",t[t.SWITCH=2]="SWITCH"})(s||(s={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.title=null,e.selectedMode=s.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e}return n(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case s.TOGGLE:this.selectedFlag.active=t;break;case s.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(this.selectedMode==s.SWITCH){var t=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=t.spriteFrame}},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},e.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},e.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},e.prototype.createEvt=function(t,e,o){if(void 0===o&&(o=null),t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var i=new cc.Component.EventHandler;return i.target=o||t.node,i.component=t.comName,i.handler=e,i}},e.prototype.showAni=function(t,e,o){var i,a=this;switch(t){case 0:i=cc.tween(a.node).to(.2,{scale:.7}).by(.3,{y:2*a.node.height});break;case 1:i=cc.tween(a.node).to(.2,{scale:.7}).by(.3,{x:2*a.node.width});break;case 2:i=cc.tween(a.node).to(.2,{scale:.7}).by(.3,{y:-2*a.node.height});break;case 3:i=cc.tween(a.node).to(.2,{scale:.7}).by(.3,{x:-2*a.node.width});break;default:i=cc.tween(a.node).to(.3,{scale:.1})}(e||o)&&i.call(function(){if(o){a.list._delSingleItem(a.node);for(var t=a.list.displayData.length-1;t>=0;t--)if(a.list.displayData[t].id==a.listId){a.list.displayData.splice(t,1);break}}e()}),i.start()},e.prototype.onClickThis=function(){this.list.selectedId=this.listId},r([u({type:cc.Sprite})],e.prototype,"icon",void 0),r([u({type:cc.Node})],e.prototype,"title",void 0),r([u({type:cc.Enum(s)})],e.prototype,"selectedMode",void 0),r([u({type:cc.Node,visible:function(){return this.selectedMode>s.NONE}})],e.prototype,"selectedFlag",void 0),r([u({type:cc.SpriteFrame,visible:function(){return this.selectedMode==s.SWITCH}})],e.prototype,"selectedSpriteFrame",void 0),r([u({})],e.prototype,"adaptiveSize",void 0),r([l,p(),d("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),g(-5001)],e)}(cc.Component);a.default=h,cc._RF.pop()},{}],List:[function(t,e,o){"use strict";cc._RF.push(e,"4763fX1GsZIZpmPHEXSCXPP","List");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c,l,u,p=cc._decorator,d=p.ccclass,g=p.property,h=p.disallowMultiple,f=p.menu,y=p.executionOrder,m=p.requireComponent,v=a("ListItem");(function(t){t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB"})(c||(c={})),function(t){t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE"}(l||(l={})),function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT"}(u||(u={}));var I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateType=c.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=l.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=u.NONE,e.repeatEventSingle=!1,e.selectedEvent=new cc.Component.EventHandler,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}return r(e,t),Object.defineProperty(e.prototype,"slideMode",{get:function(){return this._slideMode},set:function(t){this._slideMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"virtual",{get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateRate",{get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedId",{get:function(){return this._selectedId},set:function(t){var e,o=this;switch(o.selectedMode){case u.SINGLE:if(!o.repeatEventSingle&&t==o._selectedId)return;e=o.getItemByListId(t);var i=void 0;if(o._selectedId>=0?o._lastSelectedId=o._selectedId:o._lastSelectedId=null,o._selectedId=t,e&&((i=e.getComponent(v.default)).selected=!0),o._lastSelectedId>=0&&o._lastSelectedId!=o._selectedId){var a=o.getItemByListId(o._lastSelectedId);a&&(a.getComponent(v.default).selected=!1)}o.selectedEvent&&cc.Component.EventHandler.emitEvents([o.selectedEvent],e,t%this._actualNumItems,null==o._lastSelectedId?null:o._lastSelectedId%this._actualNumItems);break;case u.MULT:if(!(e=o.getItemByListId(t)))return;i=e.getComponent(v.default),o._selectedId>=0&&(o._lastSelectedId=o._selectedId),o._selectedId=t;var n=!i.selected;i.selected=n;var r=o.multSelected.indexOf(t);n&&r<0?o.multSelected.push(t):!n&&r>=0&&o.multSelected.splice(r,1),o.selectedEvent&&cc.Component.EventHandler.emitEvents([o.selectedEvent],e,t%this._actualNumItems,null==o._lastSelectedId?null:o._lastSelectedId%this._actualNumItems,n)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=l.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);var o=e.content.getComponent(cc.Layout);if(o&&(o.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var i=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,a=0;a<i;a++)e._createOrUpdateItem2(a);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(a=0;a<e._numItems;a++)e._createOrUpdateItem2(a);e.displayItemNum=e._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._init()},e.prototype.onDestroy=function(){var t=this;cc.isValid(t._itemTmp)&&t._itemTmp.destroy(),cc.isValid(t.tmpNode)&&t.tmpNode.destroy(),t._pool&&t._pool.clear()},e.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},e.prototype.onDisable=function(){this._unregisterEvent()},e.prototype._registerEvent=function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.on("touch-up",t._onTouchUp,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0),t.node.on(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._unregisterEvent=function(){var t=this;t.node.off(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.off("touch-up",t._onTouchUp,t),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0),t.node.off(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._init=function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(cc.ScrollView),t.content=t._scrollView.content,t.content){switch(t._layout=t.content.getComponent(cc.Layout),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(cc.instantiate(t.templateType==c.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=l.ADHERING&&t._slideMode!=l.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new cc.NodePool,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case cc.Layout.Type.HORIZONTAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else cc.error(t.node.name+"'s cc.ScrollView unset content!")},e.prototype._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=1*t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var o=e-1;e=o*o*o*o*o+1}var i=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e)),a=this._scrollView.getScrollEndedEventTiming(),n=Math.abs(e-1)<=a;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),n&&(this._scrollView._autoScrolling=!1);var r=i.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(r),n),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},e.prototype.setTemplateItem=function(t){if(t){var e=this;e._itemTmp=t,e._resizeMode==cc.Layout.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=cc.size(t.width,t.height);var o=t.getComponent(v.default),i=!1;switch(o||(i=!0),i&&(e.selectedMode=u.NONE),(o=t.getComponent(cc.Widget))&&o.enabled&&(e._needUpdateWidget=!0),e.selectedMode==u.MULT&&(e.multSelected=[]),e._align){case cc.Layout.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case cc.Layout.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var a=e.content.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((a+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var n=e.content.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((n+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},e.prototype.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},e.prototype._resizeContent=function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:if(e._customSize){var o=e._getFixedSize(null);t=e._leftGap+o.val+e._itemSize.width*(e._numItems-o.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:e._customSize?(o=e._getFixedSize(null),t=e._topGap+o.val+e._itemSize.height*(e._numItems-o.count)+e._lineGap*(e._numItems-1)+e._bottomGap):t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*i+e._lineGap*(i-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var a=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*a+e._columnGap*(a-1)+e._rightGap}}var n=e.content.getComponent(cc.Layout);if(n&&(n.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var r=e._sizeType?e.node.height:e.node.width;e._cyclicPos1=0,r-=e._cyclicPos1,e._cyclicNum=Math.ceil(r/e._allItemSizeNoEdge)+1;var s=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+s,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+s*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=s*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.node.height:e.node.width);var c=e._lack&&e.lackCenter||!e.lackSlide?.1:0,l=e._lack?(e._sizeType?e.node.height:e.node.width)-c:e.cyclic?e._cyclicAllItemSize:e._allItemSize;l<0&&(l=0),e._sizeType?e.content.height=l:e.content.width=l},e.prototype._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var o=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),i=this._sizeType?cc.v2(0,o):cc.v2(o,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)))}}var a,n,r,s;if(this._calcViewPos(),this._sizeType?(a=this.viewTop,r=this.viewBottom):(n=this.viewRight,s=this.viewLeft),this._virtual){this.displayData=[];var c=void 0,l=0,u=this._numItems-1;if(this._customSize)for(var p=!1;l<=u&&!p;l++)switch(c=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=s&&c.left<=n?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=a&&c.top>=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=a&&c.top>=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=s&&c.left<=n?this.displayData.push(c):0!=l&&this.displayData.length>0&&(p=!0)}}else{var d=this._itemSize.width+this._columnGap,g=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(s-this._leftGap)/d,u=(n-this._leftGap)/d;break;case 2:l=(-n-this._rightGap)/d,u=(-s-this._rightGap)/d;break;case 3:l=(-a-this._topGap)/g,u=(-r-this._topGap)/g;break;case 4:l=(r-this._bottomGap)/g,u=(a-this._bottomGap)/g}for(l=Math.floor(l)*this._colLineNum,u=Math.ceil(u)*this._colLineNum,l<0&&(l=0),--u>=this._numItems&&(u=this._numItems-1);l<=u;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var h=this._lastDisplayData.length,f=this.displayItemNum!=h;if(f&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(t,e){return t-e}),f=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[h-1]),this._forceUpdate||f)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var y=0;y<this.displayItemNum;y++)this._createOrUpdateItem(this.displayData[y]);this._forceUpdate=!1}this._calcNearestItem()}}},e.prototype._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},e.prototype._calcItemPos=function(t){var e,o,i,a,n,r,s,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(t);n=this._leftGap+(this._itemSize.width+this._columnGap)*(t-l.count)+(l.val+this._columnGap*l.count),e=(u=this._customSize[t])>0?u:this._itemSize.width}else n=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;return this.lackCenter&&(n-=this._leftGap,n+=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,left:n,right:r=n+e,x:n+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(t),r=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-l.count)-(l.val+this._columnGap*l.count),e=(u=this._customSize[t])>0?u:this._itemSize.width):(r=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width),this.lackCenter&&(r+=this._rightGap,r-=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,right:r,left:n=r-e,x:n+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(t),i=-this._topGap-(this._itemSize.height+this._lineGap)*(t-l.count)-(l.val+this._lineGap*l.count),o=(u=this._customSize[t])>0?u:this._itemSize.height):(i=-this._topGap-(this._itemSize.height+this._lineGap)*t,o=this._itemSize.height),this.lackCenter&&(i+=this._topGap,i-=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:i,bottom:a=i-o,x:this._itemTmp.x,y:a+this._itemTmp.anchorY*o};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var u;return this._customSize?(l=this._getFixedSize(t),a=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-l.count)+(l.val+this._lineGap*l.count),o=(u=this._customSize[t])>0?u:this._itemSize.height):(a=this._bottomGap+(this._itemSize.height+this._lineGap)*t,o=this._itemSize.height),this.lackCenter&&(a-=this._bottomGap,a+=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:i=a+o,bottom:a,x:this._itemTmp.x,y:a+this._itemTmp.anchorY*o}}case cc.Layout.Type.GRID:var p=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(a=(i=-this._topGap-(this._itemSize.height+this._lineGap)*p)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:i=(a=this._bottomGap+(this._itemSize.height+this._lineGap)*p)+this._itemSize.height,c=a+this._itemTmp.anchorY*this._itemSize.height}switch(s=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s+=this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s+=(1-this._itemTmp.anchorX)*this._itemSize.width,s-=(1-this.content.anchorX)*this.content.width,s*=-1}return{id:t,top:i,bottom:a,x:s,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:r=(n=this._leftGap+(this._itemSize.width+this._columnGap)*p)+this._itemSize.width,s=n+this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s=(n=(r=-this._rightGap-(this._itemSize.width+this._columnGap)*p)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,s+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:t,left:n,right:r,x:s,y:c}}}},e.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var o={id:t,x:e.x,y:e.y};return this._sizeType?(o.top=e.y+e.height*(1-e.anchorY),o.bottom=e.y-e.height*e.anchorY):(o.left=e.x-e.width*e.anchorX,o.right=e.x+e.width*(1-e.anchorX)),o},e.prototype.getItemPos=function(t){return this._virtual?this._calcItemPos(t):this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},e.prototype._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,o=0;for(var i in this._customSize)parseInt(i)<t&&(e+=this._customSize[i],o++);return{val:e,count:o}},e.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},e.prototype._onScrollEnded=function(){var t=this;if(t.curScrollIsTouch=!1,null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&cc.tween(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=l.ADHERING||t.adhering?t._slideMode==l.PAGE&&(null!=t._beganPos&&t.curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()},e.prototype._onTouchStart=function(t,e){if(!this._scrollView.hasNestedViewGroup(t,e)&&(this.curScrollIsTouch=!0,t.eventPhase!==cc.Event.AT_TARGET||t.target!==this.node)){for(var o=t.target;null==o._listId&&o.parent;)o=o.parent;this._scrollItem=null!=o._listId?o:t.target}},e.prototype._onTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==l.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==l.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null},e.prototype._onTouchCancelled=function(t,e){var o=this;o._scrollView.hasNestedViewGroup(t,e)||t.simulate||(o._scrollPos=null,o._slideMode==l.ADHERING?(o.adhering&&(o._adheringBarrier=!0),o.adhere()):o._slideMode==l.PAGE&&(null!=o._beganPos?o._pageAdhere():o.adhere()),this._scrollItem=null)},e.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},e.prototype._onItemAdaptive=function(t){if(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height){this._customSize||(this._customSize={});var e=this._sizeType?t.height:t.width;this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},e.prototype._pageAdhere=function(){var t=this;if(t.cyclic||!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,o=(t._sizeType?t.node.height:t.node.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>o)switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(.5):t.nextPage(.5);break;case 2:case 3:t._beganPos<e?t.prePage(.5):t.nextPage(.5)}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},e.prototype.adhere=function(){var t=this;if(t.checkInited()&&!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t.node.height:t.node.width);t.scrollTo(t.nearestListId,.7,e)}},e.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var o=this.displayData[e];o&&this._createOrUpdateItem(o)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==l.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==l.PAGE&&(this.curPageNum=this.nearestListId)},e.prototype._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var o=this._pool.size()>0;if(e=o?this._pool.get():cc.instantiate(this._itemTmp),o&&cc.isValid(e)||(e=cc.instantiate(this._itemTmp),o=!1),e._listId!=t.id&&(e._listId=t.id,e.setContentSize(this._itemSize)),e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.content.addChild(e),o&&this._needUpdateWidget){var i=e.getComponent(cc.Widget);i&&i.updateAlignment()}e.setSiblingIndex(this.content.childrenCount-1);var a=e.getComponent(v.default);e.listItem=a,a&&(a.listId=t.id,a.list=this,a._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},e.prototype._createOrUpdateItem2=function(t){var e,o=this.content.children[t];o?this._forceUpdate&&this.renderEvent&&(o._listId=t,e&&(e.listId=t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,t%this._actualNumItems)):((o=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(o),e=o.getComponent(v.default),o.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},e.prototype._updateListItem=function(t){if(t&&this.selectedMode>u.NONE){var e=t.node;switch(this.selectedMode){case u.SINGLE:t.selected=this.selectedId==e._listId;break;case u.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}},e.prototype._resetItemSize=function(){},e.prototype._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),o=this.getItemPos(e._listId);e.setPosition(o.x,o.y)},e.prototype.setMultSelected=function(t,e){var o=this;if(o.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)o.multSelected=t;else{var i=void 0,a=void 0;if(e)for(var n=t.length-1;n>=0;n--)i=t[n],(a=o.multSelected.indexOf(i))<0&&o.multSelected.push(i);else for(n=t.length-1;n>=0;n--)i=t[n],(a=o.multSelected.indexOf(i))>=0&&o.multSelected.splice(a,1)}o._forceUpdate=!0,o._onScrolling()}},e.prototype.getMultSelected=function(){return this.multSelected},e.prototype.hasMultSelected=function(t){return this.multSelected&&this.multSelected.indexOf(t)>=0},e.prototype.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,o=t.length;e<o;e++){var i=t[e],a=this.getItemByListId(i);a&&cc.Component.EventHandler.emitEvents([this.renderEvent],a,i%this._actualNumItems)}}},e.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},e.prototype.getItemByListId=function(t){if(this.content)for(var e=this.content.childrenCount-1;e>=0;e--){var o=this.content.children[e];if(o._listId==t)return o}},e.prototype._getOutsideItem=function(){for(var t,e=[],o=this.content.childrenCount-1;o>=0;o--)t=this.content.children[o],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},e.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var o=t[e];if(!this._scrollItem||o._listId!=this._scrollItem._listId){o.isCached=!0,this._pool.put(o);for(var i=this._lastDisplayData.length-1;i>=0;i--)if(this._lastDisplayData[i]==o._listId){this._lastDisplayData.splice(i,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},e.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},e.prototype.aniDelItem=function(t,e,o){var i=this;if(!i.checkInited()||i.cyclic||!i._virtual)return cc.error("This function is not allowed to be called!");if(!e)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(i._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var a,n=i.getItemByListId(t);if(n){a=n.getComponent(v.default),i._aniDelRuning=!0,i._aniDelCB=e,i._aniDelItem=n,i._aniDelBeforePos=n.position,i._aniDelBeforeScale=n.scale;var r=i.displayData[i.displayData.length-1].id,s=a.selected;a.showAni(o,function(){var o,a,c;if(r<i._numItems-2&&(o=r+1),null!=o){var l=i._calcItemPos(o);i.displayData.push(l),i._virtual?i._createOrUpdateItem(l):i._createOrUpdateItem2(o)}else i._numItems--;if(i.selectedMode==u.SINGLE)s?i._selectedId=-1:i._selectedId-1>=0&&i._selectedId--;else if(i.selectedMode==u.MULT&&i.multSelected.length){var p=i.multSelected.indexOf(t);p>=0&&i.multSelected.splice(p,1);for(var d=i.multSelected.length-1;d>=0;d--)(f=i.multSelected[d])>=t&&i.multSelected[d]--}if(i._customSize){i._customSize[t]&&delete i._customSize[t];var g={},h=void 0;for(var f in i._customSize){h=i._customSize[f];var y=parseInt(f);g[y-(y>=t?1:0)]=h}i._customSize=g}for(d=null!=o?o:r;d>=t+1;d--)if(n=i.getItemByListId(d)){var m=i._calcItemPos(d-1);a=cc.tween(n).to(.2333,{position:cc.v2(m.x,m.y)}),d<=t+1&&(c=!0,a.call(function(){i._aniDelRuning=!1,e(t),delete i._aniDelCB})),a.start()}c||(i._aniDelRuning=!1,e(t),i._aniDelCB=null)},!0)}else e(t)},e.prototype.scrollTo=function(t,e,o,i){void 0===e&&(e=.5),void 0===o&&(o=null),void 0===i&&(i=!1);var a=this;if(a.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=a._numItems&&(t=a._numItems-1),!a._virtual&&a._layout&&a._layout.enabled&&a._layout.updateLayout();var n,r,s=a.getItemPos(t);if(!s)return!1;switch(a._alignCalcType){case 1:n=s.left,n-=null!=o?a.node.width*o:a._leftGap,s=cc.v2(n,0);break;case 2:n=s.right-a.node.width,n+=null!=o?a.node.width*o:a._rightGap,s=cc.v2(n+a.content.width,0);break;case 3:r=s.top,r+=null!=o?a.node.height*o:a._topGap,s=cc.v2(0,-r);break;case 4:r=s.bottom+a.node.height,r-=null!=o?a.node.height*o:a._bottomGap,s=cc.v2(0,-r+a.content.height)}var c=a.content.getPosition();c=Math.abs(a._sizeType?c.y:c.x);var l=a._sizeType?s.y:s.x;Math.abs((null!=a._scrollPos?a._scrollPos:c)-l)>.5&&(a._scrollView.scrollToOffset(s,e),a._scrollToListId=t,a._scrollToEndTime=(new Date).getTime()/1e3+e,a._scrollToSo=a.scheduleOnce(function(){if(a._adheringBarrier||(a.adhering=a._adheringBarrier=!1),a._scrollPos=a._scrollToListId=a._scrollToEndTime=a._scrollToSo=null,i){var e=a.getItemByListId(t);e&&cc.tween(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},e+.1),e<=0&&a._onScrolling())}},e.prototype._calcNearestItem=function(){var t,e,o,i,a,n,r=this;r.nearestListId=null,r._virtual&&r._calcViewPos(),o=r.viewTop,i=r.viewRight,a=r.viewBottom,n=r.viewLeft;for(var s=!1,c=0;c<r.content.childrenCount&&!s;c+=r._colLineNum)if(t=r._virtual?r.displayData[c]:r._calcExistItemPos(c))switch(e=r._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,r._alignCalcType){case 1:t.right>=n&&(r.nearestListId=t.id,n>e&&(r.nearestListId+=r._colLineNum),s=!0);break;case 2:t.left<=i&&(r.nearestListId=t.id,i<e&&(r.nearestListId+=r._colLineNum),s=!0);break;case 3:t.bottom<=o&&(r.nearestListId=t.id,o<e&&(r.nearestListId+=r._colLineNum),s=!0);break;case 4:t.top>=a&&(r.nearestListId=t.id,a>e&&(r.nearestListId+=r._colLineNum),s=!0)}if((t=r._virtual?r.displayData[r.displayItemNum-1]:r._calcExistItemPos(r._numItems-1))&&t.id==r._numItems-1)switch(e=r._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,r._alignCalcType){case 1:i>e&&(r.nearestListId=t.id);break;case 2:n<e&&(r.nearestListId=t.id);break;case 3:a<e&&(r.nearestListId=t.id);break;case 4:o>e&&(r.nearestListId=t.id)}},e.prototype.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},e.prototype.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},e.prototype.skipPage=function(t,e){var o=this;if(o.checkInited())return o._slideMode!=l.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=o._numItems||o.curPageNum!=t&&(o.curPageNum=t,o.pageChangeEvent&&cc.Component.EventHandler.emitEvents([o.pageChangeEvent],t),o.scrollTo(t,e)))},e.prototype.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e._customSize={};var o=cc.instantiate(e._itemTmp);e.content.addChild(o);for(var i=0;i<t;i++)cc.Component.EventHandler.emitEvents([e.renderEvent],o,i),o.height==e._itemSize.height&&o.width==e._itemSize.width||(e._customSize[i]=e._sizeType?o.height:o.width);return Object.keys(e._customSize).length||(e._customSize=null),o.removeFromParent(),o.destroy&&o.destroy(),e._customSize}},s([g({type:cc.Enum(c)})],e.prototype,"templateType",void 0),s([g({type:cc.Node,visible:function(){return this.templateType==c.NODE}})],e.prototype,"tmpNode",void 0),s([g({type:cc.Prefab,visible:function(){return this.templateType==c.PREFAB}})],e.prototype,"tmpPrefab",void 0),s([g()],e.prototype,"_slideMode",void 0),s([g({type:cc.Enum(l)})],e.prototype,"slideMode",null),s([g({type:cc.Float,range:[0,1,.1],slide:!0,visible:function(){return this._slideMode==l.PAGE}})],e.prototype,"pageDistance",void 0),s([g({type:cc.Component.EventHandler,visible:function(){return this._slideMode==l.PAGE}})],e.prototype,"pageChangeEvent",void 0),s([g()],e.prototype,"_virtual",void 0),s([g({type:cc.Boolean})],e.prototype,"virtual",null),s([g({visible:function(){var t=this.slideMode==l.NORMAL;return t||(this.cyclic=!1),t}})],e.prototype,"cyclic",void 0),s([g({visible:function(){return this.virtual}})],e.prototype,"lackCenter",void 0),s([g({visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}})],e.prototype,"lackSlide",void 0),s([g({type:cc.Integer})],e.prototype,"_updateRate",void 0),s([g({type:cc.Integer,range:[0,6,1],slide:!0})],e.prototype,"updateRate",null),s([g({type:cc.Integer,range:[0,12,1],slide:!0})],e.prototype,"frameByFrameRenderNum",void 0),s([g({type:cc.Component.EventHandler})],e.prototype,"renderEvent",void 0),s([g({type:cc.Enum(u)})],e.prototype,"selectedMode",void 0),s([g({visible:function(){return this.selectedMode==u.SINGLE}})],e.prototype,"repeatEventSingle",void 0),s([g({type:cc.Component.EventHandler,visible:function(){return this.selectedMode>u.NONE}})],e.prototype,"selectedEvent",void 0),s([g({serializable:!1})],e.prototype,"_numItems",void 0),s([d,h(),f("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),m(cc.ScrollView),y(-5e3)],e)}(cc.Component);n.default=I,cc._RF.pop()},{}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"41b57as2OZEuZ652LPFYv15","Loading");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("CommonModel"),l=a("Appcfg"),u=a("AudioMgr"),p=a("EventMgr"),d=a("PlatformManager"),g=a("PoolMgr"),h=a("ResCacheMgr"),f=a("ResourceMgr"),y=a("SdkMgr"),m=a("UIMgr"),v=a("Config"),I=a("TrackDataEvent"),k=a("CardMgr"),S=a("DataMgr"),C=a("PlayerMgr"),b=cc._decorator,_=b.ccclass,N=b.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiRoot=null,e.tips=null,e.progressBar=null,e.process=0,e.sceneName="Main",e}return r(e,t),e.prototype.onLoad=function(){cc.director.preloadScene(this.sceneName)},e.prototype.start=function(){var t=this;cc.game.addPersistRootNode(this.uiRoot),this.progressBar.progress=0,this.tips.string="\u8d44\u6e90\u52a0\u8f7d\u4e2d...",d.PlatformManager.getInstance().init(),p.EventMgr.getInstance().on(l.BaseEventName.GoGame,this,this.goGame),h.ResCacheMgr.getInstance().init(),this.preloadUI(),m.UIMgr.getInstance().addUICnf(v.UICF),m.UIMgr.getInstance().Init(this.uiRoot),u.AudioMgr.getInstance().init(v.AudioCF),p.EventMgr.getInstance().on(l.BaseEventName.Loading,this,this.setProcessLoad),y.SdkMgr.getInstance().requestCheckVersion(function(){t.setProcessLoad(l.LoadingProcess.StartLoading)})},e.prototype.trackEvent=function(){C.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.guide1)},e.prototype.setProcessLoad=function(t){var e=this;switch(this.process=t/100,t){case l.LoadingProcess.StartLoading:S.DataMgr.getInstance().preload();break;case l.LoadingProcess.ExcelCfg:C.PlayerMgr.getInstance().preload();break;case l.LoadingProcess.PlayerCfg:c.CommonModel.Instance().initCommon(function(){e.setProcessLoad(l.LoadingProcess.EndLoading)});break;case l.LoadingProcess.EndLoading:y.SdkMgr.getInstance().hasVerify()?(k.default.getInstance().isWCN()&&m.UIMgr.getInstance().openUI(v.UIID.UIExit,-1),k.default.getInstance().isVerify()?k.default.getInstance().toGame(function(){e.goGame()}):m.UIMgr.getInstance().openUI(v.UIID.UIRealName,-1,function(){e.goGame()})):this.goGame()}this.progressBar.progress=this.process},e.prototype.goGame=function(){cc.director.loadScene(this.sceneName),this.trackEvent()},e.prototype.preloadUI=function(){f.ResourceMgr.getInstance().preload("prefabs",["UIHome","UIHomeNew","UITop","UIGuide"]),f.ResourceMgr.getInstance().loadRes("objects","player/Player",cc.Prefab,function(t){g.PoolMgr.getInstance().creatrePool("Player",cc.instantiate(t),2)})},s([N(cc.Node)],e.prototype,"uiRoot",void 0),s([N(cc.Label)],e.prototype,"tips",void 0),s([N(cc.ProgressBar)],e.prototype,"progressBar",void 0),s([_],e)}(cc.Component);n.default=T,cc._RF.pop()},{}],LogMgr:[function(t,e,o){"use strict";cc._RF.push(e,"66888k6K8BMX5FlnhFjgbWs","LogMgr");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.LogMgr=void 0;var a=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.debug=function(){},t.prototype.info=function(t,e){console.log(t,e)},t.prototype.error=function(t,e){console.error(t,e)},t.instance=null,t}();i.LogMgr=a,cc._RF.pop()},{}],MainTaskData:[function(t,e,o){"use strict";cc._RF.push(e,"49cc1oTNnNFJJG9hdpIQs24","MainTaskData");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.MainTaskData=void 0;var s=a("BaseData"),c=a("BasePlatform"),l=a("EventMgr"),u=a("PlatformManager"),p=a("UIMgr"),d=a("Config"),g=a("DataMgr"),h=a("PlayerMgr"),f=function(){this.curTaskId=1,this.curTaskState=!1,this.curTaskParameter=0},y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ecrypt=!1,e.gameKey=d.GameConfig.AppCacheName+"taskData",e.endTaskId=10,e.recordTaskCount=0,e}return r(e,t),e.prototype.addRecordTaskCount=function(t){if(void 0===t&&(t=function(){}),this.recordTaskCount+=1,this.recordTaskCount>=4){if(t&&t(),u.PlatformManager.currentPlatform==c.Platform.BYTEDANCE){var e=h.PlayerMgr.getInstance().getShareData();e.stopRecord(!1),e.getCanShare()&&p.UIMgr.getInstance().openUI(d.UIID.UIShareVideo,-1)}this.resetRecordTaskCount()}},e.prototype.resetRecordTaskCount=function(){this.recordTaskCount=0},e.prototype.createData=function(){return this.data=new f,this.data},e.prototype.initData=function(t){t||(this.endTaskId=g.DataMgr.getInstance().getMissionCfg().length)},e.prototype.getCurrentId=function(){return this.data.curTaskId},e.prototype.getCurrentState=function(){return this.data.curTaskState},e.prototype.getCurrentParameter=function(){return this.data.curTaskParameter},e.prototype.setCurTaskState=function(t){void 0===t&&(t=!0),this.data.curTaskState=t,l.EventMgr.getInstance().emit(d.EventName.RefreshMainTaskFinished,t),this.saveData()},e.prototype.addCurTaskParameter=function(t,e){if(void 0===t&&(t=1),void 0===e&&(e=!1),1!=this.data.curTaskState){e?this.data.curTaskParameter=t:this.data.curTaskParameter+=t;var o=g.DataMgr.getInstance().getMission(this.getCurrentId());o&&(l.EventMgr.getInstance().emit(d.EventName.RefreshMainTaskDec),this.data.curTaskParameter>=o.TaskParameter&&this.completeTask(),this.saveData())}},e.prototype.trackEvent=function(){},e.prototype.addTaskId=function(t){void 0===t&&(t=!0),this.data.curTaskId+=1,this.resetTaskData();var e=g.DataMgr.getInstance().getMission(this.data.curTaskId);l.EventMgr.getInstance().emit(d.EventName.RefreshMainTask,!1),e&&(this.data.curTaskState||h.PlayerMgr.getInstance().getMainTaskData().carrayTaskForType(this.data.curTaskId,e.Type)),t&&this.saveData()},e.prototype.completeTask=function(){g.DataMgr.getInstance().getMission(h.PlayerMgr.getInstance().getMainTaskData().getCurrentId())&&h.PlayerMgr.getInstance().getMainTaskData().setCurTaskState()},e.prototype.getTaskEnd=function(){return this.data.curTaskId>=this.endTaskId},e.prototype.resetTaskData=function(){this.data.curTaskState=!1,this.data.curTaskParameter=0},e.prototype.carrayTaskForType=function(t){var e=g.DataMgr.getInstance().getMission(t);if(e&&1==e.Type){var o=h.PlayerMgr.getInstance().geUserData().getCurSec();this.addCurTaskParameter(o-1,!0)}},e.prototype.mainTask=function(t,e,o){void 0===e&&(e=1),void 0===o&&(o=!1);var i=g.DataMgr.getInstance().getMission(h.PlayerMgr.getInstance().getMainTaskData().getCurrentId());i&&i.Type==t&&h.PlayerMgr.getInstance().getMainTaskData().addCurTaskParameter(e,o)},e}(s.BaseData);n.MainTaskData=y,cc._RF.pop()},{}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"bdd5dhrRU5Cjq9Jm8O/mMt1","Main");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("Appcfg"),l=a("AudioMgr"),u=a("EventMgr"),p=a("PlatformManager"),d=a("PoolMgr"),g=a("ResourceMgr"),h=a("UIMgr"),f=a("SpineUtils"),y=a("TimeUtils"),m=a("Utils"),v=a("Config"),I=a("TrackDataEvent"),k=a("CameraMgr"),S=a("CardMgr"),C=a("DataMgr"),b=a("EquipMgr"),_=a("GameDataMgr"),N=a("GameMgr"),T=a("GoodsManager"),D=a("ObjectMgr"),M=a("PetMgr"),B=a("PlayerMgr"),P=a("RoleMgr"),L=a("TaskMgr"),E=a("TimeMgr"),w=a("Monster"),U=a("ObjectsParent"),A=a("Player"),R=a("UITop"),O=cc._decorator,F=O.ccclass,q=O.property,G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.root=null,e.cameraNode=null,e.gameCamera=null,e.temp=null,e.btnChangle=null,e.childTouch=!1,e.size=cc.size(750,1334),e.player_Home=null,e.player=null,e.pet=null,e.curAttackedMonster=null,e.isAttackState=!1,e.monsterList=[],e.monsterRightList=[],e.monsterLeftList=[],e.leftMonsterAtClose=[],e.rightMonsterAtClose=[],e.leftMonsterAtLong=[],e.rightMonsterAtLong=[],e.bossMonster=null,e.monsterCount=0,e.isLookSkill=!1,e.isFastPass=!1,e.isPauseGame=!1,e.isFitHeight=!1,e.isFitWidth=!1,e}var o;return r(e,t),o=e,e.prototype.onLoad=function(){h.UIMgr.getInstance().getChildByName("UILoading").destroy(),this.adapt(),this.preloadRes(),this.initPhoneSize(),this.loadPool(),this.initMagrData(),S.default.getInstance().isWCN()&&u.EventMgr.getInstance().on("WCNGameEnd",this,function(t){h.UIMgr.getInstance().openUI(v.UIID.UIExit,-1,t)})},e.prototype.initMagrData=function(){B.PlayerMgr.getInstance().getGuideData().initAbTypeData(),L.default.getInstance().initTaskData(),E.TimeMgr.getInstance().initData(),_.default.getInstance().classifySkillBook(),T.default.getInstance().initClassData(),M.default.getInstance().initPetData()},e.prototype.start=function(){var t=this;this.trackEvent(),o.instance=this,this.openOnlineTimer(),this.openPetTimer(),this.refreshSaveTime(),this.initOnHookTime(),h.UIMgr.getInstance().openUI(v.UIID.UITouch,-1),u.EventMgr.getInstance().on(c.BaseEventName.CloseUI,this,function(t){t!=v.UIID.UIHome&&t!=v.UIID.UIHomeNew||p.PlatformManager.getInstance().hideBlockAd(2)});var e=B.PlayerMgr.getInstance().geUserData(),i=B.PlayerMgr.getInstance().getAbType();"A"!=i&&"B"!=i&&"C"!=i&&"D"!=i||!e.getIsFirstEnterGame()||1!=e.getCurSec()||1!=e.getCurLevel()?(l.AudioMgr.getInstance().playMusic(v.AudioId.BGM_Main,"bg"),N.default.getInstance().openHomeUI(),h.UIMgr.getInstance().openUIOfCallback(v.UIID.UITop,-1,function(e){t.uiTop=e.getComponent(R.default),u.EventMgr.getInstance().on(v.EventName.ShowUITop,t,function(e){t.uiTop.node.active=e})})):h.UIMgr.getInstance().openUIOfCallback(v.UIID.UITop,-1,function(o){t.uiTop=o.getComponent(R.default),u.EventMgr.getInstance().on(v.EventName.ShowUITop,t,function(e){t.uiTop.node.active=e}),e.setIsFirstEnterGame(!1),B.PlayerMgr.getInstance().getGuideData().setCurrentId(2),t.startGame(),l.AudioMgr.getInstance().playMusic(v.AudioId.BGM_Battle,"bg")}),this.refreshMysticalShopSaveTime(),this.temp.on(cc.Node.EventType.TOUCH_START,function(){t.childTouch=!0}),this.temp.on(cc.Node.EventType.TOUCH_CANCEL,function(){t.childTouch=!1}),this.temp.on(cc.Node.EventType.TOUCH_END,function(){t.childTouch=!1}),this.temp.on(cc.Node.EventType.TOUCH_MOVE,function(e){var o=t.temp.position.add(cc.v3(e.getDelta().divide(t.cameraNode.getComponent(cc.Camera).zoomRatio)));t.temp.setPosition(o)}),this.scheduleOnce(function(){u.EventMgr.getInstance().emit("WCNGameEnd","\u7531\u4e8e\u60a8\u662f\u672a\u6210\u5e74\u53ea\u80fd\u73a9\u4e00\u4e2a\u5c0f\u65f6")},3)},e.prototype.trackEvent=function(){B.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.guide1_1),B.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.dau)},e.prototype.initPhoneSize=function(){},e.prototype.adapt=function(){var t=cc.winSize.width/cc.winSize.height,e=cc.Canvas.instance.designResolution.width/cc.Canvas.instance.designResolution.height;t<=1&&t<=e?this.setFitWidth():this.setFitHeight()},e.prototype.setFitHeight=function(){cc.Canvas.instance.fitHeight=!0,cc.Canvas.instance.fitWidth=!1,this.isFitHeight=!0},e.prototype.setFitWidth=function(){cc.Canvas.instance.fitHeight=!1,cc.Canvas.instance.fitWidth=!0,this.isFitWidth=!0},e.prototype.getFitHeight=function(){return this.isFitHeight},e.prototype.refreshMysticalShopSaveTime=function(){var t=B.PlayerMgr.getInstance().getMysticalShopData().getLastLoginTime();y.TimeUtils.compareIsToday(t)||(B.PlayerMgr.getInstance().getMysticalShopData().refreshLastLoginTime(),N.default.getInstance().refreshMysticalShopData())},e.prototype.startGame=function(){var t=B.PlayerMgr.getInstance().geUserData();o.instance.controlPetShow(!1),1==t.getCurSec()&&t.addEnterFirstSecCount(),B.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.guide22),B.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.guide2),_.default.getInstance().classifySkillBook(),this.destroyPlayer_Home(),h.UIMgr.getInstance().openUI(v.UIID.UIGame,-1),_.default.getInstance().initGameData(),t.addEnterSecCountForSecId(t.getCurSec()),t.getMostLevelForCurSec()[1]>1?(o.instance.isFastPass=!0,h.UIMgr.getInstance().openUI(v.UIID.UIFastPass,-1)):(t.setCurLevel(1),_.default.getInstance().setGameState(v.EnumGameState.GameDoing)),this.isFastPass||this.createMonster(),this.createPlayer()},e.prototype.createPlayer_Home=function(){var t=this;cc.isValid(this.player_Home)?(this.player_Home.active=!0,this.refreshWearSalutation(),this.rolePlay_All(this.player_Home)):(this.player_Home=d.PoolMgr.getInstance().getNode("Player"),this.player_Home?_.default.getInstance().isCurGameState(v.EnumGameState.GameDoing)?this.destroyPlayer_Home():(this.player_Home.name="player_Home",this.player_Home.parent=this.node,this.player_Home.position=cc.v3(-10,_.default.getInstance().hightY,0),this.player_Home.scale=1.8,this.player_Home.zIndex=1,this.player_Home.getChildByName("SpHpBarBg").active=!1,this.refreshWearSalutation(),this.rolePlay_All(this.player_Home)):(console.log("\u52a8\u6001\u52a0\u8f7d\u4e3b\u9875\u73a9\u5bb6"),g.ResourceMgr.getInstance().loadRes("objects","player/Player",cc.Prefab,function(e){t.player_Home=cc.instantiate(e),_.default.getInstance().isCurGameState(v.EnumGameState.GameDoing)?t.destroyPlayer_Home():(t.player_Home.parent=t.node,t.player_Home.name="player_Home",t.player_Home.position=cc.v3(-10,_.default.getInstance().hightY,0),t.player_Home.scale=1.8,t.player_Home.zIndex=1,t.player_Home.getChildByName("SpHpBarBg").active=!1,t.refreshWearSalutation(),t.rolePlay_All(t.player_Home))})))},e.prototype.refreshWearSalutation=function(){if(this.player_Home){var t=B.PlayerMgr.getInstance().geUserData().getWearSalutationId();if(t<1)return;var e=this.player_Home.getChildByName("SpSalutation");h.UIMgr.getInstance().getUIRoot(v.UIID.UIEquip)?e.active=!1:e.active=!0;var o=C.DataMgr.getInstance().getSalutation(t);g.ResourceMgr.getInstance().loadSpriteframe(o.titleBundle,o.ResourcesRoute,function(t){e.getComponent(cc.Sprite).spriteFrame=t});var i=e.getComponent(cc.Animation);g.ResourceMgr.getInstance().loadRes(o.AnimBundle,o.AnimName,cc.AnimationClip,function(t){i.addClip(t),i.play(o.AnimName).repeatCount=1e5})}},e.prototype.controlWearSalutation=function(t){if(this.player_Home){var e=this.player_Home.getChildByName("SpSalutation");if(cc.isValid(e)){if(e.active==t)return;e.active=t}}},e.prototype.rolePlay_All=function(t){if(cc.isValid(t))for(var e=b.default.getInstance().getWearEquipList(),o=0;o<e.length;o++)this.rolePlay(e[o].id,t)},e.prototype.rolePlay=function(t,e){if(void 0===e&&(e=this.player_Home),cc.isValid(e)){var o=C.DataMgr.getInstance().getEquipCfg(t);if(1==o.isSkin)if(1==o.equipType){var i={imgbundle:o.bundleSkin,imgPath:o.equipSkin};f.SpineUtils.changePartImgBundle(e.getChildByName("NodeSkeleton").getComponent(sp.Skeleton),"weapon","weapon1",i)}else 4==o.equipType&&e.getChildByName("NodeSkeleton").getComponent(sp.Skeleton).setSkin(o.equipSkin)}},e.prototype.rolePlay_reset=function(t,e){if(void 0===e&&(e=this.player_Home),cc.isValid(e)){var o=C.DataMgr.getInstance().getEquipCfg(t);if(1==o.equipType){var i={imgbundle:P.default.getInstance().bundleSkin,imgPath:P.default.getInstance().defaultWeapon};f.SpineUtils.changePartImgBundle(e.getChildByName("NodeSkeleton").getComponent(sp.Skeleton),"weapon","weapon1",i)}else if(4==o.equipType){var a=P.default.getInstance().defaultClothes;e.getChildByName("NodeSkeleton").getComponent(sp.Skeleton).setSkin(a)}}},e.prototype.destroyPlayer_Home=function(t){void 0===t&&(t=!1),cc.isValid(this.player_Home)&&(this.player_Home.active=t)},e.prototype.createPet=function(){var t=this;if(M.default.getInstance().isOwnedPet||E.TimeMgr.getInstance().isOpenTimer_pet)if(this.pet){this.controlPetShow(!0);var e=M.default.getInstance().isOwnedPet?M.default.getInstance().leftPosX:M.default.getInstance().enterPosX;this.pet.position=cc.v3(e,_.default.getInstance().hightY),this.pet.scaleX=-1,M.default.getInstance().isOwnedPet?M.default.getInstance().petIdleAnim(this.pet):M.default.getInstance().petEnterAnim(this.pet)}else{var o=C.DataMgr.getInstance().getPetsCfg();g.ResourceMgr.getInstance().loadRes(o.PetsBundle,o.PetsResourcesRoute,cc.Prefab,function(e){t.pet=cc.instantiate(e);var o=M.default.getInstance().isOwnedPet?M.default.getInstance().leftPosX:M.default.getInstance().enterPosX;t.pet.position=cc.v3(o,_.default.getInstance().hightY),t.pet.parent=t.node,t.pet.scaleX=-1,t.pet.on(cc.Node.EventType.TOUCH_END,function(){B.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.pet_click),h.UIMgr.getInstance().openUI(v.UIID.UIPet,-1)}),M.default.getInstance().isOwnedPet?M.default.getInstance().petIdleAnim(t.pet):M.default.getInstance().petEnterAnim(t.pet)})}},e.prototype.controlPetShow=function(t){cc.isValid(this.pet)&&(this.pet.active=t)},e.prototype.createPlayer=function(){var t=this;this.player=new A.default,this.player.createObject("objects","player/Player",this.node,P.default.getInstance().getPlayerPro(),!0,function(){t.rolePlay_All(t.player.object)},cc.v3(0,_.default.getInstance().hightY,0),void 0,2)},e.prototype.refreshPropPlayer=function(){this.player.refreshProp()},e.prototype.createMonster=function(){for(var t=B.PlayerMgr.getInstance().geUserData(),e=C.DataMgr.getInstance().getLevelCfg(t.getCurSec(),t.getCurLevel()),o=m.Utils.getTabelArr(e.leftMonsterId),i=m.Utils.getTabelArr(e.rightMonsterId),a=m.Utils.getTabelArr(e.leftMonsterDis),n=m.Utils.getTabelArr(e.rightMonsterDis),r=0;r<o.length;r++){var s=C.DataMgr.getInstance().getMonsterProbCfg(Number(o[r]));this.makeMonster(s,Number(a[r]),!0)}for(r=0;r<i.length;r++)s=C.DataMgr.getInstance().getMonsterProbCfg(Number(i[r])),this.makeMonster(s,Number(n[r]),!1)},e.prototype.moveAndAtkPlayer=function(){var t=this;this.player.skeleton&&(this.curAttackedMonster?this.player.move(this.curAttackedMonster,function(){t.curAttackedMonster=null}):(this.detectionMonster(),this.player.move(this.curAttackedMonster,function(){t.curAttackedMonster=null})))},e.prototype.makeMonster=function(t,e,o){var i=new w.default,a=o?-(this.size.width/2+e):this.size.width/2+e;i.createObject(t.id,t.bundle,t.monsterPre,this.node,D.default.getInstance().proTableExchangeProMonster(t),!1,void 0,cc.v3(a,_.default.getInstance().hightY,0),!o),this.monsterList.push(i),this.refreshMonsterCount(1,!0),o?this.monsterLeftList.push(i):this.monsterRightList.push(i),0==t.type?o?this.leftMonsterAtClose.push(i):this.rightMonsterAtClose.push(i):o?this.leftMonsterAtLong.push(i):this.rightMonsterAtLong.push(i)},e.prototype.bossComeOn=function(){for(var t=0;t<this.monsterList.length;t++)if(3==C.DataMgr.getInstance().getMonsterProbCfg(this.monsterList[t].objectId).monsterType)return l.AudioMgr.getInstance().playEffectByPath(v.AudioId.BattleSound_BossWarn,"bossComeOn"),void(h.UIMgr.getInstance().getUIRoot(v.UIID.UIGame)&&h.UIMgr.getInstance().getUIRoot(v.UIID.UIGame).getComponent("UIGame").BossComeOnAnim())},e.prototype.dieAllMonster=function(t,e){this.monsterList||(this.monsterList=[]);var o=t;o||(o=1);var i=e;(null==i||i<=0)&&(i=.3);for(var a=0;a<this.monsterList.length;a++)this.monsterList[a].objectState==U.EnumObjectState.Alive&&(this.monsterList[a].skeleton.timeScale=this.monsterList[a].timeScale_object*o*i,this.monsterList[a].subHp(void 0,1e6))},e.prototype.moveAndAtkMonster=function(){for(var t=0;t<this.leftMonsterAtClose.length;t++)this.leftMonsterAtClose[t].objectState==U.EnumObjectState.Alive&&this.moveAtClose(t,this.leftMonsterAtClose);for(t=0;t<this.rightMonsterAtClose.length;t++)this.rightMonsterAtClose[t].objectState==U.EnumObjectState.Alive&&this.moveAtClose(t,this.rightMonsterAtClose);for(t=0;t<this.leftMonsterAtLong.length;t++)this.leftMonsterAtLong[t].objectState==U.EnumObjectState.Alive&&this.leftMonsterAtLong[t].move(this.player);for(t=0;t<this.rightMonsterAtLong.length;t++)this.rightMonsterAtLong[t].objectState==U.EnumObjectState.Alive&&this.rightMonsterAtLong[t].move(this.player)},e.prototype.moveAtClose=function(t,e){if(0==t)e[t].move(this.player);else for(var o=t-1;o>=0;o--){if(e[o].objectState==U.EnumObjectState.Alive)return void e[t].move(e[o]);0==o&&e[t].move(this.player)}},e.prototype.detectionMonster=function(){for(var t=0;t<this.monsterRightList.length;t++)if(this.monsterRightList[t].objectState==U.EnumObjectState.Alive&&(this.curAttackedMonster=this.getShortestDistance(this.player.object.getPosition(),this.monsterRightList),cc.isValid(this.curAttackedMonster)))return;for(t=0;t<this.monsterLeftList.length;t++)if(this.monsterLeftList[t].objectState==U.EnumObjectState.Alive&&(this.curAttackedMonster=this.getShortestDistance(this.player.object.getPosition(),this.monsterLeftList),cc.isValid(this.curAttackedMonster)))return;this.curAttackedMonster=null},e.prototype.getMonstersForRange=function(t,e,o){var i=[];if(this.monsterList)for(var a=0;a<this.monsterList.length;a++)if(this.monsterList[a].objectState==U.EnumObjectState.Alive){var n=this.player.object.x-this.monsterList[a].object.x;1==e?0==t?n>o[0]&&n<o[1]&&i.push(this.monsterList[a]):n>-o[1]&&n<o[0]&&i.push(this.monsterList[a]):2==e&&n>o[0]&&n<o[1]&&i.push(this.monsterList[a])}return i},e.prototype.getShortestDistance=function(t,e){if(void 0===e&&(e=[]),!t||!e)return null;for(var o=null,i=this.size.width,a=0;a<e.length;a++)if(cc.isValid(e[a].object)&&e[a].objectState==U.EnumObjectState.Alive){var n=e[a].object.getPosition(),r=Math.abs(n.x-t.x);r<i&&(i=r,o=e[a])}return o},e.prototype.controlHire_player=function(){cc.isValid(this.player)&&this.player.controlHireEff(N.default.getInstance().isAdddUp)},e.prototype.update=function(){this.controlHire_player(),this.isLookSkill||_.default.getInstance().isCurGameState(v.EnumGameState.GameDoing)&&(this.moveAndAtkPlayer(),this.moveAndAtkMonster(),this.overGameWin())},e.prototype.overGameWin=function(){for(var t=this,e=!0,o=0;o<this.monsterList.length;o++)this.monsterList[o].objectState!=U.EnumObjectState.Die&&(e=!1);if(e){var i=B.PlayerMgr.getInstance().geUserData();if(_.default.getInstance().setGameState(v.EnumGameState.GameBuffer),this.resetCurData(),this.destroyMonster(),i.isEndForSec())return console.log("\u6e38\u620f\u7ed3\u675f\uff01\uff01\uff01"),_.default.getInstance().setGameState(v.EnumGameState.GameOver),1==i.getEnterSecCountForSecId(i.getCurSec())&&B.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.chapter_pass_X,i.getCurSec()),_.default.getInstance().setGameState(v.EnumGameState.GameOver),_.default.getInstance().resetSkillBookAndFetter(),this.resetMain(),h.UIMgr.getInstance().closeById(v.UIID.UIGame),h.UIMgr.getInstance().openUI(v.UIID.UISettle,-1,!1,!0,i.getCurSec(),i.getCurLevel()),void this.refreshLevelData();i.getCurSec()<=6&&i.getCurLevel()%5==0&&B.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.chapter_lv_X_Y,i.getCurSec(),i.getCurLevel()),h.UIMgr.getInstance().openUI(v.UIID.UIDrawCard,-1,function(){if(t.controlObjectsAnim(!0),t.player.resetObject(),t.isFastPass){u.EventMgr.getInstance().emit(v.EventName.GameLayerTouch,!0);var e=B.PlayerMgr.getInstance().geUserData();e.getCurSec(),e.getCurLevel()>=e.getMostLevelForCurSec()[1]-1?(t.jumpNextLevel(),t.isFastPass=!1):(e.addCurLevel(),u.EventMgr.getInstance().emit(v.EventName.RefreshLevel))}else t.jumpNextLevel()})}},e.prototype.overGameFail=function(){_.default.getInstance().setGameState(v.EnumGameState.GameOver),_.default.getInstance().resetSkillBookAndFetter(),this.resetMain(),h.UIMgr.getInstance().closeById(v.UIID.UIGame);var t=B.PlayerMgr.getInstance().geUserData();1==t.getEnterSecCountForSecId(t.getCurSec())&&B.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.chapter_fail_X,t.getCurSec()),h.UIMgr.getInstance().openUI(v.UIID.UISettle,-1,!1,!1,t.getCurSec(),t.getCurLevel())},e.prototype.jumpNextLevel=function(){B.PlayerMgr.getInstance().geUserData().addCurLevel(),this.createMonster(),u.EventMgr.getInstance().emit(v.EventName.RefreshLevel)},e.prototype.refreshLevelData=function(){L.default.getInstance().passSecForTask(B.PlayerMgr.getInstance().geUserData().getCurSec()),B.PlayerMgr.getInstance().geUserData().addCurSec()},e.prototype.refreshMonsterCount=function(t,e){if(e)this.monsterCount+=t;else{B.PlayerMgr.getInstance().getMainTaskData().mainTask(6);var o=B.PlayerMgr.getInstance().geUserData();1==o.getCurSec()&&1==o.getCurLevel()&&u.EventMgr.getInstance().emit(v.EventName.GameGuideShow),this.monsterCount-=t}u.EventMgr.getInstance().emit(v.EventName.RefreshMonsterCount)},e.prototype.controlObjectsAnim=function(t){if(!_.default.getInstance().isCurGameState(v.EnumGameState.GamePrePare)){_.default.getInstance().isCurGameState(v.EnumGameState.GameBuffer)||(t?_.default.getInstance().setGameState(v.EnumGameState.GamePause):!this.isLookSkill&&_.default.getInstance().setGameState(v.EnumGameState.GameDoing)),this.isPauseGame=t,this.player.isPauseSkeleton(t);for(var e=0;e<this.monsterList.length;e++)this.monsterList[e].isPauseSkeleton(t)}},e.prototype.controlObjectsGameSpeed=function(){if(!_.default.getInstance().isCurGameState(v.EnumGameState.GamePrePare)){console.log("\u6e38\u620f\u52a0\u901f\uff01\uff01\uff01"),this.player.initObject();for(var t=0;t<this.monsterList.length;t++)this.monsterList[t].initObject()}},e.prototype.resetCurData=function(){this.curAttackedMonster=null,this.isAttackState=!1,this.monsterCount=0},e.prototype.resetAllData=function(){this.curAttackedMonster=null,this.isAttackState=!1,this.monsterCount=0,this.isLookSkill=!1,this.isFastPass=!1},e.prototype.destroyPlayer=function(){this.player.object.destroy(),this.player=null},e.prototype.destroyMonster=function(){for(var t=0;t<this.monsterList.length;t++)this.monsterList[t].object.destroy(),this.monsterList[t]=null;this.monsterList=[],this.monsterRightList=[],this.monsterLeftList=[],this.leftMonsterAtClose=[],this.rightMonsterAtClose=[],this.leftMonsterAtLong=[],this.rightMonsterAtLong=[]},e.prototype.destroyObjects=function(){this.destroyPlayer(),this.destroyMonster()},e.prototype.resetMain=function(){this.resetAllData(),this.destroyObjects(),this.gameCamera.resetPos()},e.prototype.fastPass=function(){this.isFastPass=!0,B.PlayerMgr.getInstance().geUserData().setCurLevel(1),_.default.getInstance().setGameState(v.EnumGameState.GameDoing)},e.prototype.resetStart=function(){this.isFastPass=!1,this.createMonster(),this.scheduleOnce(function(){_.default.getInstance().setGameState(v.EnumGameState.GameDoing)},.5)},e.prototype.preloadRes=function(){if(v.GameConfig.PreBundle.length>0)for(var t=0;t<v.GameConfig.PreBundle.length;t++){var e=v.GameConfig.PreBundle[t];g.ResourceMgr.getInstance().preload(e,null)}g.ResourceMgr.getInstance().preload("prefabs",["UIGame","UISkillBook","UIEquip","UIShop","UISetting","UISellView","UISkillBookInfo","UIEquipInfo","UIEquipInfoNew","UIFetterInfo","UIFastPass","UIDrawCard","UISettle","UIEquipComposite","UICompositeEnd"]),g.ResourceMgr.getInstance().preload("prefabs",["EffGoodEquip1","EffGoodEquip2","EffGoodEquip3","EffPropUp","EffTaskGet","EffUpLv"])},e.prototype.loadPool=function(){g.ResourceMgr.getInstance().loadRes("prefabs","effect/EffGoodEquip1",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("EffGoodEquip1",cc.instantiate(t),30)}),g.ResourceMgr.getInstance().loadRes("prefabs","effect/EffGoodEquip2",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("EffGoodEquip2",cc.instantiate(t),30)}),g.ResourceMgr.getInstance().loadRes("prefabs","effect/EffGoodEquip3",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("EffGoodEquip3",cc.instantiate(t),30)}),g.ResourceMgr.getInstance().loadRes("prefabs","widget/LabLadleWord",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("LabLadleWord",cc.instantiate(t),50)}),g.ResourceMgr.getInstance().loadRes("prefabs","effect/EffHited",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("EffHited",cc.instantiate(t),15)}),g.ResourceMgr.getInstance().loadRes("prefabs","effect/EffSkill",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("EffSkill",cc.instantiate(t),10)}),g.ResourceMgr.getInstance().loadRes("prefabs","effect/EffSkillMonster",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("EffSkillMonster",cc.instantiate(t),5)}),g.ResourceMgr.getInstance().loadRes("prefabs","widget/NodeDropGoods",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("NodeDropGoods",cc.instantiate(t),10)}),g.ResourceMgr.getInstance().loadRes("prefabs","widget/NodeArrow",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("NodeArrow",cc.instantiate(t),5)}),g.ResourceMgr.getInstance().loadRes("prefabs","widget/NodeUISkillBook",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("NodeUISkillBook",cc.instantiate(t),60)}),g.ResourceMgr.getInstance().loadRes("prefabs","widget/NodeUISkillBookNew",cc.Prefab,function(t){d.PoolMgr.getInstance().creatrePool("NodeUISkillBookNew",cc.instantiate(t),60)});for(var t=C.DataMgr.getInstance().getAllMonsterProbCfg(),e=function(e){g.ResourceMgr.getInstance().loadRes(t[e].bundle,t[e].monsterPre,cc.Prefab,function(o){var i=5;2==t[e].monsterType?i=3:3==t[e].monsterType&&(i=1),d.PoolMgr.getInstance().creatrePool(t[e].monsterName,cc.instantiate(o),i)})},o=0;o<t.length;o++)e(o)},e.prototype.initOnHookTime=function(){var t=B.PlayerMgr.getInstance().geUserData(),e=y.TimeUtils.getDiffMins(t.getLastOfflineTime());t.addOnHookTime(e),E.TimeMgr.getInstance().initTime_online(t.getOnHookTime()),y.TimeUtils.timeExchange(1,t.getOnHookTime())<Number(C.DataMgr.getInstance().getParamsCfgForSingle(v.EnumParams.OnHookMaxTime).value)&&E.TimeMgr.getInstance().openTimer_online(),t.refreshLastOfflineTime()},e.prototype.refreshSaveTime=function(){var t=B.PlayerMgr.getInstance().geUserData();if(!y.TimeUtils.compareIsToday(t.getLastLoginTime())){t.addLoginDay(),L.default.getInstance().addUpLoginForTask();var e=Number(C.DataMgr.getInstance().getParamsCfgForSingle(v.EnumParams.LimitPower).value);t.addPowerNumForLimit(e),t.resetInGotGetCount()}t.refreshLastLoginTime()},e.prototype.openPetTimer=function(){if(!M.default.getInstance().isOwnedPet){var t=B.PlayerMgr.getInstance().geUserData();B.PlayerMgr.getInstance().getGuideData().getGuideEnd()&&t.getCurSec()>=2?E.TimeMgr.getInstance().openTimer_pet():t.getCurSec()>=3&&E.TimeMgr.getInstance().openTimer_pet()}},e.prototype.openOnlineTimer=function(){E.TimeMgr.getInstance().openTimer_OnlineMain()},e.prototype.callbackTimer_power=function(){E.TimeMgr.getInstance().callbackTimer_power()},e.prototype.callbackTimer_online=function(){E.TimeMgr.getInstance().callbackTimer_online()},e.prototype.callbackTimer_pet=function(){E.TimeMgr.getInstance().callbackTimer_pet()},e.prototype.callbackTimer_OnlineMain=function(){E.TimeMgr.getInstance().callbackTimer_OnlineMain()},e.prototype.callbackTimer_MysticalShop=function(){E.TimeMgr.getInstance().callbackTimer_MysticalShop()},e.instance=null,s([q(cc.Node)],e.prototype,"root",void 0),s([q(cc.Node)],e.prototype,"cameraNode",void 0),s([q(k.default)],e.prototype,"gameCamera",void 0),s([q(cc.Node)],e.prototype,"temp",void 0),s([q(cc.Node)],e.prototype,"btnChangle",void 0),o=s([F],e)}(cc.Component);n.default=G,cc._RF.pop()},{}],Monster:[function(t,e,o){"use strict";cc._RF.push(e,"5ea55zOj35DC4BynACtVTdX","Monster");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("PoolMgr"),l=a("ResourceMgr"),u=a("Utils"),p=a("Main"),d=a("DataMgr"),g=a("EffectMgr"),h=a("GameDataMgr"),f=a("ObjectMgr"),y=a("PlayerMgr"),m=a("LadleWordMgr"),v=a("ObjectsParent"),I=cc._decorator,k=I.ccclass,S=(I.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scale_object=1,e.scale_hpBar=1,e.timeScale_object=1,e.isCoollingState=!1,e.isAckState=!1,e.objectId=1,e}return r(e,t),e.prototype.createObject=function(t,e,o,i,a,n,r,s,u,p,g){var h=this;void 0===n&&(n=!1),this.objectId=t,this.isPlayer=n;var f=d.DataMgr.getInstance().getMonsterProbCfg(this.objectId);this.object=c.PoolMgr.getInstance().getNode(f.monsterName),this.initObjectsState(),this.object?this.loadObjectInfo(i,a,n,r,s,u,p,g):(console.log("\u52a8\u6001\u52a0\u8f7d\u602a\u7269"),l.ResourceMgr.getInstance().loadRes(e,o,cc.Prefab,function(t){h.object=cc.instantiate(t),h.loadObjectInfo(i,a,n,r,s,u,p,g)}))},e.prototype.loadObjectInfo=function(t,e,o,i,a,n,r,s){void 0===o&&(o=!1),this.skeleton=this.object.getComponent(sp.Skeleton),this.initObject(),cc.isValid(t)&&(this.object.parent=t),a&&(this.object.position=a),n&&(this.object.scaleX=-this.object.scaleX,this.object.getChildByName("SpHpBarBg").scaleX=-this.object.getChildByName("SpHpBarBg").scaleX),r&&(this.object.zIndex=r),s&&(this.object.scale=s),this.object.group="game",i&&i(),this.initObjectProperty(e),this.refreshObject()},e.prototype.move=function(t){var e=this;if(cc.isValid(this.object)&&t&&cc.isValid(t.object)&&this.objectState==v.EnumObjectState.Alive&&!this.isAckState)if(cc.Vec2.distance(this.object.getPosition(),t.object.getPosition())<=this.objectProperty.atkDis){if(this.isCoollingState||!t.isPlayer)return void("idle"!=this.skeleton.animation&&this.playAnim("idle",!0));this.isCoollingState=!0,this.isAckState=!0;var o=this.objectProperty.attack_max,i=v.EnumLadleWordType.Atk_Normal;this.isTriggerCrazyAtk()&&(o=Math.ceil(o*(this.objectProperty.atkCrazyHurt/100)),i=v.EnumLadleWordType.Atk_CrazyHurt);var a=o;this.playAnim("attack",!1,function(){var o=d.DataMgr.getInstance().getMonsterProbCfg(e.objectId);if(2==o.type){var i=cc.v2(Math.abs(t.object.x-e.object.x),0);g.default.playEff("prefabs","effect/EffSkillMonster","EffSkillMonster",o.skillEffName,e.getNodeSkillEff(),i)}},function(){1==d.DataMgr.getInstance().getMonsterProbCfg(e.objectId).type?e.createArrow(t,i,a):t.subHp(i,a)},function(){e.recycleNodeEff(),e.isAckState=!1,setTimeout(function(){e.isCoollingState=!1},e.objectProperty.atkInterval/e.gameSpeedArr[e.curGameMultiply-1])})}else{var n=this.object.x-t.object.x>0?-1:1;"move"!=this.skeleton.animation&&this.playAnim("move",!0),this.object.x+=this.objectProperty.speed*this.gameSpeedArr[this.curGameMultiply-1]*n}},e.prototype.playAnim=function(t,e,o,i,a){void 0===e&&(e=!1),this.skeleton.findAnimation(t)&&(this.skeleton.setAnimation(0,t,e),this.skeleton.setEventListener(function(t,e){"start"==e.data.name?o&&o():"attack"==e.data.name&&i&&i()}),this.skeleton.setCompleteListener(function(){a&&a()}))},e.prototype.initObjectProperty=function(t){this.objectProperty=t},e.prototype.subHp=function(t,e,o,i){var a=this;if(this.objectState==v.EnumObjectState.Alive){var n=u.Utils.posTransform(this.object,this.getNodeEff().getPosition(),p.default.instance.node);g.default.playEff("prefabs","effect/EffHited","EffHited","tx_sj1",p.default.instance.node,n,0,2,10);var r=Math.ceil(e);if(this.objectProperty.hp-=r,this.refreshObject(),null!=t&&null!=t&&(t==v.EnumLadleWordType.Atk_CrazyHurt?(m.default.LabLoad(p.default.instance.node,u.Utils.posTransform(this.object,this.getHpBarNode().getPosition(),p.default.instance.node),"\u66b4\u51fb",m.default.height_ladleWord.height_type,void 0,f.default.getInstance().getColorForAtkType(v.EnumLadleWordType.Atk_CrazyName)),m.default.LabLoad(p.default.instance.node,u.Utils.posTransform(this.object,this.getHpBarNode().getPosition(),p.default.instance.node),"-"+r,m.default.height_ladleWord.height_number,void 0,f.default.getInstance().getColorForAtkType(t))):(v.EnumLadleWordType.Atk_SkillHurt,m.default.LabLoad(p.default.instance.node,u.Utils.posTransform(this.object,this.getHpBarNode().getPosition(),p.default.instance.node),"-"+r,m.default.height_ladleWord.height_number,void 0,f.default.getInstance().getColorForAtkType(t)))),this.objectProperty.hp<=0){this.object.getChildByName("SpHpBarBg").active=!1,this.setWaitDieState(),p.default.instance.refreshMonsterCount(1,!1);for(var s=d.DataMgr.getInstance().getMonsterProbCfg(this.objectId),c=this.object.getPosition(),l=y.PlayerMgr.getInstance().geUserData().getCurSec(),I=h.default.getInstance().dropGoodsFun(l,s.monsterType),k=0;k<I.length;k++)h.default.getInstance().addDropGoods(I[k],p.default.instance.node,cc.v2(c.x+100*k,c.y));this.playAnim("die",!1,void 0,void 0,function(){a.setDieState(),a.setDie()}),o&&o()}else i&&i()}else console.log("\u6b7b\u4ea1")},e.prototype.getNodeSkillEff=function(){return cc.isValid(this.object)?this.object.getChildByName("NodeSkillEff"):null},e.prototype.recycleNodeSkillEff=function(){for(var t=this.getNodeEff(),e=0;e<t.childrenCount;e++){var o=t.children[e];cc.isValid(o)&&c.PoolMgr.getInstance().freeNode(o.name,o)}},e.prototype.createArrow=function(t,e,o){var i=this;if(t&&cc.isValid(t.object)){var a=c.PoolMgr.getInstance().getNode("NodeArrow");a?(a.parent=p.default.instance.node,a.setPosition(cc.v2(t.object.x,1e3)),this.shootArrow(a,t,e,o)):l.ResourceMgr.getInstance().loadRes("prefabs","widget/NodeArrow",cc.Prefab,function(n){(a=cc.instantiate(n)).parent=p.default.instance.node,a.setPosition(cc.v2(t.object.x,1e3)),i.shootArrow(a,t,e,o)})}},e.prototype.shootArrow=function(t,e,o,i){var a=this;e&&cc.isValid(e.object)?cc.isValid(t)&&(t.opacity=255,cc.tween(t).to(.1,{y:e.object.y}).call(function(){cc.isValid(e.object)&&e.object.x>=t.x-10&&e.object.x<=t.x+10&&e.subHp(o,i)}).to(1,{opacity:0}).call(function(){a.recycleArrow(t)}).start()):cc.isValid(t)&&this.recycleArrow(t)},e.prototype.recycleArrow=function(t){cc.isValid(t)&&c.PoolMgr.getInstance().freeNode("NodeArrow",t)},s([k],e)}(v.default));n.default=S,cc._RF.pop()},{}],MysticalShopData:[function(t,e,o){"use strict";cc._RF.push(e,"18804saWkJDZrNx9dZ8J/by","MysticalShopData");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.MysticalItemData=n.MysticalShopData=void 0;var s=a("BaseData"),c=a("TimeUtils"),l=a("Config"),u=a("GameMgr"),p=function(){this.lastLoginTime=0,this.mysticalShopTime=86400,this.mysticalShopList=[]},d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ecrypt=!1,e.gameKey=l.GameConfig.AppCacheName+"MysticalShopData",e.isNewUser=!1,e}return r(e,t),e.prototype.createData=function(){return this.data=new p,this.data},e.prototype.initData=function(t){t&&(this.isNewUser=!0)},e.prototype.getIsNewUser=function(){return this.isNewUser},e.prototype.getLastLoginTime=function(){return null==this.data.lastLoginTime&&(this.data.lastLoginTime=0),this.data.lastLoginTime},e.prototype.refreshLastLoginTime=function(){var t=c.TimeUtils.GetTimeBySecond();this.data.lastLoginTime=t,this.saveData()},e.prototype.getMysticalShopTime=function(){return null==this.data.mysticalShopTime&&(this.data.mysticalShopTime=86400),this.data.mysticalShopTime},e.prototype.subMysticalShopTime=function(t){null==this.data.mysticalShopTime&&(this.data.mysticalShopTime=86400),t<=0||(this.data.mysticalShopTime-=t,this.data.mysticalShopTime<=0&&u.default.getInstance().refreshMysticalShopData(),this.saveData())},e.prototype.setMysticalShopTime=function(t){null==this.data.mysticalShopTime&&(this.data.mysticalShopTime=86400),this.data.mysticalShopTime=t,this.saveData()},e.prototype.getMysticalShopList=function(){return null==this.data.mysticalShopList&&(this.data.mysticalShopList=[]),this.data.mysticalShopList},e.prototype.addMysticalShopList=function(t){null==this.data.mysticalShopList&&(this.data.mysticalShopList=[]),this.data.mysticalShopList.push(t),this.saveData()},e.prototype.setMysticalShopList=function(t,e,o){void 0===o&&(o=0),null==this.data.mysticalShopList&&(this.data.mysticalShopList=[]);for(var i=0;i<this.data.mysticalShopList.length;i++)if(this.data.mysticalShopList[i].id==t)return this.data.mysticalShopList[i].isBuy=e,this.data.mysticalShopList[i].videoCount=o,void this.saveData()},e.prototype.refreshMysticalShopList=function(t,e){null==this.data.mysticalShopList&&(this.data.mysticalShopList=[]),this.data.mysticalShopList[t]=e,this.saveData()},e}(s.BaseData);n.MysticalShopData=d,n.MysticalItemData=function(){},cc._RF.pop()},{}],NodeCurrency:[function(t,e,o){"use strict";cc._RF.push(e,"b1253WL8TRCvJL9aKkGuDpv","NodeCurrency");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("EventMgr"),l=a("UIMgr"),u=a("Config"),p=a("PlayerMgr"),d=cc._decorator,g=d.ccclass,h=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GoldBg=null,e.InGotBg=null,e.GoldNum=null,e.InGotNum=null,e}return r(e,t),e.prototype.onLoad=function(){this.registerEvent(),this.registerBtnEvent()},e.prototype.start=function(){this.initData(),this.initView()},e.prototype.registerEvent=function(){c.EventMgr.getInstance().on(u.EventName.RefreshGoldNumAndShow,this,this.refreshGoldNumAndShow),c.EventMgr.getInstance().on(u.EventName.RefreshInGotNumAndShow,this,this.refreshInGotNumAndShow)},e.prototype.registerBtnEvent=function(){this.GoldBg.on(cc.Node.EventType.TOUCH_END,function(){l.UIMgr.getInstance().openUI(u.UIID.UIGeneralWindow,-1,u.GeneralWindowType.GoldWindow)}),this.InGotBg.on(cc.Node.EventType.TOUCH_END,function(){l.UIMgr.getInstance().openUI(u.UIID.UIGeneralWindow,-1,u.GeneralWindowType.InGotWindow)})},e.prototype.initData=function(){this.userData=p.PlayerMgr.getInstance().geUserData()},e.prototype.initView=function(){this.refreshGoldNumAndShow(),this.refreshInGotNumAndShow()},e.prototype.refreshGoldNumAndShow=function(){this.GoldNum.string=""+this.userData.getGoldNum()},e.prototype.refreshInGotNumAndShow=function(){this.InGotNum.string=""+this.userData.getInGotNum()},e.prototype.onDestroy=function(){c.EventMgr.getInstance().off(u.EventName.RefreshGoldNumAndShow,this,this.refreshGoldNumAndShow),c.EventMgr.getInstance().off(u.EventName.RefreshInGotNumAndShow,this,this.refreshInGotNumAndShow)},s([h({type:cc.Node,tooltip:"\u91d1\u5e01\u70b9\u51fb\u6846"})],e.prototype,"GoldBg",void 0),s([h({type:cc.Node,tooltip:"\u5143\u5b9d\u70b9\u51fb\u6846"})],e.prototype,"InGotBg",void 0),s([h({type:cc.Label,tooltip:"\u91d1\u5e01\u6807\u7b7e"})],e.prototype,"GoldNum",void 0),s([h({type:cc.Label,tooltip:"\u5143\u5b9d\u6807\u7b7e"})],e.prototype,"InGotNum",void 0),s([g],e)}(cc.Component);n.default=f,cc._RF.pop()},{}],NodeDropGoods:[function(t,e,o){"use strict";cc._RF.push(e,"8d537Ug8g5OLKw2AZ9crKno","NodeDropGoods");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.EnumGoodsType=void 0;var c=a("AudioMgr"),l=a("PoolMgr"),u=a("ResourceMgr"),p=a("Main"),d=a("Config"),g=a("DataMgr"),h=a("PlayerMgr"),f=a("TaskMgr"),y=cc._decorator,m=y.ccclass,v=y.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabCount=null,e.curtween=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.initData=function(t,e){this.dropGoodsData=t,this.node.setPosition(e),this.dealGoodsForCare(),this.autoDrop()},e.prototype.dealGoodsForCare=function(){var t,e=this;switch(this.dropGoodsData.goodsType){case"gold":case"inGot":case"power":t=g.DataMgr.getInstance().getGoodsCfg(this.dropGoodsData.goodsId),this.node.scale=.5,this.LabCount.node.scale=2,this.node.getChildByName("LabName").active=!1,this.node.getChildByName("LabCount").scale=2,u.ResourceMgr.getInstance().loadSpriteframe(t.bundle,t.goodsGameIcon,function(t){e.node.getComponent(cc.Sprite).spriteFrame=t});break;case"equip":t=g.DataMgr.getInstance().getEquipCfg(this.dropGoodsData.goodsId),this.node.scale=1,this.node.getChildByName("LabName").active=!1,u.ResourceMgr.getInstance().loadSpriteframe(t.bundle,t.equipIcon,function(t){e.node.getComponent(cc.Sprite).spriteFrame=t});break;case"skillBook":t=g.DataMgr.getInstance().getSkillBook(this.dropGoodsData.goodsId),g.DataMgr.getInstance().getSkillQuality(t.qualityId),this.node.scale=.5,this.node.getChildByName("LabName").getComponent(cc.Label).string=t.name,h.PlayerMgr.getInstance().getTrackData().getAbType(),u.ResourceMgr.getInstance().loadSpriteframe("iconImg",t.SkillIcon,function(t){e.node.getComponent(cc.Sprite).spriteFrame=t}),this.node.getChildByName("LabName").active=!1}this.dropGoodsData.iCount<=1?this.LabCount.node.active=!1:(this.LabCount.node.active=!0,this.LabCount.string="+"+this.dropGoodsData.iCount)},e.prototype.autoDrop=function(){var t=this;this.curtween=cc.tween(this.node).bezierBy(.5,cc.v2(),cc.v2(20,200),cc.v2(40,0)).delay(.5).call(function(){t.autoRecycle()}).start()},e.prototype.autoRecycle=function(){var t=this,e=cc.v3();p.default.instance.player&&cc.isValid(p.default.instance.player.object)&&(e=cc.v3(p.default.instance.player.object.x,150,0)),this.curtween&&(this.curtween.stop(),this.curtween=null),c.AudioMgr.getInstance().playEffect(d.AudioId.BattleSound_PickUpThings),this.curtween=cc.tween(this.node).to(.5,{position:e}).call(function(){t.addToPool(t.node,"NodeDropGoods"),t.curtween=null}).start()},e.prototype.recycleGoods=function(){var t=h.PlayerMgr.getInstance().geUserData();switch(this.dropGoodsData.goodsType){case"gold":t.addGoldNum(this.dropGoodsData.iCount);break;case"inGot":t.addInGotNum(this.dropGoodsData.iCount);break;case"power":t.addPowerNum(this.dropGoodsData.iCount);break;case"equip":t.addEquipForId(this.dropGoodsData.goodsId),f.default.getInstance().addEquipCountForTask();break;case"skillBook":t.addSkillBookId(this.dropGoodsData.goodsId),f.default.getInstance().addSkillBookCountForTask()}},e.prototype.addToPool=function(t,e){cc.isValid(t)&&l.PoolMgr.getInstance().freeNode(e,t)},s([v(cc.Label)],e.prototype,"LabCount",void 0),s([m],e)}(cc.Component);n.default=I,function(t){t.EnumGold="gold",t.EnumInGot="inGot",t.EnumEquip="equip",t.EnumSkillBook="skillBook",t.EnumSalutation="salutation"}(n.EnumGoodsType||(n.EnumGoodsType={})),cc._RF.pop()},{}],NodeEquipComposite:[function(t,e,o){"use strict";cc._RF.push(e,"dbc4efhTYROkZBcivTYwC+N","NodeEquipComposite");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("EventMgr"),l=a("UIMgr"),u=a("Config"),p=a("EquipMgr"),d=a("PlayerMgr"),g=cc._decorator,h=g.ccclass,f=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiView=u.UIID.UIEquip,e.curBagIndex=1,e.equipData=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.registerBtnEvent=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){t.node.getChildByName("SpMask").active||(t.equipData.starLevel>=5?l.UIMgr.getInstance().openUI(u.UIID.UITips,-1,"\u8be5\u88c5\u5907\u5df2\u8fbe\u5230\u6700\u5927\u661f\u7ea7"):c.EventMgr.getInstance().emit(u.EventName.PlaceCompositeEquip,t.curBagIndex,t.equipData))})},e.prototype.initData=function(t,e,o){this.curBagIndex=t,this.equipData=e,this.uiView=o,this.registerBtnEvent(),this.equipHCForRedDot()},e.prototype.refresData=function(t,e){this.curBagIndex=t,this.equipData=e},e.prototype.equipHCForRedDot=function(){var t=d.PlayerMgr.getInstance().getAbType();if("D"==t||"B"==t){for(var e=!1,o=p.default.getInstance().getOwmedEquipForEquipType(this.equipData.type),i=0;i<o.length;i++)if(o[i].IDCard!=this.equipData.IDCard&&o[i].id==this.equipData.id&&o[i].type==this.equipData.type&&o[i].starLevel==this.equipData.starLevel){e=!0;break}this.node.getChildByName("SpRedDot").active=e}},s([h],e)}(cc.Component));n.default=f,cc._RF.pop()},{}],NodeEquip:[function(t,e,o){"use strict";cc._RF.push(e,"5192d4NeC1IqrhQloAh2fVX","NodeEquip");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("EventMgr"),l=a("UIMgr"),u=a("Utils"),p=a("Config"),d=a("EquipMgr"),g=a("PlayerMgr"),h=cc._decorator,f=h.ccclass,y=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabStrengthenLv=null,e.uiView=p.UIID.UIEquip,e.curBagIndex=1,e.equipData=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.registerEvent=function(){c.EventMgr.getInstance().on(p.EventName.RefreshStrengthenLv,this,this.strengthenEquip)},e.prototype.strengthenEquip=function(t){this.equipData&&t&&t.id==this.equipData.id&&t.type==this.equipData.type&&t.IDCard==this.equipData.IDCard&&(this.equipData.strengthenLv=t.strengthenLv,this.refreshStrengthenLv())},e.prototype.refreshStrengthenLv=function(){this.equipData.strengthenLv>0?(this.LabStrengthenLv.node.active=!0,this.LabStrengthenLv.string="+"+this.equipData.strengthenLv):this.LabStrengthenLv.node.active=!1},e.prototype.registerBtnEvent=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){if(console.log("\u5f53\u524d\u70b9\u51fb\u5751\u4f4d\uff1a",t.curBagIndex),!(g.PlayerMgr.getInstance().geUserData().getBagIndexCount()<t.curBagIndex+1)){var e=d.default.getInstance().getWearEquipData(t.equipData.type),o=u.Utils.posTransform(t.node.parent,t.node.getPosition(),l.UIMgr.getInstance().getUIRoot(t.uiView)),i=g.PlayerMgr.getInstance().getAbType(),a="D"==i||"B"==i?p.UIID.UIEquipInfoNew:p.UIID.UIEquipInfo;l.UIMgr.getInstance().openUI(a,-1,e,t.equipData,o,d.EnumEquipInfo.EnumSell,t.curBagIndex)}})},e.prototype.initData=function(t,e,o){this.curBagIndex=t,this.equipData=e,this.uiView=o,this.registerEvent(),this.registerBtnEvent(),this.refreshStrengthenRedDot()},e.prototype.refresData=function(t,e){this.curBagIndex=t,this.equipData=e},e.prototype.refreshStrengthenRedDot=function(){if("D"==g.PlayerMgr.getInstance().getAbType()){for(var t=!1,e=d.default.getInstance().getOwmedEquipForEquipType(this.equipData.type),o=0;o<e.length;o++)if(e[o].IDCard!=this.equipData.IDCard&&e[o].id==this.equipData.id&&e[o].type==this.equipData.type&&e[o].starLevel==this.equipData.starLevel){t=!0;break}this.node.getChildByName("SpRedDot").active=t}},e.prototype.onDestroy=function(){c.EventMgr.getInstance().off(p.EventName.RefreshStrengthenLv,this,this.strengthenEquip)},s([y(cc.Label)],e.prototype,"LabStrengthenLv",void 0),s([f],e)}(cc.Component);n.default=m,cc._RF.pop()},{}],NodeFetter:[function(t,e,o){"use strict";cc._RF.push(e,"c152e/MMplO8q7fePzmlCzq","NodeFetter");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("EventMgr"),l=a("UIMgr"),u=a("Utils"),p=a("Config"),d=a("GameDataMgr"),g=cc._decorator,h=g.ccclass,f=g.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpSelect=null,e.LabFetterNum=null,e.fetterId=1,e.fetterData=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.registerEvent=function(){c.EventMgr.getInstance().on(p.EventName.RefreshFetterShow,this,this.refreshFetterShow),c.EventMgr.getInstance().on(p.EventName.RefreshLight,this,this.refreshLight)},e.prototype.registerBtnEvent=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){var e=u.Utils.posTransform(t.node.parent,t.node.getPosition(),l.UIMgr.getInstance().getUIRoot(p.UIID.UIGame));l.UIMgr.getInstance().openUI(p.UIID.UIFetterInfo,-1,t.fetterId,e)})},e.prototype.initData=function(t){this.fetterId=t,this.registerEvent(),this.registerBtnEvent()},e.prototype.refreshFetterShow=function(t){this.fetterId===t&&(this.LabFetterNum.string=d.default.getInstance().getStringForFetterId(this.fetterId))},e.prototype.refreshLight=function(t){this.fetterId===t&&this.lightAnim()},e.prototype.lightAnim=function(){cc.isValid(this.SpSelect)&&(this.SpSelect.opacity=0,cc.tween(this.SpSelect).to(.3,{opacity:255}).to(.8,{opacity:100}).to(.6,{opacity:255}).to(.5,{opacity:0}).start())},e.prototype.onDestroy=function(){c.EventMgr.getInstance().off(p.EventName.RefreshFetterShow,this,this.refreshFetterShow),c.EventMgr.getInstance().off(p.EventName.RefreshLight,this,this.refreshLight)},s([f(cc.Node)],e.prototype,"SpSelect",void 0),s([f(cc.RichText)],e.prototype,"LabFetterNum",void 0),s([h],e)}(cc.Component);n.default=y,cc._RF.pop()},{}],NodeMainTask:[function(t,e,o){"use strict";cc._RF.push(e,"607ccTssERB0qPl9TOa6ZiP","NodeMainTask");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.NodeMainTask=void 0;var c=a("EventMgr"),l=a("Config"),u=a("DataMgr"),p=a("PlayerMgr"),d=cc._decorator,g=d.ccclass,h=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spFinished1=null,e.spFinished=null,e.labDec=null,e}return r(e,t),e.prototype.start=function(){this.registerEvent(),this.initView()},e.prototype.registerEvent=function(){c.EventMgr.getInstance().on(l.EventName.RefreshMainTask,this,this.refreshTask),c.EventMgr.getInstance().on(l.EventName.RefreshMainTaskDec,this,this.refreshTaskDec),c.EventMgr.getInstance().on(l.EventName.RefreshMainTaskFinished,this,this.refreshTaskFinished)},e.prototype.initView=function(){this.initTask(),this.playAnim()},e.prototype.playAnim=function(){},e.prototype.initTask=function(){var t=p.PlayerMgr.getInstance().getMainTaskData(),e=u.DataMgr.getInstance().getMission(t.getCurrentId());e?(this.labDec.string="<outline color=#000000 width = 3><color=#ffffff>"+e.Desc1+e.TaskParameter+e.Desc2+"</c><color=#42FF61>  "+t.getCurrentParameter()+"/"+e.TaskParameter+"</color></outline>",this.spFinished.active=t.getCurrentState(),t.getCurrentState()||t.carrayTaskForType(t.getCurrentId(),e.Type)):this.node.destroy()},e.prototype.refreshTask=function(t){void 0===t&&(t=!1),this.refreshTaskFinished(t),this.refreshTaskDec()},e.prototype.refreshTaskFinished=function(t){this.spFinished.active=t},e.prototype.refreshTaskDec=function(){var t=p.PlayerMgr.getInstance().getMainTaskData(),e=u.DataMgr.getInstance().getMission(t.getCurrentId());e?this.labDec.string="<outline color=#000000 width = 3><color=#ffffff>"+e.Desc1+e.TaskParameter+e.Desc2+"</c><color=#42FF61>  "+t.getCurrentParameter()+"/"+e.TaskParameter+"</color></outline>":this.node.destroy()},e.prototype.update=function(){},e.prototype.onDestroy=function(){c.EventMgr.getInstance().off(l.EventName.RefreshMainTask,this,this.refreshTask),c.EventMgr.getInstance().off(l.EventName.RefreshMainTaskDec,this,this.refreshTaskDec),c.EventMgr.getInstance().off(l.EventName.RefreshMainTaskFinished,this,this.refreshTaskFinished)},s([h({type:cc.Node,displayName:""})],e.prototype,"spFinished1",void 0),s([h({type:cc.Node,displayName:""})],e.prototype,"spFinished",void 0),s([h({type:cc.RichText,displayName:""})],e.prototype,"labDec",void 0),s([g("NodeMainTask")],e)}(cc.Component);n.NodeMainTask=f,cc._RF.pop()},{}],NodeSkillBook:[function(t,e,o){"use strict";cc._RF.push(e,"2f2f93g/yxDJIIYN0TRLrDi","NodeSkillBook");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("EventMgr"),l=a("UIMgr"),u=a("Utils"),p=a("Config"),d=a("GameDataMgr"),g=cc._decorator,h=g.ccclass,f=g.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeGrade=null,e.LabCount=null,e.skillBookId=1,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.registerEvent=function(){c.EventMgr.getInstance().on(p.EventName.RefreshSkillBookShow,this,this.refreshSkillBookShow)},e.prototype.registerBtnEvent=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){var e=u.Utils.posTransform(t.node.parent,t.node.getPosition(),l.UIMgr.getInstance().getUIRoot(p.UIID.UIGame));l.UIMgr.getInstance().openUI(p.UIID.UISkillBookInfo,-1,t.skillBookId,e)})},e.prototype.initData=function(t){this.skillBookId=t,this.registerEvent(),this.registerBtnEvent()},e.prototype.refreshSkillBookShow=function(t){this.skillBookId===t&&this.refreshStarNum(t)},e.prototype.refreshStarNum=function(t){var e=d.default.getInstance().getStarNumForSkillBookId(t);3!=e[0]?this.LabCount.string="\uff08"+e[1]+"/"+e[2]+"\uff09":this.LabCount.node.active=!1;for(var o=0;o<this.NodeGrade.children.length;o++){var i=this.NodeGrade.getChildByName("SpStarBg"+(o+1));e[0]>=o+1?i.getChildByName("SpStar").active=!0:i.getChildByName("SpStar").active=!1}},e.prototype.onDestroy=function(){c.EventMgr.getInstance().off(p.EventName.RefreshSkillBookShow,this,this.refreshSkillBookShow)},s([f(cc.Node)],e.prototype,"NodeGrade",void 0),s([f(cc.Label)],e.prototype,"LabCount",void 0),s([h],e)}(cc.Component);n.default=y,cc._RF.pop()},{}],NodeSkill:[function(t,e,o){"use strict";cc._RF.push(e,"914acdlsm9PY7vjV192X/xM","NodeSkill");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("UIMgr"),l=a("Config"),u=cc._decorator,p=u.ccclass,d=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skillId=-1,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.registerBtnEvent=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){c.UIMgr.getInstance().openUI(l.UIID.UISkillInfo,-1,t.skillId)})},e.prototype.initData=function(t){this.skillId=t,this.registerBtnEvent()},s([p],e)}(cc.Component));n.default=d,cc._RF.pop()},{}],NodeTask:[function(t,e,o){"use strict";cc._RF.push(e,"61b745EOilJ3pcxTTwgJ9/m","NodeTask");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("AudioMgr"),l=a("EventMgr"),u=a("ResourceMgr"),p=a("SdkMgr"),d=a("TweenMgr"),g=a("UIMgr"),h=a("Config"),f=a("DataMgr"),y=a("EffectMgr"),m=a("GoodsManager"),v=a("PlayerMgr"),I=a("TaskMgr"),k=a("TimeMgr"),S=cc._decorator,C=S.ccclass,b=S.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpNotGet=null,e.SpCanGet=null,e.SpCompleted=null,e.BtnNotGet=null,e.BtnGet=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.playAnim()},e.prototype.playAnim=function(){d.TweenMgr.getInstance().newHeartAnim(this.BtnGet)},e.prototype.registerBtnEvent=function(){var t=this;this.BtnNotGet.on(cc.Node.EventType.TOUCH_END,function(){if(t.BtnNotGet.getComponent(cc.Button).interactable&&(p.SdkMgr.getInstance().hideBanner(),g.UIMgr.getInstance().closeById(h.UIID.UITask),h.UIID.UIHome!=t.taskCfg.JumpRoute)){var e=h.UIID.UIHomeNew;h.UIID.UIOnlineReward==t.taskCfg.JumpRoute?k.TimeMgr.getInstance().time_online<60?g.UIMgr.getInstance().openUI(h.UIID.UITips,-1,"\u8fd8\u672a\u83b7\u5f97\u5956\u52b1"):g.UIMgr.getInstance().openUI(h.UIID.UIOnlineReward,-1):(h.UIID.UIMysticalShop!=t.taskCfg.JumpRoute&&g.UIMgr.getInstance().closeById(e),g.UIMgr.getInstance().openUI(t.taskCfg.JumpRoute,-1))}}),this.BtnGet.on(cc.Node.EventType.TOUCH_END,function(){if(t.playEffForTaskGet(),v.PlayerMgr.getInstance().geUserData().addCompletedTaskCount(),t.getReward(),null==t.taskCfg.NextTask)t.SpCompleted.active=!0,t.BtnGet.active=!1,t.BtnNotGet.active=!1,t.taskData.state=-1,t.node.zIndex=-t.taskData.state,t.goOutAnimForTask(t.node,function(){t.node.position=cc.v3()}),I.default.getInstance().refreshTaskDataForState(t.taskData),t.node.getComponent(cc.Sprite).spriteFrame=1==t.taskData.state?t.SpCanGet:t.SpNotGet;else{var e=f.DataMgr.getInstance().getTaskCfgForId(t.taskCfg.NextTask,t.taskCfg.Type);8==e.Type&&I.default.getInstance().wearEquipQualityForTask(e.ID);var o=0;I.default.getInstance().taskNeedCountList[t.taskData.type-1]>=e.TaskParameter&&(o=1);var i={id:e.ID,type:e.Type,state:o,needCount:e.TaskParameter};t.refreshData(e,i),t.goOutAnimForTask(t.node,function(){1==i.state?t.enterAnimForTask(t.node):t.node.position=cc.v3()}),I.default.getInstance().refreshTaskData(i),t.refreshTaskView()}c.AudioMgr.getInstance().playEffect(h.AudioId.Sound_Upgrade),l.EventMgr.getInstance().emit(h.EventName.RefreshRedDot,!0,!1,!1,!1,!0),v.PlayerMgr.getInstance().geUserData().autoAddSalutation()})},e.prototype.enterAnimForTask=function(t){cc.isValid(t)&&(t.x=-650,cc.tween(t).to(.2,{position:cc.v3()}).start())},e.prototype.goOutAnimForTask=function(t,e){void 0===e&&(e=function(){}),cc.isValid(t)&&(t.x=0,cc.tween(t).to(.1,{x:650}).call(function(){e&&e()}).start())},e.prototype.playEffForTaskGet=function(){y.default.playEffectForEffId(h.EnumEffID.EffTaskGet,this.node.parent.parent,this.node)},e.prototype.initData=function(t,e){this.taskCfg=t,this.taskData=e,this.registerBtnEvent()},e.prototype.refreshData=function(t,e){this.taskCfg=t,this.taskData=e},e.prototype.initView=function(){},e.prototype.refreshTaskView=function(){var t=this;this.node.zIndex=-this.taskData.state,this.node.getComponent(cc.Sprite).spriteFrame=1==this.taskData.state?this.SpCanGet:this.SpNotGet;var e=f.DataMgr.getInstance().getGoodsCfg(this.taskCfg.RewardType);u.ResourceMgr.getInstance().loadSpriteframe(e.bundleQuality,e.iconQuality,function(e){t.node.getChildByName("SpIconBg").getComponent(cc.Sprite).spriteFrame=e}),u.ResourceMgr.getInstance().loadSpriteframe(e.bundle,e.goodsICon,function(e){t.node.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=e}),this.node.getChildByName("LabRewardNum").getComponent(cc.Label).string=""+this.taskCfg.RewardNum;var o=this.node.getChildByName("LayoutDec");if(this.taskCfg.Desc1&&(o.getChildByName("LabTaskDec1").active=!0,o.getChildByName("LabTaskDec1").getComponent(cc.Label).string=this.taskCfg.Desc1),8==this.taskCfg.Type){var i="\u767d\u8272\u53ca\u4ee5\u4e0a";switch(this.taskCfg.TaskParameterType){case 1:i="\u767d\u8272\u53ca\u4ee5\u4e0a";break;case 2:i="\u7eff\u8272\u53ca\u4ee5\u4e0a";break;case 3:i="\u84dd\u8272\u53ca\u4ee5\u4e0a";break;case 4:i="\u7d2b\u8272\u53ca\u4ee5\u4e0a";break;case 5:i="\u6a59\u8272\u53ca\u4ee5\u4e0a"}o.getChildByName("LabTaskDec2").getComponent(cc.Label).string=""+i}else o.getChildByName("LabTaskDec2").getComponent(cc.Label).string=""+this.taskCfg.TaskParameter;this.taskCfg.Desc2&&(o.getChildByName("LabTaskDec3").active=!0,o.getChildByName("LabTaskDec3").getComponent(cc.Label).string=this.taskCfg.Desc2);var a=I.default.getInstance().taskNeedCountList[this.taskData.type-1];switch(this.node.getChildByName("SpBar").getComponent(cc.Sprite).fillRange=a/this.taskCfg.TaskParameter,this.node.getChildByName("LabTaskNum").getComponent(cc.Label).string=a+"/"+this.taskCfg.TaskParameter,this.taskData.state){case 0:this.taskState(!0,!1,!1);var n=this.node.getChildByName("BtnNotGet").getChildByName("LabNotGet").getComponent(cc.Label);null==this.taskCfg.JumpRoute?(n.string="\u672a\u5b8c\u6210",this.node.getChildByName("BtnNotGet").getComponent(cc.Button).interactable=!1):n.string="\u524d\u5f80";break;case 1:this.taskState(!1,!0,!1);break;case-1:this.taskState(!1,!1,!0)}},e.prototype.taskState=function(t,e,o){this.node.getChildByName("BtnNotGet").active=t,this.node.getChildByName("BtnGet").active=e,this.node.getChildByName("SpCompleted").active=o},e.prototype.getReward=function(){var t=f.DataMgr.getInstance().getGoodsCfg(this.taskCfg.RewardType),e=v.PlayerMgr.getInstance().geUserData(),o=m.default.getInstance().getColorForQuality(t.goodsQualityId);switch(t.goodsType){case"gold":e.addGoldNum(this.taskCfg.RewardNum),g.UIMgr.getInstance().openUI(h.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 <color = #"+o+">\u91d1\u5e01</c>x"+this.taskCfg.RewardNum);break;case"inGot":e.addInGotNum(this.taskCfg.RewardNum),g.UIMgr.getInstance().openUI(h.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 <color = #"+o+">\u5143\u5b9d</c>x"+this.taskCfg.RewardNum);break;case"power":e.addPowerNum(this.taskCfg.RewardNum),g.UIMgr.getInstance().openUI(h.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 <color = #"+o+">\u4f53\u529b</c>x"+this.taskCfg.RewardNum)}},s([b(cc.SpriteFrame)],e.prototype,"SpNotGet",void 0),s([b(cc.SpriteFrame)],e.prototype,"SpCanGet",void 0),s([b(cc.Node)],e.prototype,"SpCompleted",void 0),s([b(cc.Node)],e.prototype,"BtnNotGet",void 0),s([b(cc.Node)],e.prototype,"BtnGet",void 0),s([C],e)}(cc.Component);n.default=_,cc._RF.pop()},{}],NodeUISkillBookNew:[function(t,e,o){"use strict";cc._RF.push(e,"70664o9ssdEn5Ci6mB1c7jW","NodeUISkillBookNew");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("EventMgr"),l=a("TweenMgr"),u=a("UIMgr"),p=a("Utils"),d=a("Config"),g=a("TrackDataEvent"),h=a("DataMgr"),f=a("PlayerMgr"),y=cc._decorator,m=y.ccclass,v=y.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpBar=null,e.SpUp=null,e.LabLv=null,e.LabBar=null,e.SpBarBg=null,e.SpSkillBook=null,e.LabSkilllName=null,e.SpFetter1=null,e.SpFetter2=null,e.LabFetter1=null,e.LabFetter2=null,e.curWindow=null,e.skillBookId=1,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){l.TweenMgr.getInstance().animUpLv(this.SpUp)},e.prototype.registerEvent=function(){c.EventMgr.getInstance().on(d.EventName.RefreshUISkillBookShow,this,this.refreshSkillBookShow)},e.prototype.registerBtnEvent=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){f.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.guide13);var e=p.Utils.posTransform(t.node.parent,t.node.getPosition(),u.UIMgr.getInstance().getUIRoot(d.UIID.UISkillBook));u.UIMgr.getInstance().openUI(d.UIID.UISkillBookInfo,-1,t.skillBookId,e,t.curWindow)})},e.prototype.initData=function(t,e){this.skillBookId=t,this.curWindow=e,this.registerEvent(),this.registerBtnEvent(),this.playEnterAnim()},e.prototype.refreshSkillBookShow=function(t){this.skillBookId===t&&this.refreshSkillBookLvInfo()},e.prototype.refreshSkillBookLvInfo=function(){var t=f.PlayerMgr.getInstance().geUserData().getSkillBookForId(this.skillBookId),e=h.DataMgr.getInstance().getSkillBook(this.skillBookId),o=h.DataMgr.getInstance().getSkillBookLevelCfg1(e.StartLevelID,t.level);this.SpBar.fillRange=t.iCount/o.ConsumeSkillBookNum,this.SpUp.active=t.iCount>=o.ConsumeSkillBookNum,this.LabLv.string="Lv."+t.level,t.level>=e.MaxLevel?this.LabBar.string="MAX":this.LabBar.string=t.iCount+"/"+o.ConsumeSkillBookNum},e.prototype.playEnterAnim=function(){},e.prototype.showAnim=function(t,e){void 0===e&&(e=function(){}),cc.isValid(t)&&cc.tween(t).to(.1,{opacity:255}).call(function(){e&&e()}).start()},e.prototype.onDestroy=function(){c.EventMgr.getInstance().off(d.EventName.RefreshUISkillBookShow,this,this.refreshSkillBookShow)},s([v(cc.Sprite)],e.prototype,"SpBar",void 0),s([v(cc.Node)],e.prototype,"SpUp",void 0),s([v(cc.Label)],e.prototype,"LabLv",void 0),s([v(cc.Label)],e.prototype,"LabBar",void 0),s([v(cc.Node)],e.prototype,"SpBarBg",void 0),s([v(cc.Node)],e.prototype,"SpSkillBook",void 0),s([v(cc.Node)],e.prototype,"LabSkilllName",void 0),s([v(cc.Node)],e.prototype,"SpFetter1",void 0),s([v(cc.Node)],e.prototype,"SpFetter2",void 0),s([v(cc.Node)],e.prototype,"LabFetter1",void 0),s([v(cc.Node)],e.prototype,"LabFetter2",void 0),s([m],e)}(cc.Component);n.default=I,cc._RF.pop()},{}],NodeUISkillBook:[function(t,e,o){"use strict";cc._RF.push(e,"55432Px/zxLJ6wfB9h1wDt1","NodeUISkillBook");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("EventMgr"),l=a("TweenMgr"),u=a("UIMgr"),p=a("Utils"),d=a("Config"),g=a("TrackDataEvent"),h=a("DataMgr"),f=a("PlayerMgr"),y=cc._decorator,m=y.ccclass,v=y.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpBar=null,e.SpUp=null,e.LabLv=null,e.LabBar=null,e.SpBarBg=null,e.SpSkillBook=null,e.LabSkilllName=null,e.SpFetter1=null,e.SpFetter2=null,e.LabFetter1=null,e.LabFetter2=null,e.curWindow=null,e.skillBookId=1,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){l.TweenMgr.getInstance().animUpLv(this.SpUp)},e.prototype.registerEvent=function(){c.EventMgr.getInstance().on(d.EventName.RefreshUISkillBookShow,this,this.refreshSkillBookShow)},e.prototype.registerBtnEvent=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){f.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.guide13);var e=p.Utils.posTransform(t.node.parent,t.node.getPosition(),u.UIMgr.getInstance().getUIRoot(d.UIID.UISkillBook));u.UIMgr.getInstance().openUI(d.UIID.UISkillBookInfo,-1,t.skillBookId,e,t.curWindow)})},e.prototype.initData=function(t,e){this.skillBookId=t,this.curWindow=e,this.registerEvent(),this.registerBtnEvent(),this.playEnterAnim()},e.prototype.refreshSkillBookShow=function(t){this.skillBookId===t&&this.refreshSkillBookLvInfo()},e.prototype.refreshSkillBookLvInfo=function(){var t=f.PlayerMgr.getInstance().geUserData().getSkillBookForId(this.skillBookId),e=h.DataMgr.getInstance().getSkillBook(this.skillBookId),o=h.DataMgr.getInstance().getSkillBookLevelCfg1(e.StartLevelID,t.level);this.SpBar.fillRange=t.iCount/o.ConsumeSkillBookNum,this.SpUp.active=t.iCount>=o.ConsumeSkillBookNum,this.LabLv.string="Lv."+t.level,t.level>=e.MaxLevel?this.LabBar.string="MAX":this.LabBar.string=t.iCount+"/"+o.ConsumeSkillBookNum},e.prototype.playEnterAnim=function(){},e.prototype.showAnim=function(t,e){void 0===e&&(e=function(){}),cc.isValid(t)&&cc.tween(t).to(.1,{opacity:255}).call(function(){e&&e()}).start()},e.prototype.onDestroy=function(){c.EventMgr.getInstance().off(d.EventName.RefreshUISkillBookShow,this,this.refreshSkillBookShow)},s([v(cc.Sprite)],e.prototype,"SpBar",void 0),s([v(cc.Node)],e.prototype,"SpUp",void 0),s([v(cc.Label)],e.prototype,"LabLv",void 0),s([v(cc.Label)],e.prototype,"LabBar",void 0),s([v(cc.Node)],e.prototype,"SpBarBg",void 0),s([v(cc.Node)],e.prototype,"SpSkillBook",void 0),s([v(cc.Node)],e.prototype,"LabSkilllName",void 0),s([v(cc.Node)],e.prototype,"SpFetter1",void 0),s([v(cc.Node)],e.prototype,"SpFetter2",void 0),s([v(cc.Node)],e.prototype,"LabFetter1",void 0),s([v(cc.Node)],e.prototype,"LabFetter2",void 0),s([m],e)}(cc.Component);n.default=I,cc._RF.pop()},{}],NodeWearEquip:[function(t,e,o){"use strict";cc._RF.push(e,"6242cN+KlNHj6SM3Ry5y0yR","NodeWearEquip");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("EventMgr"),l=a("UIMgr"),u=a("Utils"),p=a("Config"),d=a("DataMgr"),g=a("EquipMgr"),h=a("PlayerMgr"),f=cc._decorator,y=f.ccclass,m=f.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabStrengthenLv=null,e.uiView=p.UIID.UIEquip,e.curBagIndex=1,e.equipData=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.registerEvent=function(){c.EventMgr.getInstance().on(p.EventName.RefreshStrengthenLv,this,this.strengthenEquip)},e.prototype.registerBtnEvent=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){var e=u.Utils.posTransform(t.node.parent,t.node.getPosition(),l.UIMgr.getInstance().getUIRoot(t.uiView)),o=h.PlayerMgr.getInstance().getAbType(),i="D"==o||"B"==o?p.UIID.UIEquipInfoNew:p.UIID.UIEquipInfo;l.UIMgr.getInstance().openUI(i,-1,t.equipData,t.equipData,e,g.EnumEquipInfo.EnumStrengthen,t.curBagIndex)})},e.prototype.initData=function(t,e,o){this.curBagIndex=t,this.equipData=e,this.uiView=o,this.registerEvent(),this.registerBtnEvent()},e.prototype.strengthenEquip=function(t){this.equipData&&(this.refreshStrengthenRedDot(),t&&t.id==this.equipData.id&&t.type==this.equipData.type&&t.IDCard==this.equipData.IDCard&&(this.equipData.strengthenLv=t.strengthenLv,this.refreshStrengthenLv()))},e.prototype.refreshStrengthenLv=function(){this.equipData.strengthenLv>0?(this.LabStrengthenLv.node.active=!0,this.LabStrengthenLv.string="+"+this.equipData.strengthenLv):this.LabStrengthenLv.node.active=!1},e.prototype.refreshStrengthenRedDot=function(){var t,e=0,o=h.PlayerMgr.getInstance().getAbType();if("D"==o||"B"==o){var i=d.DataMgr.getInstance().getEquipCfg(this.equipData.id),a=u.Utils.getTabelArr1(i.consume),n=this.equipData.strengthenLv;n<i.strengthenMaxLv&&(e=Number(a[Math.floor(n/10)][1]))}else e=d.DataMgr.getInstance().getEquipStrengthenCfg(this.equipData.id,this.equipData.strengthenLv).consume;if(t=h.PlayerMgr.getInstance().geUserData().getGoldNum()>=e,this.node.getChildByName("SpRedDot").active=t,!t&&("D"==o||"B"==o)){for(var r=!1,s=g.default.getInstance().getOwmedEquipForEquipType(this.equipData.type),c=0;c<s.length;c++)if(s[c].IDCard!=this.equipData.IDCard&&s[c].id==this.equipData.id&&s[c].type==this.equipData.type&&s[c].starLevel==this.equipData.starLevel){r=!0;break}this.node.getChildByName("SpRedDot").active=r}},e.prototype.onDestroy=function(){c.EventMgr.getInstance().off(p.EventName.RefreshStrengthenLv,this,this.strengthenEquip)},s([m(cc.Label)],e.prototype,"LabStrengthenLv",void 0),s([y],e)}(cc.Component);n.default=v,cc._RF.pop()},{}],ObjectMgr:[function(t,e,o){"use strict";cc._RF.push(e,"9d1dfg4Zg5Av6dI2J+ehAav","ObjectMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.ObjectPro=void 0;var n=i("Utils"),r=i("ObjectsParent"),s=i("DataMgr"),c=i("PlayerMgr");a.ObjectPro=function(){};var l=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.proTableExchangeProMonster=function(t){var e=c.PlayerMgr.getInstance().geUserData(),o=e.getCurSec(),i=e.getCurLevel(),a=s.DataMgr.getInstance().getSecFactorForLevelToAtk(t.monsterType,o,i),r=s.DataMgr.getInstance().getSecFactorForLevelToHp(t.monsterType,o,i),l=n.Utils.getTabelArr(t.atk),u=n.Utils.randomRang(Number(l[0]),Number(l[1]));return{hp_total:Math.ceil(t.hp*r),hp:Math.ceil(t.hp*r),attack_min:Math.ceil(u*a),attack_max:Math.ceil(u*a),speed:t.moveSpped,atkDis:t.atkDis,atkInterval:t.atkInterval,atkSpeed:0,atkCrazyProb:0,atkCrazyHurt:0,subHurt:0,dodgeHurtProb:0}},t.prototype.getColorForAtkType=function(t){var e=cc.color();switch(t){case r.EnumLadleWordType.Atk_Normal:e=cc.color(255,255,255);break;case r.EnumLadleWordType.Atk_CrazyHurt:e=cc.color(255,44,44);break;case r.EnumLadleWordType.Atk_CrazyName:e=cc.color(255,252,30);break;case r.EnumLadleWordType.Atk_SkillHurt:e=cc.color(198,44,255);break;case r.EnumLadleWordType.Atk_SkillName:e=cc.color(255,44,44);break;case r.EnumLadleWordType.Hp_Recover:e=cc.color(64,255,55);break;case r.EnumLadleWordType.Miss:e=cc.color(55,196,255)}return e},t}();a.default=l,cc._RF.pop()},{}],ObjectsParent:[function(t,e,o){"use strict";cc._RF.push(e,"fe443S+CvRAO6pkSwyYsToh","ObjectsParent");var i=t,a=o,n=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),a.EnumLadleWordType=a.EnumObjectState=void 0;var r,s,c=i("PoolMgr"),l=i("Utils"),u=i("Main"),p=i("GameMgr"),d=i("ObjectMgr"),g=i("PlayerMgr"),h=i("LadleWordMgr"),f=cc._decorator,y=f.ccclass,m=(f.property,function(){function t(){this.objectProperty={hp_total:100,hp:100,attack_min:100,attack_max:100,speed:5,atkDis:100,atkInterval:0,atkSpeed:100,atkCrazyProb:100,atkCrazyHurt:100,subHurt:0,dodgeHurtProb:0},this.object=null,this.skeleton=null,this.scale_object=1,this.scale_hpBar=1,this.timeScale_object=1,this.addUpSpeed=.7,this.gameSpeedArr=[1,1.5,2,2.5,3],this.curGameMultiply=1,this.objectState=r.Alive,this.isPlayer=!1,this.objectId=1,this.isCrazyAtk=!1,this.isDodgeHurt=!1}return t.prototype.isPauseSkeleton=function(t){this.skeleton&&this.object.active&&(this.skeleton.paused=t)},t.prototype.initObject=function(){this.timeScale_object=this.objectProperty.atkSpeed?this.objectProperty.atkSpeed/100:1,this.setGameMutiply(),this.skeleton.timeScale=this.timeScale_object*this.gameSpeedArr[this.curGameMultiply-1]+(p.default.getInstance().isAdddUp?this.addUpSpeed:0)},t.prototype.setGameMutiply=function(){this.curGameMultiply=g.PlayerMgr.getInstance().geUserData().getCurGameMultiply()},t.prototype.refreshObject=function(){var t=this.object.getChildByName("SpHpBarBg");t.active=!0,t.getChildByName("SpHpBar").getComponent(cc.Sprite).fillRange=this.objectProperty.hp/this.objectProperty.hp_total,t.getChildByName("LabHp").getComponent(cc.Label).string=Math.ceil(this.objectProperty.hp)+""},t.prototype.initObjectProperty=function(){},t.prototype.getNodeEff=function(){return cc.isValid(this.object)?this.object.getChildByName("NodeEff"):null},t.prototype.recycleNodeEff=function(){for(var t=this.getNodeEff(),e=0;e<t.childrenCount;e++){var o=t.children[e];cc.isValid(o)&&c.PoolMgr.getInstance().freeNode(o.name,o)}},t.prototype.getHpBarNode=function(){var t=this.object.getChildByName("SpHpBarBg");return cc.isValid(t)?t:this.object},t.prototype.isFullHp=function(){return this.objectProperty.hp_total==this.objectProperty.hp},t.prototype.subHp=function(){},t.prototype.addHp=function(t){this.objectProperty.hp+=t,this.objectProperty.hp>this.objectProperty.hp_total&&(this.objectProperty.hp=this.objectProperty.hp_total),this.refreshObject()},t.prototype.setHp=function(t){this.objectProperty.hp=t},t.prototype.fullHp=function(){this.objectProperty.hp=this.objectProperty.hp_total},t.prototype.initObjectsState=function(){this.objectState=r.Alive},t.prototype.setWaitDieState=function(){this.objectState=r.WaitDie},t.prototype.setDieState=function(){this.objectState=r.Die},t.prototype.setDie=function(){this.object.active=!1},t.prototype.isTriggerCrazyAtk=function(t){return void 0===t&&(t=0),l.Utils.randomRang(1,100)<=this.objectProperty.atkCrazyProb+t&&(this.isCrazyAtk=!0,!0)},t.prototype.isTriggerDodgeHurt=function(){return l.Utils.randomRang(1,100)<=this.objectProperty.dodgeHurtProb&&(this.isDodgeHurt=!0,h.default.LabLoad(u.default.instance.node,l.Utils.posTransform(this.object,this.getHpBarNode().getPosition(),u.default.instance.node),"\u95ea\u907f",h.default.height_ladleWord.height_number,void 0,d.default.getInstance().getColorForAtkType(s.Miss)),!0)},t.prototype.resetAtkState=function(){this.isCrazyAtk=!1,this.isDodgeHurt=!1},n([y],t)}());a.default=m,function(t){t[t.Alive=0]="Alive",t[t.WaitDie=1]="WaitDie",t[t.Die=2]="Die"}(r=a.EnumObjectState||(a.EnumObjectState={})),function(t){t[t.Atk_Normal=0]="Atk_Normal",t[t.Atk_SkillHurt=1]="Atk_SkillHurt",t[t.Atk_SkillName=2]="Atk_SkillName",t[t.Atk_CrazyHurt=3]="Atk_CrazyHurt",t[t.Atk_CrazyName=4]="Atk_CrazyName",t[t.Hp_Recover=5]="Hp_Recover",t[t.Miss=6]="Miss"}(s=a.EnumLadleWordType||(a.EnumLadleWordType={})),cc._RF.pop()},{}],OppoManager:[function(t,e,o){"use strict";cc._RF.push(e,"42da7ebB7dBz4hm5iMqYl33","OppoManager");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.OppoManager=void 0;var a=function(){function t(){this.hasAd=!0,this.hasBanner=!0,this.hasInsertAd=!0,this.hasVideoAd=!0,this.hasShare=!1,this.BannerAd=null,this.showBannerTime=0,this.showVideoTime=0,this.BannerAdHight=0,this.BannerAdWight=0,this.stub="",this.isShowBanner=!1,this.nativeAd=null,this.currentAdId=1,this.canShowBanner=!1,this.gamePortalAd=null,this.isSupportGamePortalAd=!0,this.VideoMap=new Map}return t.prototype.closeNativeAd=function(){},t.prototype.hasVerify=function(){return!1},t.prototype.toAppStore=function(){},t.prototype.addNotify=function(){},t.prototype.needDouyVefiy=function(){},t.prototype.interVefiy=function(){},t.prototype.showNative=function(){},t.prototype.hideNative=function(){},t.prototype.showInterNative=function(){},t.prototype.hideInterNative=function(){},t.prototype.canShowBtnMore=function(){return!0},t.prototype.canShowEnergyForverVersion=function(){return!0},t.prototype.showFloatIconAd=function(){},t.prototype.hideFloatIconAd=function(){},t.prototype.canCare=function(){return!1},t.prototype.addShortcut=function(){},t.prototype.checkShortcut=function(){},t.prototype.shareImg=function(){},t.prototype.getUserInfo=function(t){t(null,null)},t.prototype.videoCallback=function(){},t.prototype.canShare=function(){return!1},t.prototype.initTrack=function(){},t.prototype.goToSuperXiuXian=function(){},t.prototype.showBlockAd=function(){},t.prototype.hideBlockAd=function(){},t.prototype.youmengTrack=function(){},t.prototype.initNativeAd=function(t,e){var o=this,i=function(t){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d",t.adList),e&&e(t.adList),t.adList[0]&&o.nativeAd.reportAdShow({adId:t.adList[0].adId})},a=function(t){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t),e&&e(null)};this.nativeAd&&(this.nativeAd.offLoad(i),this.nativeAd.offError(a),this.nativeAd.destroy(),this.nativeAd=null),this.nativeAd=qg.createNativeAd({adUnitId:"311595"}),this.nativeAd.onError(a),this.nativeAd.onLoad(i),this.nativeAd.load()},t.prototype.showNativeAd=function(t){this.nativeAd&&this.nativeAd.reportAdClick({adId:t})},t.prototype.shareVideo=function(){},t.prototype.initSdk=function(){var t=this,e=qg.createRewardedVideoAd({adUnitId:"319268"});this.VideoMap.set(1,e);var o=qg.getSystemInfoSync(),i=o.screenWidth;o.platformVersionCode>=1051&&(this.BannerAd=qg.createBannerAd({adUnitId:"319288",style:{left:0,top:0,width:i}}),this.BannerAd.onResize(function(e){console.log(e.width,e.height),t.BannerAdHight=e.height,t.BannerAdWight=e.width,t.BannerAd.style.top=o.screenHeight-t.BannerAdHight,t.BannerAd.style.left=o.screenWidth/2-t.BannerAdWight/2+50}),this.BannerAd.onError(function(){}),this.BannerAd.onLoad(function(){})),o.platformVersionCode>=1076?this.gameBannerAd=qg.createGameBannerAd({adUnitId:"319303"}):console.log("\u5feb\u5e94\u7528\u5e73\u53f0\u7248\u672c\u53f7\u4f4e\u4e8e1076\uff0c\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API"),setTimeout(function(){t.canShowBanner=!0},6e4),o.platformVersionCode>=1076?(this.isSupportGamePortalAd=!0,this.gamePortalAd=qg.createGamePortalAd({adUnitId:"319306"})):(this.isSupportGamePortalAd=!1,console.log("\u5feb\u5e94\u7528\u5e73\u53f0\u7248\u672c\u53f7\u4f4e\u4e8e1076\uff0c\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API"))},t.prototype.login=function(){},t.prototype.pay=function(){},t.prototype.share=function(){},t.prototype.showGamePortalAd=function(t,e){if(this.isSupportGamePortalAd||!e){var o=this;null!=o.showGamePortalAd?(o.gamePortalAd.onLoad(function(){o.gamePortalAd.show().then(function(){}).catch(function(t){e&&e("\u6682\u65e0\u5185\u5bb9,\u8bf7\u7a0d\u540e\u518d\u8bd5"),console.log("show fail1 with:"+t.errCode+","+t.errMsg)})}),o.gamePortalAd.load().then(function(){}).catch(function(t){e&&e("\u6682\u65e0\u5185\u5bb9,\u8bf7\u7a0d\u540e\u518d\u8bd5"),console.log("load fail with:"+t.errCode+","+t.errMsg)})):e&&e(null)}else e(null)},t.prototype.showBanner=function(t){var e=this;if(this.gameBannerAd&&"ADResult"==t)this.gameBannerAd.show().then(function(){console.log("show success")}).catch(function(t){console.log("show fail with:"+t.errCode+","+t.errMsg),null!=e.BannerAd&&e.canShowBanner&&e.BannerAd.show().then(function(){}).catch(function(t){console.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})});else{if(null==e.BannerAd)return;e.canShowBanner&&e.BannerAd.show().then(function(){}).catch(function(t){console.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})}},t.prototype.hideBanner=function(){this.gameBannerAd&&this.gameBannerAd.hide().then(function(){console.log("hide success")}).catch(function(t){console.log("hide fail with:"+t.errCode+","+t.errMsg)}),null!=this.BannerAd&&this.BannerAd.hide()},t.prototype.showInsertAd=function(t,e){e&&e()},t.prototype.showVideoAd=function(t,e,o){var i=this.VideoMap.get(1);i.load();var a=function t(){i.show(),i.offLoad(t)};i.onLoad(a);var n=function t(){o("\u6682\u65f6\u6ca1\u6709\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),i.offError(t)};i.onError(n),i.onClose(function t(r){r&&r.isEnded?e&&e():o("\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u65e0\u6e38\u620f\u5956\u52b1"),i.offClose(t),i.offError(n),i.offLoad(a)})},t.prototype.homeToBackgroud=function(){},t.prototype.backgroudToHome=function(){},t.prototype.openNotify=function(){},t.prototype.registerNotify=function(){},t.prototype.deleteNotify=function(){},t.prototype.otherFun=function(t,e){qg.hasShortcutInstalled({success:function(t){0==t&&qg.installShortcut({success:function(){e&&e(!0)},fail:function(){},complete:function(){}})},fail:function(){e&&e(!1)},complete:function(){}})},t.prototype.shark=function(t){1==t?qg.vibrateLong({success:function(){},fail:function(){},complete:function(){}}):qg.vibrateShort({success:function(){},fail:function(){},complete:function(){}})},t.prototype.getInvertTime=function(){return 0},t.prototype.recordVideo=function(){},t.prototype.stopRecorderManager=function(){},t.prototype.setLanguage=function(){return null},t.prototype.showPushApp=function(t,e,o){o&&o()},t.prototype.exit=function(t,e,o){o&&o()},t}();i.OppoManager=a,cc._RF.pop()},{}],PetMgr:[function(t,e,o){"use strict";cc._RF.push(e,"8e6b1rTuI5Lya26ta8GZEUI","PetMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("Utils"),r=i("TrackDataEvent"),s=i("PlayerMgr"),c=i("TimeMgr"),l=function(){function t(){this.isOwnedPet=!1,this.twenMap=new Map,this.moveSpeedPet=150,this.enterPosX=-1e3,this.leftPosX=-250,this.rightPosX=250,this.idleTime=3}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initPetData=function(){s.PlayerMgr.getInstance().geUserData().isExistPetFotId(1)&&(this.isOwnedPet=!0)},t.prototype.getTween=function(t){this.twenMap.has(t.uuid)&&this.stopTween(t);var e=cc.tween(t);return this.twenMap.set(t.uuid,e),e},t.prototype.stopTween=function(t){this.twenMap.has(t.uuid)&&(this.twenMap.get(t.uuid).stop(),this.twenMap.delete(t.uuid))},t.prototype.petEnterAnim=function(t){var e=this;if(cc.isValid(t)){var o=Math.abs(t.x-this.leftPosX);t.getChildByName("pet").getComponent(sp.Skeleton).setAnimation(0,"move",!0),this.getTween(t).to(o/this.moveSpeedPet,{x:this.leftPosX}).call(function(){s.PlayerMgr.getInstance().getTrackData().youmengTrack(r.TrackId.pet_appear),e.petIdleAnim(t)}).start()}},t.prototype.petGoOutAnim=function(t){var e=this;if(cc.isValid(t)){t.zIndex=0,t.scaleX=1;var o=Math.abs(t.x-this.enterPosX);t.getChildByName("pet").getComponent(sp.Skeleton).setAnimation(0,"move",!0),this.getTween(t).to(o/this.moveSpeedPet,{x:this.enterPosX}).call(function(){e.petIdleAnim(t)}).start()}},t.prototype.petIdleAnim=function(t){var e=this;if(cc.isValid(t)){var o=t.getChildByName("pet").getComponent(sp.Skeleton),i=0==Math.floor(n.Utils.randomRang(0,2))?"idle":"idle2";o.setAnimation(0,i,!0),this.getTween(t).delay(this.idleTime).call(function(){e.isOwnedPet?t.x>0?e.petBackAnim(t):e.petGoAnim(t):c.TimeMgr.getInstance().isOpenTimer_pet?t.x>0?e.petBackAnim(t):e.petGoAnim(t):e.petGoOutAnim(t)}).start()}},t.prototype.petGoAnim=function(t){var e=this;if(cc.isValid(t)){t.zIndex=2,t.scaleX=-1;var o=Math.abs(t.x-this.rightPosX);t.getChildByName("pet").getComponent(sp.Skeleton).setAnimation(0,"move",!0),this.getTween(t).to(o/this.moveSpeedPet,{x:this.rightPosX}).call(function(){e.petIdleAnim(t)}).start()}},t.prototype.petBackAnim=function(t){var e=this;if(cc.isValid(t)){t.zIndex=0,t.scaleX=1;var o=Math.abs(t.x-this.leftPosX);t.getChildByName("pet").getComponent(sp.Skeleton).setAnimation(0,"move",!0),this.getTween(t).to(o/this.moveSpeedPet,{x:this.leftPosX}).call(function(){e.petIdleAnim(t)}).start()}},t}();a.default=l,cc._RF.pop()},{}],PlatformManager:[function(t,e,o){"use strict";cc._RF.push(e,"12479gU5UZCYZQwVmRaTNyH","PlatformManager");var i,a,n,r=t,s=o;Object.defineProperty(s,"__esModule",{value:!0}),s.PlatformManager=s.PlatformInfo=s.AdConfig=s.UM_VERSION=s.SWCF=s.SwitchID=void 0;var c,l=r("BasePlatform"),u=r("AndroidManager"),p=r("ByteDanceManager"),d=r("OppoManager"),g=r("VivoManager"),h=r("WechatManager"),f=r("KSManager"),y=r("WebLinkManager"),m=r("EditorManager");(function(t){t[t.ShenHe=0]="ShenHe",t[t.TrackVideoTime=1]="TrackVideoTime"})(c=s.SwitchID||(s.SwitchID={})),s.SWCF=((i={})[c.ShenHe]={appId:1089,h5_wechat:4,h5_bytedance:1},i[c.TrackVideoTime]={appId:1114,h5_wechat:4,h5_bytedance:11},i),s.UM_VERSION=((a={}).versionName={h5_wechat:"1.0.8",h5_bytedance:"1.1.4",h5_oppo:"1.0.0",h5_vivo:"1.0.0",h5_qq:"1.0.0",h5_kuaikan:"1.0.0",android_google:"1.0.0",android_vivo:"1.0.0",android_233:"1.0.0",android_4399:"1.0.0",android_xiaomi:"1.0.0",h5_baidu:"1.0.0",ios:"1.0.0"},a),s.AdConfig=((n={})[l.Platform.ANDROID_233]={packageName:"com.sfplay.diaoyu.meta",videoId:"123456|123456",insertId:"adunitxxx",bannerId:"adunitxxx",splashId:"adunitxxx"},n),function(t){t[t.APP_ID=1110]="APP_ID"}(s.PlatformInfo||(s.PlatformInfo={}));var v=function(){function t(){}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.init=function(){switch(cc.sys.platform){case cc.sys.IPAD:case cc.sys.IPHONE:case cc.sys.ANDROID:t.currentPlatform==l.Platform.WEB_LINK?this.currentPaltform=new y.WebLinkManager:(this.currentPaltform=new u.AndroidManager,window.AndroidManager=this.currentPaltform);break;case cc.sys.BYTEDANCE_GAME:this.currentPaltform=new p.BytedanceManager;break;case cc.sys.OPPO_GAME:this.currentPaltform=new d.OppoManager;break;case cc.sys.VIVO_GAME:this.currentPaltform=new g.VivoManager;break;case cc.sys.BAIDU_GAME:break;case cc.sys.WECHAT_GAME:t.currentPlatform==l.Platform.WECHAT?this.currentPaltform=new h.WechatManager:t.currentPlatform==l.Platform.KuaiShou&&(this.currentPaltform=new f.KSManager);break;case cc.sys.HUAWEI_GAME:break;default:t.currentPlatform==l.Platform.WEB_LINK?this.currentPaltform=new y.WebLinkManager:this.currentPaltform=new m.EditorManager}this.initSdk()},t.prototype.initSdk=function(){this.currentPaltform||(this.currentPaltform=new m.EditorManager),this.currentPaltform.initSdk()},t.prototype.showBanner=function(t,e){this.currentPaltform.showBanner(t,e)},t.prototype.shark=function(t,e){this.currentPaltform.shark(t,e)},t.prototype.hideBanner=function(t,e){this.currentPaltform.hideBanner(t,e)},t.prototype.showInsertAd=function(t,e){this.currentPaltform.showInsertAd(t,e)},t.prototype.showVideoAd=function(t,e,o,i){this.currentPaltform.showVideoAd(t,o,i,e)},t.prototype.otherFun=function(t,e){this.currentPaltform.otherFun(t,e)},t.prototype.recordVideo=function(t,e){this.currentPaltform.recordVideo(t,e)},t.prototype.stopRecorderManager=function(t,e){this.currentPaltform.stopRecorderManager(t,e)},t.prototype.youmengTrack=function(t,e,o,i){this.currentPaltform.youmengTrack(t,e,o,i)},t.prototype.hasVerify=function(){return this.currentPaltform.hasVerify()},t.prototype.getNativeCode=function(t){this.currentPaltform.getCode&&this.currentPaltform.getCode(t)},t.prototype.canShare=function(){return!!this.currentPaltform.canShare&&this.currentPaltform.canShare()},t.prototype.pauseRecord=function(){this.currentPaltform.pauseRecord&&this.currentPaltform.pauseRecord()},t.prototype.resumeRecord=function(){this.currentPaltform.resumeRecord&&this.currentPaltform.resumeRecord()},t.prototype.shareVideo=function(t,e){this.currentPaltform.share(t,e)},t.prototype.toAppStore=function(t){this.currentPaltform.toAppStore&&this.currentPaltform.toAppStore(t)},t.prototype.openNotify=function(){this.currentPaltform.openNotify&&this.currentPaltform.openNotify()},t.prototype.shareImg=function(t,e){this.currentPaltform.shareImg&&this.currentPaltform.shareImg(t,e)},t.prototype.showWxNativeAD=function(t){this.currentPaltform.showWxNativeAD(t)},t.prototype.hideWxNativeAD=function(t){this.currentPaltform.hideWxNativeAD(t)},t.prototype.showBlockAd=function(t,e){this.currentPaltform.showBlockAd(t,e)},t.prototype.hideBlockAd=function(t,e){this.currentPaltform.hideBlockAd(t,e)},t.currentPlatform=l.Platform.BYTEDANCE,t}();s.PlatformManager=v,cc._RF.pop()},{}],PlayerMgr:[function(t,e,o){"use strict";cc._RF.push(e,"a031fojBN1NlYGcg1sGyLFU","PlayerMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.PlayerMgr=a.ABTestType=void 0;var n=i("CommonModel"),r=i("Appcfg"),s=i("EventMgr"),c=i("LogMgr"),l=i("Config"),u=i("GuideData"),p=i("MainTaskData"),d=i("MysticalShopData"),g=i("ShareData"),h=i("TrackData"),f=i("UserData"),y=i("DataMgr");(function(t){t[t.NO_AB=0]="NO_AB",t[t.AB_Test=1]="AB_Test",t[t.ABD_Test=2]="ABD_Test",t[t.A_fixed=3]="A_fixed",t[t.B_fixed=4]="B_fixed",t[t.D_fixed=5]="D_fixed",t[t.AD_Test=6]="AD_Test"})(a.ABTestType||(a.ABTestType={}));var m=function(){function t(){this.isLoaded=!1}return t.getInstance=function(){return null==this.instance&&(this.instance=new t,this.instance.initData()),this.instance},t.prototype.initData=function(){n.CommonModel.Instance().setGameBrige(this)},t.prototype.preload=function(){this.isLoaded||(this.isLoaded=!0,this.guideData=new u.GuideData,this.guideData.getData(),this.udata=new f.UserData,this.udata.getData(),this.trackData=new h.TrackData,this.trackData.getData(),this.trackData.getSdkAbName(l.GameConfig.abTestType,function(t){c.LogMgr.getInstance().debug("\u7528\u6237\u7c7b\u578b\uff1a"+t,""),y.DataMgr.getInstance().reloadConfig(t,function(){s.EventMgr.getInstance().emit(r.BaseEventName.Loading,r.LoadingProcess.PlayerCfg)})}),this.shareData=new g.ShareData,this.shareData.getData(),this.mysticalShopData=new d.MysticalShopData,this.mysticalShopData.getData(),this.mainTaskData=new p.MainTaskData,this.mainTaskData.getData())},t.prototype.getAbType=function(){return this.trackData.getAbType()},t.prototype.getGuideData=function(){return this.guideData},t.prototype.geUserData=function(){return this.udata},t.prototype.getTrackData=function(){return this.trackData},t.prototype.getShareData=function(){return this.shareData},t.prototype.getMysticalShopData=function(){return this.mysticalShopData},t.prototype.getMainTaskData=function(){return this.mainTaskData},t.prototype.addRewards=function(t,e){void 0===e&&(e=1);for(var o=t.split(l.GameConfig.splitCount),i=0;i<o.length;i++)if(!(o[i].length<=0)){var a=o[i].split(l.GameConfig.splitNum),r=Number(a[0]),s=Number(a[1])*e;n.CommonModel.Instance().addReward(r,s,!0)}},t.prototype.addComReward=function(t,e){void 0===e&&(e=1)},t.prototype.subGoodsNum=function(e,o){var i=t.getInstance().geUserData();if(1==e)return i.subGoldNum(o)},t}();a.PlayerMgr=m,cc._RF.pop()},{}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"cefacOI+l9A4I1A85jYeJp/","Player");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("AudioMgr"),l=a("PoolMgr"),u=a("ResourceMgr"),p=a("Utils"),d=a("Main"),g=a("Config"),h=a("DataMgr"),f=a("EffectMgr"),y=a("EquipMgr"),m=a("FetterMgr"),v=a("GameDataMgr"),I=a("GameMgr"),k=a("ObjectMgr"),S=a("RoleMgr"),C=a("SkillMgr"),b=a("LadleWordMgr"),_=a("ObjectsParent"),N=cc._decorator,T=N.ccclass,D=(N.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scale_object=1,e.scale_hpBar=1,e.timeScale_object=1,e.addUpSpeed=.7,e.generalSkillArr=["gj1_1","gj1_2","gj1_3","gj1_4","gj1_5","gj1_6"],e.generalSkillEffArr=["dg1_1","dg1_2","dg1_3","dg1_4","dg1_5","dg1_6"],e.isAtkState=!1,e.lowTimeScale=.2,e}return r(e,t),e.prototype.getNodePlayer=function(){return this.object},e.prototype.controlHireEff=function(t){cc.isValid(this.object)&&(this.object.getChildByName("NodeFireEff").active=t)},e.prototype.createObject=function(t,e,o,i,a,n,r,s,c,p){var d=this;void 0===a&&(a=!1),this.isPlayer=a,this.object=l.PoolMgr.getInstance().getNode("Player"),this.addUpSpeed=Number(h.DataMgr.getInstance().getParamsCfgForSingle(g.EnumParams.TrudgeSpeedValue).value)/100,this.initObjectsState(),this.object?this.loadObjectInfo(o,i,a,n,r,s,c,p):(console.log("\u52a8\u6001\u52a0\u8f7d\u73a9\u5bb6"),u.ResourceMgr.getInstance().loadRes(t,e,cc.Prefab,function(t){d.object=cc.instantiate(t),d.loadObjectInfo(o,i,a,n,r,s,c,p)}))},e.prototype.loadObjectInfo=function(t,e,o,i,a,n,r,s){void 0===o&&(o=!1),this.skeleton=this.object.getChildByName("NodeSkeleton").getComponent(sp.Skeleton),cc.isValid(t)&&(this.object.parent=t),a&&(this.object.position=a),n&&(this.object.scaleX=-this.object.scaleX,this.object.getChildByName("SpHpBarBg").scaleX=-this.object.getChildByName("SpHpBarBg").scaleX),r&&(this.object.zIndex=r),s&&(this.object.scale=s),this.object.group="game",i&&i(),this.initObjectProperty(e),this.refreshObject(),this.initSkillEffName(),this.initObject()},e.prototype.initSkillEffName=function(){var t=y.default.getInstance().getWearEquipData(1);if(t)for(var e=0;e<this.generalSkillEffArr.length;e++)this.generalSkillEffArr[e]="dg"+t.quality+"_"+(e+1)},e.prototype.move=function(t,e){if(cc.isValid(this.object))if(t&&cc.isValid(t.object)&&t.objectState==_.EnumObjectState.Alive){if(!this.isAtkState)if(cc.Vec2.distance(this.object.getPosition(),t.object.getPosition())<=this.objectProperty.atkDis)this.isAtkState=!0,this.atkMonster(t,e);else{var o=this.object.x-t.object.x>0?-1:1;"yd"!=this.skeleton.animation&&(c.AudioMgr.getInstance().playEffect(g.AudioId.BattleSound_Mobile),this.controlDir(t),this.playAnim("yd",!1)),this.object.x+=this.objectProperty.speed*this.gameSpeedArr[this.curGameMultiply-1]*o}}else e&&e()},e.prototype.atkMonster=function(t,e){var o=this;if(this.objectState==_.EnumObjectState.Alive)if(t&&cc.isValid(t.object)&&t.objectState==_.EnumObjectState.Alive){this.controlDir(t);var i="",a="",n=C.default.getAtkSkillId(),r=h.DataMgr.getInstance().getSkill(n);if(0==n){var s=v.default.getInstance().randomPlayerSkill(this.generalSkillArr);i=this.generalSkillArr[s],a=this.generalSkillEffArr[s]}else i=r.skillAnimName,a=r.skillEffName;var l=t.isFullHp(),u=0,y=[0,0],S=m.default.getInstance();S.isHaveCurseFetter()&&(l||(y=S.getDamageForCurse()),S.addDamageForCurse());var N=p.Utils.randomRang(this.objectProperty.attack_min+y[0],this.objectProperty.attack_max+y[1]),T=!1;S.isHaveRuinFetter()&&S.isAccomplishRuin()?(T=!0,N=S.getDamageValueRuin(N)):l&&S.isHaveThreatenFetter()&&(u=S.getFirstAtkToCrazyProp_base());var D=_.EnumLadleWordType.Atk_Normal;T||this.isTriggerCrazyAtk(u)&&(N=Math.ceil(N*(this.objectProperty.atkCrazyHurt/100)),D=_.EnumLadleWordType.Atk_CrazyHurt),0!=n&&(D=_.EnumLadleWordType.Atk_SkillHurt);var M=N,B=!1,P=[];if(0!=n)if(M=Math.ceil(M*r.damageValue/100),0==r.damageType){var L=h.DataMgr.getInstance().getMonsterProbCfg(t.objectId);1!=d.default.instance.monsterCount&&3!=L.monsterType||t.objectProperty.hp<=M&&(B=!0)}else if(-1==r.damageType);else{var E=p.Utils.getTabelArr(r.damageAround),w=[Number(E[0]),Number(E[1])],U=this.object.x-t.object.x>0?0:1;P=d.default.instance.getMonstersForRange(U,r.damageType,w);var A=!0;for(s=0;s<P.length;s++)if(P[s].objectProperty.hp>M)A=!1;else if(3==(L=h.DataMgr.getInstance().getMonsterProbCfg(P[s].objectId)).monsterType){A=!0,B=!0;break}A&&d.default.instance.monsterCount==P.length&&(B=!0)}else L=h.DataMgr.getInstance().getMonsterProbCfg(t.objectId),1!=d.default.instance.monsterCount&&3!=L.monsterType||t.objectProperty.hp<=M&&(B=!0);this.playAnim(i,!1,function(){if(a&&""!=a){var e=cc.v2(0,0);if(0!=n)e=cc.v2(Math.abs(t.object.x-o.object.x),0);else{var i=M>=t.objectProperty.hp?p.Utils.randomRang(3,5):p.Utils.randomRang(1,3);c.AudioMgr.getInstance().playEffectByPath(g.AudioId["BattleSound_Attack0"+i],"generalAtk")}f.default.playEff("prefabs","effect/EffSkill","EffSkill",a,o.getNodeEff(),e)}},function(){if(S.isHaveSpecialFetter()){var i=S.getRecoverHp_atkEnd_base(),a=Math.ceil(M*i/100);o.addHp(a),b.default.LabLoad(d.default.instance.node,p.Utils.posTransform(o.object,o.getHpBarNode().getPosition(),d.default.instance.node),"+"+a,b.default.height_ladleWord.height_type,void 0,k.default.getInstance().getColorForAtkType(_.EnumLadleWordType.Hp_Recover))}if(B){if(v.default.getInstance().setGameState(g.EnumGameState.GameBuffer),o.skeleton.timeScale=(o.timeScale_object*o.gameSpeedArr[o.curGameMultiply-1]+(I.default.getInstance().isAdddUp?o.addUpSpeed:0))*o.lowTimeScale,P.length>0)for(var s=0;s<P.length;s++)P[s].skeleton.timeScale=P[s].timeScale_object*o.gameSpeedArr[o.curGameMultiply-1]*o.lowTimeScale;else t.skeleton.timeScale=t.timeScale_object*o.gameSpeedArr[o.curGameMultiply-1]*o.lowTimeScale;d.default.instance.gameCamera.controlCameraZoom(.2,1.5)}else M>=t.objectProperty.hp&&d.default.instance.gameCamera.shakeAnim();if(0==n)t.subHp(D,M,function(){3==h.DataMgr.getInstance().getMonsterProbCfg(t.objectId).monsterType&&B&&(console.log("\u6240\u6709\u602a\u7269\u64ad\u653e\u6b7b\u4ea1\u52a8\u4f5c"),d.default.instance.dieAllMonster(o.gameSpeedArr[o.curGameMultiply-1])),e&&e()});else if(c.AudioMgr.getInstance().playEffectByPath(g.AudioId[r.Sound],"skill"+n),b.default.LabLoadForSkill(d.default.instance.node,p.Utils.posTransform(o.object,o.getHpBarNode().getPosition(),d.default.instance.node),""+r.skillName,b.default.height_ladleWord.hegiht_skill,void 0,k.default.getInstance().getColorForAtkType(_.EnumLadleWordType.Atk_SkillName)),0==r.damageType)t.subHp(D,M,function(){3==h.DataMgr.getInstance().getMonsterProbCfg(t.objectId).monsterType&&B&&(console.log("\u6240\u6709\u602a\u7269\u64ad\u653e\u6b7b\u4ea1\u52a8\u4f5c"),d.default.instance.dieAllMonster(o.gameSpeedArr[o.curGameMultiply-1])),e&&e()});else if(-1==r.damageType)o.addHp(M),b.default.LabLoad(d.default.instance.node,p.Utils.posTransform(o.object,o.getHpBarNode().getPosition(),d.default.instance.node),"+"+M,b.default.height_ladleWord.height_type,void 0,k.default.getInstance().getColorForAtkType(_.EnumLadleWordType.Hp_Recover));else{var l=function(t){if(3==h.DataMgr.getInstance().getMonsterProbCfg(P[t].objectId).monsterType&&B)return P[t].subHp(D,M,function(){d.default.instance.dieAllMonster(o.gameSpeedArr[o.curGameMultiply-1],o.lowTimeScale),e&&e()}),"break";P[t].subHp(D,M,function(){t==P.length-1&&e&&e()})};for(s=0;s<P.length&&"break"!==l(s);s++);}},function(){o.recycleNodeEff(),o.isAtkState=!1,B&&(B=!1,o.skeleton.timeScale=o.timeScale_object*o.gameSpeedArr[o.curGameMultiply-1]+(I.default.getInstance().isAdddUp?o.addUpSpeed:0),cc.isValid(t.object)&&(t.skeleton.timeScale=t.timeScale_object*o.gameSpeedArr[o.curGameMultiply-1]),d.default.instance.gameCamera.controlCameraZoom(.1,1,function(){v.default.getInstance().setGameState(g.EnumGameState.GameDoing)}))})}else e&&e();else e&&e()},e.prototype.moveAnim=function(t,e){var o=t.x>=this.object.x;this.object.scaleX=o?1:-1,this.object.getChildByName("SpHpBarBg").scaleX=o?this.scale_hpBar:-this.scale_hpBar;var i=o?-200:200,a=Math.abs(this.object.x-(t.x+i));cc.tween(this.object).to(a/this.objectProperty.speed,{position:cc.v3(t.x+i,t.y,0)}).call(function(){e&&e()}).start()},e.prototype.playAnim=function(t,e,o,i,a){void 0===e&&(e=!1),this.skeleton&&this.skeleton.findAnimation(t)&&(this.skeleton.setAnimation(0,t,e),this.skeleton.timeScale=this.timeScale_object*this.gameSpeedArr[this.curGameMultiply-1]+(I.default.getInstance().isAdddUp?this.addUpSpeed:0),this.skeleton.setEventListener(function(t,e){"start"==e.data.name?o&&o():"attack"==e.data.name&&i&&i()}),this.skeleton.setCompleteListener(function(){a&&a()}))},e.prototype.initObjectProperty=function(t){this.objectProperty=t},e.prototype.controlDir=function(t){var e=t.object.x>=this.object.x;this.object.scaleX=e?this.scale_object:-this.scale_object,this.object.getChildByName("SpHpBarBg").scaleX=e?this.scale_hpBar:-this.scale_hpBar},e.prototype.subHp=function(t,e,o,i){var a=this;if(this.objectState==_.EnumObjectState.Alive&&!this.isTriggerDodgeHurt()){var n=Math.ceil(e);(n-=Math.ceil(n*(this.objectProperty.subHurt/100)))<=0&&(n=1),this.objectProperty.hp-=n,this.refreshObject(),t==_.EnumLadleWordType.Atk_CrazyHurt?(b.default.LabLoad(d.default.instance.node,p.Utils.posTransform(this.object,this.getHpBarNode().getPosition(),d.default.instance.node),"\u66b4\u51fb",b.default.height_ladleWord.height_type,void 0,k.default.getInstance().getColorForAtkType(_.EnumLadleWordType.Atk_CrazyName)),b.default.LabLoad(d.default.instance.node,p.Utils.posTransform(this.object,this.getHpBarNode().getPosition(),d.default.instance.node),"-"+n,b.default.height_ladleWord.height_number,void 0,k.default.getInstance().getColorForAtkType(t))):b.default.LabLoad(d.default.instance.node,p.Utils.posTransform(this.object,this.getHpBarNode().getPosition(),d.default.instance.node),"-"+n,b.default.height_ladleWord.height_number,void 0,k.default.getInstance().getColorForAtkType(t)),this.objectProperty.hp<=0?(this.setDieState(),this.object.getChildByName("SpHpBarBg").active=!1,c.AudioMgr.getInstance().playEffect(g.AudioId.BattleSound_Die),this.playAnim("sw",!1,void 0,void 0,function(){a.setDie(),d.default.instance.overGameFail()}),o&&o()):i&&i()}},e.prototype.resetObject=function(){this.object.x=0,this.fullHp(),this.refreshObject()},e.prototype.refreshProp=function(){var t=S.default.getInstance().getPlayerPro(),e=S.default.getInstance().getPropForAllSkillBook(),o=S.default.getInstance().getPropForAllFetter();if(this.objectProperty={hp_total:Math.ceil(t.hp_total+e.hp_total+o.hp_total),hp:Math.ceil(t.hp+e.hp+o.hp),attack_min:Math.ceil(t.attack_min+e.attack_min+o.attack_min),attack_max:Math.ceil(t.attack_max+e.attack_max+o.attack_max),speed:Math.ceil(t.speed+e.speed+o.speed),atkDis:Math.ceil(t.atkDis+e.atkDis+o.atkDis),atkInterval:Math.ceil(t.atkInterval+e.atkInterval+o.atkInterval),atkSpeed:Math.ceil(t.atkSpeed+e.atkSpeed+o.atkSpeed),atkCrazyProb:Math.ceil(t.atkCrazyProb+e.atkCrazyProb+o.atkCrazyProb),atkCrazyHurt:Math.ceil(t.atkCrazyHurt+e.atkCrazyHurt+o.atkCrazyHurt),subHurt:Math.ceil(t.subHurt+e.subHurt+o.subHurt),dodgeHurtProb:Math.ceil(t.dodgeHurtProb+e.dodgeHurtProb+o.dodgeHurtProb)},this.initObject(),m.default.getInstance().isHaveWishFetter()){m.default.getInstance().addRecoverHp_levelEnd_add();var i=m.default.getInstance().getRecoverHp_levelEnd_add();this.objectProperty.hp_total+=Math.ceil(this.objectProperty.hp_total*i/100)}this.resetObject()},s([T],e)}(_.default));n.default=D,cc._RF.pop()},{}],PoolMgr:[function(t,e,o){"use strict";cc._RF.push(e,"20ec7h/8G9PQZ8e/5M6Hnno","PoolMgr");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.PoolMgr=i.PoolNode=void 0;var a=function(){function t(){this._isReady=!1,this._createCount=0,this._warterMark=50,this._node=null,this._nodes=new cc.NodePool}return t.prototype.init=function(t,e){this._node=t,this._isReady=!0;for(var o=0;o<e;o++){var i=cc.instantiate(t);this._createCount++,this._nodes.put(i)}},t.prototype.getNode=function(){return this._nodes.size()>0?this._nodes.get():(this._createCount++,cc.instantiate(this._node))},t.prototype.freeNode=function(t){t&&cc.isValid(t)?this._warterMark<this._nodes.size()?(this._createCount--,t.destroy()):this._nodes.put(t):this._createCount--},t.prototype.setWaterMark=function(t){this._warterMark=t},t.prototype.destory=function(){this._createCount-=this._nodes.size();for(var t=0;t<this._nodes.size();t++){var e=this._nodes.get(t);e&&e.destroy()}this._nodes.clear()},t}();i.PoolNode=a;var n=function(){function t(){this.poolMap=new Map}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.creatrePool=function(t,e,o){if(void 0===o&&(o=1),this.poolMap.has(t)){var i=this.poolMap.get(t);i.destory(),i=null}var n=new a;e&&n.init(e,o),this.poolMap.set(t,n)},t.prototype.getNode=function(t){return this.poolMap.has(t)?this.poolMap.get(t).getNode():null},t.prototype.freeNode=function(t,e){this.poolMap.has(t)?this.poolMap.get(t).freeNode(e):e.destroy()},t.prototype.clearPool=function(t){this.poolMap.has(t)&&(this.poolMap.get(t).destory(),this.poolMap.delete(t))},t.instance=null,t}();i.PoolMgr=n,cc._RF.pop()},{}],RedDotMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ef426Z2ct1F3ZCWNPS55T4T","RedDotMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("TimeUtils"),r=i("Config"),s=i("DataMgr"),c=i("EquipMgr"),l=i("PlayerMgr"),u=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.homeForRedDot=function(t,e,o,i,a){this.taskForRedDot(t),this.onHookForRedDot(e),this.skillBookForRedDot(o),this.equipForRedDot(i),this.shopForRedDot(a)},t.prototype.taskForRedDot=function(t){for(var e=l.PlayerMgr.getInstance().geUserData().getCurTaskList(),o=0;o<e.length;o++)if(1==e[o].state)return cc.isValid(t)&&(t.active=!0),!0;return cc.isValid(t)&&(t.active=!1),!1},t.prototype.onHookForRedDot=function(t){var e=l.PlayerMgr.getInstance().geUserData();return n.TimeUtils.timeExchange(1,e.getOnHookTime())>Number(s.DataMgr.getInstance().getParamsCfgForSingle(r.EnumParams.OnHookMaxTime).value)?(cc.isValid(t)&&(t.active=!0),!0):(cc.isValid(t)&&(t.active=!1),!1)},t.prototype.skillBookForRedDot=function(t){for(var e=l.PlayerMgr.getInstance().geUserData(),o=e.getSkillBookArr(),i=0;i<o.length;i++){var a=s.DataMgr.getInstance().getSkillBookLevelCfg(o[i].id,o[i].level);if(o[i].iCount>=a.ConsumeSkillBookNum&&e.getGoldNum()>=a.ConsumeNum)return cc.isValid(t)&&(t.active=!0),!0}return cc.isValid(t)&&(t.active=!1),!1},t.prototype.equipForRedDot=function(t){for(var e=l.PlayerMgr.getInstance().geUserData(),o=e.getOwnedEquipList(),i=0;i<o.length;i++)for(var a=e.isExistEquip(i+1),n=0;n<o[i].length;n++){var r=o[i][n];if(!a)return cc.isValid(t)&&(t.active=!0),!0;var u=0,p=0,d=l.PlayerMgr.getInstance().getAbType();if("D"==d||"B"==d?(u=c.default.getInstance().getEquipFightForId(r.id,!1,r.type,r.IDCard,r),p=c.default.getInstance().getEquipFightForId(a.id,!1,a.type,a.IDCard,a)):(u=s.DataMgr.getInstance().getEquipStrengthenCfg(r.id,r.strengthenLv).fightNum,p=s.DataMgr.getInstance().getEquipStrengthenCfg(a.id,a.strengthenLv).fightNum),u>p)return cc.isValid(t)&&(t.active=!0),!0}return cc.isValid(t)&&(t.active=!1),!1},t.prototype.shopForRedDot=function(t){return l.PlayerMgr.getInstance().geUserData().getInGotNum()>=100?(cc.isValid(t)&&(t.active=!0),!0):(cc.isValid(t)&&(t.active=!1),!1)},t}();a.default=u,cc._RF.pop()},{}],ResCacheMgr:[function(t,e,o){"use strict";cc._RF.push(e,"9b2e1znp0JK1pwthkWLQinF","ResCacheMgr");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.ResCacheMgr=void 0;var s=a("BaseMgr"),c=a("TimeUtils"),l=a("UIUtils"),u=a("ResourceMgr"),p=function(t){function e(){var e=t.call(this)||this;return e.temporaryCache=[],e.permanentCache=[],e.isStartDecRef=!1,e.assetsLifeTime=5,e.permanentCacheKeyMap=new Map,e.depsdeps=[],e}return r(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(){this.startDecRef()},e.prototype.startDecRef=function(){this.isStartDecRef||(this.isStartDecRef=!0,l.UIUtils.schedule(this.autoRelease,this,1))},e.prototype.autoRelease=function(){for(var t=c.TimeUtils.GetTimeBySecond(),e=0;e<this.temporaryCache.length;e++){var o=this.temporaryCache[e];if(o&&t-o.releaseTime>=o.cacheTime){if(o.defCount<=0)continue;for(var i=o.defCount,a=0;a<i;a++)if(o.asset.decRef(),o.asset.refCount<=0){this.temporaryCache.splice(e,1),e--,o.defCount=0;break}o.asset.refCount>0&&(o.releaseTime=c.TimeUtils.GetTimeBySecond()+86400)}else o&&0==o.asset.refCount&&(this.temporaryCache.splice(e,1),e--,o.defCount=0)}},e.prototype.refreshTime=function(t){for(var e=c.TimeUtils.GetTimeBySecond(),o=0;o<t.length;o++)for(var i=0;i<this.temporaryCache.length;i++){var a=t[o],n=this.temporaryCache[i];if(a.cachekey==n.cachekey&&a.type==n.type){this.temporaryCache[i].releaseTime=e,this.temporaryCache[i].defCount+=a.defCount,this.temporaryCache[i].canRelease=!1;break}}},e.prototype.addAssets=function(t,e){if(t&&t.asset){var o=e?this.temporaryCache:this.permanentCache,i=this.isExistKey(t.cachekey,t.type,o);-1==i?o.push(t):o[i]=t}},e.prototype.addAssetKeyToMap=function(t,e,o,i){var a=this.permanentCacheKeyMap.get(t),n=new u.ResCacheKey(e,o,i);if(a&&a.length>0)a.push(n);else{var r=[];r.push(n),this.permanentCacheKeyMap.set(t,r)}},e.prototype.releaseAssetsFromMap=function(t){var e=this.permanentCacheKeyMap.get(t);if(e&&e.length>0)for(var o=0;o<e.length;o++)for(var i=0;i<this.permanentCache.length;i++){var a=this.permanentCache[i];if(a&&a.cachekey==e[o].cachekey&&a.type==e[o].type){a.asset.decRef(),a.asset.refCount<=0&&(this.permanentCache.splice(i,1),i--);break}}},e.prototype.getAssets=function(t,e,o){var i="";o&&(i=cc.js.getClassName(o));var a,n=c.TimeUtils.GetTimeBySecond(),r=n+86400,s=t+"/"+e,l=this.isExistKey(s,i,this.temporaryCache),u=this.isExistKey(s,i,this.permanentCache),p=null,d=null;return-1!=l&&(this.temporaryCache[l].releaseTime=r,this.temporaryCache[l].createTime=n,this.temporaryCache[l].canRelease=!0,(a=this.temporaryCache[l].asset)&&a.refCount>0&&(p=this.temporaryCache[l])),-1!=u&&(this.permanentCache[u].releaseTime=r,this.permanentCache[u].createTime=n,this.permanentCache[u].canRelease=!0,(a=this.permanentCache[u].asset)&&a.refCount>0&&(d=this.permanentCache[u])),p||d||null},e.prototype.isExistKey=function(t,e,o){for(var i=0;i<o.length;i++){var a=o[i];if(a&&a.cachekey==t&&a.type==e)return i}return-1},e.prototype.visitAsset=function(t,e){if(t._uuid)e.push(t._uuid);else if(t instanceof cc.SpriteFrame){var o,i=t;i._original?(o=i._original._texture)&&e.push(o._uuid):(o=i.getTexture())&&e.push(o._uuid)}},e.prototype.visitComponent=function(t,e){for(var o=Object.getOwnPropertyNames(t),i=0;i<o.length;i++){var a=o[i];if("node"!==a&&"__eventTargets"!==a){var n=t[a];if(n instanceof cc.NodePool)this.visitNodePool(n,e);else if("object"==typeof n&&n)if(Array.isArray(n))for(var r=0;r<n.length;r++)(c=n[r])instanceof cc.Asset&&this.visitAsset(c,e);else if(n.constructor&&n.constructor!==Object)n instanceof cc.Asset&&this.visitAsset(n,e);else{var s=Object.getOwnPropertyNames(n);for(r=0;r<s.length;r++){var c;(c=n[s[r]])instanceof cc.Asset&&this.visitAsset(c,e)}}}}},e.prototype.visitNode=function(t,e){for(var o=0;o<t._components.length;o++)this.visitComponent(t._components[o],e);for(o=0;o<t._children.length;o++)this.visitNode(t._children[o],e)},e.prototype.visitNodePool=function(t,e){for(var o=t._pool,i=0;i<o.length;i++){var a=o[i];this.visitNode(a,e)}},e.instance=null,e}(s.default);n.ResCacheMgr=p,cc._RF.pop()},{}],ResourceMgr:[function(t,e,o){"use strict";cc._RF.push(e,"739ffLu5WtLUq8HGmuiTmxM","ResourceMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.ResourceMgr=a.BundleCache=a.ResCacheKey=a.ResCache=void 0;var n=i("BasePlatform"),r=i("ArgsParseUtils"),s=i("TimeUtils"),c=i("LogMgr"),l=i("PlatformManager"),u=i("ResCacheMgr"),p=function(){function t(t,e,o,i,a,n){this.releaseTime=o,this.cacheTime=i,this.asset=n,this.type=cc.js.getClassName(a),this.cachekey=t+"/"+e,this.defCount=0,this.lifeTime=3,this.createTime=s.TimeUtils.GetTimeBySecond(),this.canRelease=!0}return t.prototype.setLifeTime=function(t){this.lifeTime=t},t}();a.ResCache=p,a.ResCacheKey=function(t,e,o){this.defCount=0,this.type=cc.js.getClassName(o),this.cachekey=t+"/"+e,this.defCount=1},a.BundleCache=function(t,e,o){this.bundleName=t,this.dateTime=e,this.cacheTime=o};var d=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getBundle=function(t){return cc.assetManager.getBundle(t)},t.prototype.loadBundle=function(t,e){var o=cc.assetManager.getBundle(t);null==o?cc.assetManager.loadBundle(t,function(o,i){o?c.LogMgr.getInstance().error(t+"bundle load error :"+o):(c.LogMgr.getInstance().debug("\u52a0\u8f7dbundle:"+t),e(i))}):e(o)},t.prototype.preloadFromBundle=function(t,e,o){t.preload(e,cc.Asset,function(t,e){o&&o(t,e)})},t.prototype.preload=function(t,e){var o=cc.assetManager.getBundle(t);o?e&&o.preload(e):cc.assetManager.loadBundle(t,function(t,o){t||e&&o.preload(e)})},t.prototype.relLoadBundle=function(t,e){for(var o=function(o){var a=t[o];i.loadBundle(a,function(t){if(e){var i=e.get(o);t.load(i)}})},i=this,a=0;a<t.length;a++)o(a)},t.prototype.loadFromRes=function(t,e,o){this.loadRes("resources",t,e,o)},t.prototype.loadDirFrom=function(t,e){this.loadDir("resources",t,e)},t.prototype.loadSpriteframe=function(){var e=r.ArgsParseUtils._makeloadSpriteFrameResrgs.apply(this,arguments),o=e.bundle,i=e.path,a=e.callback,n=e.saveKey,l=s.TimeUtils.GetTimeBySecond()+86400,d=u.ResCacheMgr.getInstance().getAssets(o,i,cc.SpriteFrame);if(d&&d.asset)return d.asset.addRef(),d.cacheTime=l,void a(d.asset);var g=cc.assetManager.getBundle(o),h=new p(o,i,l,e.cacheTme,cc.SpriteFrame);null==g?t.getInstance().loadBundle(o,function(t){t.load(i,cc.SpriteFrame,function(t,r){t?c.LogMgr.getInstance().error("loadres error path:"+i+"  error:",t.message):(r.addRef(),h.asset=r,u.ResCacheMgr.getInstance().addAssets(h,e.autoRelese),n&&u.ResCacheMgr.getInstance().addAssetKeyToMap(n,o,i,cc.SpriteFrame),a&&a(r))})}):g.load(i,cc.SpriteFrame,function(t,r){t?c.LogMgr.getInstance().error("loadres error path:"+i+"  error:"+t):(r.addRef(),h.asset=r,u.ResCacheMgr.getInstance().addAssets(h,e.autoRelese),n&&u.ResCacheMgr.getInstance().addAssetKeyToMap(n,o,i,cc.SpriteFrame),a&&a(r))})},t.prototype.loadRemoteSpriteFrame=function(t,e,o,i){void 0===o&&(o=!1),void 0===i&&(i=10);var a=s.TimeUtils.GetTimeBySecond()+86400,r=u.ResCacheMgr.getInstance().getAssets("",t,cc.Texture2D);if(r&&r.asset)return r.asset.addRef(),void e(r.asset);var c=new p("",t,a,i,cc.Texture2D);t.startsWith("http")&&(l.PlatformManager.currentPlatform==n.Platform.BYTEDANCE?cc.assetManager.loadRemote(t,{ext:".head"},function(t,i){if(!t){i.addRef(),c.asset=i,u.ResCacheMgr.getInstance().addAssets(c,o);var a=new cc.SpriteFrame(i);e(a)}}):cc.assetManager.loadRemote(t,function(t,i){if(!t){i.addRef(),c.asset=i,u.ResCacheMgr.getInstance().addAssets(c,o);var a=new cc.SpriteFrame(i);e(a)}}))},t.prototype.loadRes=function(){var e=r.ArgsParseUtils._makeLoadResArgs.apply(this,arguments),o=e.bundle,i=e.path,a=e.type,n=e.callback,l=e.saveKey;if("cc.Asset"!=cc.js.getClassName(a)){var d=s.TimeUtils.GetTimeBySecond()+86400,g=u.ResCacheMgr.getInstance().getAssets(o,i,a);if(g&&g.asset)return g.asset.addRef(),void n(g.asset);var h=cc.assetManager.getBundle(o),f=new p(o,i,d,e.cacheTme,a);null==h?t.getInstance().loadBundle(o,function(t){t.load(i,a,function(t,r){t?c.LogMgr.getInstance().error("loadres error path:"+i+"  error:",t.message):(r.addRef(),f.asset=r,u.ResCacheMgr.getInstance().addAssets(f,e.autoRelese),l&&u.ResCacheMgr.getInstance().addAssetKeyToMap(l,o,i,a),n&&n(r))})}):h.load(i,a,function(t,r){t?c.LogMgr.getInstance().error("loadres error path:"+i+"  error:"+t):(r.addRef(),f.asset=r,u.ResCacheMgr.getInstance().addAssets(f,e.autoRelese),l&&u.ResCacheMgr.getInstance().addAssetKeyToMap(l,o,i,a),n&&n(r))})}else console.error("\u8bf7\u4f20\u5165\u5177\u4f53\u8d44\u6e90\u7c7b\u578b\uff0c\u4e0d\u80fd\u662f\u57fa\u7c7basset,\u8def\u5f84:",o+"/"+i)},t.prototype.loadDir=function(t,e,o){var i=cc.assetManager.getBundle(t);null==i?cc.assetManager.loadBundle(t,function(t,i){i.loadDir(e,cc.Asset,function(t,i){t?c.LogMgr.getInstance().error("loadres error path:"+e+"  error:"+t):o&&o(i)})}):i.loadDir(e,cc.Asset,function(t,i){t?c.LogMgr.getInstance().error("loadres error path:"+e+"  error:"+t):o&&o(i)})},t.prototype.releaseByBundle=function(t,e){t.release(e)},t.prototype.releaseByBname=function(t,e){var o=cc.assetManager.getBundle(t);o&&o.release(e)},t.prototype.releaseBundle=function(t){var e=cc.assetManager.getBundle(t);e&&cc.assetManager.removeBundle(e)},t.instance=null,t}();a.ResourceMgr=d,cc._RF.pop()},{}],RoleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"493edUvszZEZ6MgLpKcr8I5","RoleMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("Utils"),r=i("Main"),s=i("Config"),c=i("DataMgr"),l=i("EquipMgr"),u=i("FetterMgr"),p=i("GameDataMgr"),d=i("PlayerMgr"),g=function(){function t(){this.bundleSkin="showEquipImg",this.defaultClothes="cq_js0",this.defaultWeapon="weapon_00",this.curFightNumForPlayer=0,this.playerPro_copy=null,this.playerPro_copy1=null,this.playerPro=null,this.playerPro_equip=null,this.playerPro_suit=null,this.playerPro_salutation=null,this.playerPro_pet=null,this.playerPro_skillBook=null,this.playerPro_fetter=null,this.specialFetterArr=[]}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getPlayerFightNum=function(){var t=c.DataMgr.getInstance().getPlayerBaseProp().fightNum+this.getEquipFightNum()+this.getSuitFightNum()+this.getSalutationFightNum()+this.getPetFightNum();return this.curFightNumForPlayer=t,t},t.prototype.getEquipFightNum=function(){for(var t=0,e=l.default.getInstance().getWearEquipList(),o=0;o<e.length;o++){var i=d.PlayerMgr.getInstance().getAbType();t+="D"==i||"B"==i?l.default.getInstance().getEquipFightForId(e[o].id,!1,e[o].type,e[o].IDCard,e[o]):c.DataMgr.getInstance().getEquipStrengthenCfg(e[o].id,e[o].strengthenLv).fightNum}return t},t.prototype.getSuitFightNum=function(){for(var t=0,e=l.default.getInstance().getAllSuitList(),o=0;o<e.length;o++)if(!(e[o].count<=0)){var i=c.DataMgr.getInstance().getEquipSuitCfg(e[o].id),a=n.Utils.getTabelArr(i.fightNum);e[o].count>=2&&e[o].count<4?t+=Number(a[0]):e[o].count>=4&&e[o].count<6?t+=Number(a[1]):e[o].count>=6&&(t+=Number(a[2]))}return t},t.prototype.getSalutationFightNum=function(){var t=0,e=d.PlayerMgr.getInstance().geUserData().getWearSalutationId();return e<1?t:t=c.DataMgr.getInstance().getSalutation(e).fightNum},t.prototype.getPetFightNum=function(){var t=0,e=d.PlayerMgr.getInstance().geUserData().getOwnedPetsList()[0];return!e||e<=0?t:t=c.DataMgr.getInstance().getPetsCfg(e).fightNum},t.prototype.getPlayerPro_copy=function(){var t=c.DataMgr.getInstance().getPlayerBaseProp(),e=n.Utils.getTabelArr(t.atk);return this.playerPro_copy={hp_total:Math.ceil(t.hp+this.getPropForAllEquip().hp_total),hp:Math.ceil(t.hp+this.getPropForAllEquip().hp),attack_min:Math.ceil(Number(e[0])+this.getPropForAllEquip().attack_min),attack_max:Math.ceil(Number(e[1])+this.getPropForAllEquip().attack_max),speed:Math.ceil(t.moveSpeed+this.getPropForAllEquip().speed),atkDis:Math.ceil(200+this.getPropForAllEquip().atkDis),atkInterval:Math.ceil(0+this.getPropForAllEquip().atkInterval),atkSpeed:Math.ceil(t.atkSpeed+this.getPropForAllEquip().atkSpeed),atkCrazyProb:Math.ceil(t.atkCrazyProb+this.getPropForAllEquip().atkCrazyProb),atkCrazyHurt:Math.ceil(t.atkCrazyHurt+this.getPropForAllEquip().atkCrazyHurt),subHurt:Math.ceil(t.subHurt+this.getPropForAllEquip().subHurt),dodgeHurtProb:Math.ceil(t.dodgeHurtProb+this.getPropForAllEquip().dodgeHurtProb)},this.playerPro_copy},t.prototype.getPlayerProNotPet=function(){var t=c.DataMgr.getInstance().getPlayerBaseProp(),e=n.Utils.getTabelArr(t.atk);return this.playerPro_copy1={hp_total:Math.ceil(t.hp+this.getPropForAllEquip().hp_total+this.getPropForAllSuit().hp_total+this.getPropForSalutation().hp_total),hp:Math.ceil(t.hp+this.getPropForAllEquip().hp+this.getPropForAllSuit().hp+this.getPropForSalutation().hp),attack_min:Math.ceil(Number(e[0])+this.getPropForAllEquip().attack_min+this.getPropForAllSuit().attack_min+this.getPropForSalutation().attack_min),attack_max:Math.ceil(Number(e[1])+this.getPropForAllEquip().attack_max+this.getPropForAllSuit().attack_max+this.getPropForSalutation().attack_max),speed:Math.ceil(t.moveSpeed+this.getPropForAllEquip().speed+this.getPropForAllSuit().speed+this.getPropForSalutation().speed),atkDis:Math.ceil(200+this.getPropForAllEquip().atkDis+this.getPropForAllSuit().atkDis+this.getPropForSalutation().atkDis),atkInterval:Math.ceil(0+this.getPropForAllEquip().atkInterval+this.getPropForAllSuit().atkInterval+this.getPropForSalutation().atkInterval),atkSpeed:Math.ceil(t.atkSpeed+this.getPropForAllEquip().atkSpeed+this.getPropForAllSuit().atkSpeed+this.getPropForSalutation().atkSpeed),atkCrazyProb:Math.ceil(t.atkCrazyProb+this.getPropForAllEquip().atkCrazyProb+this.getPropForAllSuit().atkCrazyProb+this.getPropForSalutation().atkCrazyProb),atkCrazyHurt:Math.ceil(t.atkCrazyHurt+this.getPropForAllEquip().atkCrazyHurt+this.getPropForAllSuit().atkCrazyHurt+this.getPropForSalutation().atkCrazyHurt),subHurt:Math.ceil(t.subHurt+this.getPropForAllEquip().subHurt+this.getPropForAllSuit().subHurt+this.getPropForSalutation().subHurt),dodgeHurtProb:Math.ceil(t.dodgeHurtProb+this.getPropForAllEquip().dodgeHurtProb+this.getPropForAllSuit().dodgeHurtProb+this.getPropForSalutation().dodgeHurtProb)},this.playerPro_copy1},t.prototype.getPlayerPro=function(){var t=c.DataMgr.getInstance().getPlayerBaseProp(),e=n.Utils.getTabelArr(t.atk);return this.playerPro={hp_total:Math.ceil(t.hp+this.getPropForAllEquip().hp_total+this.getPropForAllSuit().hp_total+this.getPropForSalutation().hp_total+this.getPropForPet().hp_total),hp:Math.ceil(t.hp+this.getPropForAllEquip().hp+this.getPropForAllSuit().hp+this.getPropForSalutation().hp+this.getPropForPet().hp),attack_min:Math.ceil(Number(e[0])+this.getPropForAllEquip().attack_min+this.getPropForAllSuit().attack_min+this.getPropForSalutation().attack_min+this.getPropForPet().attack_min),attack_max:Math.ceil(Number(e[1])+this.getPropForAllEquip().attack_max+this.getPropForAllSuit().attack_max+this.getPropForSalutation().attack_max+this.getPropForPet().attack_max),speed:Math.ceil(t.moveSpeed+this.getPropForAllEquip().speed+this.getPropForAllSuit().speed+this.getPropForSalutation().speed+this.getPropForPet().speed),atkDis:Math.ceil(200+this.getPropForAllEquip().atkDis+this.getPropForAllSuit().atkDis+this.getPropForSalutation().atkDis+this.getPropForPet().atkDis),atkInterval:Math.ceil(0+this.getPropForAllEquip().atkInterval+this.getPropForAllSuit().atkInterval+this.getPropForSalutation().atkInterval+this.getPropForPet().atkInterval),atkSpeed:Math.ceil(t.atkSpeed+this.getPropForAllEquip().atkSpeed+this.getPropForAllSuit().atkSpeed+this.getPropForSalutation().atkSpeed+this.getPropForPet().atkSpeed),atkCrazyProb:Math.ceil(t.atkCrazyProb+this.getPropForAllEquip().atkCrazyProb+this.getPropForAllSuit().atkCrazyProb+this.getPropForSalutation().atkCrazyProb+this.getPropForPet().atkCrazyProb),atkCrazyHurt:Math.ceil(t.atkCrazyHurt+this.getPropForAllEquip().atkCrazyHurt+this.getPropForAllSuit().atkCrazyHurt+this.getPropForSalutation().atkCrazyHurt+this.getPropForPet().atkCrazyHurt),subHurt:Math.ceil(t.subHurt+this.getPropForAllEquip().subHurt+this.getPropForAllSuit().subHurt+this.getPropForSalutation().subHurt+this.getPropForSalutation().subHurt),dodgeHurtProb:Math.ceil(t.dodgeHurtProb+this.getPropForAllEquip().dodgeHurtProb+this.getPropForAllSuit().dodgeHurtProb+this.getPropForSalutation().dodgeHurtProb+this.getPropForPet().dodgeHurtProb)},this.playerPro},t.prototype.getPropForAllEquip=function(t){if(void 0===t&&(t=!1),!this.playerPro_equip||t){this.resetPlayerEquipPro();for(var e=d.PlayerMgr.getInstance().geUserData().getWearEquipList(),o=0;o<e.length;o++){var i=d.PlayerMgr.getInstance().getAbType();if("D"==i||"B"==i){var a=c.DataMgr.getInstance().getEquipCfg(e[o].id);if(a.LvHp&&(this.playerPro_equip.hp_total+=a.hp+a.LvHp*e[o].strengthenLv),a.LvHp&&(this.playerPro_equip.hp+=a.hp+a.LvHp*e[o].strengthenLv),a.LvAtk){var r=n.Utils.getTabelArr(a.atk),s=n.Utils.getTabelArr(a.LvAtk);this.playerPro_equip.attack_min+=Number(r[0])+Number(s[0])*e[o].strengthenLv,this.playerPro_equip.attack_max+=Number(r[1])+Number(s[1])*e[o].strengthenLv}if(a.atkSpeed&&(this.playerPro_equip.atkSpeed+=a.atkSpeed),a.atkCrazyProb&&(this.playerPro_equip.atkCrazyProb+=a.atkCrazyProb),a.atkCrazyHurt&&(this.playerPro_equip.atkCrazyHurt+=a.atkCrazyHurt),a.dodgeHurtProb&&(this.playerPro_equip.dodgeHurtProb+=a.dodgeHurtProb),e[o].starLevel&&e[o].starLevel>0){var l=c.DataMgr.getInstance().getEquipStarCfg(e[o].id,e[o].starLevel);if(l.atk){var u=n.Utils.getTabelArr(l.atk);this.playerPro_equip.attack_min+=Number(u[0]),this.playerPro_equip.attack_max+=Number(u[1])}l.atkSpeed&&(this.playerPro_equip.atkSpeed+=l.atkSpeed),l.atkCrazyProb&&(this.playerPro_equip.atkCrazyProb+=l.atkCrazyProb),l.atkCrazyHurt&&(this.playerPro_equip.atkCrazyHurt+=l.atkCrazyHurt),l.dodgeHurtProb&&(this.playerPro_equip.dodgeHurtProb+=l.dodgeHurtProb)}}else{var p=c.DataMgr.getInstance().getEquipStrengthenCfg(e[o].id,e[o].strengthenLv);p.hp&&(this.playerPro_equip.hp_total+=p.hp),p.hp&&(this.playerPro_equip.hp+=p.hp),p.atk&&(r=n.Utils.getTabelArr(p.atk),this.playerPro_equip.attack_min+=Number(r[0]),this.playerPro_equip.attack_max+=Number(r[1])),p.atkSpeed&&(this.playerPro_equip.atkSpeed+=p.atkSpeed),p.atkCrazyProb&&(this.playerPro_equip.atkCrazyProb+=p.atkCrazyProb),p.atkCrazyHurt&&(this.playerPro_equip.atkCrazyHurt+=p.atkCrazyHurt),p.dodgeHurtProb&&(this.playerPro_equip.dodgeHurtProb+=p.dodgeHurtProb)}}}return this.playerPro_equip},t.prototype.resetPlayerEquipPro=function(){this.playerPro_equip={hp_total:0,hp:0,attack_min:0,attack_max:0,speed:0,atkDis:0,atkInterval:0,atkSpeed:0,atkCrazyProb:0,atkCrazyHurt:0,subHurt:0,dodgeHurtProb:0}},t.prototype.getPropForAllSuit=function(){this.resetPlayerSuitPro();for(var t=l.default.getInstance().getAllSuitList(),e=0;e<t.length;e++){var o=c.DataMgr.getInstance().getEquipSuitCfg(t[e].id),i=["1","0"];t[e].count<2||(t[e].count>=2&&t[e].count<4?i=n.Utils.getTabelArr(o.suit2Prop):t[e].count>=4&&t[e].count<6?i=n.Utils.getTabelArr(o.suit4Prop):t[e].count>=6&&(i=n.Utils.getTabelArr(o.suit6Prop)),this.selectPro_suit(Number(i[0]),Number(i[1])))}return this.playerPro_suit},t.prototype.selectPro_suit=function(t,e){var o=this.getPlayerPro_copy();switch(t){case s.EnumObjectProp.SkillProp:break;case s.EnumObjectProp.AtkProp:this.playerPro_suit.attack_min+=o.attack_min*(e/100),this.playerPro_suit.attack_max+=o.attack_max*(e/100);break;case s.EnumObjectProp.HpProp:this.playerPro_suit.hp_total+=o.hp_total*(e/100),this.playerPro_suit.hp+=o.hp*(e/100);break;case s.EnumObjectProp.AtkSpeed:this.playerPro_suit.atkSpeed+=e;break;case s.EnumObjectProp.AtkCrazyProp:this.playerPro_suit.atkCrazyProb+=e;break;case s.EnumObjectProp.AtkCrazyHurtProp:this.playerPro_suit.atkCrazyHurt+=e;break;case s.EnumObjectProp.SubHurtProp:this.playerPro_suit.subHurt+=e;break;case s.EnumObjectProp.DodgeHurtProbProp:this.playerPro_suit.dodgeHurtProb+=e}return o},t.prototype.resetPlayerSuitPro=function(){this.playerPro_suit={hp_total:0,hp:0,attack_min:0,attack_max:0,speed:0,atkDis:0,atkInterval:0,atkSpeed:0,atkCrazyProb:0,atkCrazyHurt:0,subHurt:0,dodgeHurtProb:0}},t.prototype.getPropForSalutation=function(){this.resetPlayerTitlePro();var t=d.PlayerMgr.getInstance().geUserData().getWearSalutationId();if(t<1)return this.playerPro_salutation;for(var e=c.DataMgr.getInstance().getSalutation(t),o=1;o<=2;o++){var i=n.Utils.getTabelArr(e["TitleAttribute"+o]);if(i)switch(Number(i[0])){case s.EnumObjectProp.SkillProp:break;case s.EnumObjectProp.AtkProp_value:this.playerPro_salutation.attack_min+=Number(i[1]),this.playerPro_salutation.attack_max+=Number(i[1]);break;case s.EnumObjectProp.HpProp_value:this.playerPro_salutation.hp_total+=Number(i[1]),this.playerPro_salutation.hp+=Number(i[1]);break;case s.EnumObjectProp.AtkSpeed:this.playerPro_salutation.atkSpeed+=Number(i[1]);break;case s.EnumObjectProp.AtkCrazyProp:this.playerPro_salutation.atkCrazyProb+=Number(i[1]);break;case s.EnumObjectProp.AtkCrazyHurtProp:this.playerPro_salutation.atkCrazyHurt+=Number(i[1]);break;case s.EnumObjectProp.SubHurtProp:this.playerPro_salutation.subHurt+=Number(i[1]);break;case s.EnumObjectProp.DodgeHurtProbProp:this.playerPro_salutation.dodgeHurtProb+=Number(i[1])}}return this.playerPro_salutation},t.prototype.resetPlayerTitlePro=function(){this.playerPro_salutation={hp_total:0,hp:0,attack_min:0,attack_max:0,speed:0,atkDis:0,atkInterval:0,atkSpeed:0,atkCrazyProb:0,atkCrazyHurt:0,subHurt:0,dodgeHurtProb:0}},t.prototype.getPropForPet=function(){this.resetPetPro();var t=d.PlayerMgr.getInstance().geUserData().getOwnedPetsList()[0];if(!t||t<=0)return this.playerPro_pet;for(var e=this.getPlayerProNotPet(),o=c.DataMgr.getInstance().getPetsCfg(),i=1;i<=2;i++){var a=n.Utils.getTabelArr(o["PetsAttribute"+i]);if(a)switch(Number(a[0])){case s.EnumObjectProp.SkillProp:break;case s.EnumObjectProp.AtkProp:this.playerPro_pet.attack_min+=e.attack_min*(Number(a[1])/100),this.playerPro_pet.attack_max+=e.attack_max*(Number(a[1])/100);break;case s.EnumObjectProp.HpProp:this.playerPro_pet.hp_total+=e.hp_total*(Number(a[1])/100),this.playerPro_pet.hp+=e.hp*(Number(a[1])/100);break;case s.EnumObjectProp.AtkProp_value:this.playerPro_pet.attack_min+=Number(a[1]),this.playerPro_pet.attack_max+=Number(a[1]);break;case s.EnumObjectProp.HpProp_value:this.playerPro_pet.hp_total+=Number(a[1]),this.playerPro_pet.hp+=Number(a[1]);break;case s.EnumObjectProp.AtkSpeed:this.playerPro_pet.atkSpeed+=Number(a[1]);break;case s.EnumObjectProp.AtkCrazyProp:this.playerPro_pet.atkCrazyProb+=Number(a[1]);break;case s.EnumObjectProp.AtkCrazyHurtProp:this.playerPro_pet.atkCrazyHurt+=Number(a[1]);break;case s.EnumObjectProp.SubHurtProp:this.playerPro_pet.subHurt+=Number(a[1]);break;case s.EnumObjectProp.DodgeHurtProbProp:this.playerPro_pet.dodgeHurtProb+=Number(a[1])}}return this.playerPro_pet},t.prototype.resetPetPro=function(){this.playerPro_pet={hp_total:0,hp:0,attack_min:0,attack_max:0,speed:0,atkDis:0,atkInterval:0,atkSpeed:0,atkCrazyProb:0,atkCrazyHurt:0,subHurt:0,dodgeHurtProb:0}},t.prototype.getPropForAllSkillBook=function(t){if(void 0===t&&(t=!1),!this.playerPro_skillBook||t){this.resetPropSkillBook();for(var e=p.default.getInstance().getSkillBookDataArr(),o=0;o<e.length;o++){var i=c.DataMgr.getInstance().getSkillBook(e[o].id),a=d.PlayerMgr.getInstance().geUserData().getSkillBookForId(i.id),r=c.DataMgr.getInstance().getSkillBookLevelCfg1(i.StartLevelID,a.level);switch(p.default.getInstance().getStarNumForSkillBookCount(e[o].iCount)){case 0:break;case 1:var s=n.Utils.getTabelArr(r.addProp1);this.selectPro_skillBook(Number(s[0]),Number(s[1]));break;case 2:s=n.Utils.getTabelArr(r.addProp2),this.selectPro_skillBook(Number(s[0]),Number(s[1]));var l=n.Utils.getTabelArr(r.starProp2);this.selectPro_skillBook(Number(l[0]),Number(l[1]));break;case 3:s=n.Utils.getTabelArr(r.addProp3),this.selectPro_skillBook(Number(s[0]),Number(s[1]));var u=n.Utils.getTabelArr(r.starProp3);this.selectPro_skillBook(Number(u[0]),Number(u[1]))}}}return this.playerPro_skillBook},t.prototype.selectPro_skillBook=function(t,e){var o=this.getPlayerPro();switch(t){case s.EnumObjectProp.SkillProp:break;case s.EnumObjectProp.AtkProp:this.playerPro_skillBook.attack_min+=o.attack_min*(e/100),this.playerPro_skillBook.attack_max+=o.attack_max*(e/100);break;case s.EnumObjectProp.HpProp:this.playerPro_skillBook.hp_total+=o.hp_total*(e/100),this.playerPro_skillBook.hp+=o.hp*(e/100);break;case s.EnumObjectProp.AtkSpeed:this.playerPro_skillBook.atkSpeed+=e;break;case s.EnumObjectProp.AtkCrazyProp:this.playerPro_skillBook.atkCrazyProb+=e;break;case s.EnumObjectProp.AtkCrazyHurtProp:this.playerPro_skillBook.atkCrazyHurt+=e;break;case s.EnumObjectProp.SubHurtProp:this.playerPro_skillBook.subHurt+=e;break;case s.EnumObjectProp.DodgeHurtProbProp:this.playerPro_skillBook.dodgeHurtProb+=e}return o},t.prototype.resetPropSkillBook=function(){this.playerPro_skillBook={hp_total:0,hp:0,attack_min:0,attack_max:0,speed:0,atkDis:0,atkInterval:0,atkSpeed:0,atkCrazyProb:0,atkCrazyHurt:0,subHurt:0,dodgeHurtProb:0}},t.prototype.getPropForAllFetter=function(t){if(void 0===t&&(t=!1),!this.playerPro_fetter||t){this.resetPropFetter();for(var e=p.default.getInstance().getFetterIdArr(),o=0;o<e.length;o++){var i=c.DataMgr.getInstance().getFetter(e[o].id),a=p.default.getInstance().getSuitCountForFetterIdAndCount(e[o].id,e[o].iCount);if(0!=a)if(i.propType){var r=n.Utils.getTabelArr(i.fetterFun);this.selectPro_fetter(i.propType,Number(r[a-1]))}else this.addSpecialFetter(e[o]),this.refreshFetter(e[o].id,a)}}return this.playerPro_fetter},t.prototype.selectPro_fetter=function(t,e){var o=this.getPlayerPro();switch(t){case s.EnumObjectProp.SkillProp:break;case s.EnumObjectProp.AtkProp:this.playerPro_fetter.attack_min+=o.attack_min*(e/100),this.playerPro_fetter.attack_max+=o.attack_max*(e/100);break;case s.EnumObjectProp.HpProp:this.playerPro_fetter.hp_total+=o.hp_total*(e/100),this.playerPro_fetter.hp+=o.hp*(e/100);break;case s.EnumObjectProp.AtkSpeed:this.playerPro_fetter.atkSpeed+=e;break;case s.EnumObjectProp.AtkCrazyProp:this.playerPro_fetter.atkCrazyProb+=e;break;case s.EnumObjectProp.AtkCrazyHurtProp:this.playerPro_fetter.atkCrazyHurt+=e;break;case s.EnumObjectProp.SubHurtProp:this.playerPro_fetter.subHurt+=e;break;case s.EnumObjectProp.DodgeHurtProbProp:this.playerPro_fetter.dodgeHurtProb+=e}return o},t.prototype.resetPropFetter=function(){this.playerPro_fetter={hp_total:0,hp:0,attack_min:0,attack_max:0,speed:0,atkDis:0,atkInterval:0,atkSpeed:0,atkCrazyProb:0,atkCrazyHurt:0,subHurt:0,dodgeHurtProb:0}},t.prototype.getSpecialFetterArr=function(){return this.specialFetterArr||(this.specialFetterArr=[]),this.specialFetterArr},t.prototype.addSpecialFetter=function(t){t&&(this.specialFetterArr||(this.specialFetterArr=[]),this.specialFetterArr.push(t))},t.prototype.isExistFetterForFetterId=function(t){if(!this.specialFetterArr)return this.specialFetterArr=[],!1;for(var e=0;e<this.specialFetterArr.length;e++)if(t==this.specialFetterArr[e].id)return!0;return!1},t.prototype.refreshFetter=function(t,e){switch(t){case 2:u.default.getInstance().MasterFetter(e);break;case 6:u.default.getInstance().WishFetter(e);break;case 8:u.default.getInstance().RuinFetter(e);break;case 11:u.default.getInstance().SpecialFetter(e);break;case 12:u.default.getInstance().CurseFetter(e);break;case 13:u.default.getInstance().ThreatenFetter(e)}},t.prototype.refreshCurPlayerProp=function(){this.getPropForAllSkillBook(!0),this.getPropForAllFetter(!0),r.default.instance.refreshPropPlayer()},t.prototype.clearPropData=function(){this.playerPro_skillBook=null,this.playerPro_fetter=null,this.specialFetterArr=[]},t}();a.default=g,cc._RF.pop()},{}],ScrollCard:[function(t,e,o){"use strict";cc._RF.push(e,"b1877HaMcVEF6GCqRPtlynm","ScrollCard");var i,a,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.Direction=void 0,function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(a=n.Direction||(n.Direction={})),cc.Enum(a);var c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Direction=a.Horizontal,e.itemOffset=0,e.speed=500,e.rub=1,e.scaleMin=.5,e.scaleMax=1,e.item=[],e.itemSize=5,e.itemNode=null,e._startTime=0,e._moveSpeed=0,e.uiTransform=null,e.itemList=[],e.canTouch=!0,e.invert=0,e.speedTime=0,e}return r(e,t),e.prototype.start=function(){var t=this;this.uiTransform=this.node,this.node.on(cc.Node.EventType.TOUCH_START,function(){t.canTouch&&(t._moveSpeed=0,t._startTime=(new Date).getTime())}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(t.canTouch){var o=e.getDelta();t.itemMoveBy(o)}}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){t.canTouch&&t.touchEnd(e)}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t.canTouch&&t.touchEnd(e)})},e.prototype.init=function(){for(var t=0;t<this.itemSize;t++){var e=cc.instantiate(this.itemNode);e.active=!0,e.parent=this.node,this.item.push(e)}this._initItemPos(),this.updateScale()},e.prototype.autoScroll=function(t,e){var o=this;this.canTouch=!1,this.speedTime=t,this.offset=e,this.schedule(function(){o.invert+=.01,o.invert>=o.speedTime&&(o.invert=0,o.scrollOffset(o.offset))},0)},e.prototype.changleScrollSpeed=function(t,e){this.speedTime=t,this.offset=e},e.prototype.stopAutoScroll=function(){this.unscheduleAllCallbacks()},e.prototype.scrollOffset=function(t){this.itemMoveBy(t)},e.prototype.touchEnd=function(t){var e,o=t.getLocation(),i=t.getStartLocation();e=0==this.Direction?i.x-o.x:i.y-o.y;var a=(new Date).getTime()-this._startTime;this._moveSpeed=e/a},e.prototype._initItemPos=function(){this.uiTransform.anchorY=.5,this.uiTransform.anchorX=.5,this._maxSize=new cc.Size(0,0);for(var t=0;t<this.item.length;t++)this._maxSize.width+=this.item[t].width,this._maxSize.height+=this.item[t].height,this._maxSize.width+=this.itemOffset,this._maxSize.height+=this.itemOffset;var e;for(e=0==this.Direction?new cc.Vec2(-this._maxSize.width*this.uiTransform.anchorX,-this._maxSize.height*this.uiTransform.anchorY):new cc.Vec2(this._maxSize.width*this.uiTransform.anchorX,this._maxSize.height*this.uiTransform.anchorY),this._screenRect=new cc.Rect(e.x,e.y,this._maxSize.width,this._maxSize.height),this.itemList=[],t=0;t<this.item.length;t++){var o=this.item[t].getAnchorPoint(),i=this.item[t].getContentSize();0==this.Direction?(e=e.add(new cc.Vec2(i.width*o.x,i.height*o.y)),this.item[t].position=new cc.Vec3(e.x,0,0),e=(e=e.add(new cc.Vec2(i.width*o.x,i.height*o.y))).add(new cc.Vec2(this.itemOffset,this.itemOffset))):(e=e.subtract(new cc.Vec2(i.width*o.x,i.height*o.y)),this.item[t].position=new cc.Vec3(0,e.y,0),e=(e=e.subtract(new cc.Vec2(i.width*o.x,i.height*o.y))).subtract(new cc.Vec2(this.itemOffset,this.itemOffset))),this.itemList[t]=this.item[t]}},e.prototype.updateScale=function(){if(!(this.scaleMax<this.scaleMin||0==this.scaleMax))for(var t=0;t<this.item.length;t++){var e;if(0==this.Direction){var o=this.item[t].position.x+this._maxSize.width/2;e=this.item[t].position.x<0?o/this._maxSize.width:1-o/this._maxSize.width}else{var i=this.item[t].position.y+this._maxSize.height/2;e=this.item[t].position.y<0?i/this._maxSize.height:1-i/this._maxSize.height}e*=2;var a=this.scaleMax-this.scaleMin;a*=e,a+=this.scaleMin,a=Math.abs(a),this.item[t].scale=a}},e.prototype.itemMoveBy=function(t){for(var e=0;e<this.item.length;e++){var o=this.item[e].position;if(0==this.Direction){var i=new cc.Vec3(o.x+t.x,o.y,0);this.item[e].position=i}else i=new cc.Vec3(o.x,o.y+t.y,0),this.item[e].position=i}this.updatePos()},e.prototype.updatePos=function(){var t=this.itemList[0],e=this.itemList[this.itemList.length-1],o=!1;if(0==this.Direction?t.position.x<-this._maxSize.width/2&&(o=!0):t.position.y>this._maxSize.width/2&&(o=!0),o){var i=this.itemList.shift();this.itemList.push(i);var a=i.position;if(0==this.Direction){var n=e.position.x+e.width+this.itemOffset;i.position=new cc.Vec3(n,a.y,0)}else{var r=e.position.y-e.height-this.itemOffset;i.position=new cc.Vec3(a.x,r,0)}}var s=!1;0==this.Direction?e.position.x>this._maxSize.width/2&&(s=!0):e.position.y<-this._maxSize.height/2&&(s=!0),s&&(i=this.itemList.pop(),this.itemList.unshift(i),a=i.position,0==this.Direction?(n=t.position.x-t.width-this.itemOffset,i.position=new cc.Vec3(n,a.y,0)):(r=t.position.y+t.height+this.itemOffset,i.position=new cc.Vec3(a.x,r,0))),this.updateScale()},e.prototype.update=function(t){if(0!=this._moveSpeed){for(var e=0;e<this.item.length;e++){var o=this.item[e].position;if(0==this.Direction){var i=this._moveSpeed*t*this.speed;this.item[e].position=new cc.Vec3(o.x-i,o.y,0)}else{var a=this._moveSpeed*t*this.speed;this.item[e].position=new cc.Vec3(o.x,o.y-a,0)}}this._moveSpeed>0?(this._moveSpeed-=t*this.rub,this._moveSpeed<0&&(this._moveSpeed=0)):(this._moveSpeed+=t*this.rub,this._moveSpeed>0&&(this._moveSpeed=0));var n=-this._moveSpeed*t*this.speed;this.itemMoveBy(new cc.Vec2(n,n)),this.updatePos()}},s([u({type:a,tooltip:"\u6ed1\u52a8\u65b9\u5411"})],e.prototype,"Direction",void 0),s([u({type:cc.Integer,tooltip:"node \u95f4\u9694"})],e.prototype,"itemOffset",void 0),s([u({type:cc.Integer,tooltip:"\u79fb\u52a8\u901f\u5ea6"})],e.prototype,"speed",void 0),s([u({type:cc.Float,tooltip:"\u51cf\u901f\u9891\u7387"})],e.prototype,"rub",void 0),s([u({type:cc.Float,tooltip:"\u7f29\u653e\u6700\u5c0f\u503c"})],e.prototype,"scaleMin",void 0),s([u({type:cc.Float,tooltip:"\u7f29\u653e\u6700\u5927\u503c"})],e.prototype,"scaleMax",void 0),s([u({type:[cc.Node],tooltip:"\u6eda\u52a8item"})],e.prototype,"item",void 0),s([u({type:cc.Integer})],e.prototype,"itemSize",void 0),s([u({type:cc.Node})],e.prototype,"itemNode",void 0),s([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],SdkMgr:[function(t,e,o){"use strict";cc._RF.push(e,"52ff1345pJFtoi3ptmswq3e","SdkMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.SdkMgr=a.AdType=void 0;var n,r=i("Config"),s=i("AudioMgr"),c=i("BasePlatform"),l=(i("HttpMgr"),i("LogMgr")),u=i("PlatformManager"),p=i("UIMgr"),d=i("PlayerMgr"),g=i("EventMgr"),h=i("Appcfg"),f=i("TaskMgr");(function(t){t[t.ReissueSign=0]="ReissueSign",t[t.FreeLotty=1]="FreeLotty",t[t.Collection=2]="Collection",t[t.AdFreeTime=3]="AdFreeTime"})(n=a.AdType||(a.AdType={}));var y=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.playVideo=function(t,e,o){void 0===o&&(o=function(){}),s.AudioMgr.getInstance().pauseAllMusic(),g.EventMgr.getInstance().emit(h.BaseEventName.blocktouch,!1),u.PlatformManager.getInstance().showVideoAd("",n.AdFreeTime,function(){g.EventMgr.getInstance().emit(h.BaseEventName.blocktouch,!0),s.AudioMgr.getInstance().resumeAllMusic(),f.default.getInstance().addLookVideoCountForTask(),e&&e()},function(t){o&&o(),s.AudioMgr.getInstance().resumeAllMusic(),g.EventMgr.getInstance().emit(h.BaseEventName.blocktouch,!0),l.LogMgr.getInstance().debug("\u64ad\u653e\u5e7f\u544a\u5931\u8d25"),t&&t.length&&p.UIMgr.getInstance().openUI(r.UIID.UITips,-1,t)})},t.prototype.showInsert=function(t){u.PlatformManager.getInstance().showInsertAd(t,function(){})},t.prototype.showBanner=function(t){u.PlatformManager.getInstance().showBanner(t)},t.prototype.hideBanner=function(){u.PlatformManager.getInstance().hideBanner()},t.prototype.requestCheckVersion=function(t){t()},t.prototype.getCheckVersion=function(t){if(u.PlatformManager.currentPlatform==c.Platform.EDITOR)return!1;if(u.PlatformManager.currentPlatform==c.Platform.WEB_LINK)return!1;var e=u.SWCF[t];return!e||e.res},t.prototype.getSwitchVersion=function(t){if(!t)return cc.error("\u5f00\u5173\u6ca1\u6709\u914d\u7f6e,\u8bf7\u5230\u5728PlatformManager.ts\u4e0a\u8fdb\u884c\u914d\u7f6e"),0;switch(u.PlatformManager.currentPlatform){case c.Platform.WECHAT:return t.h5_wechat;case c.Platform.BYTEDANCE:return t.h5_bytedance;case c.Platform.KUAIKAN:return t.h5_kuaikan;case c.Platform.OPPO:return t.h5_oppo;case c.Platform.VIVO:return t.h5_vivo;case c.Platform.QQ:return t.h5_qq;case c.Platform.ANDROID_233:return t.android_233;case c.Platform.ANDROID_4399:return t.android_4399;case c.Platform.ANDROID_VIVO:return t.android_vivo;case c.Platform.ANDROID_XIAOMI:return t.android_xiaomi;case c.Platform.GOOGLE:return t.android_google;case c.Platform.Ios:return t.ios;default:return t.h5_baidu}},t.prototype.hasVerify=function(){return u.PlatformManager.getInstance().hasVerify()},t.prototype.recordScreen=function(){u.PlatformManager.getInstance().recordVideo()},t.prototype.pauseRecord=function(){u.PlatformManager.getInstance().pauseRecord()},t.prototype.restartRecord=function(){u.PlatformManager.getInstance().resumeRecord()},t.prototype.resumeRecord=function(){u.PlatformManager.getInstance().resumeRecord()},t.prototype.shareImg=function(t,e){u.PlatformManager.getInstance().shareImg(t,e)},t.prototype.share=function(t,e){u.PlatformManager.getInstance().shareVideo(t,e)},t.prototype.getShare=function(){return u.PlatformManager.getInstance().canShare()},t.prototype.stopRecord=function(t,e){u.PlatformManager.getInstance().stopRecorderManager(t,e)},t.prototype.openNotify=function(){u.PlatformManager.getInstance().openNotify()},t.prototype.toAppStore=function(){d.PlayerMgr.getInstance().getTrackData().getToAppStore()||u.PlatformManager.getInstance().toAppStore(function(t){1==t&&d.PlayerMgr.getInstance().getTrackData().setToAppStore()})},t.prototype.shark=function(t){void 0===t&&(t=0),u.PlatformManager.getInstance().shark(t)},t.prototype.showWxNativeAD=function(t){u.PlatformManager.getInstance().showWxNativeAD(t)},t.prototype.hideWxNativeAD=function(t){u.PlatformManager.getInstance().hideWxNativeAD(t)},t}();a.SdkMgr=y,cc._RF.pop()},{}],ShareData:[function(t,e,o){"use strict";cc._RF.push(e,"90466l0F3VEWIXC8W/h3RV2","ShareData");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.ShareData=void 0;var s=a("BaseData"),c=a("LogMgr"),l=a("SdkMgr"),u=a("TimeUtils"),p=a("UIUtils"),d=a("Config"),g=function(){this.path="",this.dayShareNum=0,this.daylastShareTime=-1},h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameKey=d.GameConfig.AppCacheName+"shareData",e.timeTotalStop=15,e.needRecordVideo=!0,e.recordTime=0,e.canShare=!1,e.isStart=!1,e.isPause=!1,e.isStop=!1,e}return r(e,t),e.prototype.createData=function(){return this.data=new g,this.data},e.prototype.initData=function(t){t||-1!=this.data.daylastShareTime&&(u.TimeUtils.compareIsToday(this.data.daylastShareTime)||(this.data.daylastShareTime=-1,this.data.dayShareNum=0,this.saveData()))},e.prototype.startRecord=function(){this.needRecordVideo&&(c.LogMgr.getInstance().debug("\u5f00\u59cb\u5f55\u5c4f"),this.isStart=!0,this.isPause=!1,l.SdkMgr.getInstance().recordScreen(),this.needRecordVideo=!1,this.canShare=!1,p.UIUtils.schedule(this.secondUpdate,this,1),this.data.path="",this.saveData())},e.prototype.playRecord=function(){this.isStart?this.isPause?this.restartRecord():this.pauseRecord():this.startRecord()},e.prototype.pauseRecord=function(){this.isStart&&(l.SdkMgr.getInstance().pauseRecord(),this.isPause=!0,c.LogMgr.getInstance().debug("\u6682\u505c\u5f55\u5c4f"))},e.prototype.restartRecord=function(){this.isPause&&(this.isPause=!1,l.SdkMgr.getInstance().restartRecord(),c.LogMgr.getInstance().debug("\u91cd\u65b0\u5f55\u5c4f"))},e.prototype.stopRecord=function(t,e){var o=this;this.recordTime<=0||(c.LogMgr.getInstance().debug("\u505c\u6b62\u5f55\u5c4f"),p.UIUtils.unSchedule(this.secondUpdate,this),this.isStart=!1,this.isPause=!1,l.SdkMgr.getInstance().stopRecord(t,function(t){o.data.path=t,o.recordTime>=15&&(o.canShare=!0),o.isStop=!0,o.recordTime=0,o.saveData(),e&&e()}))},e.prototype.getSharePath=function(){return this.data.path},e.prototype.getCanShare=function(){return this.recordTime>=15||this.canShare},e.prototype.getRecordTime=function(){return this.recordTime},e.prototype.toShare=function(t,e){var o=this;l.SdkMgr.getInstance().share(this.data.path,function(){o.data.path="",t&&o.data.dayShareNum++,o.needRecordVideo=!0,o.canShare=!1,o.isStop=!1,o.clearData(),o.saveData(),e&&e()})},e.prototype.getTodayCanShare=function(){return!0},e.prototype.secondUpdate=function(){this.isPause||(this.recordTime++,this.recordTime>=290&&this.stopRecord(!1))},e.prototype.checkStop=function(t){return this.isStop?(t&&t(),!0):(this.recordTime>=this.timeTotalStop||this.recordTime>=290)&&(this.stopRecord(!1,t),!0)},e.prototype.clearData=function(){this.isStop=!1,this.isStart=!1,this.needRecordVideo=!0,this.data.path="",this.recordTime=0,this.saveData()},e}(s.BaseData);n.ShareData=h,cc._RF.pop()},{}],SkillMgr:[function(t,e,o){"use strict";cc._RF.push(e,"df304j21DNOc7gKPka3XN9T","SkillMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("UIMgr"),r=i("Utils"),s=i("Config"),c=i("DataMgr"),l=i("FetterMgr"),u=i("GameDataMgr"),p=i("GoodsManager"),d=i("PlayerMgr"),g=function(){function t(){}return t.getAtkSkillId=function(){for(var t=[],e=0,o=u.default.getInstance().getSkillIdArr(),i=0;i<o.length;i++){var a=c.DataMgr.getInstance().getSkill(o[i]),n=null,s=d.PlayerMgr.getInstance().geUserData();if(1==s.getCurSec()&&1==s.getEnterFirstSecCount())n={id:o[i],weight:60};else{var p=a.skillWeight;l.default.getInstance().isHaveMasterFetter()&&(p+=l.default.getInstance().getAddSkillAndHurtProp()/100*p),n={id:o[i],weight:p}}n&&(e+=n.weight),n&&t.push(n)}return r.Utils.weight_randSingle(e)?r.Utils.weight_rand(t).id:0},t.isOverLevelForSkillBook=function(t){var e=c.DataMgr.getInstance().getSkillBook(t),o=c.DataMgr.getInstance().getSkillQuality(e.qualityId),i=r.Utils.getTabelArr(o.FullGradeCompensate);d.PlayerMgr.getInstance().geUserData().getSkillBookForId(t).level>=e.MaxLevel&&(d.PlayerMgr.getInstance().geUserData().subSkillBookCount(e.id),p.default.getInstance().getRewardForType(Number(i[0]),Number(i[1])),n.UIMgr.getInstance().openUI(s.UIID.UITips,-1,"\u5df2\u8fbe\u5230\u6700\u5927\u7b49\u7ea7\uff0c\u81ea\u52a8\u8f6c\u5316\u4e3a \u91d1\u5e01x"+i[1]))},t}();a.default=g,cc._RF.pop()},{}],SpineUtils:[function(t,e,o){"use strict";cc._RF.push(e,"13366sIhypKi7rqHbO0qedQ","SpineUtils");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.SpineUtils=a.SpineInfo=void 0;var n=i("ResourceMgr");a.SpineInfo=function(){};var r=function(){function t(){}return t.changePartImgBundle=function(t,e,o,i){var a=this;n.ResourceMgr.getInstance().loadRes(i.imgbundle,i.imgPath,cc.Texture2D,function(n){if(cc.sys.isNative){var r=new middleware.Texture2D;r.setPixelsHigh(n.height),r.setPixelsWide(n.width),r.setNativeTexture(n.getImpl()),t.updateRegion(e,r,i.diffWidth,i.diffHeight,i.offsetX,i.offsetY)}else{n.handleLoadedTexture(!0);var s=a.getAtt(t,e,o),c=a.CreateRegion(n,i);s.region=c,s&&(s.setRegion(c),s.updateOffset())}})},t.changePartImgTexture=function(t,e,o,i,a){if(i.handleLoadedTexture(!0),cc.sys.isNative){var n=new middleware.Texture2D;n.setPixelsHigh(i.height),n.setPixelsWide(i.width),n.setNativeTexture(i.getImpl()),t.updateRegion(e,n,a.diffWidth,a.diffHeight,a.offsetX,a.offsetY)}else{var r=this.getAtt(t,e,o),s=this.CreateRegion(i,a);r.region=s,r&&(r.setRegion(s),this.updateSize(r),r.updateOffset())}},t.getAtt=function(t,e,o){t.findSlot(e);var i=t.skeletonData.getRuntimeData(),a=i.findSlotIndex(e);return i.findSkin("default").getAttachment(a,o)},t.CreateRegion=function(t,e){var o=new sp.SkeletonTexture;o.setRealTexture(t);var i=new sp.spine.TextureAtlasPage;i.name=t.name,i.uWrap=sp.spine.TextureWrap.ClampToEdge,i.vWrap=sp.spine.TextureWrap.ClampToEdge,i.texture=o,i.texture.setWraps(i.uWrap,i.vWrap),i.width=t.width,i.height=t.height;var a=new sp.spine.TextureAtlasRegion;return a.page=i,a.width=t.width,a.height=t.height,a.originalWidth=e.diffWidth?t.width+e.diffWidth:t.width,a.originalHeight=e.diffHeight?t.height+e.diffHeight:t.height,a.offsetX=e.offsetX?e.offsetX:0,a.offsetY=e.offsetY?e.offsetY:0,a.rotate=!1,a.u=0,a.v=0,a.u2=1,a.v2=1,a.texture=o,a},t.updateSize=function(){},t}();a.SpineUtils=r,cc._RF.pop()},{}],TaskMgr:[function(t,e,o){"use strict";cc._RF.push(e,"6d6abU/a09Nb438Bch67aQk","TaskMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var n=i("DataMgr"),r=i("PlayerMgr"),s=function(){function t(){this.taskList=[],this.taskNeedCountList=[]}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initTaskData=function(){if(!(this.taskList.length>0)){this.taskList=[];var t=r.PlayerMgr.getInstance().geUserData();if(t.getCurTaskList().length<=0)for(var e=n.DataMgr.getInstance().getTaskCfg(),o=0;o<e.length;o++)if(1==e[o].FirstTask){var i={id:e[o].ID,type:e[o].Type,state:0,needCount:e[o].TaskParameter};t.setTaskList(i)}this.taskList=t.getCurTaskList(),this.initTaskNeedCountData()}},t.prototype.refreshTaskData=function(t){var e=r.PlayerMgr.getInstance().geUserData();e.getCurTaskList()[t.type-1]&&(r.PlayerMgr.getInstance().geUserData().setTaskList(t),this.taskList=e.getCurTaskList())},t.prototype.refreshTaskDataForState=function(t){this.taskList[t.type-1].state=t.state,r.PlayerMgr.getInstance().geUserData().setTaskList(this.taskList[t.type-1])},t.prototype.getTaskList=function(){return(!this.taskList||this.taskList.length<=0)&&this.initTaskData(),this.taskList},t.prototype.getTaskNeedCountList=function(){return(!this.taskNeedCountList||this.taskNeedCountList.length<=0)&&this.initTaskData(),this.taskNeedCountList},t.prototype.initTaskNeedCountData=function(){if(!(this.taskNeedCountList.length>0)){var t=r.PlayerMgr.getInstance().geUserData();if(t.getTaskNeedCountArr().length<=0)for(var e=0;e<this.taskList.length;e++)t.setTaskNeedCountArr(e+1,0);this.taskNeedCountList=t.getTaskNeedCountArr()}},t.prototype.addUpLoginForTask=function(){this.getTaskNeedCountList()[0]+=1,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(1,this.getTaskNeedCountList()[0]),this.refreshTaskState(1)},t.prototype.costPowerForTask=function(t){this.getTaskNeedCountList()[1]+=t,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(2,this.getTaskNeedCountList()[1]),this.refreshTaskState(2)},t.prototype.upFightNumForTask=function(t){t>this.getTaskNeedCountList()[2]&&(this.getTaskNeedCountList()[2]=t,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(3,this.getTaskNeedCountList()[2]),this.refreshTaskState(3))},t.prototype.addOnHookCountForTask=function(){this.getTaskNeedCountList()[3]+=1,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(4,this.getTaskNeedCountList()[3]),this.refreshTaskState(4)},t.prototype.addSkillBookCountForTask=function(t){void 0===t&&(t=1);var e=r.PlayerMgr.getInstance().geUserData().getSkillBookArr();this.getTaskNeedCountList()[4]=e.length,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(5,this.getTaskNeedCountList()[4]),this.refreshTaskState(5)},t.prototype.skillBookMaxLvforTask=function(t){t>this.getTaskNeedCountList()[5]&&(this.getTaskNeedCountList()[5]=t,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(6,this.getTaskNeedCountList()[5]),this.refreshTaskState(6))},t.prototype.addEquipCountForTask=function(t){void 0===t&&(t=1),this.getTaskNeedCountList()[6]+=t,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(7,this.getTaskNeedCountList()[6]),this.refreshTaskState(7)},t.prototype.wearEquipQualityForTask=function(t){for(var e=0,o=n.DataMgr.getInstance().getTaskCfgForId(t,8).TaskParameterType,i=r.PlayerMgr.getInstance().geUserData().getWearedEquipQualityList(),a=0;a<i.length;a++)i[a]>=o&&(e+=1);this.getTaskNeedCountList()[7]=e,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(8,this.getTaskNeedCountList()[7]),this.refreshTaskState(8)},t.prototype.addDrawRewardCountForCount=function(){this.getTaskNeedCountList()[8]+=1,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(9,this.getTaskNeedCountList()[8]),this.refreshTaskState(9)},t.prototype.addLookVideoCountForTask=function(){this.getTaskNeedCountList()[9]+=1,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(10,this.getTaskNeedCountList()[9]),this.refreshTaskState(10)},t.prototype.passSecForTask=function(t){this.getTaskNeedCountList()[10]=t,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(11,this.getTaskNeedCountList()[10]),this.refreshTaskState(11)},t.prototype.addEquipStrengthenCountForTask=function(){this.getTaskNeedCountList()[11]+=1,r.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(12,this.getTaskNeedCountList()[11]),this.refreshTaskState(12)},t.prototype.refreshTaskState=function(t){var e=this.taskList[t-1].needCount;if(this.getTaskNeedCountList()[t-1]>=e){if(0!=this.taskList[t-1].state)return;this.taskList[t-1].state=1,r.PlayerMgr.getInstance().geUserData().setTaskList(this.taskList[t-1])}},t}();a.default=s,cc._RF.pop()},{}],TimeMgr:[function(t,e,o){"use strict";cc._RF.push(e,"44aefdWORRCY5iD5OWd/s7C","TimeMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.TimeMgr=void 0;var n=i("EventMgr"),r=i("TimeUtils"),s=i("Main"),c=i("Config"),l=i("TrackDataEvent"),u=i("DataMgr"),p=i("GameMgr"),d=i("PlayerMgr"),g=function(){function t(){this.isOpenTimer_power=!1,this.time_power=60,this.isOpenTimer_online=!1,this.time_online=0,this.isOpenTimer_pet=!1,this.time_pet=0,this.time_OnlineMain=0,this.time_MysticalShop=86400}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initData=function(){this.time_power=Number(u.DataMgr.getInstance().getParamsCfgForSingle(c.EnumParams.AddPowerTime).value)},t.prototype.callbackTimer_power=function(){this.time_power--,n.EventMgr.getInstance().emit(c.EventName.RefreshPowerTime,this.time_power),this.time_power<=0&&(d.PlayerMgr.getInstance().geUserData().refreshLastOfflineTime(),d.PlayerMgr.getInstance().geUserData().addPowerNumForLimit(1)&&this.closeTimer_power(),this.time_power=Number(u.DataMgr.getInstance().getParamsCfgForSingle(c.EnumParams.AddPowerTime).value))},t.prototype.openTimer_power=function(){this.isOpenTimer_power||(s.default.instance.schedule(s.default.instance.callbackTimer_power,1),this.isOpenTimer_power=!0)},t.prototype.closeTimer_power=function(){this.isOpenTimer_power&&(s.default.instance.unschedule(s.default.instance.callbackTimer_power),this.isOpenTimer_power=!1)},t.prototype.resetTimerData_power=function(){this.time_power=0},t.prototype.initTime_online=function(t){this.time_online=t},t.prototype.callbackTimer_online=function(){this.time_online++,n.EventMgr.getInstance().emit(c.EventName.RefreshOnlineTime,this.time_online),this.time_online%10==0&&(d.PlayerMgr.getInstance().geUserData().setOnHookTime(this.time_online),d.PlayerMgr.getInstance().geUserData().refreshLastOfflineTime(),r.TimeUtils.timeExchange(2,this.time_online)>=6&&this.closeTimer_online())},t.prototype.openTimer_online=function(){this.isOpenTimer_online||(s.default.instance.schedule(s.default.instance.callbackTimer_online,1),this.isOpenTimer_online=!0)},t.prototype.closeTimer_online=function(){s.default.instance.unschedule(s.default.instance.callbackTimer_online),this.isOpenTimer_online=!1},t.prototype.resetTimerData_online=function(){this.time_online=0},t.prototype.callbackTimer_pet=function(){this.time_pet++,n.EventMgr.getInstance().emit(c.EventName.RefreshPetViewTime,this.time_pet),this.time_pet>=30&&(this.closeTimer_pet(),this.time_pet=0)},t.prototype.openTimer_pet=function(){this.isOpenTimer_pet||(s.default.instance.schedule(s.default.instance.callbackTimer_pet,1),this.isOpenTimer_pet=!0)},t.prototype.closeTimer_pet=function(){s.default.instance.unschedule(s.default.instance.callbackTimer_pet),this.isOpenTimer_pet=!1,this.time_pet=0},t.prototype.callbackTimer_OnlineMain=function(){this.time_OnlineMain++,this.time_OnlineMain>=60&&this.time_OnlineMain<180?d.PlayerMgr.getInstance().getTrackData().youmengTrack(l.TrackId.time_1):this.time_OnlineMain>=180&&this.time_OnlineMain<300?d.PlayerMgr.getInstance().getTrackData().youmengTrack(l.TrackId.time_3):this.time_OnlineMain>=300&&this.time_OnlineMain<420?d.PlayerMgr.getInstance().getTrackData().youmengTrack(l.TrackId.time_5):this.time_OnlineMain>=420&&this.time_OnlineMain<600?d.PlayerMgr.getInstance().getTrackData().youmengTrack(l.TrackId.time_7):this.time_OnlineMain>=600&&this.time_OnlineMain<720?d.PlayerMgr.getInstance().getTrackData().youmengTrack(l.TrackId.time_10):this.time_OnlineMain>=720&&this.time_OnlineMain<900?d.PlayerMgr.getInstance().getTrackData().youmengTrack(l.TrackId.time_12):this.time_OnlineMain>=900&&this.time_OnlineMain<1200?d.PlayerMgr.getInstance().getTrackData().youmengTrack(l.TrackId.time_15):this.time_OnlineMain>=1200&&d.PlayerMgr.getInstance().getTrackData().youmengTrack(l.TrackId.time_20),this.time_OnlineMain},t.prototype.openTimer_OnlineMain=function(){s.default.instance.schedule(s.default.instance.callbackTimer_OnlineMain,1)},t.prototype.closeTimer_OnlineMain=function(){s.default.instance.unschedule(s.default.instance.callbackTimer_OnlineMain)},t.prototype.resetTimerData_OnlineMain=function(){this.time_OnlineMain=0},t.prototype.initMysticalShop=function(){this.time_MysticalShop=d.PlayerMgr.getInstance().getMysticalShopData().getMysticalShopTime()},t.prototype.callbackTimer_MysticalShop=function(){this.time_MysticalShop--,n.EventMgr.getInstance().emit(c.EventName.RefreshMysticalShopTime,this.time_MysticalShop),this.time_MysticalShop<=0&&(p.default.getInstance().refreshMysticalShopData(),d.PlayerMgr.getInstance().getMysticalShopData().setMysticalShopTime(86400),this.resetTimerData_MysticalShop())},t.prototype.openTimer_MysticalShop=function(){this.initMysticalShop(),s.default.instance.schedule(s.default.instance.callbackTimer_MysticalShop,1)},t.prototype.closeTimer_MysticalShop=function(){s.default.instance.unschedule(s.default.instance.callbackTimer_MysticalShop)},t.prototype.resetTimerData_MysticalShop=function(){this.time_MysticalShop=86400},t}();a.TimeMgr=g,cc._RF.pop()},{}],TimeUtils:[function(t,e,o){"use strict";cc._RF.push(e,"cae10zFespM0axe3QtxMfqW","TimeUtils");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.TimeUtils=void 0;var a=function(){function t(){}return t.GetTimeBySecond=function(){var t=new Date;return Math.floor(t.getTime()/1e3)},t.GetTimeByHours=function(){var t=new Date,e=t.getHours(),o=Math.floor(e/10).toString()+e%10,i=t.getMinutes();return o+":"+(Math.floor(i/10).toString()+i%10)},t.GetTimeByHours2=function(){var t=new Date,e=t.getHours(),o=Math.floor(e/10).toString()+e%10,i=t.getMinutes(),a=Math.floor(i/10).toString()+i%10,n=t.getSeconds(),r=Math.floor(n/10).toString()+n%10,s=t.getMilliseconds();return o+":"+a+":"+r+":"+(Math.floor(s/10).toString()+s%10)},t.SecondToHours=function(t){var e=t%60;e=Math.floor(e/10).toString()+e%10;var o=Math.floor(t/60)%60;o=Math.floor(o/10).toString()+o%10;var i=Math.floor(t/60/60);return(i=Math.floor(i/10).toString()+i%10)+":"+o+":"+e},t.SecondToMinutes=function(t){var e=t%60;e=Math.floor(e/10).toString()+e%10;var o=Math.floor(t/60)%60;return(o=Math.floor(o/10).toString()+o%10)+":"+e},t.FormatDate2=function(t){var e=new Date(t),o=10>e.getMonth()+1?"0"+(e.getMonth()+1):e.getMonth()+1,i=10>e.getDate()?"0"+e.getDate():e.getDate();return e.getFullYear()+"-"+o+"-"+i},t.FormatDate1=function(t,e){void 0===e&&(e="/");var o=new Date(t);return o.getFullYear()+e+(o.getUTCMonth()+1)+e+o.getUTCDate()},t.BeforeTime=function(t){if(null==t)return"";var e=new Date,o=Math.floor(e.getTime()/1e3)-t;return o<=0&&(o=1),Math.floor(o/60/60/24)>0?Math.floor(o/60/60/24)+"\u5929\u524d":Math.floor(o/60/60)>0?Math.floor(o/60/60)+"\u5c0f\u65f6\u524d":Math.floor(o/60)>0?Math.floor(o/60)+"\u5206\u949f\u524d":Math.floor(o)+"\u79d2\u524d"},t.compareIsToday=function(t){var e=new Date(1e3*t),o=e.getFullYear(),i=e.getUTCMonth(),a=e.getUTCDay(),n=new Date(1e3*this.GetTimeBySecond()),r=n.getFullYear(),s=n.getUTCMonth(),c=n.getUTCDay();return o==r&&i==s&&a==c},t.overDay=function(t){var e=new Date(t),o=new Date(this.dayStart());return Math.floor((o.getTime()-e.getTime())/864e5)},t.dayStart=function(){return new Date(new Date((new Date).toLocaleDateString()).getTime()).getTime()},t.dayEnd=function(){return new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1).getTime()},t.getDiffHours=function(t){return(new Date).getHours()-new Date(1e3*t).getHours()},t.getDiffMins=function(t){return this.GetTimeBySecond()-t},t.getSplaceTime=function(t,e){var o=new Date;return o.getHours()>=t?o.setHours(t+24):o.setHours(t),o.setMinutes(e),o.setSeconds(0),Number((o.getTime()/1e3).toFixed(0))},t.isLastDayOfMonth=function(t){var e=!1,o=new Date(t),i=o.getFullYear(),a=o.getMonth()+1,n=o.getDate(),r=i,s=a++;a>12&&(s-=12,r++);var c=new Date(r,s,1);return n==new Date(c.getTime()-864e5).getDate()&&(e=!0),e},t.timeExchange=function(t,e){return 1==t?Math.floor(e/60):Math.floor(e/3600)},t}();i.TimeUtils=a,cc._RF.pop()},{}],TipsMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b3b51Syzj5GG53lIaXh40+A","TipsMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.TipsData=void 0;var n=i("PoolMgr"),r=i("ResourceMgr"),s=i("TweenMgr"),c=i("Utils"),l=i("DataMgr"),u=i("PlayerMgr"),p=i("RoleMgr"),d=function(){function t(){this.curTipsList=[],this.isExistTips=!1}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.addTipsToTipsList=function(t,e,o,i){var a={type:t,parent:e,position:cc.Vec3.ZERO,id:o,count:i};this.isExistTips?this.curTipsList.push(a):(this.isExistTips=!0,0==a.type?this.labTipsChangeFetter(a):1==a.type&&this.labTipsChangeSkillBook(a))},t.prototype.againPlayTips=function(){if(this.curTipsList.length>0&&!this.isExistTips){var t=this.curTipsList[0];this.curTipsList.splice(0,1),this.isExistTips=!0,0==t.type?this.labTipsChangeFetter(t):1==t.type&&this.labTipsChangeSkillBook(t)}},t.prototype.playTips=function(t,e,o){var i=this,a=n.PoolMgr.getInstance().getNode("NodeTips");a?(a.parent=t,a.active=!0,a.position=e,a.getChildByName("LayoutTips").active=!0,a.getChildByName("NodeFightUpTips").active=!1,a.getChildByName("LayoutTips").getChildByName("LabTips").getComponent(cc.RichText).string=o,this.tipsEff(a)):r.ResourceMgr.getInstance().loadRes("prefabs","widget/NodeTips",cc.Prefab,function(n){(a=cc.instantiate(n)).active=!0,a.getChildByName("LayoutTips").active=!0,a.getChildByName("NodeFightUpTips").active=!1,a.parent=t,a.position=e,a.getChildByName("LayoutTips").getChildByName("LabTips").getComponent(cc.RichText).string=o,i.tipsEff(a)})},t.prototype.tipsEff=function(t){var e=this;cc.isValid(t)&&(t.opacity=255,cc.tween(t).by(1,{y:10}).delay(1).parallel(cc.tween().by(1,{y:10}),cc.tween().to(1,{opacity:0})).call(function(){e.isExistTips=!1,e.tipsPool("NodeTips",t),e.againPlayTips()}).start())},t.prototype.tipsPool=function(t,e){cc.isValid(e)&&n.PoolMgr.getInstance().freeNode(t,e)},t.prototype.labTipsChangeSkillBook=function(t){if(2===t.count||3===t.count){var e=l.DataMgr.getInstance().getSkillBook(t.id),o=u.PlayerMgr.getInstance().geUserData().getSkillBookForId(e.id),i=l.DataMgr.getInstance().getSkillBookLevelCfg1(e.StartLevelID,o.level),a=c.Utils.getTabelArr(i["addProp"+t.count]),n=c.Utils.getTabelArr(i["starProp"+t.count]),r=""+i.skillBookDec;r=r.replace("%s","<color = #fce445 >"+a[1]+"</color>");var s=""+i["skillBookDec"+t.count+"Star"],p=n[1];0==Number(n[0])&&(p=e.name),s=s.replace("%s","<color = #fce445 >"+p+"</color>");var d=e.name+"<color = #fce445 >\u5347\u81f3"+t.count+"\u661f</color>\uff0c"+r+"\n"+s;this.playTips(t.parent,cc.v3(0,-100,0),d)}},t.prototype.labTipsChangeFetter=function(t){var e=l.DataMgr.getInstance().getFetter(t.id),o=c.Utils.getTabelArr(e.fetterCount),i=c.Utils.getTabelArr(e.fetterFun),a=""+e.fetterDec;a=a.replace("%s",""+i[t.count-1]);var n="\u83b7\u5f97\u65b0\u7f81\u7eca <color = #fce445 >"+e.name+">"+o[t.count-1]+"</color>\n<color = #fce445 >"+a+"</color>";this.playTips(t.parent,cc.v3(0,-100,0),n)},t.prototype.resetData=function(){this.isExistTips=!1,this.curTipsList=[]},t.prototype.playFightnChangTips=function(t,e,o,i){var a=this,s=n.PoolMgr.getInstance().getNode("NodeTips");s?this.loadFightTipInfo(s,t,e,o,i):r.ResourceMgr.getInstance().loadRes("prefabs","widget/NodeTips",cc.Prefab,function(n){s=cc.instantiate(n),a.loadFightTipInfo(s,t,e,o,i)})},t.prototype.loadFightTipInfo=function(t,e,o,i,a){var n=this,r=a-i>0;t.parent=e,t.active=!0,t.position=o,t.getChildByName("LayoutTips").active=!1;var c=t.getChildByName("NodeFightUpTips");c.active=!0;var l=c.getChildByName("NodeFight"),u=l.getChildByName("LabFightNum");u.getComponent(cc.Label).string=""+i;var p=l.getChildByName("NodeUp");p.x=u.x+u.getContentSize().width+30,p.getChildByName("LabUp").getComponent(cc.Label).string=""+Math.abs(a-i),p.getChildByName("LabUp").color=r?cc.color(76,220,47):cc.color(255,0,0),p.getChildByName("SpUp").active=r,p.getChildByName("SpDown").active=!r,c.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,function(){n.animMove(p,function(){s.TweenMgr.getInstance().rollLabAnim(r,l.getChildByName("LabFightNum").getComponent(cc.Label),i,a,function(){setTimeout(function(){cc.isValid(t)&&n.tipsPool("NodeTips",t)},500)})})})},t.prototype.animMove=function(t,e){cc.isValid(t)&&(t.opacity=255,cc.tween(t).delay(1).parallel(cc.tween().to(.5,{x:30}),cc.tween().to(.5,{opacity:0})).call(function(){e&&e()}).start())},t.prototype.playFightTips=function(e){var o=p.default.getInstance().curFightNumForPlayer,i=p.default.getInstance().getPlayerFightNum();o!=i&&t.getInstance().playFightnChangTips(e,cc.v3(0,450),o,i)},t}();a.default=d,a.TipsData=function(){},cc._RF.pop()},{}],TrackDataEvent:[function(t,e,o){"use strict";cc._RF.push(e,"5e70aRZ275JpJ9JcQMRK3uj","TrackDataEvent");var i,a,n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.EventCF=n.TrackId=void 0,function(t){t[t.dau=0]="dau",t[t.guide1=1]="guide1",t[t.guide1_1=2]="guide1_1",t[t.guide2=3]="guide2",t[t.guide2_1=4]="guide2_1",t[t.guide2_2=5]="guide2_2",t[t.guide3_1=6]="guide3_1",t[t.guide3=7]="guide3",t[t.guide4_1=8]="guide4_1",t[t.guide4=9]="guide4",t[t.guide5=10]="guide5",t[t.guide6_1=11]="guide6_1",t[t.guide6=12]="guide6",t[t.guide7_1=13]="guide7_1",t[t.guide7=14]="guide7",t[t.guide8=15]="guide8",t[t.guide9=16]="guide9",t[t.guide10=17]="guide10",t[t.guide11=18]="guide11",t[t.guide12=19]="guide12",t[t.guide13=20]="guide13",t[t.guide14=21]="guide14",t[t.guide15=22]="guide15",t[t.guide16=23]="guide16",t[t.guide17=24]="guide17",t[t.guide18=25]="guide18",t[t.guide19=26]="guide19",t[t.guide20=27]="guide20",t[t.guide21=28]="guide21",t[t.guide22=29]="guide22",t[t.click_signin=30]="click_signin",t[t.click_speed=31]="click_speed",t[t.click_skillswitch=32]="click_skillswitch",t[t.click_equip_quicksale=33]="click_equip_quicksale",t[t.click_equip_title=34]="click_equip_title",t[t.click_equip_unfix=35]="click_equip_unfix",t[t.click_equip_sale=36]="click_equip_sale",t[t.click_equip_slide=37]="click_equip_slide",t[t.click_getrefreshtime=38]="click_getrefreshtime",t[t.click_task=39]="click_task",t[t.click_mainlinetask=40]="click_mainlinetask",t[t.click_store=41]="click_store",t[t.click_buff_1=42]="click_buff_1",t[t.click_buff_2=43]="click_buff_2",t[t.click_buff_3=44]="click_buff_3",t[t.click_refine=45]="click_refine",t[t.click_lock=46]="click_lock",t[t.onhookreward_click=47]="onhookreward_click",t[t.onhookreward_get=48]="onhookreward_get",t[t.onhookreward_getdouble=49]="onhookreward_getdouble",t[t.pet_appear=50]="pet_appear",t[t.pet_click=51]="pet_click",t[t.pet_get=52]="pet_get",t[t.pet_cancel=53]="pet_cancel",t[t.quickarrive_appear=54]="quickarrive_appear",t[t.quickarrive_get=55]="quickarrive_get",t[t.quickarrive_restart=56]="quickarrive_restart",t[t.getall_appear=57]="getall_appear",t[t.getall_get=58]="getall_get",t[t.chapter_start_X=59]="chapter_start_X",t[t.chapter_pass_X=60]="chapter_pass_X",t[t.chapter_fail_X=61]="chapter_fail_X",t[t.chapter_lv_X_Y=62]="chapter_lv_X_Y",t[t.chapter2_fetter_X=63]="chapter2_fetter_X",t[t.chapter2_skill2=64]="chapter2_skill2",t[t.chapter2_skill3=65]="chapter2_skill3",t[t.skill_upgrade_X_Y=66]="skill_upgrade_X_Y",t[t.equip_upgrade_X_Y=67]="equip_upgrade_X_Y",t[t.mainlinetask_X=68]="mainlinetask_X",t[t.refine_time_X=69]="refine_time_X",t[t.refine_equip_X=70]="refine_equip_X",t[t.refine_equip_lv_X=71]="refine_equip_lv_X",t[t.refine_equip_lv_time_X=72]="refine_equip_lv_time_X",t[t.box_time_X_Y=73]="box_time_X_Y",t[t.box2_chaptertime_X_Y=74]="box2_chaptertime_X_Y",t[t.box3_chaptertime_X_Y=75]="box3_chaptertime_X_Y",t[t.speed_X=76]="speed_X",t[t.quickarrive_X_Y=77]="quickarrive_X_Y",t[t.pet_X=78]="pet_X",t[t.store_time_X=79]="store_time_X",t[t.store_skill_X=80]="store_skill_X",t[t.store_quip_X=81]="store_quip_X",t[t.refine_equip_get_X=82]="refine_equip_get_X",t[t.strength=83]="strength",t[t.ingot=84]="ingot",t[t.coin=85]="coin",t[t.pet=86]="pet",t[t.quickarrive=87]="quickarrive",t[t.combatspeed=88]="combatspeed",t[t.getrefreshtime=89]="getrefreshtime",t[t.getallskill=90]="getallskill",t[t.doubleaward=91]="doubleaward",t[t.upgradeskill=92]="upgradeskill",t[t.skillbox=93]="skillbox",t[t.equipbox=94]="equipbox",t[t.equipvacancy=95]="equipvacancy",t[t.upgradeequip=96]="upgradeequip",t[t.signin=97]="signin",t[t.offlineaward=98]="offlineaward",t[t.task_doubleaward=99]="task_doubleaward",t[t.store_refresh=100]="store_refresh",t[t.store_getskill=101]="store_getskill",t[t.store_getequip=102]="store_getequip",t[t.refine_getequip=103]="refine_getequip",t[t.time_1=104]="time_1",t[t.time_3=105]="time_3",t[t.time_5=106]="time_5",t[t.time_7=107]="time_7",t[t.time_10=108]="time_10",t[t.time_12=109]="time_12",t[t.time_15=110]="time_15",t[t.time_20=111]="time_20"}(a=n.TrackId||(n.TrackId={})),n.EventCF=((i={})[a.dau]={eventKey:"dau",eventValue:"dau",info:"\u65e5\u6d3b\u4eba\u6570",onlyOne:!0},i[a.guide1]={eventKey:"guide",eventValue:"guide1",info:"[\u5f15\u5bfc] \u5230\u8fbeloading\u754c\u9762\u7684\u4eba\u6570",onlyOne:!0},i[a.guide1_1]={eventKey:"guide",eventValue:"guide1_1",info:"[\u5f15\u5bfc] \u7ed3\u675floading\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide1"},i[a.guide2]={eventKey:"guide",eventValue:"guide2",info:"[\u5f15\u5bfc] \u70b9\u51fb\u201c\u5f00\u59cb\u6e38\u620f\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide1_1"},i[a.guide2_1]={eventKey:"guide",eventValue:"guide2_1",info:"[\u5f15\u5bfc] \u51fa\u73b0\u201c\u957f\u6309\u66b4\u8d70\u201d\u8bf4\u660e\u754c\u9762\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide2"},i[a.guide2_2]={eventKey:"guide",eventValue:"guide2_2",info:"[\u5f15\u5bfc] \u70b9\u51fb\u201c\u66b4\u8d70\u201d\u6309\u94ae\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide2_1"},i[a.guide3_1]={eventKey:"guide",eventValue:"guide3_1",info:"[\u5f15\u5bfc] \u7b2c1\u6b21 \u5230\u8fbe\u6280\u80fd\u9009\u62e9\u754c\u9762\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide2"},i[a.guide3]={eventKey:"guide",eventValue:"guide3",info:"[\u5f15\u5bfc] \u9009\u6280\u80fd\u754c\u9762,\u70b9\u51fb\u201c\u6280\u80fd\u4e66\u201d\u7684\u4eba\u6570(\u7b2c1\u6b21,\u9009\u62e9)",onlyOne:!0,preEvent:"guideguide3_1"},i[a.guide4_1]={eventKey:"guide",eventValue:"guide4_1",info:"[\u5f15\u5bfc] \u7b2c2\u6b21 \u5230\u8fbe\u6280\u80fd\u9009\u62e9\u754c\u9762\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide3"},i[a.guide4]={eventKey:"guide",eventValue:"guide4",info:"[\u5f15\u5bfc] \u9009\u6280\u80fd\u754c\u9762,\u70b9\u51fb\u201c\u6280\u80fd\u4e66\u201d\u7684\u4eba\u6570(\u7b2c2\u6b21,\u51d1\u7f81\u7eca)",onlyOne:!0,preEvent:"guideguide4_1"},i[a.guide5]={eventKey:"guide",eventValue:"guide5",info:"[\u5f15\u5bfc] \u51fa\u73b0\u201c\u7f81\u7eca\u8fbe\u6210\u201d\u8bf4\u660e\u9762\uff0c\u70b9\u51fb\u5173\u95ed\u9875\u9762\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide4"},i[a.guide6_1]={eventKey:"guide",eventValue:"guide6_1",info:"[\u5f15\u5bfc] \u7b2c3\u6b21 \u5230\u8fbe\u6280\u80fd\u9009\u62e9\u754c\u9762\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide5"},i[a.guide6]={eventKey:"guide",eventValue:"guide6",info:"[\u5f15\u5bfc] \u9009\u6280\u80fd\u754c\u9762,\u70b9\u51fb\u201c\u6280\u80fd\u4e66\u201d\u7684\u4eba\u6570(\u7b2c3\u6b21,\u6280\u80fd\u5347\u661f)",onlyOne:!0,preEvent:"guideguide6_1"},i[a.guide7_1]={eventKey:"guide",eventValue:"guide7_1",info:"[\u5f15\u5bfc] \u7b2c4\u6b21 \u5230\u8fbe\u6280\u80fd\u9009\u62e9\u754c\u9762\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide6"},i[a.guide7]={eventKey:"guide",eventValue:"guide7",info:"[\u5f15\u5bfc] \u9009\u6280\u80fd\u754c\u9762,\u70b9\u51fb\u201c\u6280\u80fd\u4e66\u201d\u7684\u4eba\u6570(\u7b2c4\u6b21,\u6280\u80fd\u5347\u661f)",onlyOne:!0,preEvent:"guideguide7_1"},i[a.guide8]={eventKey:"guide",eventValue:"guide8",info:"[\u5f15\u5bfc] \u5230\u8fbe\u7ed3\u7b97\u754c\u9762,\u70b9\u51fb\u201c\u76f4\u63a5\u9886\u53d6\u201d\u7684\u4eba\u6570",onlyOne:!0},i[a.guide9]={eventKey:"guide",eventValue:"guide9",info:"[\u5f15\u5bfc] \u4e3b\u754c\u9762,\u70b9\u51fb\u201c\u88c5\u5907\u201d\u7684\u4eba\u6570",onlyOne:!0},i[a.guide10]={eventKey:"guide",eventValue:"guide10",info:"[\u5f15\u5bfc] \u88c5\u5907\u754c\u9762,\u70b9\u51fb\u201c\u4e00\u952e\u6362\u88c5\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide9"},i[a.guide11]={eventKey:"guide",eventValue:"guide11",info:"[\u5f15\u5bfc] \u88c5\u5907\u754c\u9762,\u70b9\u51fb\u201c\u8fd4\u56de\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide10"},i[a.guide12]={eventKey:"guide",eventValue:"guide12",info:"[\u5f15\u5bfc] \u4e3b\u754c\u9762,\u70b9\u51fb\u201c\u6280\u80fd\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide11"},i[a.guide13]={eventKey:"guide",eventValue:"guide13",info:"[\u5f15\u5bfc] \u6280\u80fd\u4e66\u754c\u9762,\u70b9\u51fb\u201c\u6280\u80fd\u4e66\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide12"},i[a.guide14]={eventKey:"guide",eventValue:"guide14",info:"[\u5f15\u5bfc] \u6280\u80fd\u4e66\u754c\u9762,\u70b9\u51fb\u201c\u5347\u7ea7\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide13"},i[a.guide15]={eventKey:"guide",eventValue:"guide15",info:"[\u5f15\u5bfc] \u6280\u80fd\u4e66\u754c\u9762,\u70b9\u51fb\u5173\u95ed\u8be6\u60c5\u9875\u9762\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide14"},i[a.guide16]={eventKey:"guide",eventValue:"guide16",info:"[\u5f15\u5bfc] \u6280\u80fd\u4e66\u754c\u9762,\u70b9\u51fb\u201c\u5b9d\u7bb1\u201d\u524d\u5f80\u5546\u57ce\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide15"},i[a.guide17]={eventKey:"guide",eventValue:"guide17",info:"[\u5f15\u5bfc] \u5546\u57ce\u754c\u9762,\u70b9\u51fb\u8d2d\u4e70\u7ecf\u5178\u88c5\u5907\u5b9d\u7bb1\u7684\u4eba\u6570",onlyOne:!0},i[a.guide18]={eventKey:"guide",eventValue:"guide18",info:"[\u5f15\u5bfc] \u7ecf\u5178\u88c5\u5907\u5b9d\u7bb1\u5f00\u542f\u754c\u9762,\u70b9\u51fb\u201c\u786e\u8ba4\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide17"},i[a.guide19]={eventKey:"guide",eventValue:"guide19",info:"[\u5f15\u5bfc] \u5546\u57ce\u754c\u9762,\u70b9\u51fb\u8d2d\u4e70\u7ecf\u5178\u6280\u80fd\u5b9d\u7bb1\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide18"},i[a.guide20]={eventKey:"guide",eventValue:"guide20",info:"[\u5f15\u5bfc] \u7ecf\u5178\u6280\u80fd\u5b9d\u7bb1\u5f00\u542f\u754c\u9762,\u70b9\u51fb\u201c\u786e\u8ba4\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide19"},i[a.guide21]={eventKey:"guide",eventValue:"guide21",info:"[\u5f15\u5bfc] \u4ece\u5546\u57ce\u754c\u9762\u8fd4\u56de\u4e3b\u754c\u9762\u7684\u4eba\u6570",onlyOne:!0},i[a.guide22]={eventKey:"guide",eventValue:"guide22",info:"[\u5f15\u5bfc] \u7b2c\u4e8c\u6b21\u70b9\u51fb\u201c\u5f00\u59cb\u6e38\u620f\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideguide2"},i[a.click_signin]={eventKey:"guide",eventValue:"click_signin",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u7b7e\u5230\u201d\u6309\u94ae",onlyOne:!0},i[a.click_speed]={eventKey:"guide",eventValue:"click_speed",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u5c40\u5185\u201c\u500d\u901f\u201d\u6309\u94ae",onlyOne:!0},i[a.click_skillswitch]={eventKey:"guide",eventValue:"click_skillswitch",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u6280\u80fd\u8be6\u60c5\u754c\u9762\u5207\u6362\u201c\u5c40\u5185\u5c5e\u6027\u201d",onlyOne:!0},i[a.click_equip_quicksale]={eventKey:"guide",eventValue:"click_quicksale",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u88c5\u5907\u201d\u754c\u9762\u201c\u5feb\u901f\u51fa\u552e\u201d\u6309\u94ae",onlyOne:!0},i[a.click_equip_title]={eventKey:"guide",eventValue:"click_equip_title",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u88c5\u5907\u201d\u754c\u9762\u201c\u79f0\u53f7\u201d",onlyOne:!0},i[a.click_equip_unfix]={eventKey:"guide",eventValue:"click_equip_unfix",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u88c5\u5907\u201d\u754c\u9762,\u88c5\u5907\u8be6\u60c5\u9875\u9762\u201c\u5378\u4e0b\u201d",onlyOne:!0},i[a.click_equip_sale]={eventKey:"guide",eventValue:"click_equip_sale",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u88c5\u5907\u201d\u754c\u9762,\u88c5\u5907\u8be6\u60c5\u9875\u9762\u201c\u51fa\u552e\u201d",onlyOne:!0},i[a.click_equip_slide]={eventKey:"guide",eventValue:"click_equip_slide",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u88c5\u5907\u201d\u754c\u9762,\u6ed1\u52a8\u88c5\u5907\u680f\u64cd\u4f5c\u6362\u9875",onlyOne:!0},i[a.click_getrefreshtime]={eventKey:"guide",eventValue:"click_getrefreshtime",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u514d\u8d39\u5237\u65b0\u201d\u5237\u65b0\u6280\u80fd",onlyOne:!0},i[a.click_task]={eventKey:"guide",eventValue:"click_task",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u4efb\u52a1\u201d\u6309\u94ae",onlyOne:!0},i[a.click_mainlinetask]={eventKey:"guide",eventValue:"click_mainlinetask",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u4e3b\u7ebf\u4efb\u52a1\u201d\u6309\u94ae",onlyOne:!0},i[a.click_store]={eventKey:"guide",eventValue:"click_store",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u795e\u79d8\u5546\u4eba\u201d\u6309\u94ae",onlyOne:!0},i[a.click_buff_1]={eventKey:"guide",eventValue:"click_buff_1",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u66b4\u8d70\u201d\u6309\u94ae\uff08\u6392\u9664\u65b0\u624b\u5f15\u5bfc\uff09",onlyOne:!0,preEvent:"guideguide2_2"},i[a.click_buff_2]={eventKey:"guide",eventValue:"click_buff_2",info:"[\u70b9\u51fb] \u9996\u6b21\u957f\u6309\u201c\u66b4\u8d70\u201d\u6309\u94ae\uff08\u6392\u9664\u65b0\u624b\u5f15\u5bfc\uff09",onlyOne:!0,preEvent:"guideguide2_2"},i[a.click_buff_3]={eventKey:"guide",eventValue:"click_buff_3",info:"[\u70b9\u51fb] \u9996\u6b21\u957f\u6309\u201c\u66b4\u8d70\u201d\u6309\u94ae\u5c06\u80fd\u529b\u6761\u7528\u7a7a",onlyOne:!0},i[a.click_refine]={eventKey:"guide",eventValue:"click_refine",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u88c5\u5907\u201d\u754c\u9762,\u88c5\u5907\u8be6\u60c5\u9875\u9762\u201c\u5408\u6210\u201d",onlyOne:!0},i[a.click_lock]={eventKey:"guide",eventValue:"click_lock",info:"[\u70b9\u51fb] \u9996\u6b21\u70b9\u51fb\u201c\u88c5\u5907\u201d\u754c\u9762,\u88c5\u5907\u8be6\u60c5\u9875\u9762\u201c\u9501\u201d",onlyOne:!0},i[a.onhookreward_click]={eventKey:"guide",eventValue:"onhookreward_click",info:"[\u79bb\u7ebf\u5956\u52b1] \u9996\u6b21\u70b9\u51fb\u79bb\u7ebf\u5956\u52b1\u5b9d\u7bb1\u51fa\u73b0\u5f39\u7a97\u7684\u4eba\u6570",onlyOne:!0},i[a.onhookreward_get]={eventKey:"guide",eventValue:"onhookreward_get",info:"[\u79bb\u7ebf\u5956\u52b1] \u83b7\u53d6\u79bb\u7ebf\u6536\u76ca\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideonhookreward_click",condition:"guideonhookreward_getdouble"},i[a.onhookreward_getdouble]={eventKey:"guide",eventValue:"onhookreward_getdouble",info:"[\u79bb\u7ebf\u5956\u52b1] \u53cc\u500d\u83b7\u53d6\u79bb\u7ebf\u6536\u76ca\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guideonhookreward_click",condition:"guideonhookreward_get"},i[a.pet_appear]={eventKey:"guide",eventValue:"pet_appear",info:"[\u5ba0\u7269] \u9996\u6b21\u51fa\u73b0\u5ba0\u7269\u7684\u4eba\u6570",onlyOne:!0},i[a.pet_click]={eventKey:"guide",eventValue:"pet_click",info:"[\u5ba0\u7269] \u9996\u6b21\u70b9\u51fb\u5ba0\u7269\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guidepet_appear"},i[a.pet_get]={eventKey:"guide",eventValue:"pet_get",info:"[\u5ba0\u7269] \u9996\u6b21\u70b9\u51fb\u83b7\u53d6\u5ba0\u7269\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guidepet_click",condition:"guidepet_cancel"},i[a.pet_cancel]={eventKey:"guide",eventValue:"pet_cancel",info:"[\u5ba0\u7269] \u9996\u6b21\u70b9\u51fb\u5173\u95ed\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guidepet_click",condition:"guidepet_get"},i[a.quickarrive_appear]={eventKey:"guide",eventValue:"quickarrive_appear",info:"[\u5feb\u901f\u5230\u8fbe] \u9996\u6b21\u89e6\u53d1\u5feb\u901f\u5230\u8fbe\u754c\u9762\u7684\u4eba\u6570",onlyOne:!0},i[a.quickarrive_get]={eventKey:"guide",eventValue:"quickarrive_get",info:"[\u5feb\u901f\u5230\u8fbe] \u9996\u6b21\u89e6\u53d1\u5feb\u901f\u5230\u8fbe\u754c\u9762,\u70b9\u51fb\u201c\u5feb\u901f\u5230\u8fbe\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guidequickarrive_appear",condition:"guidequickarrive_restart"},i[a.quickarrive_restart]={eventKey:"guide",eventValue:"quickarrive_restart",info:"[\u5feb\u901f\u5230\u8fbe] \u9996\u6b21\u89e6\u53d1\u5feb\u901f\u5230\u8fbe\u754c\u9762,\u70b9\u51fb\u201c\u91cd\u65b0\u5f00\u59cb\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guidequickarrive_appear",condition:"guidequickarrive_get"},i[a.getall_appear]={eventKey:"guide",eventValue:"getall_appear",info:"[\u5168\u90fd\u8981] \u9996\u6b21\u89e6\u53d1\u201c\u5168\u90fd\u8981\u201d\u7684\u4eba\u6570",onlyOne:!0},i[a.getall_get]={eventKey:"guide",eventValue:"getall_get",info:"[\u5168\u90fd\u8981] \u83b7\u53d6\u201c\u5168\u90fd\u8981\u201d\u7684\u4eba\u6570",onlyOne:!0,preEvent:"guidegetall_appear"},i[a.chapter_start_X]={eventKey:"lv",eventValue:"chapter_start_",info:"\u7ae0\u8282\uff1a\u5f00\u542f\u7ae0\u8282X\u7684\u4eba\u6570\u60c5\u51b5\uff08X=\u7ae0\u8282id\uff09",onlyOne:!0},i[a.chapter_pass_X]={eventKey:"lv",eventValue:"chapter_pass_",info:"\u7ae0\u8282\uff1a\u7ae0\u8282X\u9996\u5c40\u5bf9\u5c40\u201c\u6210\u529f\u201d\u7684\u4eba\u6570\u60c5\u51b5\uff08X=\u7ae0\u8282id\uff09",onlyOne:!0,preEvent:"lvchapter_start_",condition:"lvchapter_fail_"},i[a.chapter_fail_X]={eventKey:"lv",eventValue:"chapter_fail_",info:"\u7ae0\u8282\uff1a\u7ae0\u8282X\u9996\u5c40\u5bf9\u5c40\u201c\u5931\u8d25\u201d\u7684\u4eba\u6570\u60c5\u51b5\uff08X=\u7ae0\u8282id\uff09",onlyOne:!0,preEvent:"lvchapter_start_",condition:"lvchapter_pass_"},i[a.chapter_lv_X_Y]={eventKey:"lv",eventValue:"chapter_lv_",info:"\u5173\u5361\u6570\uff1a\u5404\u7ae0\u8282\u5230\u8fbe\u5173\u5361\u6570\u60c5\u51b5,\u6bcf5\u5173\u6253\u4e00\u6b21\u70b9\uff08X=\u7ae0\u8282id,Y=\u5173\u5361\u6570\uff0c\u4ec5\u6253\u70b95\u7684\u500d\u6570\uff09x\u4ec5\u7edf\u8ba1\u52306",onlyOne:!0},i[a.chapter2_fetter_X]={eventKey:"lv",eventValue:"chapter2_fetter_",info:"\u7f81\u7eca\uff1a\u5728\u7b2c2\u7ae0\u4e2d\u7f81\u7eca\u8fbe\u6210X\u79cd\u7684\u4eba\u6570\uff08X=\u79cd\u7c7b\u6570\uff09",onlyOne:!0},i[a.chapter2_skill2]={eventKey:"lv",eventValue:"chapter2_skill2",info:"\u6280\u80fd\u4e66\uff1a\u5728\u7b2c2\u7ae0\u4e2d\u4efb\u610f\u6280\u80fd\u8fbe\u62102\u661f\u7684\u4eba\u6570",onlyOne:!0},i[a.chapter2_skill3]={eventKey:"lv",eventValue:"chapter2_skill3",info:"\u6280\u80fd\u4e66\uff1a\u5728\u7b2c2\u7ae0\u4e2d\u4efb\u610f\u6280\u80fd\u8fbe\u62103\u661f\u7684\u4eba\u6570",onlyOne:!0},i[a.skill_upgrade_X_Y]={eventKey:"lv",eventValue:"skill_upgrade_",info:"\u6280\u80fd\u4e66\uff1a\u5404\u6280\u80fd\u4e66\u7684\u5347\u7ea7\u60c5\u51b5\uff08X=\u6280\u80fd\u4e66id\uff0cY=\u7b49\u7ea7\uff09y\u4ec5\u7edf\u8ba1\u52303",onlyOne:!0},i[a.equip_upgrade_X_Y]={eventKey:"lv",eventValue:"equip_upgrade_",info:"\u88c5\u5907\uff1a\u5404\u88c5\u5907\u7684\u5347\u7ea7\u60c5\u51b5\uff08X=\u88c5\u5907id\uff0cY=\u7b49\u7ea7\uff09y\u4ec5\u7edf\u8ba1\u52303",onlyOne:!0},i[a.mainlinetask_X]={eventKey:"lv",eventValue:"mainlinetask_",info:"\u4efb\u52a1\uff1a\u5404\u4efb\u52a1\u7684\u5b8c\u6210\u60c5\u51b5\u7edf\u8ba1\uff08X=\u4efb\u52a1id\uff0cx\u4ec5\u7edf\u8ba1\u523030\uff09",onlyOne:!0},i[a.refine_time_X]={eventKey:"lv",eventValue:"refine_time_",info:"\u5408\u6210\uff1a\u6210\u529f\u5408\u6210\u88c5\u5907\u7684\u6b21\u6570\u7edf\u8ba1\uff08X=\u6b21\u6570\uff0cx\u4ec5\u7edf\u8ba1\u523010\uff09",onlyOne:!0},i[a.refine_equip_X]={eventKey:"lv",eventValue:"refine_equip_",info:"\u5408\u6210\uff1a\u6210\u529f\u5408\u6210\u88c5\u5907\u7684\u60c5\u51b5\u7edf\u8ba1\uff08X=\u88c5\u5907id\uff09",onlyOne:!1},i[a.refine_equip_lv_X]={eventKey:"lv",eventValue:"refine_equip_lv_",info:"\u5408\u6210\uff1a\u6210\u529f\u5408\u6210\u88c5\u5907\u65f6\uff0c\u88c5\u5907\u661f\u7ea7\u7684\u60c5\u51b5\u7edf\u8ba1\uff08X=\u661f\u7ea7\uff0c1/2/3/4/5\uff09",onlyOne:!1},i[a.refine_equip_lv_time_X]={eventKey:"lv",eventValue:"refine_equip_lv_time_",info:"\u88c5\u5907\uff1a\u5404\u88c5\u5907\u7684\u5347\u7ea7\u6b21\u6570\u60c5\u51b5\uff08X=\u88c5\u5907id\uff0cY=\u5347\u7ea7\u6b21\u6570\uff09y\u4ec5\u7edf\u8ba1\u52305",onlyOne:!0},i[a.box_time_X_Y]={eventKey:"iaa",eventValue:"box_time_",info:"\u5b9d\u7bb1\uff1a\u5404\u5b9d\u7bb1\u5f00\u542f\u7684\u6b21\u6570\u60c5\u51b5\uff08X=\u5b9d\u7bb1id\uff0cY=\u5f00\u542f\u6b21\u6570\uff0cY\u4ec5\u7edf\u8ba1\u523020\uff09",onlyOne:!0},i[a.box2_chaptertime_X_Y]={eventKey:"iaa",eventValue:"box2_chaptertime_",info:"\u5b9d\u7bb1\uff1a\u5728\u7b2cX\u7ae0\u8282\uff0c\u5f00\u542f\u4ed8\u8d39\u88c5\u5907\u5b9d\u7bb1Y\u6b21\u7684\u60c5\u51b5\uff08X=\u7ae0\u8282id\uff0cx\u4ec5\u7edf\u8ba1\u52305\uff0cY=\u6b21\u6570\uff0cy\u4ec5\u7edf\u8ba1\u52305\uff09",onlyOne:!1},i[a.box3_chaptertime_X_Y]={eventKey:"iaa",eventValue:"box3_chaptertime_",info:"\u5b9d\u7bb1\uff1a\u5728\u7b2cX\u7ae0\u8282\uff0c\u5f00\u542f\u4ed8\u8d39\u6280\u80fd\u4e66\u5b9d\u7bb1Y\u6b21\u7684\u60c5\u51b5\uff08X=\u7ae0\u8282id\uff0cx\u4ec5\u7edf\u8ba1\u52305\uff0cY=\u6b21\u6570\uff0cy\u4ec5\u7edf\u8ba1\u52305\uff09",onlyOne:!1},i[a.speed_X]={eventKey:"iaa",eventValue:"speed_",info:"\u500d\u901f\uff1a\u83b7\u53d6\u5404\u500d\u6570\u7684\u4eba\u6570\u60c5\u51b5\uff08X=\u500d\u901fid\uff0c2=2\u500d\u901f\uff0c3=3\u500d\u901f\u2026\u2026\uff09",onlyOne:!0},i[a.quickarrive_X_Y]={eventKey:"iaa",eventValue:"quickarrive_",info:"\u5feb\u901f\u5230\u8fbe\uff1a\u6210\u529f\u4f7f\u7528\u5feb\u901f\u5230\u8fbe\u65f6\u6240\u5728\u7684\u7ae0\u8282\u53ca\u5173\u5361\u8282\u70b9\uff08X=\u7ae0\u8282id,Y=\u5173\u5361\u6570\uff0c\u4ec5\u6253\u70b95\u7684\u500d\u6570\uff09",onlyOne:!1},i[a.pet_X]={eventKey:"iaa",eventValue:"pet_",info:"\u5ba0\u7269\uff1a\u83b7\u53d6\u5ba0\u7269\u65f6\u6240\u5728\u7684\u7ae0\u8282\uff08X=\u7ae0\u8282id\uff0cx\u4ec5\u7edf\u8ba1\u52305\uff09",onlyOne:!0},i[a.store_time_X]={eventKey:"iaa",eventValue:"store_time_",info:"\u795e\u79d8\u5546\u4eba\uff1a\u5728\u795e\u79d8\u5546\u4eba\u8d2d\u4e70\u7684\u6b21\u6570\u60c5\u51b5\u7edf\u8ba1\uff08X=\u6b21\u6570\uff0cx\u4ec5\u7edf\u8ba1\u523010\uff09",onlyOne:!0},i[a.store_skill_X]={eventKey:"iaa",eventValue:"store_skill_",info:"\u795e\u79d8\u5546\u4eba\uff1a\u8d2d\u4e70\u201c\u6280\u80fd\u4e66\u201d\u60c5\u51b5\u7edf\u8ba1\uff08X=\u6280\u80fd\u4e66id\uff09",onlyOne:!1},i[a.store_quip_X]={eventKey:"iaa",eventValue:"store_quip_",info:"\u795e\u79d8\u5546\u4eba\uff1a\u8d2d\u4e70\u201c\u88c5\u5907\u201d\u60c5\u51b5\u7edf\u8ba1\uff08X=\u88c5\u5907id\uff09",onlyOne:!1},i[a.refine_equip_get_X]={eventKey:"iaa",eventValue:"refine_equip_get_",info:"\u5408\u6210\uff1a\u89c6\u9891\u83b7\u5f97\u88c5\u5907\u7684\u60c5\u51b5\u7edf\u8ba1\uff08X=\u88c5\u5907id\uff09",onlyOne:!1},i[a.strength]={eventKey:"video",eventValue:"strength",info:"\u4f53\u529b\u2014\u2014\u514d\u8d39\u8865\u5145",onlyOne:!1},i[a.ingot]={eventKey:"video",eventValue:"ingot",info:"\u5143\u5b9d\u2014\u2014\u514d\u8d39\u83b7\u53d6",onlyOne:!1},i[a.coin]={eventKey:"video",eventValue:"coin",info:"\u91d1\u5e01\u2014\u2014\u514d\u8d39\u83b7\u53d6",onlyOne:!1},i[a.pet]={eventKey:"video",eventValue:"pet",info:"\u5ba0\u7269\u2014\u2014\u514d\u8d39\u83b7\u53d6",onlyOne:!1},i[a.quickarrive]={eventKey:"video",eventValue:"quickarrive",info:"\u5f00\u5c40\u2014\u2014\u6839\u636e\u5f53\u524d\u6700\u9ad8\u5173\u5361\u8fdb\u5ea6\uff0c\u5feb\u901f\u5230\u8fbe\u7b2cXX\u5173",onlyOne:!1},i[a.combatspeed]={eventKey:"video",eventValue:"combatspeed",info:"\u5c40\u5185\u2014\u2014\u89e3\u9501\u6218\u6597\u901f\u5ea6",onlyOne:!1},i[a.getrefreshtime]={eventKey:"video",eventValue:"getrefreshtime",info:"\u5c40\u5185\u2014\u2014\u83b7\u53d6\u5237\u65b0\u6280\u80fd\u6b21\u6570",onlyOne:!1},i[a.getallskill]={eventKey:"video",eventValue:"getallskill",info:"\u5c40\u5185\u2014\u2014\u9009\u62e9\u6280\u80fd\u4e66\u2014\u2014\u201c\u5168\u90fd\u8981\u201d",onlyOne:!1},i[a.doubleaward]={eventKey:"video",eventValue:"doubleaward",info:"\u7ed3\u7b97\u2014\u2014\u53cc\u500d\u9886\u53d6\u5956\u52b1",onlyOne:!1},i[a.upgradeskill]={eventKey:"video",eventValue:"upgradeskill",info:"\u6280\u80fd\u2014\u2014\u514d\u8d39\u5347\u7ea7",onlyOne:!1},i[a.skillbox]={eventKey:"video",eventValue:"skillbox",info:"\u5546\u57ce\u2014\u2014\u6280\u80fd\u5b9d\u7bb1\u2014\u2014\u514d\u8d39\u83b7\u53d6",onlyOne:!1},i[a.equipbox]={eventKey:"video",eventValue:"equipbox",info:"\u5546\u57ce\u2014\u2014\u88c5\u5907\u5b9d\u7bb1\u2014\u2014\u514d\u8d39\u83b7\u53d6",onlyOne:!1},i[a.equipvacancy]={eventKey:"video",eventValue:"equipvacancy",info:"\u88c5\u5907\u2014\u2014\u89e3\u9501\u4ed3\u5e93\u7a7a\u4f4d",onlyOne:!1},i[a.upgradeequip]={eventKey:"video",eventValue:"upgradeequip",info:"\u88c5\u5907\u2014\u2014\u514d\u8d39\u5f3a\u5316",onlyOne:!1},i[a.signin]={eventKey:"video",eventValue:"signin",info:"\u7b7e\u5230\u2014\u2014\u8865\u7b7e",onlyOne:!1},i[a.offlineaward]={eventKey:"video",eventValue:"offlineaward",info:"\u79bb\u7ebf\u6536\u76ca\u2014\u2014\u53cc\u500d\u83b7\u53d6",onlyOne:!1},i[a.task_doubleaward]={eventKey:"video",eventValue:"task_doubleaward",info:"\u4efb\u52a1\u2014\u2014\u53cc\u500d\u9886\u53d6",onlyOne:!1},i[a.store_refresh]={eventKey:"video",eventValue:"store_refresh",info:"\u795e\u79d8\u5546\u4eba\u2014\u2014\u5237\u65b0",onlyOne:!1},i[a.store_getskill]={eventKey:"video",eventValue:"store_getskill",info:"\u795e\u79d8\u5546\u4eba\u2014\u2014\u83b7\u53d6\u6280\u80fd",onlyOne:!1},i[a.store_getequip]={eventKey:"video",eventValue:"store_getequip",info:"\u795e\u79d8\u5546\u4eba\u2014\u2014\u83b7\u53d6\u88c5\u5907",onlyOne:!1},i[a.refine_getequip]={eventKey:"video",eventValue:"refine_getequip",info:"\u5408\u6210\u2014\u2014\u514d\u8d39\u83b7\u5f97\u88c5\u5907",onlyOne:!1},i[a.time_1]={eventKey:"time",eventValue:"time_1",info:"\u5728\u7ebf\u65f6\u957f\u8fbe\u52301m",onlyOne:!0},i[a.time_3]={eventKey:"time",eventValue:"time_3",info:"\u5728\u7ebf\u65f6\u957f\u8fbe\u52303m",onlyOne:!0},i[a.time_5]={eventKey:"time",eventValue:"time_5",info:"\u5728\u7ebf\u65f6\u957f\u8fbe\u52305m",onlyOne:!0},i[a.time_7]={eventKey:"time",eventValue:"time_7",info:"\u5728\u7ebf\u65f6\u957f\u8fbe\u52307m",onlyOne:!0},i[a.time_10]={eventKey:"time",eventValue:"time_10",info:"\u5728\u7ebf\u65f6\u957f\u8fbe\u523010m",onlyOne:!0},i[a.time_12]={eventKey:"time",eventValue:"time_12",info:"\u5728\u7ebf\u65f6\u957f\u8fbe\u523012m",onlyOne:!0},i[a.time_15]={eventKey:"time",eventValue:"time_15",info:"\u5728\u7ebf\u65f6\u957f\u8fbe\u523015m",onlyOne:!0},i[a.time_20]={eventKey:"time",eventValue:"time_20",info:"\u5728\u7ebf\u65f6\u957f\u8fbe\u523020m",onlyOne:!0},i),cc._RF.pop()},{}],TrackData:[function(t,e,o){"use strict";cc._RF.push(e,"9c631X3YHpLT4DJJ6t4c0QE","TrackData");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.TrackData=void 0;var s=a("BaseData"),c=a("BasePlatform"),l=a("HttpMgr"),u=a("PlatformManager"),p=a("SdkMgr"),d=a("TimeUtils"),g=a("Utils"),h=a("Config"),f=a("PlayerMgr"),y=a("TrackDataEvent"),m=function(){this.abName=null,this.isGet=!1,this.versionName=null,this.appStore=0,this.iCountStore=0,this.iCountHC=0},v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ecrypt=!1,e.gameKey=h.GameConfig.AppCacheName+"trackdata",e.eventCF={},e}return r(e,t),e.prototype.createData=function(){return this.data=new m,this.data.versionName=this.getVersionConf(),this.saveData(),this.data},e.prototype.initData=function(){this.eventCF=y.EventCF},e.prototype.getVersionName=function(){return this.data.versionName?this.data.versionName:this.getVersionConf()},e.prototype.getVersionConf=function(){var t=u.UM_VERSION.versionName,e=p.SdkMgr.getInstance().getSwitchVersion(t);return e||(e="1.0.0"),String(e)},e.prototype.getSdkAbName=function(t,e){var o=this;null!=this.data.abName&&this.data.isGet?e&&e(this.data.abName):this.requestAbName(t,function(t){o.data.isGet=!0,o.data.abName=null==t?"C":t,e&&e(o.data.abName),o.saveData()})},e.prototype.setToAppStore=function(){this.data.appStore=1,this.saveData()},e.prototype.getToAppStore=function(){return 1==this.data.appStore},e.prototype.getAbType=function(){return this.data.abName?this.data.abName:"C"},e.prototype.requestAbName=function(t,e){var o=this;if(t==f.ABTestType.NO_AB&&(this.abTestUser="C"),u.PlatformManager.currentPlatform==c.Platform.EDITOR){var i=window.location.href.split("?abType=");if(i.length>1)this.abTestUser=i[i.length-1];else{var a=["C"];t==f.ABTestType.AB_Test?a=["A","B"]:t==f.ABTestType.AD_Test?a=["A","D"]:t==f.ABTestType.ABD_Test&&(a=["A","B","D"]);var n=g.Utils.randomRang(0,a.length);this.abTestUser=a[n]}}t==f.ABTestType.A_fixed||u.PlatformManager.currentPlatform==c.Platform.ANDROID_TAP||u.PlatformManager.currentPlatform==c.Platform.WEB_LINK||u.PlatformManager.currentPlatform==c.Platform.ANDROID_233||u.PlatformManager.currentPlatform==c.Platform.GOOGLE?this.abTestUser="A":t==f.ABTestType.B_fixed?this.abTestUser="B":t==f.ABTestType.D_fixed&&(this.abTestUser="D"),this.abTestUser?e(this.abTestUser):l.HttpMgr.getInstance().httpPost({appId:u.PlatformInfo.APP_ID,platform:u.PlatformManager.currentPlatform},function(t){if(null==t)o.abTestUser="C";else{var i,a=JSON.parse(t);i=1==a.data?["A","B","D"]:2==a.data?["A"]:3==a.data?["B"]:4==a.data?["D"]:5==a.data?["A","B"]:6==a.data?["A","D"]:7==a.data?["B","D"]:["C"],o.abTestUser=i[Math.floor(Math.random()*i.length)]}e&&e(o.abTestUser)},"https://yuema.sfplay.net:9090/getPlatformInfo2")},e.prototype.youmengTrack=function(t,e,o){var i=this.eventCF[t],a=!0,n=i.eventValue;if(e&&(n+=e),o&&(n=n+"_"+o),!i.condition||!this.data[i.condition]){if(i.preEvent&&!e){if(!this.data[i.preEvent])return}else if(i.preEvent&&e&&!this.data[i.preEvent+e])return;if(i.onlyOne&&this.data[i.eventKey+n]&&(a=!1),!(a&&i.saveKey&&this.data[i.eventKey+i.eventValue])){if(t==y.TrackId.dau){var r=this.data[i.eventKey+i.eventValue];if(r){var s=Number(r);if(d.TimeUtils.compareIsToday(s))return;a=!0}else a=!0}a&&(i.onlyOne&&(i.saveKey?this.data[i.eventKey+i.eventValue]=1:this.data[i.eventKey+n]=1,t==y.TrackId.dau&&(this.data[i.eventKey+i.eventValue]=d.TimeUtils.GetTimeBySecond()),this.saveData()),this.data.abName||(this.data.abName="C",this.saveData()),u.PlatformManager.getInstance().youmengTrack(i.eventKey,"user"+this.data.abName,this.getVersionName()+"_"+n,i.info))}}},e.prototype.youmengTrackNew=function(){},e.prototype.testTrackTime=function(){},e.prototype.getCountStore=function(){return null==this.data.iCountStore&&(this.data.iCountStore=0),this.data.iCountStore},e.prototype.addCountStore=function(t){void 0===t&&(t=1),null==this.data.iCountStore&&(this.data.iCountStore=0),this.data.iCountStore+=t,this.saveData()},e.prototype.getCountHC=function(){return null==this.data.iCountHC&&(this.data.iCountHC=0),this.data.iCountHC},e.prototype.addCountHC=function(t){void 0===t&&(t=1),null==this.data.iCountHC&&(this.data.iCountHC=0),this.data.iCountHC+=t,this.saveData()},e}(s.BaseData);n.TrackData=v,cc._RF.pop()},{}],TranstaLabel:[function(t,e,o){"use strict";cc._RF.push(e,"67db1C8o05AUKGTeZFpIrDv","TranstaLabel");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("LanguageMgr"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){var t=this.node.getComponent(cc.Label);if(t)t.string=c.LanguageMgr.getInstance().T(t.string);else{var e=this.node.getComponent(cc.RichText);e&&(e.string=c.LanguageMgr.getInstance().T(e.string))}},e.prototype.refresh=function(){var t=this.node.getComponent(cc.Label);if(t)t.string=c.LanguageMgr.getInstance().T(t.string);else{var e=this.node.getComponent(cc.RichText);e&&(e.string=c.LanguageMgr.getInstance().T(e.string))}},s([u],e)}(cc.Component));n.default=p,cc._RF.pop()},{}],TranstanImg:[function(t,e,o){"use strict";cc._RF.push(e,"5bc64LzzcZE9b4RqZBUBYjc","TranstanImg");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("Appcfg"),l=a("LanguageMgr"),u=cc._decorator,p=u.ccclass,d=u.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.en=null,e.jp=null,e.fz=null,e}return r(e,t),e.prototype.start=function(){this.en&&(this.en.active=!1),this.jp&&(this.jp.active=!1),this.fz&&(this.fz.active=!1);var t=this.node.getComponent(cc.Sprite);l.LanguageMgr.getInstance().getCurrentLanguage()==c.LanguageType.en?(this.en.active=!0,t&&(t.spriteFrame=null)):l.LanguageMgr.getInstance().getCurrentLanguage()==c.LanguageType.jp?(this.jp.active=!0,t&&(t.spriteFrame=null)):l.LanguageMgr.getInstance().getCurrentLanguage()==c.LanguageType.zh_tw&&this.fz&&t&&(this.fz.active=!0,t.spriteFrame=null)},s([d({type:cc.Node,tooltip:"\u82f1\u6587"})],e.prototype,"en",void 0),s([d({type:cc.Node,tooltip:"\u65e5\u8bed"})],e.prototype,"jp",void 0),s([d({type:cc.Node,tooltip:"\u7e41\u4f53"})],e.prototype,"fz",void 0),s([p],e)}(cc.Component);n.default=g,cc._RF.pop()},{}],TweenMgr:[function(t,e,o){"use strict";cc._RF.push(e,"e0af6vJW8VNUp73n+Lz+E7o","TweenMgr");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.TweenMgr=void 0;var a=function(){function t(){this.twenMap=new Map}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getTween=function(t){this.twenMap.has(t.uuid)&&this.stopTween(t);var e=cc.tween(t);return this.twenMap.set(t.uuid,e),e},t.prototype.stopTween=function(t){this.twenMap.has(t.uuid)&&(this.twenMap.get(t.uuid).stop(),this.twenMap.delete(t.uuid))},t.prototype.playHeartAni=function(t){var e=this.getTween(t);this.heartani(e)},t.prototype.heartani=function(t){t.to(.3,{scale:1.04}).to(.2,{scale:.98}).delay(.4).to(.1,{scale:1.05}).to(.2,{scale:.95}).union().repeatForever().start()},t.prototype.popOpenAin=function(t,e){t.to(.1,{scale:.9}).to(.05,{scale:1.1}).to(.1,{scale:1}).call(function(){e&&e()}).start()},t.prototype.popCloseAin=function(t,e){t.stop(),t.to(.1,{scale:0}).call(function(){e&&e()}).start()},t.prototype.stampAni=function(t){t.scale=t.scale+1,cc.tween(t).to(.2,{scale:1}).start()},t.prototype.anglesAni=function(t,e){void 0===e&&(e=1);var o=this.getTween(t);o.by(.5,{angle:20}).by(.5,{angle:-20}).delay(.5).by(.2,{angle:10}).by(.2,{angle:-10}).delay(.1).union(),-1==e?o.repeatForever():o.repeat(e),o.start()},t.prototype.jumpAniForever=function(t,e){void 0===e&&(e=.2);var o=this.getTween(t);o.by(.2,{position:new cc.Vec3(0,-10,0)}).by(.2,{position:new cc.Vec3(0,10,0)}).delay(e).union().repeatForever(),o.start()},t.prototype.sharkAni=function(t,e){void 0===e&&(e=1);var o=this.getTween(t);o.by(.01,{position:new cc.Vec3(2,2,0)}).by(.01,{position:new cc.Vec3(-2,-2,0)}).union(),-1==e?o.repeatForever():o.repeat(e),o.start()},t.prototype.quickBigAndSmallAni=function(t,e){void 0===e&&(e=function(){}),t.scale=1,this.getTween(t).to(.15,{scale:1.3}).to(.08,{scale:1}).call(function(){e&&e()}).start()},t.prototype.rollLabAnim=function(t,e,o,i,a){if(void 0===a&&(a=function(){}),cc.isValid(e)){var n=Math.abs(i-o),r=Math.ceil(n/10),s=n/r;e.string=""+o;var c=o;this.getTween(e.node).call(function(){t?(c+=r)>=i&&(c=i):(c-=r)<=i&&(c=i),e.string=""+c}).delay(.05).union().repeat(s).call(function(){a&&a()}).start()}},t.prototype.rollBarAnim=function(t,e,o,i,a){if(void 0===a&&(a=function(){}),cc.isValid(e)){var n=Math.abs(i-o)/.1;e.fillRange=o;var r=o;this.getTween(e.node).call(function(){t?(r+=.1)>=i&&(r=i):(r-=.1)<=i&&(r=i),e.fillRange=r}).delay(.05).union().repeat(n).call(function(){a&&a()}).start()}},t.prototype.animUpLv=function(t){cc.isValid(t)&&cc.tween(t).repeatForever(cc.tween().by(.1,{y:3}).by(.2,{y:-6}).by(.1,{y:3})).start()},t.prototype.newHeartAnim=function(t){var e=t.scale;this.getTween(t).to(.3,{scale:1.04*e}).to(.2,{scale:.98*e}).delay(.4).to(.1,{scale:1.05*e}).to(.2,{scale:.95*e}).union().repeatForever().start()},t.prototype.playLightAni=function(t,e,o){var i=e||360,a=o||10;this.getTween(t).by(a,{angle:i}).repeatForever().start()},t.prototype.playBlinkAnim=function(t){this.getTween(t).to(.5,{opacity:0}).to(.5,{opacity:255}).union().repeatForever().start()},t}();i.TweenMgr=a,cc._RF.pop()},{}],UIBecoming:[function(t,e,o){"use strict";cc._RF.push(e,"fe62b0EphBM2aLqaqkVDBRk","UIBecoming");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.close=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){var t=this;this.close.on(cc.Node.EventType.TOUCH_END,function(){t.closeUI()})},s([p(cc.Label)],e.prototype,"label",void 0),s([p(cc.Node)],e.prototype,"close",void 0),s([p],e.prototype,"text",void 0),s([u],e)}(c.default);n.default=d,cc._RF.pop()},{}],UICollection:[function(t,e,o){"use strict";cc._RF.push(e,"3ff90UVvllIJKgRvfHLu1cT","UICollection");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("SdkMgr"),u=a("TweenMgr"),p=a("TimeUtils"),d=a("CommonCfg"),g=a("ComDataMgr"),h=a("ComPlayerMgr"),f=cc._decorator,y=f.ccclass,m=f.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnClose=null,e.timeNode=null,e.itemLayout=null,e.spriteBar=null,e.processNum=null,e.giftNode=null,e.tipNode=null,e.tipText=null,e.rootAddClick=!1,e}return r(e,t),e.prototype.start=function(){this.addEvent(d.CommonEventName.RefreshCollection,this.refreshItemData),this.collectionData=h.ComPlayerMgr.getInstance().getCollectionData(),this.initBtnListener(),this.initTimeData(),this.initData(),this.initBottomData(),this.giftLayoutPos=this.giftNode.getPosition()},e.prototype.initTimeData=function(){var t=this,e=this.collectionData.getEndtime();if(-1==e)this.timeNode.active=!1;else{var o=e-p.TimeUtils.GetTimeBySecond(),i=this.timeNode.getChildByName("timeLable").getComponent(cc.Label);o<=0?(i.string="00:00:00",this.collectionData.refreData()):(i.string=p.TimeUtils.SecondToHours(o),i.schedule(function(){var o=e-p.TimeUtils.GetTimeBySecond();o>0?i.string=p.TimeUtils.SecondToHours(o):(i.unscheduleAllCallbacks(),i.string="00:00:00",t.collectionData.refreData(),t.refreshItemData())},1,cc.macro.REPEAT_FOREVER))}},e.prototype.initData=function(t){var e=this;void 0===t&&(t=!0);for(var o=function(o){var a=i.itemLayout.children[o],n=i.collectionData.getCollectionData(o);if(null==n)return a.getChildByName("empty").active=!0,"continue";a.getChildByName("empty").active=!1,a.name=n.id+"";var r=a.getChildByName("btnOk");u.TweenMgr.getInstance().stopTween(r);var s=void 0;n.isGet?s="button/btn_finished":n.finished&&!n.isGet?(s="button/btn_submit",u.TweenMgr.getInstance().playHeartAni(r)):n.adTip?(s="button/btn_adtips",n.isTips&&(s="button/btn_tips")):s="button/btn_adget";var c=a.getChildByName("icon"),l=a.getChildByName("process").getComponent(cc.Label),p=g.ComDataMgr.getInstance().getCollectionItemById(n.itemId);l.string=n.num+"/"+p.needNum;var d=g.ComDataMgr.getInstance().getGoodsById(n.goodId);i.loadSpriteFrame(d.bundleName,d.rewardIcon,function(t){c.getComponent(cc.Sprite).spriteFrame=t}),i.loadSpriteFrame("comimgs",s,function(t){r.getComponent(cc.Sprite).spriteFrame=t}),t&&r.on(cc.Node.EventType.TOUCH_END,function(){e.clickItem(n.id,a)})},i=this,a=0;a<this.itemLayout.childrenCount;a++)o(a)},e.prototype.initBottomData=function(){var t=this,e=this.collectionData.getProcess(),o=this.collectionData.getAllCollectionData();this.processNum.string=e+"/"+o.length,this.spriteBar.fillRange=e/o.length,this.collectionData.data.isGet?this.giftNode.active=!1:(this.giftNode.targetOff(cc.Node.EventType.TOUCH_END),u.TweenMgr.getInstance().stopTween(this.giftNode),this.spriteBar.fillRange>=1&&(u.TweenMgr.getInstance().jumpAniForever(this.giftNode),this.giftNode.on(cc.Node.EventType.TOUCH_END,function(){u.TweenMgr.getInstance().stopTween(t.giftNode);var e=t.collectionData.getCurrentReward();e&&cc.tween(t.giftNode).to(.8,{position:new cc.Vec3(0,400)}).call(function(){t.openUI(d.ComUIID.UIReward,e),t.giftNode.setPosition(t.giftLayoutPos),t.collectionData.receiveTaskReward(function(e){e?t.refreshItemData():t.giftNode.active=!1})}).start()})))},e.prototype.clickItem=function(t,e){var o=this,i=this.collectionData.getCollectionData(t);if(!i.isGet){var a=e.getChildByName("btnOk"),n=g.ComDataMgr.getInstance().getCollectionItemById(i.itemId);if(i.finished){if(n&&n.comit){var r=e.convertToWorldSpaceAR(cc.Vec2.ZERO);h.ComPlayerMgr.getInstance().checkOpenReward(n.comit,r,!1)}return this.collectionData.finishData(t),this.loadSpriteFrame("comimgs","button/btn_finished",function(t){a.getComponent(cc.Sprite).spriteFrame=t}),u.TweenMgr.getInstance().stopTween(a),void this.initBottomData()}i.isTips&&i.adTip?this.popTips(e,t,n.tips):l.SdkMgr.getInstance().playVideo(l.AdType.Collection,function(){i.adTip?(o.collectionData.addAdTips(t),o.loadSpriteFrame("comimgs","button/btn_tips",function(t){a.getComponent(cc.Sprite).spriteFrame=t}),o.popTips(e,t,n.tips)):o.collectionData.addData(i.goodId,n.getNum,!0)})}},e.prototype.popTips=function(t,e,o){var i=this;this.tipText.unscheduleAllCallbacks();var a=t.convertToWorldSpaceAR(cc.Vec2.ZERO),n=this.tipNode.parent.convertToNodeSpaceAR(a);this.tipNode.setPosition(n);var r=!0;2==e||5==e?(r=!1,this.tipNode.scaleX=-1,this.tipText.node.scaleX=-.5):(r=!0,this.tipNode.scaleX=1,this.tipText.node.scaleX=.5),this.tipText.string=o,this.tipNode.active=!0;var s=this.node.getChildByName("root");this.rootAddClick||(this.rootAddClick=!0,s.on(cc.Node.EventType.TOUCH_START,function(){i.tipNode.active=!1})),r?this.popRightTween?this.popRightTween.start():(this.popRightTween=cc.tween(this.tipNode).to(.1,{scaleX:.9}).to(.05,{scaleX:1.1}).to(.1,{scaleX:1}),this.popRightTween.start()):this.popLeftTween?this.popLeftTween.start():(this.popLeftTween=cc.tween(this.tipNode).to(.1,{scaleX:-.9}).to(.05,{scaleX:-1.1}).to(.1,{scaleX:-1}),this.popLeftTween.start()),this.tipText.scheduleOnce(function(){i.popDis=cc.tween(i.tipNode).to(.5,{opacity:122}).call(function(){i.tipNode.active=!1,i.tipNode.opacity=255}).start()},2)},e.prototype.refreshItemData=function(){this.initData(!1),this.initBottomData(),this.initTimeData()},e.prototype.initBtnListener=function(){var t=this;this.btnClose.on(cc.Node.EventType.TOUCH_END,function(){t.closeUI()})},e.prototype.onClose=function(){this.unscheduleAllCallbacks()},s([m(cc.Node)],e.prototype,"btnClose",void 0),s([m(cc.Node)],e.prototype,"timeNode",void 0),s([m(cc.Node)],e.prototype,"itemLayout",void 0),s([m(cc.Sprite)],e.prototype,"spriteBar",void 0),s([m(cc.Label)],e.prototype,"processNum",void 0),s([m(cc.Node)],e.prototype,"giftNode",void 0),s([m(cc.Node)],e.prototype,"tipNode",void 0),s([m(cc.Label)],e.prototype,"tipText",void 0),s([y],e)}(c.default);n.default=v,cc._RF.pop()},{}],UICompositeEnd:[function(t,e,o){"use strict";cc._RF.push(e,"fccd1EhGPVDqKI1bIooHQUB","UICompositeEnd");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("AudioMgr"),u=a("Utils"),p=a("Config"),d=a("DataMgr"),g=a("EquipMgr"),h=cc._decorator,f=h.ccclass,y=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpUp=null,e.SpDown=null,e.BtnContinue=null,e.NodeEquip=null,e.NodeStar=null,e.LabName=null,e.LayoutProp=null,e.LayoutNodeProp=null,e.curEquipData=null,e.callbackEnd=null,e}return r(e,t),e.prototype.init=function(t,e){this.curEquipData=t,this.callbackEnd=e},e.prototype.start=function(){this.registerBtnEvent(),this.initView()},e.prototype.registerBtnEvent=function(){var t=this;this.BtnContinue.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()})},e.prototype.initData=function(){},e.prototype.initView=function(){var t=this;l.AudioMgr.getInstance().playEffect(p.AudioId.Sound_Victory);for(var e=this.curEquipData.starLevel?this.curEquipData.starLevel:1,o=0;o<this.NodeStar.childrenCount;o++)e>o?cc.isValid(this.NodeStar.children[o])&&(this.NodeStar.children[o].getChildByName("SpStar").active=!0):cc.isValid(this.NodeStar.children[o])&&(this.NodeStar.children[o].getChildByName("SpStar").active=!1);var i=d.DataMgr.getInstance().getEquipCfg(this.curEquipData.id);if(this.loadSpriteFrame(i.bundleQuality,i.iconQuality,function(e){t.NodeEquip.getComponent(cc.Sprite).spriteFrame=e}),this.loadSpriteFrame(i.bundle,i.equipIcon,function(e){t.NodeEquip.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=e}),this.LabName.string=i.equipName,i.LvAtk){var a=u.Utils.getTabelArr(i.atk),n=u.Utils.getTabelArr(i.LvAtk),r=["0","0"];if(this.curEquipData.starLevel&&this.curEquipData.starLevel>0){var s=d.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel);r=u.Utils.getTabelArr(s.atk)}var c=Number(a[0])+Number(n[0])*this.curEquipData.strengthenLv+Number(r[0]),g=Number(a[1])+Number(n[1])*this.curEquipData.strengthenLv+Number(r[1]),h=this.LayoutProp.getChildByName("LayoutProp1");cc.isValid(h)||((h=cc.instantiate(this.LayoutNodeProp)).parent=this.LayoutProp,h.name="LayoutProp1"),h.getChildByName("LabProp").getComponent(cc.RichText).string="<color=#ffffff>\u653b\u51fb\u529b\uff1a</c><color=#3bacf3>"+c+"~"+g+"</color>",this.loadPropChange(8,h)}if(i.LvHp){var f=this.curEquipData.starLevel?d.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).hp:0;this.addPropNode(9,i.hp+i.LvHp*this.curEquipData.strengthenLv+f)}i.atkSpeed&&(f=this.curEquipData.starLevel?d.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).atkSpeed:0,this.addPropNode(3,i.atkSpeed+f)),i.atkCrazyProb&&(f=this.curEquipData.starLevel?d.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).atkCrazyProb:0,this.addPropNode(4,i.atkCrazyProb+f)),i.atkCrazyHurt&&(f=this.curEquipData.starLevel?d.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).atkCrazyHurt:0,this.addPropNode(5,i.atkCrazyHurt+f)),i.subHurt&&(f=this.curEquipData.starLevel?d.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).subHurt:0,this.addPropNode(6,i.subHurt+f)),i.dodgeHurtProb&&(f=this.curEquipData.starLevel?d.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).dodgeHurtProb:0,this.addPropNode(7,i.dodgeHurtProb+f))},e.prototype.addPropNode=function(t,e){var o=this.LayoutProp.getChildByName("LayoutProp"+t);cc.isValid(o)||((o=cc.instantiate(this.LayoutNodeProp)).parent=this.LayoutProp,o.name="LayoutProp"+t);var i=g.default.getInstance().getPropNameForPropType(t);o.getChildByName("LabProp").getComponent(cc.RichText).string="<color=#ffffff>"+i+"\uff1a</c><color=#3bacf3>"+e+g.default.getInstance().getPropPercent(t)+"</color>",this.loadPropChange(t,o)},e.prototype.loadPropChange=function(t,e){var o=e.getChildByName("SpChange"),i=e.getChildByName("LabChange");if(cc.isValid(o)&&cc.isValid(i)){var a=0,n=d.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel);if(8==t){var r=u.Utils.getTabelArr(n.atk);a=(Number(r[1])+Number(r[0]))/2-0}else 9==t?a=n.hp-0:3==t?a=n.atkSpeed-0:4==t?a=n.atkCrazyProb-0:5==t?a=n.atkCrazyHurt-0:6==t?a=n.subHurt-0:7==t&&(a=n.dodgeHurtProb-0);0==a?(o.active=!1,i.active=!1):(o.getComponent(cc.Sprite).spriteFrame=a>0?this.SpUp:this.SpDown,i.color=a>0?cc.color(64,220,47):cc.color(246,47,0),i.getComponent(cc.Label).string=""+Math.ceil(Math.abs(a)))}else console.log("\u4e0d\u5b58\u5728\uff01\uff01\uff01")},e.prototype.closeView=function(){this.callbackEnd&&this.callbackEnd(),this.closeUI()},s([y(cc.SpriteFrame)],e.prototype,"SpUp",void 0),s([y(cc.SpriteFrame)],e.prototype,"SpDown",void 0),s([y(cc.Node)],e.prototype,"BtnContinue",void 0),s([y(cc.Node)],e.prototype,"NodeEquip",void 0),s([y(cc.Node)],e.prototype,"NodeStar",void 0),s([y(cc.Label)],e.prototype,"LabName",void 0),s([y(cc.Node)],e.prototype,"LayoutProp",void 0),s([y({type:cc.Node,tooltip:"\u5c5e\u6027\u8282\u70b9"})],e.prototype,"LayoutNodeProp",void 0),s([f],e)}(c.default);n.default=m,cc._RF.pop()},{}],UIDrawCard:[function(t,e,o){"use strict";cc._RF.push(e,"13d30pxLxJDq5os3dbBUegW","UIDrawCard");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("EventMgr"),u=a("SdkMgr"),p=a("TweenMgr"),d=a("TimeUtils"),g=a("Utils"),h=a("Main"),f=a("Config"),y=a("TrackDataEvent"),m=a("DataMgr"),v=a("GameDataMgr"),I=a("PlayerMgr"),k=a("UIGuide"),S=cc._decorator,C=S.ccclass,b=S.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SkillBookPre=null,e.SkillBookPreNew=null,e.SpSkillProb=null,e.contentSkillSele=null,e.BtnFreeRefresh=null,e.BtnVideoRefresh=null,e.BtnVideoBoth=null,e.BtnLookSkill=null,e.LabSkillBookDec=null,e.LabSkillCount=null,e.LabFetterCount=null,e.callback=function(){},e.skillBookList=[],e.curSkillBookIdArr=[],e.abType="A",e}return r(e,t),e.prototype.init=function(t){this.callback=t||function(){}},e.prototype.onLoad=function(){this.initAbTypeData(),this.registerEvent(),this.randomSkillBook()},e.prototype.initAbTypeData=function(){this.abType=I.PlayerMgr.getInstance().getTrackData().getAbType()},e.prototype.guideShow=function(){var t=I.PlayerMgr.getInstance().geUserData();if(1==t.getCurSec()&&1==t.getEnterFirstSecCount()){var e=I.PlayerMgr.getInstance().getGuideData();if(!e.getGuideEnd()){var o=e.getCurrentId();if(o==2+e.putGuideNum)(i=new k.GuildCfg).distNode=this.contentSkillSele.children[1],i.tipstring="\u6bcf\u901a\u8fc7\u4e00\u5173\uff0c\u90fd\u53ef\u9009\u62e9<color=#ff6b1b>\u4e00\u9879\u6280\u80fd</color>\u63d0\u5347\u89d2\u8272\u5c5e\u6027\uff01\n<color=#ff6b1b>\uff08\u5df2\u7ecf\u62e5\u6709\u7684\u6280\u80fd\u624d\u4f1a\u51fa\u73b0\u5662\uff09</color>",i.yDec=-350,i.handIndex=cc.v2(50,50),i.addSize=cc.size(0,80),this.openUICallBack(f.UIID.UIGuide,function(){e.addCurrentId()},i);else if(o==3+e.putGuideNum)(i=new k.GuildCfg).distNode=this.contentSkillSele.children[0],i.tipstring="\u8fd0\u6c14\u4e0d\u9519\uff01\u51fa\u4e86<color=#ff6b1b>\u9ad8\u54c1\u8d28\u7684\u6280\u80fd</color>\u5462\uff01",i.yDec=-350,i.handIndex=cc.v2(50,50),i.addSize=cc.size(0,80),this.openUICallBack(f.UIID.UIGuide,function(){e.addCurrentId()},i);else if(o==5+e.putGuideNum)(i=new k.GuildCfg).distNode=this.contentSkillSele.children[1],i.tipstring="\u518d\u4fee\u70bc<color=#ff6b1b>2\u6b21\u5df2\u5b66\u4e60\u7684\u6280\u80fd</color>\uff0c\u53ef\u4ee5\u628a\u6280\u80fd<color=#ff6b1b>\u5347\u661f</color>\uff0c<color=#ff6b1b>\u6548\u679c\u5927\u5e45\u63d0\u5347</color>\u5662\uff01",i.yDec=-350,i.handIndex=cc.v2(50,50),i.addSize=cc.size(0,80),this.openUICallBack(f.UIID.UIGuide,function(){e.addCurrentId()},i);else if(o==6+e.putGuideNum){var i;(i=new k.GuildCfg).distNode=this.contentSkillSele.children[2],i.tipstring="\u518d\u4fee\u70bc1\u6b21\uff0c\u6280\u80fd\u5c31\u80fd\u5347\u52302\u661f\u4e86\uff01\n\u90e8\u5206\u6280\u80fd<color=#ff6b1b>\u5347\u81f32\u661f</color>\u540e\uff0c\u53ef\u83b7\u5f97\u5f3a\u5927\u7684<color=#ff6b1b>\u62db\u5f0f</color>\u5662",i.yDec=-350,i.handIndex=cc.v2(50,50),i.addSize=cc.size(0,80),this.openUICallBack(f.UIID.UIGuide,function(){e.addCurrentId()},i)}}}},e.prototype.start=function(){this.trackEvent(),this.registerBtnEvent(),this.carryCallback(),this.initData(),this.initView()},e.prototype.trackEvent=function(){"B"!=I.PlayerMgr.getInstance().getAbType()&&(I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.guide7_1),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.guide6_1)),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.guide4_1),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.guide3_1)},e.prototype.carryCallback=function(){this.callback&&this.callback()},e.prototype.registerEvent=function(){this.addEvent(f.EventName.ControlDrawCardView,this.controlCurViewActive),this.sendEvent(f.EventName.OpenRecoverTrudge)},e.prototype.registerBtnEvent=function(){var t=this;this.BtnFreeRefresh.on(cc.Node.EventType.TOUCH_END,function(){I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.click_getrefreshtime),t.randomSkillBook(),v.default.getInstance().skillBookRefreshCount--,t.refreshFreeCount(),t.refreshSkillBook(),v.default.getInstance().skillBookRefreshCount<=0&&t.initRefreshBtn()}),this.BtnVideoRefresh.on(cc.Node.EventType.TOUCH_END,function(){var e=d.TimeUtils.GetTimeBySecond(),o=d.TimeUtils.GetTimeByHours2();u.SdkMgr.getInstance().playVideo(1,function(){var i=d.TimeUtils.GetTimeBySecond(),a=d.TimeUtils.GetTimeByHours2();I.PlayerMgr.getInstance().getTrackData().testTrackTime("getrefreshtime",o,a,e,i),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.getrefreshtime),I.PlayerMgr.getInstance().getTrackData().youmengTrackNew("getrefreshtime_b"),v.default.getInstance().skillBookRefreshCount+=Number(m.DataMgr.getInstance().getParamsCfgForSingle(f.EnumParams.SkillBookRefreshCountForVideo).value),t.initRefreshBtn()})}),this.BtnVideoBoth.on(cc.Node.EventType.TOUCH_END,function(){var e=d.TimeUtils.GetTimeBySecond(),o=d.TimeUtils.GetTimeByHours2();u.SdkMgr.getInstance().playVideo(1,function(){var i=d.TimeUtils.GetTimeBySecond(),a=d.TimeUtils.GetTimeByHours2();I.PlayerMgr.getInstance().getTrackData().testTrackTime("getallskill",o,a,e,i),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.getallskill),I.PlayerMgr.getInstance().getTrackData().youmengTrackNew("getallskill_b"),1==I.PlayerMgr.getInstance().geUserData().getIsFirstBothNeed()&&I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.getall_get),v.default.getInstance().skillBookBothBtnForWeight();for(var n=1;n<=3;n++)t.sendEvent(f.EventName.AddSkillBook,t.curSkillBookIdArr[n-1]),3==n&&(h.default.instance.isFastPass?setTimeout(function(){v.default.getInstance().setGameState(f.EnumGameState.GameDoing),l.EventMgr.getInstance().emit(f.EventName.GameLayerTouch,!1)},500):(v.default.getInstance().setGameState(f.EnumGameState.GameDoing),l.EventMgr.getInstance().emit(f.EventName.GameLayerTouch,!1),h.default.instance.bossComeOn(),l.EventMgr.getInstance().emit(f.EventName.GameGuideShow)));t.closeView()})}),this.BtnLookSkill.on(cc.Node.EventType.TOUCH_END,function(){h.default.instance.isFastPass&&t.sendEvent(f.EventName.GameLayerTouch,!1),t.sendEvent(f.EventName.ControlBackSelectSkill,!0),t.controlCurViewActive(!1)})},e.prototype.initData=function(){var t=g.Utils.getTabelArr(m.DataMgr.getInstance().getParamsCfgForSingle(f.EnumParams.AddSkillBookRefreshCount).value);(I.PlayerMgr.getInstance().geUserData().getCurLevel()-1)%Number(t[0])==0&&(v.default.getInstance().skillBookRefreshCount+=Number(t[1]))},e.prototype.initView=function(){this.initDec(),this.initRefreshBtn(),this.initBothBtn(),this.refreshSkillBook(),this.refreshSkillBookAndFetterCount(),this.refreshSkillBookQualityWeight()},e.prototype.initRefreshBtn=function(){this.BtnFreeRefresh.active=v.default.getInstance().skillBookRefreshCount>0,this.BtnVideoRefresh.active=v.default.getInstance().skillBookRefreshCount<=0,this.refreshFreeCount()},e.prototype.initBothBtn=function(){var t=I.PlayerMgr.getInstance().geUserData(),e=g.Utils.weight_randSingle(v.default.getInstance().weightFoBothBtn);this.BtnVideoBoth.active=e,e&&(t.addIsFirstBothNeed(),1==t.getIsFirstBothNeed()&&I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.getall_appear)),v.default.getInstance().weightFoBothBtn+=v.default.getInstance().weightAddForBothBtn,p.TweenMgr.getInstance().playHeartAni(this.BtnVideoBoth)},e.prototype.refreshSkillBookQualityWeight=function(){for(var t,e=m.DataMgr.getInstance().getSkillBookProbCfg(),o=I.PlayerMgr.getInstance().geUserData().getCurLevel(),i=0;i<e.length;i++){var a=g.Utils.getTabelArr(e[i].levelRange);if(o>=Number(a[0])&&o<=Number(a[1])){t=e[i];break}}for(i=0;i<this.SpSkillProb.childrenCount;i++)this.SpSkillProb.children[i].getComponent(cc.Label).string="\xb7"+v.default.getInstance().selectPropNum(t,i+1)+"%"},e.prototype.initDec=function(){var t=g.Utils.getTabelArr(m.DataMgr.getInstance().getParamsCfgForSingle(f.EnumParams.AddSkillBookRefreshCount).value),e=Number(m.DataMgr.getInstance().getParamsCfgForSingle(f.EnumParams.SkillBookRefreshCountForVideo).value);this.BtnVideoRefresh.getChildByName("LabVideoRefresh").getComponent(cc.Label).string="\u5237\u65b0\u6b21\u6570+"+e,this.LabSkillBookDec.string="\u5237\u65b0\u6280\u80fd\u6b21\u6570\uff1a\u6bcf\u901a\u8fc7"+t[0]+"\u5173+"+t[1]+"\u6b21\uff0c\u89c6\u9891\u83b7\u53d6+"+e+"\u6b21"},e.prototype.refreshSkillBookAndFetterCount=function(){this.LabSkillCount.string="\u4fee\u70bc\u6280\u80fd\u603b\u6570\u91cf\uff1a<color = #e24f00>"+v.default.getInstance().getSkillBookDataArr().length+"/"+v.default.getInstance().curTotalSkillBookCount+"</color>",this.LabFetterCount.string="\u89e3\u9501\u7f81\u7eca\u603b\u6570\u91cf\uff1a<color = #e24f00>"+v.default.getInstance().getFetterSuitCount()+"</color>"},e.prototype.randomSkillBook=function(){(!this.curSkillBookIdArr||this.curSkillBookIdArr.length>0)&&(this.curSkillBookIdArr=[]);var t=I.PlayerMgr.getInstance().geUserData();if(1!=t.getCurSec()||1!=t.getEnterFirstSecCount())for(var e=0;e<3;e++){var o=I.PlayerMgr.getInstance().geUserData().getCurLevel(),i=this.randomSkillBookId(o);this.curSkillBookIdArr.push(i)}else 1==(o=t.getCurLevel())?this.curSkillBookIdArr=[16,34,53]:2==o?this.curSkillBookIdArr=[8,48,14]:3==o?this.curSkillBookIdArr=[16,8,53]:4==o&&(this.curSkillBookIdArr=[16,53,8])},e.prototype.randomSkillBookId=function(t){var e=v.default.getInstance().randomSkillBook(t);return this.isExistSkillBookId(e)?this.randomSkillBookId(t):v.default.getInstance().isFullStarForSkillBookId(e)?this.randomSkillBookId(t):e},e.prototype.isExistSkillBookId=function(t){this.curSkillBookIdArr||(this.curSkillBookIdArr=[]);for(var e=0;e<this.curSkillBookIdArr.length;e++)if(t==this.curSkillBookIdArr[e])return!0;return!1},e.prototype.refreshFreeCount=function(){this.BtnFreeRefresh.getChildByName("LabFreeCount").getComponent(cc.Label).string="\u5269\u4f59"+v.default.getInstance().skillBookRefreshCount+"\u6b21"},e.prototype.refreshSkillBook=function(){var t=this;if(!this.skillBookList||this.skillBookList.length<=0)for(var e=function(e){o.scheduleOnce(function(){var o=m.DataMgr.getInstance().getSkillBook(t.curSkillBookIdArr[e]);t.refreshSkillBook2(o,e),2==e&&t.guideShow()},.02*e)},o=this,i=0;i<3;i++)e(i);else{var a=function(e){n.scheduleOnce(function(){var o=m.DataMgr.getInstance().getSkillBook(t.curSkillBookIdArr[e]);t.loadSkillBook(o,t.skillBookList[e])},.02*e)},n=this;for(i=0;i<this.skillBookList.length;i++)a(i)}},e.prototype.refreshSkillBook2=function(t,e){var o=this,i=this.SkillBookPreNew,a=cc.instantiate(i);a.active=!0,a.position=cc.v3(),a.name="NodeSkillBookBig"+(e+1),a.parent=this.contentSkillSele,this.skillBookList.push(a),this.loadSkillBook(t,a),a.on(cc.Node.EventType.TOUCH_END,function(){var t=e+1;"B"!=I.PlayerMgr.getInstance().getAbType()&&(I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.guide7),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.guide6)),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.guide4),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.guide3),o.sendEvent(f.EventName.AddSkillBook,o.curSkillBookIdArr[t-1]),h.default.instance.isFastPass?setTimeout(function(){v.default.getInstance().setGameState(f.EnumGameState.GameDoing),l.EventMgr.getInstance().emit(f.EventName.GameLayerTouch,!1)},500):(v.default.getInstance().setGameState(f.EnumGameState.GameDoing),l.EventMgr.getInstance().emit(f.EventName.GameLayerTouch,!1),h.default.instance.bossComeOn(),l.EventMgr.getInstance().emit(f.EventName.GameGuideShow)),o.closeView()})},e.prototype.loadSkillBook=function(t,e){if(t||(t=m.DataMgr.getInstance().getSkillBook(1)),cc.isValid(e)){var o=I.PlayerMgr.getInstance().geUserData().getSkillBookForId(t.id),i=m.DataMgr.getInstance().getSkillBookLevelCfg1(t.StartLevelID,o.level),a=m.DataMgr.getInstance().getSkillQuality(t.qualityId),n=m.DataMgr.getInstance().getFetter(t.fetterId1),r=m.DataMgr.getInstance().getFetter(t.fetterId2);this.loadSpriteFrame("iconImg",t.SkillIcon,function(t){e.getChildByName("SpSkillBook").getComponent(cc.Sprite).spriteFrame=t}),this.loadSpriteFrame(a.bundle,a.iconImg2,function(t){e.getChildByName("SpNameBg").getComponent(cc.Sprite).spriteFrame=t}),e.getChildByName("LabSkilllName").getComponent(cc.Label).string=t.name,e.getChildByName("LabName").getComponent(cc.Label).string=t.name;var s=g.Utils.getTabelArr(i.addProp1),c=i.skillBookDec.replace("%s",s[1]);e.getChildByName("LabBookProp").getComponent(cc.Label).string=c;var l=v.default.getInstance().getFetterNumForFetterId(t.fetterId1);e.getChildByName("SpBgfetter1").getChildByName("LabFetter1").getComponent(cc.Label).string=n.name+"("+l+")",this.loadSpriteFrame(n.bundle,n.iconImg,function(t){e.getChildByName("SpBgfetter1").getChildByName("SpFetter1").getComponent(cc.Sprite).spriteFrame=t});var u=v.default.getInstance().getFetterNumForFetterId(t.fetterId2);if(e.getChildByName("SpBgfetter2").getChildByName("LabFetter2").getComponent(cc.Label).string=r.name+"("+u+")",this.loadSpriteFrame(r.bundle,r.iconImg,function(t){e.getChildByName("SpBgfetter2").getChildByName("SpFetter2").getComponent(cc.Sprite).spriteFrame=t}),-1==v.default.getInstance().isExistSkillBookId(t.id))e.getChildByName("LabNotHave").active=!0,e.getChildByName("NodeGrade").active=!1,e.getChildByName("LabSkillCount").active=!1;else{e.getChildByName("LabNotHave").active=!1,e.getChildByName("NodeGrade").active=!0,e.getChildByName("LabSkillCount").active=!0;var p=v.default.getInstance().getStarNumForSkillBookId(t.id);3!=p[0]?e.getChildByName("LabSkillCount").getComponent(cc.Label).string=p[1]+"/"+p[2]:e.getChildByName("LabSkillCount").active=!1;for(var d=0;d<e.getChildByName("NodeGrade").children.length;d++){var h=e.getChildByName("NodeGrade").getChildByName("SpStarBg"+(d+1));p[0]>=d+1?h.getChildByName("SpStar").active=!0:h.getChildByName("SpStar").active=!1}}}},e.prototype.controlCurViewActive=function(t){this.node.active=t},e.prototype.closeView=function(){h.default.instance.controlObjectsAnim(!1),this.closeUI()},s([b({type:cc.Node,tooltip:"\u6280\u80fd\u4e66\u9884\u5236"})],e.prototype,"SkillBookPre",void 0),s([b({type:cc.Node,tooltip:"\u6280\u80fd\u4e66xin\u9884\u5236"})],e.prototype,"SkillBookPreNew",void 0),s([b({type:cc.Node,tooltip:"\u6280\u80fd\u4e66\u54c1\u8d28\u6982\u7387"})],e.prototype,"SpSkillProb",void 0),s([b(cc.Node)],e.prototype,"contentSkillSele",void 0),s([b(cc.Node)],e.prototype,"BtnFreeRefresh",void 0),s([b(cc.Node)],e.prototype,"BtnVideoRefresh",void 0),s([b(cc.Node)],e.prototype,"BtnVideoBoth",void 0),s([b(cc.Node)],e.prototype,"BtnLookSkill",void 0),s([b({type:cc.Label,tooltip:"\u6280\u80fd\u4e66\u83b7\u53d6\u63cf\u8ff0"})],e.prototype,"LabSkillBookDec",void 0),s([b({type:cc.RichText,tooltip:"\u6280\u80fd\u4e66\u6570\u91cf"})],e.prototype,"LabSkillCount",void 0),s([b({type:cc.RichText,tooltip:"\u7f81\u7eca\u6570\u91cf"})],e.prototype,"LabFetterCount",void 0),s([C],e)}(c.default);n.default=_,cc._RF.pop()},{}],UIEquipComposite:[function(t,e,o){"use strict";cc._RF.push(e,"d3f04ndWAxA+7aq+0sL8aOE","UIEquipComposite");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("BaseButton"),u=a("SdkMgr"),p=a("TweenMgr"),d=a("UIMgr"),g=a("Utils"),h=a("Main"),f=a("Config"),y=a("TrackDataEvent"),m=a("DataMgr"),v=a("EquipMgr"),I=a("PlayerMgr"),k=a("NodeEquipComposite"),S=cc._decorator,C=S.ccclass,b=S.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnBack=null,e.BtnComposite=null,e.NodeComposite=null,e.NodeCompositeEquip=null,e.NodeEquip=null,e.NodeInfo=null,e.PrefabEquip=null,e.NodeBagItem=null,e.LabPageNum=null,e.PageViewBag=null,e.ContentBag=null,e.Indicator=null,e.NodeEFf_HC=null,e.NodeCost=null,e.LabCost=null,e.NodeVideo=null,e.LayoutProp=null,e.LayoutNodeProp=null,e.LabName=null,e.curPageIndex=0,e.curBagIndexCount=100,e.nodePageList=[],e.nodeBagItemList=[],e.nodeEquipItemList=[],e.dataEquipItemList=[],e.introductionEquipData=null,e.equipCompositeList=[],e.isLoadEnd=!1,e.lookVideoCount=0,e.curBagList=[],e}return r(e,t),e.prototype.init=function(t){this.introductionEquipData=t},e.prototype.onLoad=function(){this.registerEvent()},e.prototype.start=function(){h.default.instance.destroyPlayer_Home(),this.registerBtnEvent(),this.initData(),this.initView(),this.LayoutProp.destroyAllChildren(),this.scheduleOnce(this.changeNodeInfo)},e.prototype.registerEvent=function(){this.addEvent(f.EventName.PlaceCompositeEquip,this.recognitionCompositeList)},e.prototype.initData=function(){this.equipCompositeList.length=3},e.prototype.initView=function(){this.loadPageNum(),this.initCompositeView()},e.prototype.initCurPage=function(){this.curPageIndex=this.PageViewBag.getCurrentPageIndex()},e.prototype.jumpCurPage=function(){this.PageViewBag.setCurrentPageIndex(0),this.curPageIndex=this.PageViewBag.getCurrentPageIndex()},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){t.lookVideoCount>0?d.UIMgr.getInstance().openUI(f.UIID.UIGeneralWindow1,-1,"","<color = #000000>\u5207\u6362\u88c5\u5907\u6216\u9000\u51fa\u754c\u9762\n\u5f53\u524d\u89c6\u9891\u8fdb\u5ea6\u5c06</c><color = #ff0000>\u4e0d\u4e88\u4fdd\u5b58</c>\u5662\uff01",null,function(){d.UIMgr.getInstance().openUI(f.UIID.UIEquip,-1),t.closeView()},null):(d.UIMgr.getInstance().openUI(f.UIID.UIEquip,-1),t.closeView())}),this.BtnComposite.on(cc.Node.EventType.TOUCH_END,function(){if(t.BtnComposite.getComponent(l.BaseButton).interactable)if(t.isFullForCompositeIndex()){var e=t.equipCompositeList[0].starLevel?t.equipCompositeList[0].starLevel:0,o=m.DataMgr.getInstance().getEquipStarCfg(t.equipCompositeList[0].id,e).consume;if(I.PlayerMgr.getInstance().geUserData().subGoldNum(o)){I.PlayerMgr.getInstance().getTrackData().getCountHC()<10&&(I.PlayerMgr.getInstance().getTrackData().addCountHC(),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.refine_time_X,I.PlayerMgr.getInstance().getTrackData().getCountHC())),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.refine_equip_X,t.equipCompositeList[0].id),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.refine_equip_lv_X,e+1);var i,a=v.default.getInstance().getEquipSellValue_QH(t.equipCompositeList[0].id,t.equipCompositeList[0].type,t.equipCompositeList[0].IDCard,t.equipCompositeList[0])+v.default.getInstance().getEquipSellValue_QH(t.equipCompositeList[1].id,t.equipCompositeList[1].type,t.equipCompositeList[1].IDCard,t.equipCompositeList[1])+v.default.getInstance().getEquipSellValue_QH(t.equipCompositeList[2].id,t.equipCompositeList[2].type,t.equipCompositeList[2].IDCard,t.equipCompositeList[2]);if(t.equipCompositeList[0].isWear){var n=I.PlayerMgr.getInstance().geUserData().getEquipIDCard();i={id:t.equipCompositeList[0].id,type:t.equipCompositeList[0].type,quality:t.equipCompositeList[0].quality,strengthenLv:0,isUnlock:t.equipCompositeList[0].isUnlock,isWear:t.equipCompositeList[0].isWear,videoCount:0,IDCard:n,starLevel:e+1},I.PlayerMgr.getInstance().geUserData().setEquip(i,!1),I.PlayerMgr.getInstance().geUserData().abandonEquip(t.equipCompositeList[1]),I.PlayerMgr.getInstance().geUserData().abandonEquip(t.equipCompositeList[2])}else t.equipCompositeList[1].isWear?(n=I.PlayerMgr.getInstance().geUserData().getEquipIDCard(),i={id:t.equipCompositeList[1].id,type:t.equipCompositeList[1].type,quality:t.equipCompositeList[1].quality,strengthenLv:0,isUnlock:t.equipCompositeList[1].isUnlock,isWear:!1,videoCount:0,IDCard:n,starLevel:e+1},I.PlayerMgr.getInstance().geUserData().setEquip(i,!1),I.PlayerMgr.getInstance().geUserData().abandonEquip(t.equipCompositeList[0]),I.PlayerMgr.getInstance().geUserData().abandonEquip(t.equipCompositeList[2])):t.equipCompositeList[2].isWear?(n=I.PlayerMgr.getInstance().geUserData().getEquipIDCard(),i={id:t.equipCompositeList[2].id,type:t.equipCompositeList[2].type,quality:t.equipCompositeList[2].quality,strengthenLv:0,isUnlock:t.equipCompositeList[2].isUnlock,isWear:!1,videoCount:0,IDCard:n,starLevel:e+1},I.PlayerMgr.getInstance().geUserData().setEquip(i,!1),I.PlayerMgr.getInstance().geUserData().unloadEquip(t.equipCompositeList[2]),I.PlayerMgr.getInstance().geUserData().abandonEquip(t.equipCompositeList[0]),I.PlayerMgr.getInstance().geUserData().abandonEquip(t.equipCompositeList[1])):t.equipCompositeList[0].isWear||t.equipCompositeList[1].isWear||t.equipCompositeList[2].isWear||(n=I.PlayerMgr.getInstance().geUserData().getEquipIDCard(),i={id:t.equipCompositeList[0].id,type:t.equipCompositeList[0].type,quality:t.equipCompositeList[0].quality,strengthenLv:0,isUnlock:t.equipCompositeList[0].isUnlock,isWear:t.equipCompositeList[0].isWear,videoCount:0,IDCard:n,starLevel:e+1},I.PlayerMgr.getInstance().geUserData().addEquip(i),I.PlayerMgr.getInstance().geUserData().abandonEquip(t.equipCompositeList[0]),I.PlayerMgr.getInstance().geUserData().abandonEquip(t.equipCompositeList[1]),I.PlayerMgr.getInstance().geUserData().abandonEquip(t.equipCompositeList[2]),t.addBagItemForIndex(i));t.playHCEff(function(){d.UIMgr.getInstance().openUI(f.UIID.UICompositeEnd,-1,i,function(){a>0&&(I.PlayerMgr.getInstance().geUserData().addGoldNum(a),d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u5408\u6210\u6210\u529f\uff0c\u8fd4\u56de\u5f3a\u5316\u6d88\u8017 \u91d1\u5e01x"+a))})}),t.clearCompositeIndex(),t.clearCompositeData(),t.introductionEquipData=null,t.hideNodeInfo(),t.filtrateEquip(null),t.loadBagPage(t.curBagList),t.refreshBtnState(!1)}}else d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u8bf7\u6dfb\u52a0\u5408\u6210\u88c5\u5907")});for(var e=function(e){var i=o.NodeComposite.getChildByName("NodeCompositeEquip"+e);cc.isValid(i)&&i.on(cc.Node.EventType.TOUCH_END,function(){if(0==e){t.introductionEquipData=null,t.hideNodeInfo();var o=t.NodeComposite.getChildByName("NodeCompositeEquip0"),a=t.NodeComposite.getChildByName("NodeCompositeEquip1"),n=t.NodeComposite.getChildByName("NodeCompositeEquip2"),r=t.equipCompositeList[0];t.equipCompositeList[0]=null;var s=t.equipCompositeList[1];t.equipCompositeList[1]=null;var c=t.equipCompositeList[2];return t.equipCompositeList[2]=null,t.refreshBtnState(!1),cc.isValid(o.getChildByName("NodeEquip"))&&o.getChildByName("NodeEquip").destroy(),cc.isValid(a.getChildByName("NodeEquip"))&&a.getChildByName("NodeEquip").destroy(),cc.isValid(n.getChildByName("NodeEquip"))&&n.getChildByName("NodeEquip").destroy(),void(t.isNullForCompositeIndex()?(t.refreshVideoState(!1),cc.isValid(t.NodeCompositeEquip.getChildByName("NodeEquip"))&&t.NodeCompositeEquip.getChildByName("NodeEquip").destroy(),t.filtrateEquip(null),t.loadBagPage(t.curBagList)):(t.refreshVideoState(!0),t.addBagItemForIndex(r),t.addBagItemForIndex(s),t.addBagItemForIndex(c)))}if(t.equipCompositeList[e])if(t.lookVideoCount>0)d.UIMgr.getInstance().openUI(f.UIID.UIGeneralWindow1,-1,"","<color = #000000>\u5207\u6362\u88c5\u5907\u6216\u9000\u51fa\u754c\u9762\n\u5f53\u524d\u89c6\u9891\u8fdb\u5ea6\u5c06</c><color = #ff0000>\u4e0d\u4e88\u4fdd\u5b58</c>\u5662\uff01",null,function(){var o=t.equipCompositeList[e];t.equipCompositeList[e]=null,cc.isValid(i.getChildByName("NodeEquip"))&&i.getChildByName("NodeEquip").destroy(),t.refreshBtnState(!1),t.isNullForCompositeIndex()?(t.refreshVideoState(!1),cc.isValid(t.NodeCompositeEquip.getChildByName("NodeEquip"))&&t.NodeCompositeEquip.getChildByName("NodeEquip").destroy(),t.filtrateEquip(null),t.loadBagPage(t.curBagList)):(t.refreshVideoState(!0),t.addBagItemForIndex(o))},null);else{var l=t.equipCompositeList[e];t.equipCompositeList[e]=null,cc.isValid(i.getChildByName("NodeEquip"))&&i.getChildByName("NodeEquip").destroy(),t.refreshBtnState(!1),t.isNullForCompositeIndex()?(t.refreshVideoState(!1),cc.isValid(t.NodeCompositeEquip.getChildByName("NodeEquip"))&&t.NodeCompositeEquip.getChildByName("NodeEquip").destroy(),t.filtrateEquip(null),t.loadBagPage(t.curBagList)):(t.refreshVideoState(!0),t.addBagItemForIndex(l))}})},o=this,i=0;i<3;i++)e(i);this.NodeVideo.on(cc.Node.EventType.TOUCH_END,function(){u.SdkMgr.getInstance().playVideo(1,function(){if(I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.refine_getequip),t.lookVideoCount+=1,t.refreshVideoState(!0),t.lookVideoCount>=t.getNeedVideoCount()){t.NodeVideo.active=!1;for(var e=void 0,o=0;o<t.equipCompositeList.length;o++)if(t.equipCompositeList[o]){e={id:t.equipCompositeList[o].id,type:t.equipCompositeList[o].type,quality:t.equipCompositeList[o].quality,strengthenLv:0,isUnlock:!0,isWear:!1,videoCount:0,IDCard:I.PlayerMgr.getInstance().geUserData().getEquipIDCard(),starLevel:t.equipCompositeList[o].starLevel};break}e?(I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.refine_equip_get_X,e.id),t.lookVideoCount=0,I.PlayerMgr.getInstance().geUserData().addEquip(e),t.addToCompositeIndex(e),t.refreshBtnState(!0)):t.lookVideoCount-=1}})})},e.prototype.loadPageNum=function(){if(this.nodePageList||(this.nodePageList=[]),this.nodePageList.length>0)for(var t=0;t<this.nodePageList.length;t++)cc.isValid(this.nodePageList[t])&&(this.curPageIndex==t?this.nodePageList[t].color=cc.color(191,108,0):this.nodePageList[t].color=cc.color(255,255,255));else for(t=0;t<this.Indicator.childrenCount;t++)if(cc.isValid(this.Indicator.children[t])){var e=cc.instantiate(this.LabPageNum);e.parent=this.Indicator.children[t],e.position=cc.Vec3.ZERO,e.getComponent(cc.Label).string=""+(t+1),this.curPageIndex==t&&(e.color=cc.color(191,108,0)),this.nodePageList.push(e)}},e.prototype.refreshBtnState=function(t){this.NodeCost.active=t,this.BtnComposite.getComponent(l.BaseButton).interactable=t,t&&this.refreshHCCost()},e.prototype.refreshHCCost=function(){for(var t,e=0;e<this.equipCompositeList.length;e++)if(this.equipCompositeList[e]){t=this.equipCompositeList[e];break}this.LabCost.string=t?m.DataMgr.getInstance().getEquipStarCfg(t.id,t.starLevel).consume.toString():"0"},e.prototype.refreshVideoState=function(t){if(this.NodeVideo.active=t,t){for(var e=1,o=0;o<this.equipCompositeList.length;o++)if(!this.equipCompositeList[o]){e=o;break}var i=this.NodeComposite.getChildByName("NodeCompositeEquip"+e),a=g.Utils.posTransform(i.parent,i.getPosition(),this.NodeVideo.parent);this.NodeVideo.setPosition(a),this.refreshLookVideoCount()}else this.lookVideoCount=0},e.prototype.getNeedVideoCount=function(){for(var t,e=0;e<this.equipCompositeList.length;e++)if(this.equipCompositeList[e]){t=this.equipCompositeList[e];break}return m.DataMgr.getInstance().getEquipStarCfg(t.id,t.starLevel).AdvertisementNum},e.prototype.refreshLookVideoCount=function(){var t=this.getNeedVideoCount();t||(this.NodeVideo.active=!1),this.NodeVideo.getChildByName("LabVideo").getComponent(cc.Label).string=this.lookVideoCount+"/"+t},e.prototype.recognitionCompositeList=function(t,e){var o=this;if(this.isLoadEnd)if(this.lookVideoCount>0)d.UIMgr.getInstance().openUI(f.UIID.UIGeneralWindow1,-1,"","<color = #000000>\u5207\u6362\u88c5\u5907\u6216\u9000\u51fa\u754c\u9762\n\u5f53\u524d\u89c6\u9891\u8fdb\u5ea6\u5c06</c><color = #ff0000>\u4e0d\u4e88\u4fdd\u5b58</c>\u5662\uff01",null,function(){o.isFullForCompositeIndex()?d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u5408\u6210\u680f\u5df2\u6ee1"):(o.destroyBagItemforIndex(t),o.isNullForCompositeIndex()&&(o.jumpCurPage(),o.filtrateEquip(e),o.loadBagPage(o.curBagList)),o.addToCompositeIndex(e))},null);else{if(this.isFullForCompositeIndex())return void d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u5408\u6210\u680f\u5df2\u6ee1");this.destroyBagItemforIndex(t),this.isNullForCompositeIndex()&&(this.jumpCurPage(),this.filtrateEquip(e),this.loadBagPage(this.curBagList)),this.addToCompositeIndex(e)}},e.prototype.initCompositeView=function(){this.addToCompositeIndex(this.introductionEquipData),this.filtrateEquip(this.introductionEquipData),this.loadBagPage(this.curBagList)},e.prototype.loadBagPage=function(t){this.clearEquipAndData();for(var e=t,o=0;o<8;o++){var i=this.ContentBag.children[o];this.loadBagItem(i,!1,o,e)}},e.prototype.loadBagItem=function(t,e,o,i){var a=this;(!i||i.length<=0)&&(this.isLoadEnd=!0);for(var n=function(e){r.scheduleOnce(function(){var n=e+18*o,r=null;cc.isValid(a.nodeBagItemList[n])?r=a.nodeBagItemList[n]:((r=cc.instantiate(a.NodeBagItem)).parent=t,r.position=cc.Vec3.ZERO,a.nodeBagItemList.push(r)),i.length>n&&(a.loadEquipToBag(n,r,i[n]),n==a.curBagList.length-1&&(a.isLoadEnd=!0))},.01*(e+18*o))},r=this,s=0;s<18;s++)n(s)},e.prototype.loadEquipToBag=function(t,e,o){var i=cc.instantiate(this.PrefabEquip);i.parent=e,v.default.getInstance().playEffForQuality(i,o.quality),i.getComponent(k.default).initData(t,o,f.UIID.UIEquip);var a=m.DataMgr.getInstance().getEquipCfg(o.id);this.loadSpriteFrame(a.bundleQuality,a.iconQuality,function(t){i.getComponent(cc.Sprite).spriteFrame=t}),this.loadSpriteFrame(a.bundle,a.equipIcon,function(t){i.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),o.strengthenLv>0?(i.getChildByName("LabStrengthenLv").active=!0,i.getChildByName("LabStrengthenLv").getComponent(cc.Label).string="+"+o.strengthenLv):i.getChildByName("LabStrengthenLv").active=!1;var n=o.starLevel?o.starLevel:0;if(n>0){var r=i.getChildByName("NodeStar");r.active=!0;for(var s=0;s<r.childrenCount;s++)n>s?cc.isValid(r.children[s])&&(r.children[s].getChildByName("SpStar").active=!0):cc.isValid(r.children[s])&&(r.children[s].getChildByName("SpStar").active=!1)}this.isNullForCompositeIndex()||this.getCompositeEquipQualityNum(o)&&this.getCompositeEquipStarNum2(o)||(i.getChildByName("SpMask").active=!0),this.nodeEquipItemList.length>t?(this.nodeEquipItemList[t]=i,this.dataEquipItemList[t]=o):(this.nodeEquipItemList.push(i),this.dataEquipItemList.push(o))},e.prototype.destroyBagItemforIndex=function(t){if(this.nodeBagItemList&&!(t>=this.nodeBagItemList.length||t<0)){var e=this.nodeBagItemList[t].children[0];cc.isValid(e)&&(e.destroy(),t<this.nodeEquipItemList.length&&(this.nodeEquipItemList[t]=null,this.dataEquipItemList[t]=null))}},e.prototype.addBagItemForIndex=function(t,e){if(void 0===e&&(e=null),this.nodeBagItemList&&t){var o=e;if(null==o){o=this.nodeEquipItemList.length;for(var i=0;i<this.nodeEquipItemList.length;i++)if(!this.nodeEquipItemList[i]){o=i;break}}var a=this.nodeBagItemList[o];cc.isValid(a)&&this.loadEquipToBag(o,a,t)}},e.prototype.addToCompositeIndex=function(t){if(t){for(var e=-1,o=0;o<this.equipCompositeList.length;o++)if(!this.equipCompositeList[o]){0==o&&(this.introductionEquipData=t,this.LayoutProp.destroyAllChildren(),this.scheduleOnce(this.changeNodeInfo),this.scheduleOnce(this.showNodeInfo)),this.equipCompositeList[o]=t,e=o;break}if(-1!=e){var i=this.NodeComposite.getChildByName("NodeCompositeEquip"+e),a=m.DataMgr.getInstance().getEquipCfg(t.id),n=cc.instantiate(this.NodeEquip);i.addChild(n),this.loadSpriteFrame(a.bundleQuality,a.iconQuality,function(t){n.getComponent(cc.Sprite).spriteFrame=t}),this.loadSpriteFrame(a.bundle,a.equipIcon,function(t){n.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),t.strengthenLv>0?(n.getChildByName("LabStrengthenLv").active=!0,n.getChildByName("LabStrengthenLv").getComponent(cc.Label).string="+"+t.strengthenLv):n.getChildByName("LabStrengthenLv").active=!1;var r=t.starLevel?t.starLevel:0;if(r>0)for((c=n.getChildByName("NodeStar")).active=!0,o=0;o<c.childrenCount;o++)r>o?cc.isValid(c.children[o])&&(c.children[o].getChildByName("SpStar").active=!0):cc.isValid(c.children[o])&&(c.children[o].getChildByName("SpStar").active=!1);if(!cc.isValid(this.NodeCompositeEquip.getChildByName("NodeEquip"))){var s=cc.instantiate(this.NodeEquip);this.NodeCompositeEquip.addChild(s),this.loadSpriteFrame(a.bundleQuality,a.iconQuality,function(t){s.getComponent(cc.Sprite).spriteFrame=t}),this.loadSpriteFrame(a.bundle,a.equipIcon,function(t){s.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t});var c,l=t.starLevel?t.starLevel+1:1;if(l>0)for((c=s.getChildByName("NodeStar")).active=!0,o=0;o<c.childrenCount;o++)l>o?cc.isValid(c.children[o])&&(c.children[o].getChildByName("SpStar").active=!0,l==o+1&&p.TweenMgr.getInstance().playBlinkAnim(c.children[o].getChildByName("SpStar"))):cc.isValid(c.children[o])&&(c.children[o].getChildByName("SpStar").active=!1)}this.isFullForCompositeIndex()?(this.refreshBtnState(!0),this.refreshVideoState(!1)):(this.refreshBtnState(!1),this.refreshVideoState(!0))}}},e.prototype.clearEquipAndData=function(){this.isLoadEnd=!1;for(var t=0;t<this.nodeBagItemList.length;t++)cc.isValid(this.nodeBagItemList[t])&&this.nodeBagItemList[t].childrenCount>0&&this.nodeBagItemList[t].children[0].destroy();this.nodeEquipItemList=[],this.dataEquipItemList=[]},e.prototype.filtrateEquip=function(t){if(this.curBagList=[],t){var e=v.default.getInstance().getOwmedEquipForQualityId(t.quality),o=[],i=[];for(n=0;n<e.length;n++)e[n].quality==t.quality?e[n].IDCard!=t.IDCard&&(o.push(e[n]),o.sort(function(t,e){return t.starLevel-e.starLevel})):i.push(e[n]);for(this.curBagList=o,n=0;n<i.length;n++)this.curBagList.push(i[n])}else{for(var a=v.default.getInstance().getOwnedEquipList(),n=0;n<a.length;n++)this.curBagList.push(a[n]);this.curBagList.sort(function(t,e){return e.quality-t.quality})}},e.prototype.getCompositeEquipStarNum=function(t){for(var e=!1,o=0;o<this.equipCompositeList.length;o++)if(this.equipCompositeList[o]){t.id==this.equipCompositeList[o].id&&t.starLevel==this.equipCompositeList[o].starLevel&&(e=!0);break}return e},e.prototype.getCompositeEquipStarNum2=function(t){for(var e=!1,o=0;o<this.equipCompositeList.length;o++)if(this.equipCompositeList[o]){t.starLevel==this.equipCompositeList[o].starLevel&&(e=!0);break}return e},e.prototype.getCompositeEquipQualityNum=function(t){for(var e=!1,o=0;o<this.equipCompositeList.length;o++)if(this.equipCompositeList[o]){t.quality==this.equipCompositeList[o].quality&&(e=!0);break}return e},e.prototype.isFullForCompositeIndex=function(){for(var t=!0,e=0;e<this.equipCompositeList.length;e++)if(!this.equipCompositeList[e]){t=!1;break}return t},e.prototype.isNullForCompositeIndex=function(){for(var t=!0,e=0;e<this.equipCompositeList.length;e++)this.equipCompositeList[e]&&(t=!1);return t},e.prototype.clearCompositeIndex=function(){for(var t=0;t<this.NodeComposite.childrenCount;t++)cc.isValid(this.NodeComposite.children[t].getChildByName("NodeEquip"))&&this.NodeComposite.children[t].getChildByName("NodeEquip").destroy()},e.prototype.clearCompositeData=function(){for(var t=0;t<this.equipCompositeList.length;t++)this.equipCompositeList[t]=null},e.prototype.playHCEff=function(t){var e=this;this.NodeEFf_HC.node.active=!0,this.NodeEFf_HC.getComponent(sp.Skeleton).setAnimation(0,"ani1",!1),this.NodeEFf_HC.getComponent(sp.Skeleton).setCompleteListener(function(){e.NodeEFf_HC.node.active=!1,t&&t()})},e.prototype.callbackPageView=function(){this.initCurPage(),this.loadPageNum()},e.prototype.closeView=function(){this.closeUI()},e.prototype.showNodeInfo=function(){this.NodeInfo.active=!0},e.prototype.hideNodeInfo=function(){this.NodeInfo.active=!1},e.prototype.changeNodeInfo=function(){var t=m.DataMgr.getInstance().getEquipCfg(this.introductionEquipData.id);if(this.LabName.string=t.equipName,t.LvAtk){var e=g.Utils.getTabelArr(t.atk),o=g.Utils.getTabelArr(t.LvAtk),i=["0","0"];if(this.introductionEquipData.starLevel&&this.introductionEquipData.starLevel>0){var a=m.DataMgr.getInstance().getEquipStarCfg(this.introductionEquipData.id,this.introductionEquipData.starLevel);i=g.Utils.getTabelArr(a.atk)}var n=Number(e[0])+Number(o[0])*this.introductionEquipData.strengthenLv+Number(i[0]),r=Number(e[1])+Number(o[1])*this.introductionEquipData.strengthenLv+Number(i[1]),s=this.LayoutProp.getChildByName("LayoutProp1");cc.isValid(s)||((s=cc.instantiate(this.LayoutNodeProp)).parent=this.LayoutProp,s.name="LayoutProp1");var c=r-n;s.getChildByName("LabProp").getComponent(cc.RichText).string="<color=#ffffff>\u653b\u51fb\u529b\uff1a</c><color=#3bacf3>"+n+"~"+r+"</color>",this.loadPropChange(8,s,c)}if(t.LvHp){var l=this.introductionEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.introductionEquipData.id,this.introductionEquipData.starLevel).hp:0;this.addPropNode(9,t.hp+t.LvHp*this.introductionEquipData.strengthenLv+l)}t.atkSpeed&&(l=this.introductionEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.introductionEquipData.id,this.introductionEquipData.starLevel).atkSpeed:0,this.addPropNode(3,t.atkSpeed+l)),t.atkCrazyProb&&(l=this.introductionEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.introductionEquipData.id,this.introductionEquipData.starLevel).atkCrazyProb:0,this.addPropNode(4,t.atkCrazyProb+l)),t.atkCrazyHurt&&(l=this.introductionEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.introductionEquipData.id,this.introductionEquipData.starLevel).atkCrazyHurt:0,this.addPropNode(5,t.atkCrazyHurt+l)),t.subHurt&&(l=this.introductionEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.introductionEquipData.id,this.introductionEquipData.starLevel).subHurt:0,this.addPropNode(6,t.subHurt+l)),t.dodgeHurtProb&&(l=this.introductionEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.introductionEquipData.id,this.introductionEquipData.starLevel).dodgeHurtProb:0,this.addPropNode(7,t.dodgeHurtProb+l))},e.prototype.addPropNode=function(t,e){var o=this.LayoutProp.getChildByName("LayoutProp"+t);cc.isValid(o)||((o=cc.instantiate(this.LayoutNodeProp)).parent=this.LayoutProp,o.name="LayoutProp"+t);var i=v.default.getInstance().getPropNameForPropType(t);o.getChildByName("LabProp").getComponent(cc.RichText).string="<color=#ffffff>"+i+"\uff1a</c><color=#3bacf3>"+e+v.default.getInstance().getPropPercent(t)+"</color>",this.loadPropChange(t,o,e)},e.prototype.loadPropChange=function(t,e,o){var i=e.getChildByName("SpChange"),a=e.getChildByName("LabChange");if(cc.isValid(i)&&cc.isValid(a)){var n=0,r=m.DataMgr.getInstance().getEquipStarCfg(this.introductionEquipData.id,this.introductionEquipData.starLevel);if(8==t){var s=g.Utils.getTabelArr(r.atk);n=(Number(s[1])+Number(s[0]))/2-0}else 9==t?n=r.hp-0:3==t?n=r.atkSpeed-0:4==t?n=r.atkCrazyProb-0:5==t?n=r.atkCrazyHurt-0:6==t?n=r.subHurt-0:7==t&&(n=r.dodgeHurtProb-0);0==n?(i.active=!1,a.active=!1):(a.color=n>0?cc.color(64,220,47):cc.color(246,47,0),a.getComponent(cc.Label).string=8==t?Math.ceil(o)+"~"+Math.ceil(n+o):""+Math.ceil(Math.abs(n+o)))}else console.log("\u4e0d\u5b58\u5728\uff01\uff01\uff01")},s([b(cc.Node)],e.prototype,"BtnBack",void 0),s([b(cc.Node)],e.prototype,"BtnComposite",void 0),s([b({type:cc.Node,tooltip:"\u88c5\u5907\u5408\u6210\u8282\u70b9"})],e.prototype,"NodeComposite",void 0),s([b({type:cc.Node,tooltip:"\u88c5\u5907\u5408\u6210\u4f4d"})],e.prototype,"NodeCompositeEquip",void 0),s([b({type:cc.Node,tooltip:"\u5408\u6210\u88c5\u5907"})],e.prototype,"NodeEquip",void 0),s([b({type:cc.Node,tooltip:"\u88c5\u5907\u4fe1\u606f"})],e.prototype,"NodeInfo",void 0),s([b({type:cc.Prefab,tooltip:"\u88c5\u5907\u9884\u5236"})],e.prototype,"PrefabEquip",void 0),s([b({type:cc.Node,tooltip:"\u80cc\u5305\u7a7a\u58f3item"})],e.prototype,"NodeBagItem",void 0),s([b({type:cc.Node,tooltip:"\u80cc\u5305\u9875\u6570\u6807\u7b7e"})],e.prototype,"LabPageNum",void 0),s([b(cc.PageView)],e.prototype,"PageViewBag",void 0),s([b(cc.Node)],e.prototype,"ContentBag",void 0),s([b(cc.Node)],e.prototype,"Indicator",void 0),s([b(sp.Skeleton)],e.prototype,"NodeEFf_HC",void 0),s([b(cc.Node)],e.prototype,"NodeCost",void 0),s([b(cc.Label)],e.prototype,"LabCost",void 0),s([b(cc.Node)],e.prototype,"NodeVideo",void 0),s([b(cc.Node)],e.prototype,"LayoutProp",void 0),s([b(cc.Node)],e.prototype,"LayoutNodeProp",void 0),s([b(cc.Label)],e.prototype,"LabName",void 0),s([C],e)}(c.default);n.default=_,cc._RF.pop()},{}],UIEquipInfo:[function(t,e,o){"use strict";cc._RF.push(e,"19ea9LDs59B3Z27VAuArRUs","UIEquipInfo");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("AudioMgr"),u=a("EventMgr"),p=a("SdkMgr"),d=a("UIMgr"),g=a("TimeUtils"),h=a("Utils"),f=a("Config"),y=a("TrackDataEvent"),m=a("DataMgr"),v=a("EffectMgr"),I=a("EquipMgr"),k=a("PlayerMgr"),S=a("TaskMgr"),C=a("UIGuide"),b=cc._decorator,_=b.ccclass,N=b.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpLock=null,e.SpUnlock=null,e.SpUp=null,e.SpDown=null,e.LayoutProp=null,e.BtnLock=null,e.BtnClose=null,e.LayoutBg=null,e.NodeStar=null,e.SpIconBg=null,e.SpIcon=null,e.LabStrengthenLv=null,e.LabName=null,e.LabFightNum=null,e.LabType=null,e.LabLv=null,e.LayoutEquipProp=null,e.LayoutEquipSuitInfo=null,e.LayoutEquipBtnInfo=null,e.LayoutBtn=null,e.LayoutCost=null,e.LabCoinCount=null,e.BtnQH=null,e.BtnVideoQH=null,e.BtnHC=null,e.BtnSell=null,e.BtnReplace=null,e.BtnUnload=null,e.equipData_wear=null,e.curEquipData=null,e.pos=cc.Vec3.ZERO,e.equipCfgData=null,e.strengthenCfgData=null,e.showType=I.EnumEquipInfo.EnumNoShow,e.isExistEquip=!1,e.curBagIndex=-1,e}return r(e,t),e.prototype.init=function(t,e,o,i,a){this.equipData_wear=t,this.curEquipData=e,this.pos=o||cc.Vec3.ZERO,this.showType=i||I.EnumEquipInfo.EnumNoShow,this.curBagIndex=a>=0?a:-1},e.prototype.start=function(){u.EventMgr.getInstance().emit(f.EventName.ShowUITop,!1),this.registerBtnEvent(),this.initData(),this.initView(),this.guideShow()},e.prototype.getAbType=function(){return this.abType||(this.abType=k.PlayerMgr.getInstance().getAbType()),this.abType},e.prototype.guideShow=function(){var t=k.PlayerMgr.getInstance().getGuideData();if(!t.getGuideEnd()&&t.getCurrentId()==15+t.putGuideNum){var e=new C.GuildCfg;e.distNode=this.BtnReplace,e.tipstring="\u521a\u521a\u867d\u7136\u6ca1\u51fa\u4ec0\u4e48\u6781\u54c1\uff0c\u4f46\u662f\u51d1\u5408\u5148\u7528\u7740\u5427",e.yDec=-150,this.openUICallBack(f.UIID.UIGuide,function(){t.addCurrentId()},e)}},e.prototype.registerBtnEvent=function(){var t=this;this.BtnLock.on(cc.Node.EventType.TOUCH_END,function(){k.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.click_lock),t.curEquipData.isUnlock=!t.curEquipData.isUnlock,t.initUnlockState(),I.default.getInstance().unlockEquip(t.curBagIndex,t.curEquipData)}),this.BtnClose.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()}),this.BtnQH.on(cc.Node.EventType.TOUCH_END,function(){t.BtnQH.getComponent(cc.Button).interactable&&t.strengthenEquip()}),this.BtnVideoQH.on(cc.Node.EventType.TOUCH_END,function(){if(t.curEquipData.strengthenLv>=t.equipCfgData.strengthenMaxLv)return d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u5f3a\u5316\u5df2\u5230\u8fbe\u6700\u5927\u7b49\u7ea7"),void t.loadInfo();var e=g.TimeUtils.GetTimeBySecond(),o=g.TimeUtils.GetTimeByHours2();p.SdkMgr.getInstance().playVideo(1,function(){var i=g.TimeUtils.GetTimeBySecond(),a=g.TimeUtils.GetTimeByHours2();k.PlayerMgr.getInstance().getTrackData().testTrackTime("upgradeequip",o,a,e,i),k.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.upgradeequip),k.PlayerMgr.getInstance().getTrackData().youmengTrackNew("upgradeequip_b"),t.strengthenEquip(!0)})}),this.BtnSell.on(cc.Node.EventType.TOUCH_END,function(){var e;t.curEquipData.isUnlock?(k.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.click_equip_sale),I.default.getInstance().sellEquip(t.curBagIndex,t.curEquipData),e="B"==t.getAbType()||"D"==t.getAbType()?I.default.getInstance().getEquipSellValue(t.curEquipData.id,t.curEquipData.type,t.curEquipData.IDCard,t.curEquipData):t.strengthenCfgData.sellPrice,k.PlayerMgr.getInstance().geUserData().addGoldNum(e),d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u51fa\u552e\u6210\u529f\uff0c\u83b7\u5f97"+e+"\u91d1\u5e01"),t.closeView()):d.UIMgr.getInstance().openUI(f.UIID.UITips,f.UIID.UIEquip,"\u5df2\u52a0\u9501\u88c5\u5907\u65e0\u6cd5\u51fa\u552e")}),this.BtnReplace.on(cc.Node.EventType.TOUCH_END,function(){t.isExistEquip?I.default.getInstance().replaceEquip(t.curBagIndex,t.equipData_wear,t.curEquipData):(I.default.getInstance().wearEquip(t.curBagIndex,t.curEquipData),t.sendEvent(f.EventName.EquipGuideShow)),t.closeView()}),this.BtnUnload.on(cc.Node.EventType.TOUCH_END,function(){k.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.click_equip_unfix),I.default.getInstance().unloadEquip(t.curEquipData),t.closeView()}),cc.isValid(this.BtnHC)&&this.BtnHC.on(cc.Node.EventType.TOUCH_END,function(){t.curEquipData.starLevel>=5?d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u8be5\u88c5\u5907\u5df2\u8fbe\u5230\u6700\u5927\u661f\u7ea7"):(k.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.click_refine),d.UIMgr.getInstance().openUI(f.UIID.UIEquipComposite,-1,t.curEquipData),d.UIMgr.getInstance().closeById(f.UIID.UIEquip),t.closeView())})},e.prototype.playEffForPropUp=function(){for(var t=1;t<10;t++){var e=this.LayoutEquipProp.getChildByName("LayoutProp"+t);cc.isValid(e)&&v.default.playEffectForEffId(f.EnumEffID.EffPropUp,e,null,180)}},e.prototype.playEffForUpLv=function(){v.default.playEffectForEffId(f.EnumEffID.EffUpLv,this.SpIcon.node)},e.prototype.initData=function(){this.equipCfgData=m.DataMgr.getInstance().getEquipCfg(this.curEquipData.id),"A"!=this.getAbType()&&"C"!=this.getAbType()||(this.strengthenCfgData=m.DataMgr.getInstance().getEquipStrengthenCfg1(this.equipCfgData.strengthenStartId,this.curEquipData.strengthenLv)),this.initIsExistEquip()},e.prototype.initIsExistEquip=function(){this.equipData_wear&&(this.isExistEquip=!0)},e.prototype.initView=function(){this.showBtnVideoQH(),this.equipQHForRedDot(),"B"!=this.getAbType()&&"D"!=this.getAbType()||this.equipHCForRedDot(),this.initUnlockState(),this.loadEquipInfo(),this.loadEquipSuitInfo(),this.loadInfo()},e.prototype.showBtnVideoQH=function(){"B"!=this.getAbType()&&"D"!=this.getAbType()||(this.BtnVideoQH.active=!0,this.LayoutBtn.getComponent(cc.Layout).spacingX=20,this.LayoutBtn.getComponent(cc.Layout).updateLayout())},e.prototype.equipQHForRedDot=function(){if("B"==this.getAbType()||"D"==this.getAbType()){var t=!1,e=0,o=m.DataMgr.getInstance().getEquipCfg(this.curEquipData.id),i=h.Utils.getTabelArr1(o.consume),a=this.curEquipData.strengthenLv;a<o.strengthenMaxLv&&(e=Number(i[Math.floor(a/10)][1]),t=k.PlayerMgr.getInstance().geUserData().getGoldNum()>=e),this.BtnQH.getChildByName("SpRedDot").active=t}else this.showType==I.EnumEquipInfo.EnumStrengthen&&(t=!1,e=0,e=this.strengthenCfgData.consume,t=k.PlayerMgr.getInstance().geUserData().getGoldNum()>=e,this.BtnQH.getChildByName("SpRedDot").active=t)},e.prototype.equipHCForRedDot=function(){if("B"==this.getAbType()||"D"==this.getAbType()){for(var t=!1,e=I.default.getInstance().getOwmedEquipForEquipType(this.curEquipData.type),o=0;o<e.length;o++)if(e[o].IDCard!=this.curEquipData.IDCard&&e[o].id==this.curEquipData.id&&e[o].type==this.curEquipData.type&&e[o].starLevel==this.curEquipData.starLevel){t=!0;break}this.BtnHC.getChildByName("SpRedDot").active=t}},e.prototype.initUnlockState=function(){switch(this.showType){case I.EnumEquipInfo.EnumSell:this.BtnLock.active=!0,this.BtnLock.getChildByName("SpLock").getComponent(cc.Sprite).spriteFrame=this.curEquipData.isUnlock?this.SpUnlock:this.SpLock;break;default:this.BtnLock.active=!1}},e.prototype.initLayoutBgPos=function(){this.pos.x>0?this.pos.y>0?this.LayoutBg.setAnchorPoint(cc.v2(1,1)):this.LayoutBg.setAnchorPoint(cc.v2(1,0)):this.pos.y>0?this.LayoutBg.setAnchorPoint(cc.v2(0,1)):this.LayoutBg.setAnchorPoint(cc.v2(0,0)),this.LayoutBg.position=this.pos},e.prototype.loadEquipInfo=function(){var t=this;if(this.loadSpriteFrame(this.equipCfgData.bundleQuality,this.equipCfgData.iconQuality,function(e){t.SpIconBg.spriteFrame=e}),this.loadSpriteFrame(this.equipCfgData.bundle,this.equipCfgData.equipIcon,function(e){t.SpIcon.spriteFrame=e}),this.curEquipData.strengthenLv>0?(this.LabStrengthenLv.node.active=!0,this.LabStrengthenLv.string="+"+this.curEquipData.strengthenLv):this.LabStrengthenLv.node.active=!1,"B"==this.getAbType()||"D"==this.getAbType()){var e=this.curEquipData.starLevel?this.curEquipData.starLevel:0;if(e>0){var o=this.NodeStar;o.active=!0;for(var i=0;i<o.childrenCount;i++)e>i?cc.isValid(o.children[i])&&(o.children[i].getChildByName("SpStar").active=!0):cc.isValid(o.children[i])&&(o.children[i].getChildByName("SpStar").active=!1)}}this.LabName.string=this.equipCfgData.equipName,this.LabType.string=this.getEquipNameForType(this.equipCfgData.equipType),this.loadEquipStrengthenProp()},e.prototype.loadEquipStrengthenProp=function(){this.curEquipData.strengthenLv>0?(this.LabStrengthenLv.node.active=!0,this.LabStrengthenLv.string="+"+this.curEquipData.strengthenLv):this.LabStrengthenLv.node.active=!1,this.LabLv.string="\u5f3a\u5316\u7b49\u7ea7\uff1a"+this.curEquipData.strengthenLv+"/"+this.equipCfgData.strengthenMaxLv;var t=0;if("B"==this.getAbType()||"D"==this.getAbType()){t=I.default.getInstance().getEquipFightForId(this.curEquipData.id,!1,this.curEquipData.type,this.curEquipData.IDCard,this.curEquipData);var e=m.DataMgr.getInstance().getEquipCfg(this.curEquipData.id);if(e.LvAtk){var o=h.Utils.getTabelArr(e.atk),i=h.Utils.getTabelArr(e.LvAtk),a=["0","0"];if(this.curEquipData.starLevel&&this.curEquipData.starLevel>0){var n=m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel);a=h.Utils.getTabelArr(n.atk)}var r=Number(o[0])+Number(i[0])*this.curEquipData.strengthenLv+Number(a[0]),s=Number(o[1])+Number(i[1])*this.curEquipData.strengthenLv+Number(a[1]),c=this.LayoutEquipProp.getChildByName("LayoutProp1");cc.isValid(c)||((c=cc.instantiate(this.LayoutProp)).parent=this.LayoutEquipProp,c.name="LayoutProp1"),c.getChildByName("LabProp").getComponent(cc.RichText).string="<color=#ffffff>\u653b\u51fb\u529b\uff1a</c><color=#3bacf3>"+r+"~"+s+"</color>",this.loadPropChange(8,c)}if(e.LvHp){var l=this.curEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).hp:0;this.addPropNode(9,e.hp+e.LvHp*this.curEquipData.strengthenLv+l)}e.atkSpeed&&(l=this.curEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).atkSpeed:0,this.addPropNode(3,e.atkSpeed+l)),e.atkCrazyProb&&(l=this.curEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).atkCrazyProb:0,this.addPropNode(4,e.atkCrazyProb+l)),e.atkCrazyHurt&&(l=this.curEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).atkCrazyHurt:0,this.addPropNode(5,e.atkCrazyHurt+l)),e.subHurt&&(l=this.curEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).subHurt:0,this.addPropNode(6,e.subHurt+l)),e.dodgeHurtProb&&(l=this.curEquipData.starLevel?m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel).dodgeHurtProb:0,this.addPropNode(7,e.dodgeHurtProb+l))}else t=this.strengthenCfgData.fightNum,this.strengthenCfgData.atk&&(o=h.Utils.getTabelArr(this.strengthenCfgData.atk),c=this.LayoutEquipProp.getChildByName("LayoutProp1"),cc.isValid(c)||((c=cc.instantiate(this.LayoutProp)).parent=this.LayoutEquipProp,c.name="LayoutProp1"),c.getChildByName("LabProp").getComponent(cc.RichText).string="<color=#ffffff>\u653b\u51fb\u529b\uff1a</c><color=#3bacf3>"+o[0]+"~"+o[1]+"</color>",this.loadPropChange(8,c)),this.strengthenCfgData.hp&&this.addPropNode(9,this.strengthenCfgData.hp),this.strengthenCfgData.atkSpeed&&this.addPropNode(3,this.strengthenCfgData.atkSpeed),this.strengthenCfgData.atkCrazyProb&&this.addPropNode(4,this.strengthenCfgData.atkCrazyProb),this.strengthenCfgData.atkCrazyHurt&&this.addPropNode(5,this.strengthenCfgData.atkCrazyHurt),this.strengthenCfgData.subHurt&&this.addPropNode(6,this.strengthenCfgData.subHurt),this.strengthenCfgData.dodgeHurtProb&&this.addPropNode(7,this.strengthenCfgData.dodgeHurtProb);this.LabFightNum.string="\u6218\u529b   "+t},e.prototype.addPropNode=function(t,e){var o=this.LayoutEquipProp.getChildByName("LayoutProp"+t);cc.isValid(o)||((o=cc.instantiate(this.LayoutProp)).parent=this.LayoutEquipProp,o.name="LayoutProp"+t);var i=I.default.getInstance().getPropNameForPropType(t);o.getChildByName("LabProp").getComponent(cc.RichText).string="<color=#ffffff>"+i+"\uff1a</c><color=#3bacf3>"+e+I.default.getInstance().getPropPercent(t)+"</color>",this.loadPropChange(t,o)},e.prototype.loadPropChange=function(t,e){var o=e.getChildByName("SpChange"),i=e.getChildByName("LabChange");if(cc.isValid(o)&&cc.isValid(i))switch(this.showType){case I.EnumEquipInfo.EnumSell:if(this.isExistEquip){var a=0;if("B"==this.getAbType()||"D"==this.getAbType()){var n=m.DataMgr.getInstance().getEquipCfg(this.curEquipData.id),r=m.DataMgr.getInstance().getEquipCfg(this.equipData_wear.id);if(8==t){var s=h.Utils.getTabelArr(n.atk),c=h.Utils.getTabelArr(n.LvAtk),l=["0","0"];if(this.curEquipData.starLevel&&this.curEquipData.starLevel>0){var u=m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel);l=h.Utils.getTabelArr(u.atk)}var p=h.Utils.getTabelArr(r.atk),d=h.Utils.getTabelArr(r.LvAtk),g=["0","0"];this.equipData_wear.starLevel&&this.equipData_wear.starLevel>0&&(u=m.DataMgr.getInstance().getEquipStarCfg(this.equipData_wear.id,this.equipData_wear.starLevel),g=h.Utils.getTabelArr(u.atk)),a=(Number(s[1])+Number(l[1])+Number(c[1])*this.curEquipData.strengthenLv+(Number(s[0])+Number(l[0])+Number(c[0])*this.curEquipData.strengthenLv))/2-(Number(p[1])+Number(g[1])+Number(d[1])*this.equipData_wear.strengthenLv+(Number(p[0])+Number(g[0])+Number(d[0])*this.equipData_wear.strengthenLv))/2}else if(9==t){var f=0,y=0;this.curEquipData.starLevel&&this.curEquipData.starLevel>0&&(f=(u=m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel)).hp),this.equipData_wear.starLevel&&this.equipData_wear.starLevel>0&&(y=(u=m.DataMgr.getInstance().getEquipStarCfg(this.equipData_wear.id,this.equipData_wear.starLevel)).hp),a=n.hp+n.LvHp*this.curEquipData.strengthenLv+f-(r.hp+r.LvHp*this.equipData_wear.strengthenLv+y)}else 3==t?(f=0,y=0,this.curEquipData.starLevel&&this.curEquipData.starLevel>0&&(f=(u=m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel)).atkSpeed),this.equipData_wear.starLevel&&this.equipData_wear.starLevel>0&&(y=(u=m.DataMgr.getInstance().getEquipStarCfg(this.equipData_wear.id,this.equipData_wear.starLevel)).atkSpeed),a=n.atkSpeed+f-(r.atkSpeed+y)):4==t?(f=0,y=0,this.curEquipData.starLevel&&this.curEquipData.starLevel>0&&(f=(u=m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel)).atkCrazyProb),this.equipData_wear.starLevel&&this.equipData_wear.starLevel>0&&(y=(u=m.DataMgr.getInstance().getEquipStarCfg(this.equipData_wear.id,this.equipData_wear.starLevel)).atkCrazyProb),a=n.atkCrazyProb+f-(r.atkCrazyProb+y)):5==t?(f=0,y=0,this.curEquipData.starLevel&&this.curEquipData.starLevel>0&&(f=(u=m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel)).atkCrazyHurt),this.equipData_wear.starLevel&&this.equipData_wear.starLevel>0&&(y=(u=m.DataMgr.getInstance().getEquipStarCfg(this.equipData_wear.id,this.equipData_wear.starLevel)).atkCrazyHurt),a=n.atkCrazyHurt+f-(r.atkCrazyHurt+y)):6==t?(f=0,y=0,this.curEquipData.starLevel&&this.curEquipData.starLevel>0&&(f=(u=m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel)).subHurt),this.equipData_wear.starLevel&&this.equipData_wear.starLevel>0&&(y=(u=m.DataMgr.getInstance().getEquipStarCfg(this.equipData_wear.id,this.equipData_wear.starLevel)).subHurt),a=n.subHurt-r.subHurt,a=n.subHurt+f-(r.subHurt+y)):7==t&&(f=0,y=0,this.curEquipData.starLevel&&this.curEquipData.starLevel>0&&(f=(u=m.DataMgr.getInstance().getEquipStarCfg(this.curEquipData.id,this.curEquipData.starLevel)).dodgeHurtProb),this.equipData_wear.starLevel&&this.equipData_wear.starLevel>0&&(y=(u=m.DataMgr.getInstance().getEquipStarCfg(this.equipData_wear.id,this.equipData_wear.starLevel)).dodgeHurtProb),a=n.dodgeHurtProb+f-(r.dodgeHurtProb+y))}else{var v=m.DataMgr.getInstance().getEquipStrengthenCfg(this.equipData_wear.id,this.equipData_wear.strengthenLv);8==t?(s=h.Utils.getTabelArr(this.strengthenCfgData.atk),p=h.Utils.getTabelArr(v.atk),a=(Number(s[1])+Number(s[0]))/2-(Number(p[1])+Number(p[0]))/2):9==t?a=this.strengthenCfgData.hp-v.hp:3==t?a=this.strengthenCfgData.atkSpeed-v.atkSpeed:4==t?a=this.strengthenCfgData.atkCrazyProb-v.atkCrazyProb:5==t?a=this.strengthenCfgData.atkCrazyHurt-v.atkCrazyHurt:6==t?a=this.strengthenCfgData.subHurt-v.subHurt:7==t&&(a=this.strengthenCfgData.dodgeHurtProb-v.dodgeHurtProb)}0==a?(o.active=!1,i.active=!1):(o.getComponent(cc.Sprite).spriteFrame=a>0?this.SpUp:this.SpDown,i.color=a>0?cc.color(64,220,47):cc.color(246,47,0),i.getComponent(cc.Label).string=""+Math.ceil(Math.abs(a)))}else o.active=!1,i.active=!1;break;default:o.active=!1,i.active=!1}else console.log("\u4e0d\u5b58\u5728\uff01\uff01\uff01")},e.prototype.loadEquipSuitInfo=function(){if(null!=this.equipCfgData.suitId){var t=m.DataMgr.getInstance().getEquipSuitCfg(this.equipCfgData.suitId);this.LayoutEquipSuitInfo.getChildByName("LabSuitName").getComponent(cc.Label).string=t.suitName+"\uff1a";for(var e=h.Utils.getTabelArr(t.suit2Prop),o=h.Utils.getTabelArr(t.suit4Prop),i=h.Utils.getTabelArr(t.suit6Prop),a=I.default.getInstance().getAllSuitList(),n=0;n<a.length;n++){var r=[255,255,255],s=["<color=#b16bff>\uff082\uff09</c><color=#ffffff>"+I.default.getInstance().getPropNameForPropType(Number(e[0]))+"\uff1a</c><color=#3bacf3>"+Number(e[1])+I.default.getInstance().getPropPercent(Number(e[0]))+"</color>","<color=#b16bff>\uff084\uff09</c><color=#ffffff>"+I.default.getInstance().getPropNameForPropType(Number(o[0]))+"\uff1a</c><color=#3bacf3>"+Number(o[1])+I.default.getInstance().getPropPercent(Number(o[0]))+"</color>","<color=#b16bff>\uff086\uff09</c><color=#ffffff>"+I.default.getInstance().getPropNameForPropType(Number(i[0]))+"\uff1a</c><color=#3bacf3>"+Number(i[1])+I.default.getInstance().getPropPercent(Number(i[0]))+"</color>"];if(t.id==a[n].id){a[n].count<2?(r=[127,127,127],s=["\uff082\uff09"+I.default.getInstance().getPropNameForPropType(Number(e[0]))+"\uff1a"+Number(e[1])+I.default.getInstance().getPropPercent(Number(e[0])),"\uff084\uff09"+I.default.getInstance().getPropNameForPropType(Number(o[0]))+"\uff1a"+Number(o[1])+I.default.getInstance().getPropPercent(Number(o[0])),"\uff086\uff09"+I.default.getInstance().getPropNameForPropType(Number(i[0]))+"\uff1a"+Number(i[1])+I.default.getInstance().getPropPercent(Number(i[0]))]):a[n].count>=2&&a[n].count<4?(r=[255,127,127],s=["<color=#b16bff>\uff082\uff09</c><color=#ffffff>"+I.default.getInstance().getPropNameForPropType(Number(e[0]))+"\uff1a</c><color=#3bacf3>"+Number(e[1])+I.default.getInstance().getPropPercent(Number(e[0]))+"</color>","\uff084\uff09"+I.default.getInstance().getPropNameForPropType(Number(o[0]))+"\uff1a"+Number(o[1])+I.default.getInstance().getPropPercent(Number(o[0])),"\uff086\uff09"+I.default.getInstance().getPropNameForPropType(Number(i[0]))+"\uff1a"+Number(i[1])+I.default.getInstance().getPropPercent(Number(i[0]))]):a[n].count>=4&&a[n].count<6?(r=[255,255,127],s=["<color=#b16bff>\uff082\uff09</c><color=#ffffff>"+I.default.getInstance().getPropNameForPropType(Number(e[0]))+"\uff1a</c><color=#3bacf3>"+Number(e[1])+I.default.getInstance().getPropPercent(Number(e[0]))+"</color>","<color=#b16bff>\uff084\uff09</c><color=#ffffff>"+I.default.getInstance().getPropNameForPropType(Number(o[0]))+"\uff1a</c><color=#3bacf3>"+Number(o[1])+I.default.getInstance().getPropPercent(Number(o[0]))+"</color>","\uff086\uff09"+I.default.getInstance().getPropNameForPropType(Number(i[0]))+"\uff1a"+Number(i[1])+I.default.getInstance().getPropPercent(Number(i[0]))]):a[n].count>=6&&(r=[255,255,255],s=["<color=#b16bff>\uff082\uff09</c><color=#ffffff>"+I.default.getInstance().getPropNameForPropType(Number(e[0]))+"\uff1a</c><color=#3bacf3>"+Number(e[1])+I.default.getInstance().getPropPercent(Number(e[0]))+"</color>","<color=#b16bff>\uff084\uff09</c><color=#ffffff>"+I.default.getInstance().getPropNameForPropType(Number(o[0]))+"\uff1a</c><color=#3bacf3>"+Number(o[1])+I.default.getInstance().getPropPercent(Number(o[0]))+"</color>","<color=#b16bff>\uff086\uff09</c><color=#ffffff>"+I.default.getInstance().getPropNameForPropType(Number(i[0]))+"\uff1a</c><color=#3bacf3>"+Number(i[1])+I.default.getInstance().getPropPercent(Number(i[0]))+"</color>"]),this.LayoutEquipSuitInfo.getChildByName("LabSuit2").getComponent(cc.RichText).string=s[0],this.LayoutEquipSuitInfo.getChildByName("LabSuit2").opacity=r[0],this.LayoutEquipSuitInfo.getChildByName("LabSuit4").getComponent(cc.RichText).string=s[1],this.LayoutEquipSuitInfo.getChildByName("LabSuit4").opacity=r[1],this.LayoutEquipSuitInfo.getChildByName("LabSuit6").getComponent(cc.RichText).string=s[2],this.LayoutEquipSuitInfo.getChildByName("LabSuit6").opacity=r[2];break}}}else this.LayoutEquipSuitInfo.active=!1},e.prototype.loadQHInfo=function(){var t=0,e=1;if("B"==this.getAbType()||"D"==this.getAbType()){var o=m.DataMgr.getInstance().getEquipCfg(this.curEquipData.id),i=h.Utils.getTabelArr1(o.consume),a=this.curEquipData.strengthenLv;a<o.strengthenMaxLv&&(t=Number(i[Math.floor(a/1)][1]),e=1)}else t=this.strengthenCfgData.consume,e=this.strengthenCfgData.AdvertisementNum;this.BtnQH.getChildByName("LabCost").getComponent(cc.Label).string=""+t,1==e?(this.BtnVideoQH.getChildByName("LabCost").active=!1,this.BtnVideoQH.getChildByName("NodeVideo").position=cc.v3(0,0)):(this.BtnVideoQH.getChildByName("LabCost").active=!0,this.BtnVideoQH.getChildByName("LabCost").getComponent(cc.Label).string=this.curEquipData.videoCount+"/"+this.strengthenCfgData.AdvertisementNum,this.BtnVideoQH.getChildByName("NodeVideo").position=cc.v3(0,15)),this.curEquipData.strengthenLv>=this.equipCfgData.strengthenMaxLv&&("A"!=this.getAbType()&&"C"!=this.getAbType()||(this.LayoutBtn.active=!1),"B"!=this.getAbType()&&"D"!=this.getAbType()||this.LayoutEquipBtnInfo.getChildByName("max").setPosition(this.BtnQH.position.x,this.LayoutEquipBtnInfo.getChildByName("max").position.y),this.LayoutEquipBtnInfo.active=!0,this.BtnQH.getComponent(cc.Button).interactable=!1)},e.prototype.loadSellInfo=function(){var t;t="B"==this.getAbType()||"D"==this.getAbType()?I.default.getInstance().getEquipSellValue(this.curEquipData.id,this.curEquipData.type,this.curEquipData.IDCard,this.curEquipData):this.strengthenCfgData.sellPrice,this.LabCoinCount.string=""+t,this.BtnSell.active=!0,this.BtnReplace.active=!0,this.isExistEquip?this.BtnReplace.getChildByName("LabBtn").getComponent(cc.Label).string="\u66ff\u6362":this.BtnReplace.getChildByName("LabBtn").getComponent(cc.Label).string="\u7a7f\u6234"},e.prototype.loadInfo=function(){switch(this.LayoutEquipBtnInfo.active=!1,this.showType){case I.EnumEquipInfo.EnumNoShow:this.LayoutEquipBtnInfo.active=!1;break;case I.EnumEquipInfo.EnumStrengthen:"A"!=this.getAbType()&&"C"!=this.getAbType()||(this.LayoutBtn.active=!0),this.LayoutCost.active=!1,this.BtnSell.active=!1,this.BtnReplace.active=!1,this.BtnUnload.active=!0,this.loadQHInfo();break;case I.EnumEquipInfo.EnumSell:"A"!=this.getAbType()&&"C"!=this.getAbType()||(this.LayoutBtn.active=!1),this.LayoutCost.active=!0,this.BtnSell.active=!0,this.BtnReplace.active=!0,this.BtnUnload.active=!1,this.loadQHInfo(),this.loadSellInfo()}},e.prototype.closeView=function(){this.closeUI()},e.prototype.getEquipNameForType=function(t){var e="\u6b66\u5668";switch(t){case 1:e="\u6b66\u5668";break;case 2:e="\u5934\u76d4";break;case 3:e="\u9879\u94fe";break;case 4:e="\u76d4\u7532";break;case 5:e="\u62a4\u8155";break;case 6:e="\u6212\u6307"}return e},e.prototype.strengthenEquip=function(t){if(void 0===t&&(t=!1),this.curEquipData.strengthenLv>=this.equipCfgData.strengthenMaxLv)d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u5f3a\u5316\u5df2\u5230\u8fbe\u6700\u5927\u7b49\u7ea7");else{var e=!1;if(t)e=!0;else{var o=k.PlayerMgr.getInstance().geUserData(),i=(m.DataMgr.getInstance().getEquipCfg(this.curEquipData.id),0);if("B"==this.getAbType()||"D"==this.getAbType()){var a=m.DataMgr.getInstance().getEquipCfg(this.curEquipData.id),n=h.Utils.getTabelArr1(a.consume),r=this.curEquipData.strengthenLv;if(r<a.strengthenMaxLv)switch(i=Number(n[Math.floor(r/10)][1]),a.consumeType){case 1:o.subGoldNum(i)&&(e=!0);break;case 2:o.subInGotNum(i)&&(e=!0)}}else switch(i=this.strengthenCfgData.consume,this.strengthenCfgData.consumeType){case 1:o.subGoldNum(i)&&(e=!0);break;case 2:o.subInGotNum(i)&&(e=!0)}}if(e){k.PlayerMgr.getInstance().getMainTaskData().mainTask(2),this.playEffForUpLv(),this.playEffForPropUp(),l.AudioMgr.getInstance().playEffect(f.AudioId.Sound_Upgrade),d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u5f3a\u5316\u6210\u529f"),S.default.getInstance().addEquipStrengthenCountForTask(),this.curEquipData.strengthenLv+=1,this.curEquipData.strengthenLv<=3&&k.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.equip_upgrade_X_Y,this.curEquipData.id,this.curEquipData.strengthenLv),(o=k.PlayerMgr.getInstance().geUserData()).setEquipCountByid(this.curEquipData.id+"",1),o.getEquipCountByid(this.curEquipData.id+"")<=5&&k.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.refine_equip_lv_time_X,this.curEquipData.id,o.getEquipCountByid(this.curEquipData.id+"")),"A"!=this.getAbType()&&"C"!=this.getAbType()||(this.strengthenCfgData=m.DataMgr.getInstance().getEquipStrengthenCfg1(this.equipCfgData.strengthenStartId,this.curEquipData.strengthenLv)),this.loadEquipStrengthenProp(),this.loadInfo(),this.equipQHForRedDot();var s=this.showType==I.EnumEquipInfo.EnumSell;I.default.getInstance().strengthenEquip(this.curEquipData,s)}}},s([N(cc.SpriteFrame)],e.prototype,"SpLock",void 0),s([N(cc.SpriteFrame)],e.prototype,"SpUnlock",void 0),s([N(cc.SpriteFrame)],e.prototype,"SpUp",void 0),s([N(cc.SpriteFrame)],e.prototype,"SpDown",void 0),s([N({type:cc.Node,tooltip:"\u88c5\u5907\u5c5e\u6027\u8282\u70b9"})],e.prototype,"LayoutProp",void 0),s([N(cc.Node)],e.prototype,"BtnLock",void 0),s([N(cc.Node)],e.prototype,"BtnClose",void 0),s([N(cc.Node)],e.prototype,"LayoutBg",void 0),s([N(cc.Node)],e.prototype,"NodeStar",void 0),s([N(cc.Sprite)],e.prototype,"SpIconBg",void 0),s([N(cc.Sprite)],e.prototype,"SpIcon",void 0),s([N(cc.Label)],e.prototype,"LabStrengthenLv",void 0),s([N(cc.Label)],e.prototype,"LabName",void 0),s([N(cc.Label)],e.prototype,"LabFightNum",void 0),s([N(cc.Label)],e.prototype,"LabType",void 0),s([N(cc.RichText)],e.prototype,"LabLv",void 0),s([N(cc.Node)],e.prototype,"LayoutEquipProp",void 0),s([N(cc.Node)],e.prototype,"LayoutEquipSuitInfo",void 0),s([N(cc.Node)],e.prototype,"LayoutEquipBtnInfo",void 0),s([N(cc.Node)],e.prototype,"LayoutBtn",void 0),s([N(cc.Node)],e.prototype,"LayoutCost",void 0),s([N({type:cc.Label,tooltip:"\u51fa\u552e\u6570\u91cf"})],e.prototype,"LabCoinCount",void 0),s([N(cc.Node)],e.prototype,"BtnQH",void 0),s([N(cc.Node)],e.prototype,"BtnVideoQH",void 0),s([N(cc.Node)],e.prototype,"BtnHC",void 0),s([N(cc.Node)],e.prototype,"BtnSell",void 0),s([N(cc.Node)],e.prototype,"BtnReplace",void 0),s([N(cc.Node)],e.prototype,"BtnUnload",void 0),s([_],e)}(c.default);n.default=T,cc._RF.pop()},{}],UIEquip:[function(t,e,o){"use strict";cc._RF.push(e,"df661Y13VJOpbY/cFYEUzF3","UIEquip");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("AudioMgr"),u=a("EventMgr"),p=a("ResourceMgr"),d=a("SdkMgr"),g=a("UIMgr"),h=a("TimeUtils"),f=a("Utils"),y=a("Main"),m=a("Config"),v=a("TrackDataEvent"),I=a("DataMgr"),k=a("EquipMgr"),S=a("GameMgr"),C=a("GoodsManager"),b=a("PlayerMgr"),_=a("RedDotMgr"),N=a("RoleMgr"),T=a("TaskMgr"),D=a("TipsMgr"),M=a("NodeEquip"),B=a("NodeWearEquip"),P=a("UIGuide"),L=cc._decorator,E=L.ccclass,w=L.property,U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeUp=null,e.NodeWearEquip=null,e.NodeEquip=null,e.NodeBagItem=null,e.LabPageNum=null,e.NodeCenter=null,e.LayoutEquipPre=null,e.LayoutSuitPre=null,e.NodeWearEquipParent=null,e.NodeSuit=null,e.LayoutEquip=null,e.LayoutSuit=null,e.BtnSuitClose=null,e.BtnBack=null,e.BtnSellQuick=null,e.BtnReloadingQuick=null,e.BtnSalutation=null,e.BtnSuitInfo=null,e.BtnUnlockBag=null,e.NodeUnlockBag=null,e.NodeLockBag=null,e.SpSalutation=null,e.LabFightNum=null,e.LabAtkNum=null,e.LabHpNum=null,e.PageViewBag=null,e.ContentBag=null,e.Indicator=null,e.LabBagCount=null,e.LayerTouch=null,e.curPageIndex=0,e.curBagIndexCount=100,e.nodePageList=[],e.nodeBagItemList=[],e.nodeEquipItemList=[],e.dataEquipItemList=[],e.indexBagList=[],e.isLoadEnd=!1,e}return r(e,t),e.prototype.onLoad=function(){y.default.instance.controlPetShow(!1),this.registerEvent()},e.prototype.start=function(){y.default.instance.destroyPlayer_Home(!0),this.registerBtnEvent(),this.controlHomeSalutation(),u.EventMgr.getInstance().emit(m.EventName.ShowUITop,!1),this.initData(),this.initView(),this.refreshRedDot(),this.detectionBagOver(),this.guideShow()},e.prototype.guideShow=function(){var t=this,e=b.PlayerMgr.getInstance().getGuideData();if(!e.getGuideEnd()){var o=e.getCurrentId();if(o==9+e.putGuideNum)(i=new P.GuildCfg).tipstring="<color=#ff6b1b>\u9ad8\u54c1\u8d28\u88c5\u5907</color>\u548c<color=#ff6b1b>\u88c5\u5907\u5f3a\u5316</color>\u662f\u6700\u91cd\u8981\u7684<color=#ff6b1b>\u6218\u529b\u6765\u6e90</color>\u5662~",i.yDec=-150,i.isWeek=!0,i.showHand=!1,i.callBack=function(){t.scheduleOnce(function(){t.guideShow()},.2)},this.openUICallBack(m.UIID.UIGuide,function(){e.addCurrentId()},i);else if(o==10+e.putGuideNum){var i;(i=new P.GuildCfg).distNode=this.BtnReloadingQuick,i.tipstring="\u521a\u521a\u867d\u7136\u6ca1\u51fa\u4ec0\u4e48\u6781\u54c1\uff0c\u4f46\u662f\u51d1\u5408\u5148\u7528\u7740\u5427!\n<color=#ff6b1b>\u4e00\u952e\u6362\u88c5</color>\u53ef\u4ee5\u5feb\u901f\u7a7f\u6234\u88c5\u5907\u5662",i.yDec=0,this.openUICallBack(m.UIID.UIGuide,function(){e.addCurrentId()},i)}else o==11+e.putGuideNum&&this.scheduleOnce(function(){t.isOpenTouch(!1);var o=new P.GuildCfg;o.distNode=t.BtnBack,o.tipstring="\u5f88\u68d2\uff01<color=#ff6b1b>\u6218\u6597\u529b</color>\u5927\u5e45\u5ea6\u63d0\u5347\u4e86\u5662\uff01\n\u73b0\u5728\u53bb\u770b\u770b\u521a\u83b7\u5f97\u7684<color=#ff6b1b>\u6280\u80fd</color>\u5427",o.yDec=-150,t.openUICallBack(m.UIID.UIGuide,function(){e.addCurrentId()},o)},2)}},e.prototype.isOpenTouch=function(t){void 0===t&&(t=!1),this.LayerTouch.active=t},e.prototype.detectionBagOver=function(){C.default.getInstance().isOverEquipBagForIndex()&&g.UIMgr.getInstance().openUI(m.UIID.UINotBagIndex,-1,m.UIID.UIEquip)},e.prototype.controlHomeSalutation=function(){y.default.instance.controlWearSalutation(!1)},e.prototype.refreshRedDot=function(){_.default.getInstance().equipForRedDot(this.BtnReloadingQuick.getChildByName("SpRedDot"))},e.prototype.refreshWearEquipRedDot=function(){},e.prototype.registerEvent=function(){this.addEvent(m.EventName.RefreshEquipViewInfo,this.loadPlayerInfo),this.addEvent(m.EventName.RefreshBagIndexCount,this.loadBagIndexCount),this.addEvent(m.EventName.WearEquip,this.wearEquip),this.addEvent(m.EventName.UnloadEquip,this.unloadEquip),this.addEvent(m.EventName.SellEquip,this.sellEquip),this.addEvent(m.EventName.ReplaceEquip,this.replaceEquip),this.addEvent(m.EventName.SellQuickEquip,this.sellQuick),this.addEvent(m.EventName.UnlockEquip,this.unlockEquip),this.addEvent(m.EventName.RefreshSalutation,this.refreshSalutation),this.addEvent(m.EventName.RefreshSalutationRedDot,this.refreshSalutationRedDot),this.addEvent(m.EventName.EquipGuideShow,this.guideShow)},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.guide11),S.default.getInstance().openHomeUI(),t.closeUI()}),this.BtnSalutation.on(cc.Node.EventType.TOUCH_END,function(){b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.click_equip_title),g.UIMgr.getInstance().openUI(m.UIID.UISalutation,-1)}),this.BtnSuitInfo.on(cc.Node.EventType.TOUCH_END,function(){t.loadSuitView(!t.LayoutSuit.active)}),this.BtnSuitClose.on(cc.Node.EventType.TOUCH_END,function(){t.loadSuitView(!1)}),this.BtnSellQuick.on(cc.Node.EventType.TOUCH_END,function(){b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.click_equip_quicksale),g.UIMgr.getInstance().openUI(m.UIID.UISellView,-1,m.UIID.UIEquip)}),this.BtnReloadingQuick.on(cc.Node.EventType.TOUCH_END,function(){t.isLoadEnd?(b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.guide10),t.reloadingQuick(),t.refreshRedDot(),u.EventMgr.getInstance().emit(m.EventName.RefreshRedDot,!0,!1,!1,!1,!1)):t.scheduleOnce(function(){t.isLoadEnd=!0},1);var e=b.PlayerMgr.getInstance().getGuideData();e.getGuideEnd()||(e.getCurrentId()==11+e.putGuideNum&&t.isOpenTouch(!0),t.guideShow())}),this.BtnUnlockBag.on(cc.Node.EventType.TOUCH_END,function(){var e=h.TimeUtils.GetTimeBySecond(),o=h.TimeUtils.GetTimeByHours2();d.SdkMgr.getInstance().playVideo(1,function(){var i=h.TimeUtils.GetTimeBySecond(),a=h.TimeUtils.GetTimeByHours2();b.PlayerMgr.getInstance().getTrackData().testTrackTime("equipvacancy",o,a,e,i),b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.equipvacancy),b.PlayerMgr.getInstance().getTrackData().youmengTrackNew("equipvacancy_b"),t.userData.addbagIndexCount(),t.refreshNodeBagIndex(),t.loadBagIndexCount()})})},e.prototype.initData=function(){this.userData=b.PlayerMgr.getInstance().geUserData(),this.initCurPage()},e.prototype.initCurPage=function(){this.curPageIndex=this.PageViewBag.getCurrentPageIndex()},e.prototype.initView=function(){this.initCurrency(),this.refreshSalutation(),this.loadPlayerEquipIndex(),this.loadSuitView(),this.loadPlayerInfo(),this.loadBagIndexCount(),this.loadPageNum(),this.loadBagPage(),this.refreshNodeBagIndex()},e.prototype.refreshNodeBagIndex=function(){var t=this.NodeBagItem.getContentSize().height,e=Math.floor(this.userData.getBagIndexCount()/18);if(this.curPageIndex==e){var o=0,i=0,a=3,n=this.userData.getBagIndexCount()%18;n>=0&&n<6?(o=1,i=.5,a=2):n>=6&&n<11?(o=0,i=1,a=1):(o=-1,i=0,a=0);var r=this.PageViewBag.node.y+o*(t+17);if(this.NodeUnlockBag.position=cc.v3(0,r),0==i)this.NodeLockBag.position=cc.v3(0,2e3);else{var s=this.PageViewBag.node.y-i*t-17*i;this.NodeLockBag.position=cc.v3(0,s);var c=a*t+17*(a-1);this.NodeLockBag.setContentSize(cc.size(735,c))}}else if(this.curPageIndex>e){this.NodeUnlockBag.position=cc.v3(0,2e3),this.NodeLockBag.position=cc.v3(0,this.PageViewBag.node.y);var l=3*t+34;this.NodeLockBag.setContentSize(cc.size(735,l))}else this.NodeUnlockBag.position=cc.v3(0,2e3),this.NodeLockBag.position=cc.v3(0,2e3)},e.prototype.initCurrency=function(){var t=this;this.loadPrefab("prefabs","widget/NodeCurrency",function(e){cc.instantiate(e).parent=t.NodeUp})},e.prototype.loadPlayerEquipIndex=function(){var t=cc.instantiate(this.LayoutEquipPre);t.parent=this.NodeWearEquipParent,this.LayoutEquip=t,this.loadPlayerWearEquip()},e.prototype.loadPlayerWearEquip=function(){for(var t=k.default.getInstance().getWearEquipList(),e=0;e<t.length;e++)t[e]&&this.addPlayerEquipForType(t[e].type,t[e])},e.prototype.loadSuitView=function(t){if(void 0===t&&(t=!1),!cc.isValid(this.LayoutSuit)){var e=cc.instantiate(this.LayoutSuitPre);e.parent=this.NodeSuit,e.position=cc.v3(0,-78),e.zIndex=-1,this.LayoutSuit=e}this.LayoutSuit.active=t,this.BtnSuitClose.active=t,this.refreshSuitView()},e.prototype.refreshSuitView=function(){for(var t=k.default.getInstance().getAllSuitList(),e=0,o=this.LayoutSuit.getChildByName("LayoutSuitProp1"),i=0;i<t.length;i++)if(!(t[i].count<2)){e++;var a=this.LayoutSuit.getChildByName("LayoutSuitProp"+e);cc.isValid(a)||((a=cc.instantiate(o)).name="LayoutSuitProp"+e,a.parent=this.LayoutSuit);var n=I.DataMgr.getInstance().getEquipSuitCfg(t[i].id);a.getChildByName("LabSuitName").getComponent(cc.Label).string=n.suitName+"\uff1a";var r=f.Utils.getTabelArr(n.suit2Prop),s=f.Utils.getTabelArr(n.suit4Prop),c=f.Utils.getTabelArr(n.suit6Prop),l=k.default.getInstance().getPropNameForPropType(Number(r[0])),u=k.default.getInstance().getPropNameForPropType(Number(s[0])),p=k.default.getInstance().getPropNameForPropType(Number(c[0])),d=a.getChildByName("LayoutProp");d.getChildByName("LabSuit2Prop").getComponent(cc.RichText).string="\uff082\uff09"+l+"<color = #fce445>+"+r[1]+"%</color>",d.getChildByName("LabSuit4Prop").getComponent(cc.RichText).string="\uff084\uff09"+u+"<color = #fce445>+"+s[1]+"%</color>",d.getChildByName("LabSuit6Prop").getComponent(cc.RichText).string="\uff086\uff09"+p+"<color = #fce445>+"+c[1]+"%</color>";var g=[!1,!1,!1];t[i].count>=2&&t[i].count<4?(g=[!0,!1,!1],a.setContentSize(cc.size(455,35))):t[i].count>=4&&t[i].count<6?(g=[!0,!0,!1],a.setContentSize(cc.size(455,70))):t[i].count>=6&&(g=[!0,!0,!0],a.setContentSize(cc.size(455,100))),d.getChildByName("LabSuit2Prop").active=g[0],d.getChildByName("LabSuit4Prop").active=g[1],d.getChildByName("LabSuit6Prop").active=g[2]}for(this.LayoutSuit.getChildByName("LabSuitTitle").active=0!=e,this.LayoutSuit.getChildByName("LayoutSuitProp1").active=0!=e,this.LayoutSuit.getChildByName("LabNotSuit").active=0==e,i=2;i<=3;i++)a=this.LayoutSuit.getChildByName("LayoutSuitProp"+i),cc.isValid(a)&&i>e&&(console.log("node\uff1a",a),a.destroy())},e.prototype.loadPlayerInfo=function(){var t=N.default.getInstance().curFightNumForPlayer,e=N.default.getInstance().getPlayerFightNum();t!=e&&D.default.getInstance().playFightnChangTips(this.node,cc.v3(0,450),t,e),this.LabFightNum.string="\u6218\u529b\uff1a"+e,T.default.getInstance().upFightNumForTask(e);var o=N.default.getInstance().getPlayerPro(),i=Math.floor((o.attack_min+o.attack_max)/2);this.LabAtkNum.string="<color=#ffffff>\u653b\u51fb\u529b\uff1a</c><color=#ffe380>"+i+"</color>",this.LabHpNum.string="<color=#ffffff>\u8840\u91cf\u4e0a\u9650\uff1a</c><color=#ffe380>"+o.hp_total+"</color>"},e.prototype.loadPageNum=function(){if(this.nodePageList||(this.nodePageList=[]),this.nodePageList.length>0)for(var t=0;t<this.nodePageList.length;t++)cc.isValid(this.nodePageList[t])&&(this.curPageIndex==t?this.nodePageList[t].color=cc.color(191,108,0):this.nodePageList[t].color=cc.color(255,255,255));else for(t=0;t<this.Indicator.childrenCount;t++)if(cc.isValid(this.Indicator.children[t])){var e=cc.instantiate(this.LabPageNum);e.parent=this.Indicator.children[t],e.position=cc.Vec3.ZERO,e.getComponent(cc.Label).string=""+(t+1),this.curPageIndex==t&&(e.color=cc.color(191,108,0)),this.nodePageList.push(e)}},e.prototype.loadBagPage=function(){for(var t=k.default.getInstance().getOwnedEquipList(),e=0;e<8;e++){var o=this.ContentBag.children[e];this.loadBagItem(o,!1,e,t)}},e.prototype.loadBagItem=function(t,e,o,i){for(var a=this,n=function(e){r.scheduleOnce(function(){var n=cc.instantiate(a.NodeBagItem);n.parent=t,n.position=cc.Vec3.ZERO,a.nodeBagItemList.push(n);var r=e+18*o;i.length>r&&(a.loadEquipToBag(r,n,i[r]),r==k.default.getInstance().getOwnedEquipCount()-1&&(a.isLoadEnd=!0))},.02*(e+18*o))},r=this,s=0;s<18;s++)n(s)},e.prototype.loadEquipToBag=function(t,e,o){var i=cc.instantiate(this.NodeEquip);i.parent=e,k.default.getInstance().playEffForQuality(i,o.quality),i.getComponent(M.default).initData(t,o,m.UIID.UIEquip);var a=I.DataMgr.getInstance().getEquipCfg(o.id);this.loadSpriteFrame(a.bundleQuality,a.iconQuality,function(t){i.getComponent(cc.Sprite).spriteFrame=t}),this.loadSpriteFrame(a.bundle,a.equipIcon,function(t){i.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),o.strengthenLv>0?(i.getChildByName("LabStrengthenLv").active=!0,i.getChildByName("LabStrengthenLv").getComponent(cc.Label).string="+"+o.strengthenLv):i.getChildByName("LabStrengthenLv").active=!1,i.getChildByName("SpLock").active=!o.isUnlock;var n=b.PlayerMgr.getInstance().getAbType();if("D"==n||"B"==n){var r=o.starLevel?o.starLevel:0;if(r>0){var s=i.getChildByName("NodeStar");s.active=!0;for(var c=0;c<s.childrenCount;c++)r>c?cc.isValid(s.children[c])&&(s.children[c].getChildByName("SpStar").active=!0):cc.isValid(s.children[c])&&(s.children[c].getChildByName("SpStar").active=!1)}}this.nodeEquipItemList.length>t?(this.nodeEquipItemList[t]=i,this.dataEquipItemList[t]=o):(this.nodeEquipItemList.push(i),this.dataEquipItemList.push(o))},e.prototype.setVisibleForBagItem=function(){for(var t=0;t<8;t++){var e=this.ContentBag.children[t],o=!1;if(this.curPageIndex==t||this.curPageIndex-1==t||this.curPageIndex+1==t){o=!0;for(var i=0;i<18;i++)e.children[i].opacity=o?255:0}}},e.prototype.callbackPageView=function(){b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.click_equip_slide),this.initCurPage(),this.loadPageNum(),this.refreshNodeBagIndex()},e.prototype.loadBagIndexCount=function(){var t=k.default.getInstance().getOwnedEquipCount();this.curBagIndexCount=this.userData.getBagIndexCount(),this.LabBagCount.string="\uff08"+t+"/"+this.curBagIndexCount+"\uff09"},e.prototype.destroyBagItemforIndex=function(t){if(this.nodeBagItemList&&!(t>=this.nodeBagItemList.length||t<0)){var e=this.nodeBagItemList[t].children[0];cc.isValid(e)&&(e.destroy(),t<this.nodeEquipItemList.length&&(this.nodeEquipItemList[t]=null,this.dataEquipItemList[t]=null))}},e.prototype.addBagItemForIndex=function(t,e){if(void 0===e&&(e=null),this.nodeBagItemList&&t){var o=e;null==o&&(o=this.nodeEquipItemList.length,this.indexBagList&&this.indexBagList.length>0&&(o=this.indexBagList[0],this.indexBagList.splice(0,1)));var i=this.nodeBagItemList[o];cc.isValid(i)&&this.loadEquipToBag(o,i,t)}},e.prototype.destroyPlayerEquipForType=function(t){var e=this.LayoutEquip.getChildByName("NodeEquip"+t);cc.isValid(e)&&cc.isValid(e.children[0])&&e.children[0].destroy()},e.prototype.addPlayerEquipForType=function(t,e){if(e){var o=this.LayoutEquip.getChildByName("NodeEquip"+t);if(cc.isValid(o)){var i=cc.instantiate(this.NodeWearEquip);i.parent=o,i.position=cc.Vec3.ZERO;var a=I.DataMgr.getInstance().getEquipCfg(e.id);this.loadSpriteFrame(a.bundleQuality,a.iconQuality,function(t){i.getComponent(cc.Sprite).spriteFrame=t}),this.loadSpriteFrame(a.bundle,a.equipIcon,function(t){i.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),e.strengthenLv>0?(i.getChildByName("LabStrengthenLv").active=!0,i.getChildByName("LabStrengthenLv").getComponent(cc.Label).string="+"+e.strengthenLv):i.getChildByName("LabStrengthenLv").active=!1;var n=b.PlayerMgr.getInstance().getAbType();if("D"==n||"B"==n){var r=e.starLevel?e.starLevel:0;if(r>0){var s=i.getChildByName("NodeStar");s.active=!0;for(var c=0;c<s.childrenCount;c++)r>c?cc.isValid(s.children[c])&&(s.children[c].getChildByName("SpStar").active=!0):cc.isValid(s.children[c])&&(s.children[c].getChildByName("SpStar").active=!1)}}k.default.getInstance().playEffForQuality(i,e.quality);var l=k.default.getInstance().getWearEquipData(t);i.getComponent(B.default).initData(-1,l,m.UIID.UIEquip);var u,p=0;if("D"==n||"B"==n){var d=I.DataMgr.getInstance().getEquipCfg(e.id),g=f.Utils.getTabelArr1(d.consume),h=e.strengthenLv;h<d.strengthenMaxLv&&(p=Number(g[Math.floor(h/10)][1]))}else p=I.DataMgr.getInstance().getEquipStrengthenCfg1(a.strengthenStartId,e.strengthenLv).consume;u=b.PlayerMgr.getInstance().geUserData().getGoldNum()>=p,i.getChildByName("SpRedDot").active=u}}},e.prototype.refreshIndexBagList=function(t,e){void 0===e&&(e=!0),this.indexBagList.push(t),this.indexBagList.sort(function(t,e){return t-e})},e.prototype.wearEquip=function(t,e){this.destroyBagItemforIndex(t),this.loadBagIndexCount(),this.addPlayerEquipForType(e.type,e),this.refreshIndexBagList(t),this.loadPlayerInfo(),this.refreshRedDot(),l.AudioMgr.getInstance().playEffect(m.AudioId.Sound_WearEquip)},e.prototype.unloadEquip=function(t){this.destroyPlayerEquipForType(t.type),this.loadBagIndexCount(),this.addBagItemForIndex(t),this.loadPlayerInfo(),this.refreshRedDot(),this.detectionBagOver(),l.AudioMgr.getInstance().playEffect(m.AudioId.Sound_WearEquip)},e.prototype.sellEquip=function(t){this.destroyBagItemforIndex(t),this.loadBagIndexCount(),this.refreshIndexBagList(t),this.refreshRedDot(),l.AudioMgr.getInstance().playEffect(m.AudioId.Sound_SellEquip)},e.prototype.replaceEquip=function(t,e,o){this.destroyPlayerEquipForType(e.type),this.addPlayerEquipForType(o.type,o),this.destroyBagItemforIndex(t),this.addBagItemForIndex(e,t),this.loadPlayerInfo(),this.refreshRedDot(),l.AudioMgr.getInstance().playEffect(m.AudioId.Sound_WearEquip)},e.prototype.sellQuick=function(t){var e=this,o=t;if(o&&!(o.length<=0)){for(var i=0,a=0;a<this.nodeEquipItemList.length;a++)if(cc.isValid(this.nodeEquipItemList[a]&&this.dataEquipItemList[a])&&this.dataEquipItemList[a].isUnlock){var n,r=I.DataMgr.getInstance().getEquipCfg(this.dataEquipItemList[a].id),s=b.PlayerMgr.getInstance().getAbType();n="D"==s||"B"==s?k.default.getInstance().getEquipSellValue(this.dataEquipItemList[a].id,this.dataEquipItemList[a].type,this.dataEquipItemList[a].IDCard,this.dataEquipItemList[a]):I.DataMgr.getInstance().getEquipStrengthenCfg1(r.strengthenStartId,this.dataEquipItemList[a].strengthenLv).sellPrice;for(var c=!1,l=0;l<o.length;l++)if(r.qualityId==o[l]){i+=n,c=!0;break}c&&k.default.getInstance().sellEquip(a,this.dataEquipItemList[a])}i>0&&(this.refreshRedDot(),b.PlayerMgr.getInstance().geUserData().addGoldNum(i),g.UIMgr.getInstance().openUI(m.UIID.UITips,-1,"\u51fa\u552e\u6210\u529f\uff0c\u83b7\u5f97"+i+"\u91d1\u5e01"),this.scheduleOnce(function(){e.sortEquip()}))}},e.prototype.reloadingQuick=function(){for(var t=this,e=!1,o=1;o<=6;o++){for(var i=0,a=0,n=null,r=0;r<this.dataEquipItemList.length;r++)if(this.dataEquipItemList[r]&&o==this.dataEquipItemList[r].type){var s=0;i<(s="D"==(c=b.PlayerMgr.getInstance().getAbType())||"B"==c?k.default.getInstance().getEquipFightForId(this.dataEquipItemList[r].id,!1,this.dataEquipItemList[r].type,this.dataEquipItemList[r].IDCard,this.dataEquipItemList[r]):I.DataMgr.getInstance().getEquipStrengthenCfg(this.dataEquipItemList[r].id,this.dataEquipItemList[r].strengthenLv).fightNum)&&(i=s,a=r,n=this.dataEquipItemList[r])}if(n)if(k.default.getInstance().isExistEquipForType(o)){var c,l=k.default.getInstance().getWearEquipData(o);s=0,(s="D"==(c=b.PlayerMgr.getInstance().getAbType())||"B"==c?k.default.getInstance().getEquipFightForId(l.id,!1,l.type,l.IDCard,l):I.DataMgr.getInstance().getEquipStrengthenCfg(l.id,l.strengthenLv).fightNum)<i&&(k.default.getInstance().replaceEquip(a,l,n),e=!0)}else k.default.getInstance().wearEquip(a,n),e=!0;6==o&&(e?g.UIMgr.getInstance().openUI(m.UIID.UITips,-1,"\u6362\u88c5\u6210\u529f"):g.UIMgr.getInstance().openUI(m.UIID.UITips,-1,"\u6ca1\u6709\u53ef\u66f4\u6362\u7684\u88c5\u5907"))}this.scheduleOnce(function(){t.sortEquip()})},e.prototype.sortEquip=function(){for(var t=0;t<this.nodeEquipItemList.length;t++){var e=this.indexBagList[0];e<t&&cc.isValid(this.nodeEquipItemList[t])&&(this.nodeEquipItemList[t].parent=this.nodeBagItemList[e],this.nodeEquipItemList[e]=this.nodeEquipItemList[t],this.nodeEquipItemList[e].getComponent(M.default).refresData(e,this.dataEquipItemList[t]),this.nodeEquipItemList[t]=null,this.dataEquipItemList[e]=this.dataEquipItemList[t],this.dataEquipItemList[t]=null,this.indexBagList[0]=t,this.indexBagList.sort(function(t,e){return t-e}))}},e.prototype.unlockEquip=function(t,e){if(this.nodeBagItemList&&!(t>=this.nodeBagItemList.length||t<0)){var o=this.nodeBagItemList[t].children[0];cc.isValid(o)&&(o.getComponent(M.default).refresData(t,e),o.getChildByName("SpLock").active=!e.isUnlock)}},e.prototype.refreshSalutation=function(){var t=this;this.SpSalutation.childrenCount>0?this.loadSalutation(this.SpSalutation.getChildByName("NodeSalutation")):this.loadPrefab("prefabs","widget/NodeSalutation",function(e){var o=cc.instantiate(e);o.parent=t.SpSalutation,t.loadSalutation(o)})},e.prototype.loadSalutation=function(t){var e=this.userData.getWearSalutationId();if(!(e<1)){var o=I.DataMgr.getInstance().getSalutation(e);p.ResourceMgr.getInstance().loadSpriteframe(o.titleBundle,o.ResourcesRoute,function(e){t.getComponent(cc.Sprite).spriteFrame=e});var i=t.getComponent(cc.Animation);p.ResourceMgr.getInstance().loadRes(o.AnimBundle,o.AnimName,cc.AnimationClip,function(t){i.addClip(t),i.play(o.AnimName).repeatCount=1e5}),t.getChildByName("SpUpdate").active=this.userData.getIsNewSalutation()}},e.prototype.refreshSalutationRedDot=function(){this.SpSalutation.getChildByName("NodeSalutation").getChildByName("SpUpdate").active=this.userData.getIsNewSalutation()},s([w(cc.Node)],e.prototype,"NodeUp",void 0),s([w({type:cc.Prefab,tooltip:"\u73a9\u5bb6\u88c5\u5907\u9884\u5236"})],e.prototype,"NodeWearEquip",void 0),s([w({type:cc.Prefab,tooltip:"\u88c5\u5907\u9884\u5236"})],e.prototype,"NodeEquip",void 0),s([w({type:cc.Node,tooltip:"\u80cc\u5305\u7a7a\u58f3item"})],e.prototype,"NodeBagItem",void 0),s([w({type:cc.Node,tooltip:"\u80cc\u5305\u9875\u6570\u6807\u7b7e"})],e.prototype,"LabPageNum",void 0),s([w(cc.Node)],e.prototype,"NodeCenter",void 0),s([w({type:cc.Prefab,tooltip:"\u73a9\u5bb6\u88c5\u5907\u5751\u4f4d\u9884\u5236"})],e.prototype,"LayoutEquipPre",void 0),s([w({type:cc.Prefab,tooltip:"\u5957\u88c5\u9884\u5236"})],e.prototype,"LayoutSuitPre",void 0),s([w(cc.Node)],e.prototype,"NodeWearEquipParent",void 0),s([w(cc.Node)],e.prototype,"NodeSuit",void 0),s([w(cc.Node)],e.prototype,"BtnSuitClose",void 0),s([w(cc.Node)],e.prototype,"BtnBack",void 0),s([w(cc.Node)],e.prototype,"BtnSellQuick",void 0),s([w(cc.Node)],e.prototype,"BtnReloadingQuick",void 0),s([w(cc.Node)],e.prototype,"BtnSalutation",void 0),s([w(cc.Node)],e.prototype,"BtnSuitInfo",void 0),s([w(cc.Node)],e.prototype,"BtnUnlockBag",void 0),s([w({type:cc.Node,tooltip:"\u89e3\u9501\u69fd\u4f4d"})],e.prototype,"NodeUnlockBag",void 0),s([w({type:cc.Node,tooltip:"\u672a\u89e3\u9501\u69fd\u4f4d"})],e.prototype,"NodeLockBag",void 0),s([w({type:cc.Node,tooltip:"\u79f0\u53f7\u8282\u70b9"})],e.prototype,"SpSalutation",void 0),s([w(cc.Label)],e.prototype,"LabFightNum",void 0),s([w(cc.RichText)],e.prototype,"LabAtkNum",void 0),s([w(cc.RichText)],e.prototype,"LabHpNum",void 0),s([w(cc.PageView)],e.prototype,"PageViewBag",void 0),s([w(cc.Node)],e.prototype,"ContentBag",void 0),s([w(cc.Node)],e.prototype,"Indicator",void 0),s([w(cc.Label)],e.prototype,"LabBagCount",void 0),s([w({type:cc.Node,tooltip:"\u9632\u89e6\u6478\u5c42"})],e.prototype,"LayerTouch",void 0),s([E],e)}(c.default);n.default=U,cc._RF.pop()},{}],UIExit:[function(t,e,o){"use strict";cc._RF.push(e,"82bc2SPrPdJJ5G4D88S1WdC","UIExit");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("Appcfg"),u=a("EventMgr"),p=a("UIMgr"),d=a("CacheUtils"),g=a("Config"),h=cc._decorator,f=h.ccclass,y=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneName="Main",e.label=null,e.again=null,e.btnClose=null,e.text="hello",e}return r(e,t),e.prototype.onLoad=function(){u.EventMgr.getInstance().off(l.BaseEventName.GoGame,this,this.goGame)},e.prototype.start=function(){null==d.CacheUtils.getData(g.GameConfig.AppCacheName+"gddsmnq")?(d.CacheUtils.saveData(g.GameConfig.AppCacheName+"gddsmnq","1"),this.btnClose.x=0,this.again.active=!1):this.again.active=!0,this.btnClose.on(cc.Node.EventType.TOUCH_END,function(){cc.game.end()}),this.goGame()},e.prototype.goGame=function(){var t=this;this.again.on(cc.Node.EventType.TOUCH_END,function(){t.closeUI(),p.UIMgr.getInstance().openUI(g.UIID.UIRealName,-1,function(){cc.director.loadScene("Main")})})},s([y(cc.Label)],e.prototype,"label",void 0),s([y(cc.Node)],e.prototype,"again",void 0),s([y(cc.Node)],e.prototype,"btnClose",void 0),s([y],e.prototype,"text",void 0),s([f],e)}(c.default);n.default=m,cc._RF.pop()},{}],UIFastPass:[function(t,e,o){"use strict";cc._RF.push(e,"96935a/ip5HH7VAzfkHvz3+","UIFastPass");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("EventMgr"),u=a("SdkMgr"),p=a("TimeUtils"),d=a("Main"),g=a("Config"),h=a("TrackDataEvent"),f=a("DataMgr"),y=a("PlayerMgr"),m=cc._decorator,v=m.ccclass,I=m.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnFastPass=null,e.BtnResetStart=null,e.LabLevel=null,e.LabDec=null,e}return r(e,t),e.prototype.start=function(){y.PlayerMgr.getInstance().getTrackData().youmengTrack(h.TrackId.quickarrive_appear),l.EventMgr.getInstance().emit(g.EventName.ShowUITop,!1),this.registerBtnEvent(),this.initView()},e.prototype.initView=function(){var t=y.PlayerMgr.getInstance().geUserData(),e=t.getCurSec(),o=t.getMostLevelForCurSec()[1],i=f.DataMgr.getInstance().getSecCfg(e);this.LabLevel.string="\uff08"+o+"/"+i.levelCount+"\uff09",this.LabDec.string="\u6839\u636e\u4f60\u7684\u6700\u9ad8\u5173\u5361\u7eaa\u5f55\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5feb\u901f\u5230\u8fbe\u7b2c"+o+"\u5173\uff01"},e.prototype.registerBtnEvent=function(){var t=this;this.BtnFastPass.on(cc.Node.EventType.TOUCH_END,function(){var e=p.TimeUtils.GetTimeBySecond(),o=p.TimeUtils.GetTimeByHours2();u.SdkMgr.getInstance().playVideo(1,function(){t.trackEvent();var i=p.TimeUtils.GetTimeBySecond(),a=p.TimeUtils.GetTimeByHours2();y.PlayerMgr.getInstance().getTrackData().testTrackTime("quickarrive",o,a,e,i),y.PlayerMgr.getInstance().getTrackData().youmengTrack(h.TrackId.quickarrive),y.PlayerMgr.getInstance().getTrackData().youmengTrackNew("quickarrive_b"),y.PlayerMgr.getInstance().getTrackData().youmengTrack(h.TrackId.quickarrive_get),t.closeView(),d.default.instance.fastPass()})}),this.BtnResetStart.on(cc.Node.EventType.TOUCH_END,function(){y.PlayerMgr.getInstance().getTrackData().youmengTrack(h.TrackId.quickarrive_restart),t.closeView(),y.PlayerMgr.getInstance().geUserData().setCurLevel(1),d.default.instance.resetStart()})},e.prototype.closeView=function(){this.closeUI()},e.prototype.trackEvent=function(){var t=y.PlayerMgr.getInstance().geUserData(),e=t.getCurSec(),o=t.getMostLevelForCurSec()[1];if(o<5)o=1;else for(var i=o;i>o-5;i--)if(i%5==0){o=i;break}y.PlayerMgr.getInstance().getTrackData().youmengTrack(h.TrackId.quickarrive_X_Y,e,o)},s([I(cc.Node)],e.prototype,"BtnFastPass",void 0),s([I(cc.Node)],e.prototype,"BtnResetStart",void 0),s([I(cc.Label)],e.prototype,"LabLevel",void 0),s([I(cc.Label)],e.prototype,"LabDec",void 0),s([v],e)}(c.default);n.default=k,cc._RF.pop()},{}],UIFetterInfo:[function(t,e,o){"use strict";cc._RF.push(e,"65eefOyic9BW5RrPt/Y3pyZ","UIFetterInfo");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("EventMgr"),u=a("Utils"),p=a("Main"),d=a("Config"),g=a("DataMgr"),h=a("GameDataMgr"),f=a("GoodsManager"),y=a("PlayerMgr"),m=cc._decorator,v=m.ccclass,I=m.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeSkillBookShow=null,e.BtnClose=null,e.LayoutBg=null,e.SpFetterIcon=null,e.LabFetterName=null,e.LabFetterDec=null,e.LayoutSuit1=null,e.LayoutSuit2=null,e.LayoutSuit3=null,e.LayoutSkillBook=null,e.curFetterId=1,e.pos=cc.Vec3.ZERO,e}return r(e,t),e.prototype.init=function(t,e){this.curFetterId=t||1,this.pos=e||cc.Vec3.ZERO},e.prototype.start=function(){p.default.instance.controlObjectsAnim(!0),l.EventMgr.getInstance().emit(d.EventName.ShowUITop,!1),this.registerBtnEvent(),this.initData(),this.initView(),this.guideShow()},e.prototype.guideShow=function(){},e.prototype.registerBtnEvent=function(){var t=this;this.BtnClose.on(cc.Node.EventType.TOUCH_END,function(){console.log("\u5173\u95ed\u7f81\u7eca\u4fe1\u606f\u754c\u9762"),t.closeView(),p.default.instance.controlObjectsAnim(!1)}),this.LayoutBg.on(cc.Node.EventType.TOUCH_END,function(){t.closeView(),p.default.instance.controlObjectsAnim(!1)})},e.prototype.callbackBtnClose=function(){console.log("\u5173\u95ed\u7f81\u7eca\u4fe1\u606f\u754c\u9762"),this.closeView(),p.default.instance.controlObjectsAnim(!1)},e.prototype.initData=function(){this.curfetterData=g.DataMgr.getInstance().getFetter(this.curFetterId)},e.prototype.initView=function(){this.initLayoutBgPos(),this.initFetterInfo(),this.initSuitInfo(),this.createSkillBook()},e.prototype.initLayoutBgPos=function(){this.pos.x>0?this.pos.y>0?this.LayoutBg.setAnchorPoint(cc.v2(1,1)):this.LayoutBg.setAnchorPoint(cc.v2(1,0)):this.pos.y>0?this.LayoutBg.setAnchorPoint(cc.v2(0,1)):this.LayoutBg.setAnchorPoint(cc.v2(0,0)),this.LayoutBg.position=this.pos},e.prototype.initFetterInfo=function(){var t=this;this.loadSpriteFrame(this.curfetterData.bundle,this.curfetterData.iconImg,function(e){t.SpFetterIcon.spriteFrame=e}),this.LabFetterName.string=this.curfetterData.name,this.LabFetterDec.string=this.curfetterData.fetterFunDec},e.prototype.initSuitInfo=function(){for(var t=h.default.getInstance().getSuitCountForFetterId(this.curFetterId),e=1;e<=3;e++)t==e?(this["LayoutSuit"+e].getChildByName("LabSuit").color=cc.color(255,228,76),this["LayoutSuit"+e].getChildByName("LabSuitDec").color=cc.color(255,228,76)):this["LayoutSuit"+e].opacity=127;var o=u.Utils.getTabelArr(this.curfetterData.fetterCount),i=u.Utils.getTabelArr(this.curfetterData.fetterFun);this.LayoutSuit1.getChildByName("LabSuit").getComponent(cc.Label).string="("+o[0]+")";var a=this.curfetterData.fetterDec;a=a.replace("%s",i[0]),this.LayoutSuit1.getChildByName("LabSuitDec").getComponent(cc.Label).string=""+a,this.LayoutSuit2.getChildByName("LabSuit").getComponent(cc.Label).string="("+o[1]+")";var n=this.curfetterData.fetterDec;n=n.replace("%s",i[1]),this.LayoutSuit2.getChildByName("LabSuitDec").getComponent(cc.Label).string=""+n,this.LayoutSuit3.getChildByName("LabSuit").getComponent(cc.Label).string="("+o[2]+")";var r=this.curfetterData.fetterDec;r=r.replace("%s",i[2]),this.LayoutSuit3.getChildByName("LabSuitDec").getComponent(cc.Label).string=""+r},e.prototype.createSkillBook=function(){for(var t=u.Utils.getTabelArr(this.curfetterData.allSkillBookId),e=0;e<t.length;e++){var o=cc.instantiate(this.NodeSkillBookShow);o.parent=this.LayoutSkillBook,this.loadSkillBook(o,Number(t[e]))}this.LayoutSkillBook.getComponent(cc.Layout).updateLayout()},e.prototype.loadSkillBook=function(t,e){if(cc.isValid(t)){var o=g.DataMgr.getInstance().getSkillBook(e);g.DataMgr.getInstance().getSkillQuality(o.qualityId),y.PlayerMgr.getInstance().getTrackData().getAbType(),this.loadSpriteFrame("iconImg",o.SkillIcon,function(e){t.getChildByName("NodeSkillBook").getChildByName("SpSkillBook").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("NodeSkillBook").getChildByName("LabName").active=!1,t.getChildByName("NodeSkillBook").getChildByName("SpSkillBook").scale=.6,t.getChildByName("NodeSkillBook").getChildByName("LabName").getComponent(cc.Label).string=o.name,t.getChildByName("NodeSkillBook").getChildByName("LabSkillBookName").getComponent(cc.Label).string=o.name,t.getChildByName("NodeSkillBook").getChildByName("LabSkillBookName").color=f.default.getInstance().seleColor(o.qualityId);var i=y.PlayerMgr.getInstance().geUserData().isExistSkillBookId(e);t.getChildByName("SpLock").active=-1==i,-1==h.default.getInstance().isExistSkillBookId(e)?(t.getChildByName("NodeSkillBook").opacity=127,t.zIndex=o.qualityId+5):t.zIndex=o.qualityId}},e.prototype.closeView=function(){this.closeUI()},s([I(cc.Prefab)],e.prototype,"NodeSkillBookShow",void 0),s([I(cc.Node)],e.prototype,"BtnClose",void 0),s([I(cc.Node)],e.prototype,"LayoutBg",void 0),s([I(cc.Sprite)],e.prototype,"SpFetterIcon",void 0),s([I(cc.Label)],e.prototype,"LabFetterName",void 0),s([I(cc.Label)],e.prototype,"LabFetterDec",void 0),s([I(cc.Node)],e.prototype,"LayoutSuit1",void 0),s([I(cc.Node)],e.prototype,"LayoutSuit2",void 0),s([I(cc.Node)],e.prototype,"LayoutSuit3",void 0),s([I(cc.Node)],e.prototype,"LayoutSkillBook",void 0),s([v],e)}(c.default);n.default=k,cc._RF.pop()},{}],UIFreeTime:[function(t,e,o){"use strict";cc._RF.push(e,"ff99crJvAVHW7/eEtlw8hQN","UIFreeTime");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("Appcfg"),u=a("SdkMgr"),p=a("Config"),d=a("CommonBirge"),g=a("CommonCfg"),h=a("ComDataMgr"),f=a("ComPlayerMgr"),y=cc._decorator,m=y.ccclass,v=y.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnClose=null,e.itemLayout=null,e}return r(e,t),e.prototype.onLoad=function(){this.addEvent(l.BaseEventName.CloseUI,this.eventCloseUI),this.addEvent(g.CommonEventName.GetRewardEnd,this.refreshRewardEnd)},e.prototype.start=function(){var t=this;this.freeTimeData=f.ComPlayerMgr.getInstance().getFreeTimeData(),this.initBtn();for(var e=function(e){var i=o.itemLayout.children[e];if(null==h.ComDataMgr.getInstance().getFreeTimeById(e+1))return i.active=!1,"continue";i.name=e+1+"";var a=o.freeTimeData.getDataById(e+1),n=i.getChildByName("mask"),r=n.getChildByName("icon").getComponent(cc.Sprite);n.getChildByName("icon2").y=150;var s=i.getChildByName("num").getComponent(cc.Label),c=i.getChildByName("btnOk"),l=h.ComDataMgr.getInstance().getFreeTimeItemById(a.itemId),u=h.ComDataMgr.getInstance().getGoodsById(l.goodsId);o.loadSpriteFrame(u.bundleName,u.rewardIcon,function(t){r.spriteFrame=t}),s.string="x"+l.rewardNum,l.adNum>0?a.adNum+1<l.adNum?o.refreshItem(i,1,l.adNum-a.adNum,0):o.refreshItem(i,0,0,l.goldNum):o.refreshItem(i,2,0,l.goldNum),c.on(cc.Node.EventType.TOUCH_END,function(){t.clickItem(e+1,i)})},o=this,i=0;i<this.itemLayout.childrenCount;i++)e(i)},e.prototype.clickItem=function(t,e){var o=this,i=this.freeTimeData.getDataById(t),a=h.ComDataMgr.getInstance().getFreeTimeItemById(i.itemId);if(a.adNum>0)i.adNum+1>=a.adNum?u.SdkMgr.getInstance().playVideo(u.AdType.AdFreeTime,function(){var t=i.goodsId+g.CommonCfg.splitNum+a.rewardNum,n=e.convertToWorldSpaceAR(cc.Vec2.ZERO);f.ComPlayerMgr.getInstance().checkOpenReward(t,n),o.freeTimeData.changleFreeTimedata(i.id),o.item=e,o.curData=i}):u.SdkMgr.getInstance().playVideo(u.AdType.AdFreeTime,function(){o.freeTimeData.addAdNumByData(i),i.adNum+1>=a.adNum?o.refreshItem(e,0,0,0):o.refreshItem(e,1,a.adNum-i.adNum,0)});else if(d.CommonBrige.Instance().subGoodsNum(a.goldId,a.goldNum)){var n=i.goodsId+g.CommonCfg.splitNum+a.rewardNum,r=e.convertToWorldSpaceAR(cc.Vec2.ZERO);f.ComPlayerMgr.getInstance().checkOpenReward(n,r),this.freeTimeData.changleFreeTimedata(i.id),this.item=e,this.curData=i}else this.openUI(p.UIID.UITips,"\u7269\u54c1\u4e0d\u8db3")},e.prototype.refreshRewardEnd=function(){this.changleItemAni(this.item,this.curData)},e.prototype.eventCloseUI=function(t){t==g.ComUIID.UIReward&&this.changleItemAni(this.item,this.curData)},e.prototype.changleItemAni=function(t,e){var o,i,a=t.getChildByName("mask"),n=a.getChildByName("icon").getComponent(cc.Sprite),r=a.getChildByName("icon2").getComponent(cc.Sprite);n.node.y>50?(i=n,o=r):(i=r,o=n);var s=t.getChildByName("num").getComponent(cc.Label),c=h.ComDataMgr.getInstance().getFreeTimeItemById(e.itemId),l=h.ComDataMgr.getInstance().getGoodsById(c.goodsId),u=t.getChildByName("btnOk");u.active=!1,s.string="",this.loadSpriteFrame(l.bundleName,l.rewardIcon,function(t){i.spriteFrame=t}),cc.tween(o.node).to(1,{position:new cc.Vec3(0,-150)}).call(function(){o.spriteFrame=null,o.node.y=150}).start(),cc.tween(i.node).to(1,{position:new cc.Vec3(0,12)}).call(function(){s.string="x"+c.rewardNum,u.active=!0}).start(),c.adNum>0?e.adNum+1<c.adNum?this.refreshItem(t,1,c.adNum-e.adNum,0):this.refreshItem(t,0,0,c.goldNum):this.refreshItem(t,2,0,c.goldNum)},e.prototype.refreshItem=function(t,e,o,i){var a=t.getChildByName("btnOk"),n=a.getChildByName("num"),r=a.getComponent(cc.Sprite);0==e?(n.active=!1,this.loadSpriteFrame("comimgs","button/btn2_adget",function(t){r.spriteFrame=t})):1==e?(n.active=!0,n.getComponent(cc.Label).string="x"+o,this.loadSpriteFrame("comimgs","button/btn2_adNum",function(t){r.spriteFrame=t})):2==e&&(n.active=!0,n.getComponent(cc.Label).string="x"+i,this.loadSpriteFrame("comimgs","button/btn2_gold",function(t){r.spriteFrame=t}))},e.prototype.initBtn=function(){var t=this;this.btnClose.on(cc.Node.EventType.TOUCH_END,function(){t.closeUI()})},s([v(cc.Node)],e.prototype,"btnClose",void 0),s([v(cc.Node)],e.prototype,"itemLayout",void 0),s([m],e)}(c.default);n.default=I,cc._RF.pop()},{}],UIGame:[function(t,e,o){"use strict";cc._RF.push(e,"89425HoZ/pOkK3VysMHEovh","UIGame");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("AudioMgr"),u=a("EventMgr"),p=a("SdkMgr"),d=a("UIMgr"),g=a("TimeUtils"),h=a("Utils"),f=a("Main"),y=a("Config"),m=a("TrackDataEvent"),v=a("DataMgr"),I=a("GameDataMgr"),k=a("GameMgr"),S=a("PlayerMgr"),C=a("RoleMgr"),b=a("TipsMgr"),_=a("NodeFetter"),N=a("NodeSkill"),T=a("NodeSkillBook"),D=a("UIGuide"),M=cc._decorator,B=M.ccclass,P=M.property,L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SkillBookPre=null,e.SkillBookPreNew=null,e.FetterPre=null,e.SkillPre=null,e.LayoutSkillBook=null,e.LayoutFetter=null,e.LayoutSkill=null,e.LabSkillCount=null,e.LabFetterCount=null,e.SpGameSpeed=null,e.BtnBackSelectSkill=null,e.BtnPause=null,e.LabSec=null,e.LabLevel=null,e.LabMonsterCount=null,e.NodeBossAnim=null,e.LayerTouch=null,e.NodeGuide=null,e.NodeTrudge=null,e.SpLight=null,e.curSec=1,e.curLevel=1,e.isTrudge=!1,e.isRecover=!0,e.abType="A",e.itemHeight=118,e.costRange=.002,e.recoverRange=.002,e}return r(e,t),e.prototype.onLoad=function(){this.initAbTypeData(),this.initFillRange(),this.registerEvent()},e.prototype.initAbTypeData=function(){this.abType=S.PlayerMgr.getInstance().getTrackData().getAbType(),this.itemHeight=235},e.prototype.guideShow=function(){var t=this,e=S.PlayerMgr.getInstance().getGuideData();if(!e.getGuideEnd()){var o=e.getCurrentId();console.log("currentId\uff1a",o),o==4+e.putGuideNum&&this.scheduleOnce(function(){t.NodeGuide.zIndex=10,t.NodeGuide.active=!0,t.NodeGuide.getChildByName("SpSkillBook2").active=!0;var o=new D.GuildCfg;o.distNode=t.NodeGuide,o.tipstring="\u6280\u80fd\u5206\u4e3a\u4e0d\u540c\u7684<color=#ff6b1b>\u804c\u4e1a</color>\u548c<color=#ff6b1b>\u7c7b\u578b</color>\uff0c\u76f8\u540c\u804c\u4e1a/\u7c7b\u578b\u7684\u6280\u80fd\u53ef\u4ee5\u6fc0\u6d3b<color=#ff6b1b>\u7f81\u7eca</color>\uff01\n<color=#ff6b1b>\u7f81\u7eca</color>\u7684\u6548\u679c\u975e\u5e38<color=#ff6b1b>\u5f3a\u529b</color>\u7684\u5662\uff01",o.yDec=-500,o.showHand=!1,t.openUICallBack(y.UIID.UIGuide,function(){e.addCurrentId()},o),f.default.instance.controlObjectsAnim(!0)})}},e.prototype.start=function(){this.registerBtnEvent(),this.startRecord(),u.EventMgr.getInstance().emit(y.EventName.ShowUITop,!1),l.AudioMgr.getInstance().playMusic(y.AudioId.BGM_Battle,"bg"),this.initData(),this.initView(),this.playAnim()},e.prototype.playAnim=function(t){void 0===t&&(t=!1)},e.prototype.registerEvent=function(){this.addEvent(y.EventName.RefreshLevel,this.refreshLevel),this.addEvent(y.EventName.RefreshMonsterCount,this.refreshMonsterCount),this.addEvent(y.EventName.AddSkillBook,this.addSkillBook),this.addEvent(y.EventName.ControlBackSelectSkill,this.ControlBackSelectSkill),this.addEvent(y.EventName.GameLayerTouch,this.isOpenTouch),this.addEvent(y.EventName.GameGuideShow,this.guideShow),this.addEvent(y.EventName.OpenRecoverTrudge,this.recoverTrudge)},e.prototype.recoverTrudge=function(){this.isTrudge=!1,this.isRecover=!0,this.NodeTrudge.getChildByName("NodeEff").active=!1,k.default.getInstance().isAdddUp=!1},e.prototype.startRecord=function(){1!=S.PlayerMgr.getInstance().geUserData().getCurSec()&&S.PlayerMgr.getInstance().getShareData().startRecord()},e.prototype.stopRecord=function(){S.PlayerMgr.getInstance().geUserData().getCurSec();var t=S.PlayerMgr.getInstance().getShareData();t.stopRecord(!1),t.clearData()},e.prototype.isOpenTouch=function(t){void 0===t&&(t=!1),this.LayerTouch.active=t},e.prototype.initData=function(){this.userData=S.PlayerMgr.getInstance().geUserData(),this.curSec=this.userData.getCurSec(),this.curLevel=1,this.secData=v.DataMgr.getInstance().getSecCfg(this.curSec),this.levelData=v.DataMgr.getInstance().getLevelCfg(this.curSec,this.curLevel),S.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.chapter_start_X,this.curSec)},e.prototype.initView=function(){this.initGameSpeed(),this.LabSec.string=this.secData.secDec+"\uff1a"+this.secData.name,this.LabLevel.string="\u7b2c"+this.curLevel+"/"+this.secData.levelCount+"\u5173",this.refreshMonsterCount(),this.refreshSkillBookAndFetterCount(),this.addEmptySkill()},e.prototype.initGameSpeed=function(){for(var t=this,e=this.SpGameSpeed.childrenCount,o=S.PlayerMgr.getInstance().geUserData().getCurGameMultiply(),i=S.PlayerMgr.getInstance().geUserData().getCurUnlockMultiply(),a=function(a){var r=n.SpGameSpeed.getChildByName("SpGameSpeed"+a);a==o?(r.zIndex=e,r.active=!0,r.getChildByName("SpVideo").active=!1,r.getChildByName("SpCurSpeed").active=!0):(r.zIndex=e-a,r.active=!1,r.getChildByName("SpVideo").active=!(i+1>a),r.getChildByName("SpCurSpeed").active=!1),r.on(cc.Node.EventType.TOUCH_END,function(){S.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.click_speed);var e=t.SpGameSpeed.childrenCount,o=S.PlayerMgr.getInstance().geUserData().getCurGameMultiply(),i=S.PlayerMgr.getInstance().geUserData().getCurUnlockMultiply();if(a==o)for(var n=1;n<=e;n++){var r=t.SpGameSpeed.getChildByName("SpGameSpeed"+n);cc.isValid(r)&&(i+1>=n?a!=n&&(r.active=!r.active):r.active=!1)}else if(a>i){f.default.instance.controlObjectsAnim(!0);var s=g.TimeUtils.GetTimeBySecond(),c=g.TimeUtils.GetTimeByHours2();p.SdkMgr.getInstance().playVideo(1,function(){var e=g.TimeUtils.GetTimeBySecond(),o=g.TimeUtils.GetTimeByHours2();S.PlayerMgr.getInstance().getTrackData().testTrackTime("combatspeed",c,o,s,e),S.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.combatspeed),S.PlayerMgr.getInstance().getTrackData().youmengTrackNew("combatspeed_b"),S.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.speed_X,a),S.PlayerMgr.getInstance().geUserData().setCurGameMultiply(a),S.PlayerMgr.getInstance().geUserData().addCurUnlockMultiply(),t.controlGameSpeed(),f.default.instance.controlObjectsGameSpeed(),f.default.instance.controlObjectsAnim(!1)},function(){f.default.instance.controlObjectsAnim(!1)})}else S.PlayerMgr.getInstance().geUserData().setCurGameMultiply(a),t.controlGameSpeed(),f.default.instance.controlObjectsGameSpeed()})},n=this,r=1;r<=e;r++)a(r)},e.prototype.controlGameSpeed=function(){for(var t=S.PlayerMgr.getInstance().geUserData().getCurGameMultiply(),e=S.PlayerMgr.getInstance().geUserData().getCurUnlockMultiply(),o=this.SpGameSpeed.childrenCount,i=1;i<=o;i++){var a=this.SpGameSpeed.getChildByName("SpGameSpeed"+i);cc.isValid(a)&&(i==t?(a.zIndex=o,a.active=!0,a.getChildByName("SpVideo").active=!1,a.getChildByName("SpCurSpeed").active=!0):(a.zIndex=o-i,a.active=!1,a.getChildByName("SpVideo").active=!(e+1>i),a.getChildByName("SpCurSpeed").active=!1))}},e.prototype.addEmptySkill=function(){for(var t=this,e=function(e){o.scheduleOnce(function(){var o=cc.instantiate(t.SkillPre);t.LayoutSkill.addChild(o),o.position=cc.Vec3.ZERO,8==e&&t.LayoutSkill.getComponent(cc.Layout).updateLayout()},.02*e)},o=this,i=0;i<9;i++)e(i)},e.prototype.refreshLevel=function(){this.curLevel=this.userData.getCurLevel(),this.LabLevel.string="\u7b2c"+this.curLevel+"/"+this.secData.levelCount+"\u5173"},e.prototype.refreshMonsterCount=function(){this.LabMonsterCount.string=""+f.default.instance.monsterCount},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBackSelectSkill.on(cc.Node.EventType.TOUCH_END,function(){f.default.instance.isFastPass&&t.sendEvent(y.EventName.GameLayerTouch,!0),t.sendEvent(y.EventName.ControlDrawCardView,!0),t.ControlBackSelectSkill(!1)}),this.BtnPause.on(cc.Node.EventType.TOUCH_END,function(){f.default.instance.controlObjectsAnim(!0);var e=S.PlayerMgr.getInstance().geUserData();d.UIMgr.getInstance().openUI(y.UIID.UIPause,-1,function(){t.backHome()},e.getCurSec(),e.getCurLevel())}),this.NodeGuide.on(cc.Node.EventType.TOUCH_END,function(){S.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.guide5),t.NodeGuide.active=!1,f.default.instance.controlObjectsAnim(!1)}),this.NodeTrudge.active=!1},e.prototype.backHome=function(){this.stopRecord(),I.default.getInstance().resetSkillBookAndFetter(),f.default.instance.resetMain(),this.closeView()},e.prototype.closeView=function(){this.closeUI()},e.prototype.refreshSkillBookAndFetterCount=function(){this.LabSkillCount.string="\u4fee\u70bc\u6280\u80fd\u603b\u6570\u91cf\uff1a<color = #e24f00>"+I.default.getInstance().getSkillBookDataArr().length+"/"+I.default.getInstance().curTotalSkillBookCount+"</color>",this.LabFetterCount.string="\u89e3\u9501\u7f81\u7eca\u603b\u6570\u91cf\uff1a<color = #e24f00>"+I.default.getInstance().getFetterSuitCount()+"</color>"},e.prototype.addSkillBook=function(t){var e=this,o=v.DataMgr.getInstance().getSkillBookCfg();if(t>o.length)console.log("\u4e0d\u5b58\u5728\u5f53\u524d\u6280\u80fd\u4e66\uff01\uff01\uff01");else{if(-1!=I.default.getInstance().isExistSkillBookId(t))return I.default.getInstance().pushSkillBookData(t,void 0,function(o){e.skillBookUpStar(t,2),e.sortSkillBook(t,o),b.default.getInstance().addTipsToTipsList(1,e.node,t,2),2==e.curSec&&S.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.chapter2_skill2)},function(o){e.skillBookUpStar(t,3),e.sortSkillBook(t,o),b.default.getInstance().addTipsToTipsList(1,e.node,t,3),2==e.curSec&&S.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.chapter2_skill3)}),u.EventMgr.getInstance().emit(y.EventName.RefreshSkillBookShow,t),void C.default.getInstance().refreshCurPlayerProp();I.default.getInstance().pushSkillBookData(t);var i=v.DataMgr.getInstance().getSkillBook(t),a=this.SkillBookPreNew,n=cc.instantiate(a);this.LayoutSkillBook.addChild(n),n.getComponent(T.default).initData(t),n.position=cc.Vec3.ZERO,n.zIndex=5,this.loadSkillBook(n,i),this.addFetter(i.fetterId1,i.fetterId2),this.refreshSkillBookAndFetterCount(),I.default.getInstance().getSkillBookDataArr().length>=I.default.getInstance().curTotalSkillBookCount&&I.default.getInstance().classifyCurSkillBook(),C.default.getInstance().refreshCurPlayerProp(),this.scheduleOnce(function(){e.scrollViewEvent_SkillBook(),e.scrollViewEvent_Fetter()},.5)}},e.prototype.loadSkillBook=function(t,e){if(cc.isValid(t)&&e){var o=v.DataMgr.getInstance().getSkillQuality(e.qualityId),i=v.DataMgr.getInstance().getFetter(e.fetterId1),a=v.DataMgr.getInstance().getFetter(e.fetterId2);this.loadSpriteFrame("iconImg",e.SkillIcon,function(e){t.getChildByName("SpSkillBook").getComponent(cc.Sprite).spriteFrame=e}),this.loadSpriteFrame(o.bundle,o.iconImg2,function(e){t.getChildByName("SpNameBg").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("LabSkillBookName").getComponent(cc.Label).string=e.name,t.getChildByName("LayoutName").getChildByName("LabSkillBook").getComponent(cc.Label).string=e.name,t.getChildByName("SpBgfetter1").getChildByName("LabFetter1").getComponent(cc.Label).string=i.name,this.loadSpriteFrame(i.bundle,i.iconImg,function(e){t.getChildByName("SpBgfetter1").getChildByName("SpFetter1").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("SpBgfetter2").getChildByName("LabFetter2").getComponent(cc.Label).string=a.name,this.loadSpriteFrame(a.bundle,a.iconImg,function(e){t.getChildByName("SpBgfetter2").getChildByName("SpFetter2").getComponent(cc.Sprite).spriteFrame=e}),this.refreshStarNum(t,e)}},e.prototype.refreshStarNum=function(t,e){if(cc.isValid(t)){var o=I.default.getInstance().getStarNumForSkillBookId(e.id);3!=o[0]?t.getChildByName("LayoutName").getChildByName("LabCount").getComponent(cc.Label).string="\uff08"+o[1]+"/"+o[2]+"\uff09":t.getChildByName("LayoutName").getChildByName("LabCount").active=!1;for(var i=0;i<t.getChildByName("NodeGrade").children.length;i++){var a=t.getChildByName("NodeGrade").getChildByName("SpStarBg"+(i+1));o[0]>=i+1?a.getChildByName("SpStar").active=!0:a.getChildByName("SpStar").active=!1}}else console.log("\u5f53\u524d\u6280\u80fd\u4e66\u8282\u70b9\uff1a",t)},e.prototype.skillBookUpStar=function(t,e){void 0===e&&(e=2);var o=v.DataMgr.getInstance().getSkillBook(t),i=S.PlayerMgr.getInstance().geUserData().getSkillBookForId(t),a=v.DataMgr.getInstance().getSkillBookLevelCfg1(o.StartLevelID,i.level),n=null;if(2==e)n=h.Utils.getTabelArr(a.starProp2);else{if(3!=e)return;n=h.Utils.getTabelArr(a.starProp3)}0==Number(n[0])&&this.addSkill(Number(n[1])),C.default.getInstance().getPropForAllSkillBook(!0)},e.prototype.addFetter=function(t,e){this.createFetter(t),this.createFetter(e)},e.prototype.createFetter=function(t){if(t>v.DataMgr.getInstance().getFetterCfg().length)console.log("\u4e0d\u5b58\u5728\u5f53\u524d\u7f81\u7eca\uff01\uff01\uff01");else{if(-1!=I.default.getInstance().isExistFetterId(t))return this.addFetterData(t),void u.EventMgr.getInstance().emit(y.EventName.RefreshFetterShow,t);var e=v.DataMgr.getInstance().getFetter(t),o=cc.instantiate(this.FetterPre);this.LayoutFetter.addChild(o),o.getComponent(_.default).initData(t),o.position=cc.Vec3.ZERO,o.zIndex=7,this.addFetterData(t),this.loadFetter(o,e)}},e.prototype.addFetterData=function(t){var e=this;I.default.getInstance().pushFetterData(t,void 0,function(o){u.EventMgr.getInstance().emit(y.EventName.RefreshLight,t),e.sortFetter(t,o),b.default.getInstance().addTipsToTipsList(0,e.node,t,1),I.default.getInstance().addFetterSuitCount(),2==e.curSec&&S.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.chapter2_fetter_X,I.default.getInstance().getFetterSuitCount())},function(o){u.EventMgr.getInstance().emit(y.EventName.RefreshLight,t),e.sortFetter(t,o),b.default.getInstance().addTipsToTipsList(0,e.node,t,2)},function(o){u.EventMgr.getInstance().emit(y.EventName.RefreshLight,t),e.sortFetter(t,o),b.default.getInstance().addTipsToTipsList(0,e.node,t,3)})},e.prototype.loadFetter=function(t,e){cc.isValid(t)&&e&&(this.loadSpriteFrame(e.bundle,e.iconImg,function(e){t.getChildByName("SpFetter").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("LabFetter").getComponent(cc.Label).string=e.name,this.refreshFetterSuitCount(t,e))},e.prototype.refreshFetterSuitCount=function(t,e){t.getChildByName("LabFetterNum").getComponent(cc.RichText).string=I.default.getInstance().getStringForFetterId(e.id)},e.prototype.addSkill=function(t){if(t>v.DataMgr.getInstance().getSkillCfg().length)console.log("\u4e0d\u5b58\u5728\u5f53\u524d\u6280\u80fd\uff01\uff01\uff01");else{var e=null,o=I.default.getInstance().getSkillIdArr().length;if(o<this.LayoutSkill.childrenCount){if(I.default.getInstance().pushSkillIdArrData(t),e=this.LayoutSkill.children[o],!cc.isValid(e))return;var i=v.DataMgr.getInstance().getSkill(t);return e.getComponent(N.default).initData(t),void this.loadSpriteFrame(i.bundle,i.skillIcon,function(t){e.getComponent(cc.Sprite).spriteFrame=t})}I.default.getInstance().pushSkillIdArrData(t),e=cc.instantiate(this.SkillPre),this.LayoutSkill.addChild(e),e.position=cc.Vec3.ZERO,e.getComponent(N.default).initData(t);var a=v.DataMgr.getInstance().getSkill(t);this.loadSpriteFrame(a.bundle,a.skillIcon,function(t){e.getComponent(cc.Sprite).spriteFrame=t})}},e.prototype.sortSkillBook=function(t,e){var o=4,i=I.default.getInstance().getStarNumForSkillBookCount(e);2==i?o=2:3==i&&(o=0);for(var a=0;a<this.LayoutSkillBook.childrenCount;a++){var n=this.LayoutSkillBook.children[a],r=n.getComponent(T.default);if(n.zIndex==o&&(n.zIndex=o+1),r.skillBookId==t){n.zIndex=o,n.opacity=255;break}}},e.prototype.sortFetter=function(t,e){var o=I.default.getInstance().getSuitCountForFetterIdAndCount(t,e),i=6;1==o?i=4:2==o?i=2:3==o&&(i=0);for(var a=0;a<this.LayoutFetter.childrenCount;a++){var n=this.LayoutFetter.children[a],r=n.getComponent(_.default);if(n.zIndex==i&&(n.zIndex=i+1),r.fetterId==t){n.zIndex=i,n.opacity=255;break}}},e.prototype.scrollViewEvent_SkillBook=function(){for(var t=this.itemHeight/2,e=-450-t,o=0;o<this.LayoutSkillBook.children.length;o++){var i=this.LayoutSkillBook.children[o];this.visibleRank_SkillBook(i,e,t)}},e.prototype.visibleRank_SkillBook=function(t,e,o){var i=t.y+t.parent.y;t.opacity=i>e&&i<o?255:0},e.prototype.scrollViewEvent_Fetter=function(){for(var t=0;t<this.LayoutFetter.children.length;t++){var e=this.LayoutFetter.children[t];this.visibleRank_Fetter(e,-94.5,820.5)}},e.prototype.visibleRank_Fetter=function(t,e,o){var i=t.x+t.parent.x;t.opacity=i>e&&i<o?255:0},e.prototype.ControlBackSelectSkill=function(t){f.default.instance.isLookSkill=t,this.BtnBackSelectSkill.active=t},e.prototype.BossComeOnAnim=function(){var t=this;this.NodeBossAnim.active=!0;var e=this.NodeBossAnim.getComponent(sp.Skeleton);e.setAnimation(0,"newAnimation",!1),e.setCompleteListener(function(){t.NodeBossAnim.active=!1})},e.prototype.initFillRange=function(){var t=Number(v.DataMgr.getInstance().getParamsCfgForSingle(y.EnumParams.TrudgeMaxValue).value),e=Number(v.DataMgr.getInstance().getParamsCfgForSingle(y.EnumParams.TrudgeCostValue).value),o=Number(v.DataMgr.getInstance().getParamsCfgForSingle(y.EnumParams.TrudgeRecoverValue).value);this.costRange=.7/(t/e*50),this.recoverRange=.7/(t/o*50)},s([P({type:cc.Prefab,tooltip:"\u6280\u80fd\u4e66"})],e.prototype,"SkillBookPre",void 0),s([P({type:cc.Prefab,tooltip:"\u6280\u80fd\u4e66"})],e.prototype,"SkillBookPreNew",void 0),s([P({type:cc.Prefab,tooltip:"\u7f81\u7eca"})],e.prototype,"FetterPre",void 0),s([P({type:cc.Prefab,tooltip:"\u6280\u80fd"})],e.prototype,"SkillPre",void 0),s([P({type:cc.Node,tooltip:"\u6280\u80fd\u4e66\u5e03\u5c40"})],e.prototype,"LayoutSkillBook",void 0),s([P({type:cc.Node,tooltip:"\u7f81\u7eca\u5e03\u5c40"})],e.prototype,"LayoutFetter",void 0),s([P({type:cc.Node,tooltip:"\u6280\u80fd\u5e03\u5c40"})],e.prototype,"LayoutSkill",void 0),s([P({type:cc.RichText,tooltip:"\u6280\u80fd\u4e66\u6570\u91cf"})],e.prototype,"LabSkillCount",void 0),s([P({type:cc.RichText,tooltip:"\u7f81\u7eca\u6570\u91cf"})],e.prototype,"LabFetterCount",void 0),s([P(cc.Node)],e.prototype,"SpGameSpeed",void 0),s([P(cc.Node)],e.prototype,"BtnBackSelectSkill",void 0),s([P(cc.Node)],e.prototype,"BtnPause",void 0),s([P(cc.Label)],e.prototype,"LabSec",void 0),s([P(cc.Label)],e.prototype,"LabLevel",void 0),s([P(cc.Label)],e.prototype,"LabMonsterCount",void 0),s([P(cc.Node)],e.prototype,"NodeBossAnim",void 0),s([P({type:cc.Node,tooltip:"\u9632\u89e6\u6478\u5c42"})],e.prototype,"LayerTouch",void 0),s([P(cc.Node)],e.prototype,"NodeGuide",void 0),s([P({type:cc.Node,tooltip:"\u66b4\u8d70\u8282\u70b9"})],e.prototype,"NodeTrudge",void 0),s([P(cc.Node)],e.prototype,"SpLight",void 0),s([B],e)}(c.default);n.default=L,cc._RF.pop()},{}],UIGeneralWindow1:[function(t,e,o){"use strict";cc._RF.push(e,"72d51hVow9LopfeY+HFRvRe","UIGeneralWindow1");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabTitle=null,e.LabDec=null,e.BtnFalse=null,e.BtnTrue=null,e.labTitle="\u6e29\u99a8\u63d0\u793a",e.labDec="<color = #000000>\u5207\u6362\u88c5\u5907\u6216\u9000\u51fa\u754c\u9762\n\u5f53\u524d\u8fdb\u5ea6\u5c06</c><color = #ff0000>\u4e0d\u4e88\u4fdd\u5b58</c>\u5662\uff01",e.btnFalseCallback=function(){},e.btnTrueCallback=function(){},e.labBtnFalse="\u53d6\u6d88",e.labBtnTrue="\u786e\u5b9a",e}return r(e,t),e.prototype.init=function(t,e,o,i,a){this.labTitle=t||this.labTitle,this.labDec=e||this.labDec,this.btnFalseCallback=o||function(){},this.btnTrueCallback=i||function(){},this.labBtnFalse=a?a[0]:this.labBtnFalse,this.labBtnTrue=a?a[1]:this.labBtnTrue},e.prototype.start=function(){this.registerBtnEvent(),this.initView()},e.prototype.initView=function(){this.LabTitle.string=this.labTitle,this.LabDec.string=this.labDec,this.BtnFalse.getChildByName("LabDec").getComponent(cc.Label).string=this.labBtnFalse,this.BtnTrue.getChildByName("LabDec").getComponent(cc.Label).string=this.labBtnTrue},e.prototype.registerBtnEvent=function(){var t=this;this.BtnFalse.on(cc.Node.EventType.TOUCH_END,function(){t.btnFalseCallback&&t.btnFalseCallback(),t.closeView()}),this.BtnTrue.on(cc.Node.EventType.TOUCH_END,function(){t.btnTrueCallback&&t.btnTrueCallback(),t.closeView()})},e.prototype.closeView=function(){this.closeUI()},s([p(cc.Label)],e.prototype,"LabTitle",void 0),s([p(cc.RichText)],e.prototype,"LabDec",void 0),s([p(cc.Node)],e.prototype,"BtnFalse",void 0),s([p(cc.Node)],e.prototype,"BtnTrue",void 0),s([u],e)}(c.default);n.default=d,cc._RF.pop()},{}],UIGeneralWindow:[function(t,e,o){"use strict";cc._RF.push(e,"7b79dUsggpEjrkbZYKtndlC","UIGeneralWindow");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("EventMgr"),u=a("SdkMgr"),p=a("UIMgr"),d=a("TimeUtils"),g=a("Config"),h=a("TrackDataEvent"),f=a("DataMgr"),y=a("PlayerMgr"),m=cc._decorator,v=m.ccclass,I=m.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpPower=null,e.SpGold=null,e.SpInGot=null,e.BtnBack=null,e.BtnFalse=null,e.BtnTrue=null,e.LabTitle=null,e.SpIcon=null,e.LabNum=null,e.LayoutBtn=null,e.curTurnView=g.UIID.UIHome,e.curwindowType=g.GeneralWindowType.GoldWindow,e.curGoodsCount=100,e.callback=null,e}return r(e,t),e.prototype.init=function(t,e){this.curwindowType=t||g.GeneralWindowType.GoldWindow,this.callback=e||function(){}},e.prototype.onLoad=function(){},e.prototype.start=function(){this.registerBtnListener(),this.initView()},e.prototype.onClose=function(){},e.prototype.initView=function(){var t=y.PlayerMgr.getInstance().geUserData().getCurSec();switch(this.curwindowType){case g.GeneralWindowType.PowerWindow:this.SpIcon.spriteFrame=this.SpPower,this.LabTitle.string="\u514d\u8d39\u4f53\u529b",this.curGoodsCount=f.DataMgr.getInstance().getGoodsCountForType(3),this.LabNum.string="\u4f53\u529bx"+this.curGoodsCount;break;case g.GeneralWindowType.GoldWindow:this.SpIcon.spriteFrame=this.SpGold,this.LabTitle.string="\u514d\u8d39\u91d1\u5e01",this.curGoodsCount=f.DataMgr.getInstance().getGoodsCountForTypeAndSec(1,t),this.LabNum.string="\u91d1\u5e01x"+this.curGoodsCount;break;case g.GeneralWindowType.InGotWindow:this.SpIcon.spriteFrame=this.SpInGot,this.LabTitle.string="\u514d\u8d39\u5143\u5b9d";var e=y.PlayerMgr.getInstance().geUserData().getInGotGetCount();this.curGoodsCount=f.DataMgr.getInstance().getGoodsCountForTypeAndSec(2,e),this.LabNum.string="\u5143\u5b9dx"+this.curGoodsCount}},e.prototype.registerBtnListener=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()}),this.BtnFalse.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()}),this.BtnTrue.on(cc.Node.EventType.TOUCH_END,function(){var e=d.TimeUtils.GetTimeBySecond(),o=d.TimeUtils.GetTimeByHours2();u.SdkMgr.getInstance().playVideo(1,function(){t.getReward(e,o),t.callback&&t.callback(),t.closeView()})})},e.prototype.getReward=function(t,e){var o=d.TimeUtils.GetTimeBySecond(),i=d.TimeUtils.GetTimeByHours2();switch(this.curwindowType){case g.GeneralWindowType.PowerWindow:y.PlayerMgr.getInstance().getTrackData().testTrackTime("strength",e,i,t,o),y.PlayerMgr.getInstance().geUserData().addPowerNum(this.curGoodsCount),p.UIMgr.getInstance().openUI(g.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 \u4f53\u529bx"+this.curGoodsCount),y.PlayerMgr.getInstance().getTrackData().youmengTrack(h.TrackId.strength),y.PlayerMgr.getInstance().getTrackData().youmengTrackNew("strength_b");break;case g.GeneralWindowType.GoldWindow:y.PlayerMgr.getInstance().getTrackData().testTrackTime("coin",e,i,t,o),y.PlayerMgr.getInstance().geUserData().addGoldNum(this.curGoodsCount),p.UIMgr.getInstance().openUI(g.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 \u91d1\u5e01x"+this.curGoodsCount),y.PlayerMgr.getInstance().getTrackData().youmengTrack(h.TrackId.coin),y.PlayerMgr.getInstance().getTrackData().youmengTrackNew("coin_b");break;case g.GeneralWindowType.InGotWindow:y.PlayerMgr.getInstance().getTrackData().testTrackTime("ingot",e,i,t,o),y.PlayerMgr.getInstance().geUserData().addInGotNum(this.curGoodsCount),p.UIMgr.getInstance().openUI(g.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 \u5143\u5b9dx"+this.curGoodsCount),y.PlayerMgr.getInstance().getTrackData().youmengTrack(h.TrackId.ingot),y.PlayerMgr.getInstance().getTrackData().youmengTrackNew("ingot_b"),y.PlayerMgr.getInstance().geUserData().addInGotGetCount()}l.EventMgr.getInstance().emit(g.EventName.RefreshStrengthenLv),l.EventMgr.getInstance().emit(g.EventName.RefreshShopRedDot)},e.prototype.closeView=function(){this.closeUI()},s([I(cc.SpriteFrame)],e.prototype,"SpPower",void 0),s([I(cc.SpriteFrame)],e.prototype,"SpGold",void 0),s([I(cc.SpriteFrame)],e.prototype,"SpInGot",void 0),s([I(cc.Node)],e.prototype,"BtnBack",void 0),s([I(cc.Node)],e.prototype,"BtnFalse",void 0),s([I(cc.Node)],e.prototype,"BtnTrue",void 0),s([I(cc.Label)],e.prototype,"LabTitle",void 0),s([I(cc.Sprite)],e.prototype,"SpIcon",void 0),s([I(cc.Label)],e.prototype,"LabNum",void 0),s([I(cc.Node)],e.prototype,"LayoutBtn",void 0),s([v],e)}(c.default);n.default=k,cc._RF.pop()},{}],UIGuide:[function(t,e,o){"use strict";cc._RF.push(e,"13b341f1+lNtrnOaHjOg+no","UIGuide");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GuildCfg=n.DirPos=void 0;var c,l=a("BaseUI"),u=a("Appcfg"),p=a("EventMgr"),d=cc._decorator,g=d.ccclass,h=d.property;(function(t){t[t.TopRight=0]="TopRight",t[t.TopLeft=1]="TopLeft",t[t.BottomLeft=2]="BottomLeft",t[t.BottomRight=3]="BottomRight"})(c=n.DirPos||(n.DirPos={})),n.GuildCfg=function(){this.clickType=0,this.distNode=null,this.tipstring=null,this.dir=c.TopRight,this.isWeek=!1,this.lightType=1,this.showHand=!0,this.delay=.1,this.startNode=null,this.endNode=null,this.moveTime=.2,this.hideMask=!1,this.addSize=new cc.Size(10,10),this.callBack=null,this.indexPos=cc.v2(),this.yDec=0,this.handIndex=cc.v2(),p.EventMgr.getInstance().emit(u.BaseEventName.blocktouch,!1)};var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.hand=null,e.hand1=null,e.hand2=null,e.tipBg=null,e.tipText=null,e.distNode=null,e.dirPos=c.TopRight,e}return r(e,t),e.prototype.init=function(t){this.cfg=t},e.prototype.clickTouch=function(t){var e,o=this;if(this.hand.active=!1,this.tipBg.active=!1,this.cfg=t,t.dir&&(this.dirPos=t.dir),this.distNode=t.distNode,t.distNode){var i=this.distNode.convertToWorldSpaceAR(cc.Vec2.ZERO),a=this.mask.node.parent.convertToNodeSpaceAR(i);this.mask.node.setPosition(a.add(t.indexPos)),this.mask.node.setContentSize(900,900),e=t.distNode.getContentSize()}else e=new cc.Size(0,0);0==t.lightType?this.mask.type=cc.Mask.Type.ELLIPSE:this.mask.type=cc.Mask.Type.RECT,t.isWeek&&t.hideMask?(this.mask.node.active=!1,this.showHand(),this.showTip(t.tipstring),this.scheduleOnce(function(){p.EventMgr.getInstance().emit(u.BaseEventName.blocktouch,!0)},.1)):cc.tween(this.mask.node).to(t.moveTime,{width:e.width+this.cfg.addSize.width,height:e.height+this.cfg.addSize.height}).call(function(){o.showHand(),o.showTip(t.tipstring)}).delay(.1).call(function(){p.EventMgr.getInstance().emit(u.BaseEventName.blocktouch,!0)}).start()},e.prototype.moveTouch=function(t){var e=this;if(t.startNode&&t.endNode){this.mask.node.active=!1;var o=t.startNode.convertToWorldSpaceAR(cc.Vec2.ZERO),i=t.endNode.convertToWorldSpaceAR(cc.Vec2.ZERO),a=this.hand.parent.convertToNodeSpaceAR(o),n=this.hand.parent.convertToNodeSpaceAR(i);this.scheduleOnce(function(){e.hand.getComponent(cc.Animation).stop("handAni")},.2),this.hand.setPosition(a.add(this.cfg.handIndex)),this.hand.active=!0,this.moveTween=cc.tween(this.hand).to(t.moveTime,{position:new cc.Vec3(n.x,n.y)}).delay(.5).call(function(){e.hand.setPosition(a.add(e.cfg.handIndex))}).union().repeatForever(),this.moveTween.start(),this.mask.node.setPosition(n),this.showTip(t.tipstring)}else this.closeUI()},e.prototype.start=function(){var t=this;(!this.cfg.delay||this.cfg.delay<.1)&&(this.cfg.delay=.1),this.scheduleOnce(function(){0==t.cfg.clickType?t.clickTouch(t.cfg):t.moveTouch(t.cfg)},this.cfg.delay),this.node.on(cc.Node.EventType.TOUCH_START,function(e){if(t.cfg.isWeek||!t.mask.node.active)return t.cfg.callBack?t.cfg.callBack():t.node._touchListener.setSwallowTouches(!1),void t.closeUI();t.distNode&&t.distNode.getBoundingBoxToWorld().contains(e.getLocation())&&(t.cfg.callBack?t.cfg.callBack():t.node._touchListener.setSwallowTouches(!1),t.closeUI())},this),this.mask.node.getChildByName("bg").on(cc.Node.EventType.TOUCH_START,function(e){if(t.cfg.isWeek||!t.mask.node.active)return t.closeUI(),void(t.cfg.callBack?t.cfg.callBack():t.node._touchListener.setSwallowTouches(!1));t.distNode&&t.distNode.getBoundingBoxToWorld().contains(e.getLocation())&&(t.cfg.callBack?t.cfg.callBack():t.node._touchListener.setSwallowTouches(!1),t.closeUI())},this)},e.prototype.showHand=function(){this.cfg.showHand&&(this.hand.setPosition(this.mask.node.position.add(cc.v3(this.cfg.handIndex))),this.hand.active=!0)},e.prototype.showTip=function(t){if(t&&t.length>0){this.tipBg.active=!0,this.tipBg.setPosition(0,this.cfg.yDec),this.tipText.string=t;var e=Math.abs(this.tipBg.scaleX),o=Math.abs(this.tipBg.scaleY),i=Math.abs(this.tipText.node.scaleX),a=Math.abs(this.tipText.node.scaleY);this.dirPos==c.TopLeft?(this.tipBg.scaleX=-e,this.tipText.node.scaleX=-i):this.dirPos==c.TopRight?(this.tipBg.scaleX=e,this.tipText.node.scaleX=i):this.dirPos==c.BottomLeft?(this.tipBg.scaleX=-e,this.tipBg.scaleY=-o,this.tipText.node.scaleX=-i,this.tipText.node.scaleY=-a):this.dirPos==c.BottomRight&&(this.tipBg.scaleY=-o,this.tipText.node.scaleX=i,this.tipText.node.scaleY=-a)}else this.tipBg.active=!1},s([h(cc.Mask)],e.prototype,"mask",void 0),s([h(cc.Node)],e.prototype,"hand",void 0),s([h(cc.Node)],e.prototype,"hand1",void 0),s([h(cc.Node)],e.prototype,"hand2",void 0),s([h(cc.Node)],e.prototype,"tipBg",void 0),s([h(cc.RichText)],e.prototype,"tipText",void 0),s([g],e)}(l.default);n.default=f,cc._RF.pop()},{}],UIHome:[function(t,e,o){"use strict";cc._RF.push(e,"c7579ljm/FFjKMoISpmDA53","UIHome");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("CommonCfg"),l=a("ComPlayerMgr"),u=a("BasePlatform"),p=a("BaseUI"),d=a("EventMgr"),g=a("PlatformManager"),h=a("ResCacheMgr"),f=a("ResourceMgr"),y=a("TweenMgr"),m=a("UIMgr"),v=a("TimeUtils"),I=a("Main"),k=a("Config"),S=a("TrackDataEvent"),C=a("DataMgr"),b=a("EquipMgr"),_=a("PlayerMgr"),N=a("RedDotMgr"),T=a("RoleMgr"),D=a("TaskMgr"),M=a("TimeMgr"),B=a("UIGuide"),P=cc._decorator,L=P.ccclass,E=P.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpNotGet=null,e.SpCanGet=null,e.SpEnoughGet=null,e.BtnSkill=null,e.BtnEquip=null,e.BtnShop=null,e.BtnSign=null,e.BtnTask=null,e.BtnSetting=null,e.BtnOnHook=null,e.BtnStartGame=null,e.BtnAddEquip=null,e.BtnMysticalShop=null,e.LabOnHook=null,e.LabSec=null,e.LabEarn=null,e.LabRecommend=null,e.SpPower=null,e.LabFightNum=null,e.btnBecoming=null,e.NodeMQTask=null,e.LayerTouch=null,e.SpLight=null,e.curSec=1,e.curLevel=1,e.powerPos=null,e.curCanGetState=0,e.isGameToBack=!0,e.abType="A",e}return r(e,t),e.prototype.onLoad=function(){this.initAbTypeData(),this.setSaveData_B()},e.prototype.initAbTypeData=function(){this.abType=_.PlayerMgr.getInstance().getTrackData().getAbType()},e.prototype.start=function(){var t=this;I.default.instance.destroyPlayer_Home(!0),this.registerEvent(),this.registerBtnEvent(),this.createPlayerShow(),this.guideShow(),this.playAnim(),this.controlHomeSalutation(),d.EventMgr.getInstance().emit(k.EventName.ShowUITop,!0),this.initPowerPos(),this.loadResExample(),this.initData(),this.initSignData(),this.initView(),this.refreshRedDot(),this.testUIView(),g.PlatformManager.currentPlatform!=u.Platform.ANDROID_TAP&&g.PlatformManager.currentPlatform!=u.Platform.ANDROID_233||(this.btnBecoming.active=!0,this.btnBecoming.on(cc.Node.EventType.TOUCH_END,function(){t.openUI(k.UIID.UIBecoming)})),g.PlatformManager.getInstance().showBlockAd(2)},e.prototype.setSaveData_B=function(){if("B"==this.abType){var t=_.PlayerMgr.getInstance().geUserData();t.getOwnedEquipList().forEach(function(t){t.forEach(function(t){var e=C.DataMgr.getInstance().getEquipCfg(t.id).strengthenMaxLv;t.strengthenLv>e&&(t.strengthenLv=e)})}),t.getWearEquipList().forEach(function(t){var e=C.DataMgr.getInstance().getEquipCfg(t.id).strengthenMaxLv;t.strengthenLv>e&&(t.strengthenLv=e)}),t.selfSaveData()}},e.prototype.testUIView=function(){m.UIMgr.getInstance().getUIRoot(k.UIID.UIGame)&&m.UIMgr.getInstance().closeById(k.UIID.UIGame),m.UIMgr.getInstance().getUIRoot(k.UIID.UIDrawCard)&&m.UIMgr.getInstance().closeById(k.UIID.UIDrawCard),m.UIMgr.getInstance().getUIRoot(k.UIID.UISettle)&&m.UIMgr.getInstance().closeById(k.UIID.UISettle)},e.prototype.playAnim=function(){y.TweenMgr.getInstance().playLightAni(this.SpLight)},e.prototype.controlHomeSalutation=function(){I.default.instance.controlWearSalutation(!0)},e.prototype.guideShow=function(){var t=_.PlayerMgr.getInstance().getGuideData();if(!t.getGuideEnd()){var e=t.getCurrentId();if(1==e)(o=new B.GuildCfg).distNode=this.BtnStartGame,o.tipstring="\u5c0f\u5b50\uff0c\u524d\u65b9\u5c31\u662f<color=#ff6b1b>\u9ab7\u9ac5\u6d1e\u7a9f</color>\u4e86\uff01\u8ba9\u6211\u770b\u770b\u4f60\u7684\u672c\u4e8b\u5427\uff01",o.yDec=-150,this.openUICallBack(k.UIID.UIGuide,function(){t.addCurrentId()},o);else if(e==8+t.putGuideNum)(o=new B.GuildCfg).distNode=this.BtnEquip,o.tipstring="\u867d\u7136\u6ca1\u6709\u7206\u88c1\u51b3\uff0c\u4f46\u8d77\u7801\u51fa\u4e86<color=#ff6b1b>\u88c5\u5907</color>\u548c<color=#ff6b1b>\u6280\u80fd</color>\uff0c\u73b0\u5728\u5148\u53bb<color=#ff6b1b>\u7a7f\u6234\u88c5\u5907</color>\u5427",o.yDec=-150,this.openUICallBack(k.UIID.UIGuide,function(){t.addCurrentId()},o);else if(e==12+t.putGuideNum){var o;(o=new B.GuildCfg).distNode=this.BtnSkill,o.yDec=-150,this.openUICallBack(k.UIID.UIGuide,function(){t.addCurrentId()},o)}}},e.prototype.refreshRedDot=function(t,e,o,i,a){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===o&&(o=!0),void 0===i&&(i=!0),void 0===a&&(a=!0),t&&N.default.getInstance().taskForRedDot(this.BtnTask.getChildByName("SpRedDot")),e&&N.default.getInstance().onHookForRedDot(this.BtnOnHook.getChildByName("SpRedDot")),o&&N.default.getInstance().skillBookForRedDot(this.BtnSkill.getChildByName("SpRedDot")),i&&N.default.getInstance().equipForRedDot(this.BtnEquip.getChildByName("SpRedDot")),a&&N.default.getInstance().shopForRedDot(this.BtnShop.getChildByName("SpRedDot"))},e.prototype.registerEvent=function(){this.addEvent(k.EventName.RefreshOnlineTime,this.refreshOnlineTime),this.addEvent(k.EventName.RefreshRedDot,this.refreshRedDot)},e.prototype.registerBtnEvent=function(){var t=this;this.BtnAddEquip.on(cc.Node.EventType.TOUCH_END,function(){t.addEquipTest(),t.BtnAddEquip.active=!1}),this.BtnStartGame.on(cc.Node.EventType.TOUCH_END,function(){var e=Number(C.DataMgr.getInstance().getParamsCfgForSingle(k.EnumParams.LevelCostPowerNum).value);_.PlayerMgr.getInstance().geUserData().subPowerNum(e,t.powerPos,function(){t.startGame(),I.default.instance.startGame(),D.default.getInstance().costPowerForTask(5)})}),this.BtnSkill.on(cc.Node.EventType.TOUCH_END,function(){_.PlayerMgr.getInstance().getTrackData().youmengTrack(S.TrackId.guide12),t.closeView(),m.UIMgr.getInstance().openUI(k.UIID.UISkillBook,-1)}),this.BtnEquip.on(cc.Node.EventType.TOUCH_END,function(){_.PlayerMgr.getInstance().getTrackData().youmengTrack(S.TrackId.guide9),t.closeView(),m.UIMgr.getInstance().openUI(k.UIID.UIEquip,-1)}),this.BtnShop.on(cc.Node.EventType.TOUCH_END,function(){t.closeView(),m.UIMgr.getInstance().openUI(k.UIID.UIShop,-1)}),this.BtnSign.on(cc.Node.EventType.TOUCH_END,function(){_.PlayerMgr.getInstance().getTrackData().youmengTrack(S.TrackId.click_signin),m.UIMgr.getInstance().openUI(c.ComUIID.UISign,-1)}),this.BtnTask.on(cc.Node.EventType.TOUCH_END,function(){_.PlayerMgr.getInstance().getTrackData().youmengTrack(S.TrackId.click_task),m.UIMgr.getInstance().openUI(k.UIID.UITask,-1)}),this.BtnSetting.on(cc.Node.EventType.TOUCH_END,function(){m.UIMgr.getInstance().openUI(k.UIID.UISetting,-1,k.UIID.UIHome)}),this.BtnOnHook.on(cc.Node.EventType.TOUCH_END,function(){M.TimeMgr.getInstance().time_online<60?m.UIMgr.getInstance().openUI(k.UIID.UITips,-1,"\u8fd8\u672a\u83b7\u5f97\u5956\u52b1"):m.UIMgr.getInstance().openUI(k.UIID.UIOnlineReward,-1)}),this.BtnMysticalShop.on(cc.Node.EventType.TOUCH_END,function(){_.PlayerMgr.getInstance().getTrackData().youmengTrack(S.TrackId.click_store),m.UIMgr.getInstance().openUI(k.UIID.UIMysticalShop,-1)}),this.NodeMQTask.on(cc.Node.EventType.TOUCH_END,function(){_.PlayerMgr.getInstance().getTrackData().youmengTrack(S.TrackId.click_mainlinetask),m.UIMgr.getInstance().openUI(k.UIID.UIMainTask,-1)})},e.prototype.initPowerPos=function(){var t=this;this.scheduleOnce(function(){var e=t.SpPower.parent.convertToWorldSpaceAR(t.SpPower.getPosition());t.powerPos=t.node.convertToNodeSpaceAR(e)},.5)},e.prototype.initData=function(){this.userData=_.PlayerMgr.getInstance().geUserData(),this.userData.setCurGameMultiply(1),this.curSec=this.userData.getCurSec(),this.secData=C.DataMgr.getInstance().getSecCfg(this.curSec)},e.prototype.initSignData=function(){if(_.PlayerMgr.getInstance().getGuideData().getGuideEnd()||this.userData.getCurSec()>2){var t=l.ComPlayerMgr.getInstance().getSignData();t.checkShowRed(),t.getCanSigned()&&this.scheduleOnce(function(){m.UIMgr.getInstance().openUI(c.ComUIID.UISign,-1),I.default.instance.firstGame=!1},.1)}},e.prototype.initView=function(){this.isCanAddEquip(),this.initCurSecFightNum(),this.initSecInfo(),this.refreshOnlineTime(M.TimeMgr.getInstance().time_online),this.loadPlayerInfo()},e.prototype.loadPlayerInfo=function(){var t=T.default.getInstance().getPlayerFightNum();this.LabFightNum.string=""+t},e.prototype.refreshOnlineTime=function(t){this.LabOnHook.string=v.TimeUtils.SecondToHours(t),this.refreshOnHookBox(t)},e.prototype.refreshOnHookBox=function(t){var e=this.SpNotGet,o=60*Number(C.DataMgr.getInstance().getParamsCfgForSingle(k.EnumParams.OnHookMaxTime).value);t>=60&&t<o?e=this.SpCanGet:t>=o&&(e=this.SpEnoughGet),this.BtnOnHook.getComponent(cc.Sprite).spriteFrame=e},e.prototype.initCurSecFightNum=function(){this.LabRecommend.string="\uff08\u63a8\u8350\u6218\u529b\uff1a"+this.secData.RecommendFightNum+"\uff09"},e.prototype.isOpenTouch=function(t){void 0===t&&(t=!1),this.LayerTouch.active=t},e.prototype.isCanAddEquip=function(){},e.prototype.initSecInfo=function(){this.curSec=this.userData.getCurSec(),this.secData=C.DataMgr.getInstance().getSecCfg(this.curSec),this.LabSec.string=this.secData.secDec+"\uff1a"+this.secData.name,this.LabEarn.string=""+this.secData.HangUpDesc},e.prototype.startGame=function(){this.closeView()},e.prototype.createPlayerShow=function(){I.default.instance.createPlayer_Home();var t=_.PlayerMgr.getInstance().geUserData();_.PlayerMgr.getInstance().getGuideData().getGuideEnd()&&t.getCurSec()>=2?I.default.instance.createPet():t.getCurSec()>=3&&I.default.instance.createPet()},e.prototype.destroyPlayerShow=function(){I.default.instance.destroyPlayer_Home()},e.prototype.closeView=function(){this.closeUI(),g.PlatformManager.getInstance().hideBlockAd(2)},e.prototype.loadResExample=function(){var t=this;this.loadSpriteFrame("comimgs","goods/dog",function(){}),this.loadResFromBundle("comimgs","goods/dog",cc.SpriteFrame,function(){}),this.loadResFromBundle("comimgs","goods/dog",cc.SpriteFrame,function(){},!0,15),f.ResourceMgr.getInstance().loadSpriteframe("comimgs","goods/dog",function(){t.isclose},"UICacheExmaple"),f.ResourceMgr.getInstance().loadRes("prefabs","ui/UIHome",cc.Prefab,function(){t.isclose},"UICacheExmaple"),h.ResCacheMgr.getInstance().releaseAssetsFromMap("UICacheExmaple")},e.prototype.addEquipTest=function(){for(var t=C.DataMgr.getInstance().getAllEquipCfg(),e=[],o=1;o<=t.length;o++){var i=C.DataMgr.getInstance().getEquipCfg(o),a={id:i.id,strengthenLv:0,type:i.equipType,quality:i.qualityId,isUnlock:!0,isWear:!1,videoCount:0,IDCard:this.userData.getEquipIDCard(),starLevel:0};e.push(a)}b.default.getInstance().addManyEquip(e),console.log("\u88c5\u5907\u6dfb\u52a0\u6210\u529f@@@")},s([E(cc.SpriteFrame)],e.prototype,"SpNotGet",void 0),s([E(cc.SpriteFrame)],e.prototype,"SpCanGet",void 0),s([E(cc.SpriteFrame)],e.prototype,"SpEnoughGet",void 0),s([E(cc.Node)],e.prototype,"BtnSkill",void 0),s([E(cc.Node)],e.prototype,"BtnEquip",void 0),s([E(cc.Node)],e.prototype,"BtnShop",void 0),s([E(cc.Node)],e.prototype,"BtnSign",void 0),s([E(cc.Node)],e.prototype,"BtnTask",void 0),s([E(cc.Node)],e.prototype,"BtnSetting",void 0),s([E(cc.Node)],e.prototype,"BtnOnHook",void 0),s([E(cc.Node)],e.prototype,"BtnStartGame",void 0),s([E(cc.Node)],e.prototype,"BtnAddEquip",void 0),s([E(cc.Node)],e.prototype,"BtnMysticalShop",void 0),s([E(cc.Label)],e.prototype,"LabOnHook",void 0),s([E(cc.Label)],e.prototype,"LabSec",void 0),s([E(cc.Label)],e.prototype,"LabEarn",void 0),s([E(cc.Label)],e.prototype,"LabRecommend",void 0),s([E(cc.Node)],e.prototype,"SpPower",void 0),s([E(cc.Label)],e.prototype,"LabFightNum",void 0),s([E(cc.Node)],e.prototype,"btnBecoming",void 0),s([E(cc.Node)],e.prototype,"NodeMQTask",void 0),s([E({type:cc.Node,tooltip:"\u9632\u89e6\u6478\u5c42"})],e.prototype,"LayerTouch",void 0),s([E(cc.Node)],e.prototype,"SpLight",void 0),s([L],e)}(p.default);n.default=w,cc._RF.pop()},{}],UILotty:[function(t,e,o){"use strict";cc._RF.push(e,"aacacFCZcpBjYg00s2WOqLV","UILotty");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("Appcfg"),u=a("AudioMgr"),p=a("LogMgr"),d=a("SdkMgr"),g=a("Utils"),h=a("CommonCfg"),f=a("ComDataMgr"),y=a("ComPlayerMgr"),m=cc._decorator,v=m.ccclass,I=m.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.quanNum=null,e.rewardLayout=null,e.startLuck=null,e.freeStart=null,e.quanStart=null,e.starting=null,e.btnClose=null,e.startingSpriteFrame=null,e.normalSpriteFrame=null,e.state=0,e.itemNodes=[],e.index=4,e.repeat=3,e.i=0,e.finishNum=0,e.passed_time=0,e.walk_time=.2,e.needSecond=!1,e.girdIndexNum=1,e.totalNum=0,e.oneRepetNum=10,e.isRuning=!1,e.showGetNumText=!1,e.playNum=0,e.gildReward=[],e.isFree=!1,e.needplayVideo=!1,e.totalFreeNum=0,e}return r(e,t),e.prototype.onLoad=function(){this.addEvent(l.BaseEventName.CloseUI,this.eventCloseUI),this.addEvent(h.CommonEventName.GetRewardEnd,this.refreshRewardEnd),this.addEvent(h.CommonEventName.RefreshTickNum,this.refreshTickNum)},e.prototype.refreshTickNum=function(){this.quanNum.string=this.lottyData.getLottyTickNum()+""},e.prototype.start=function(){var t=this;this.lottyData=y.ComPlayerMgr.getInstance().getLottyData(),this.normalSpriteFrame=this.startLuck.getComponent(cc.Sprite).spriteFrame,this.playNum=this.lottyData.getLottyNum(),this.quanNum.string=this.lottyData.getLottyTickNum()+"",this.totalFreeNum=f.ComDataMgr.getInstance().getCommonParam(f.CommonParamType.freeLottyNum),this.checkCurrentFree(),this.btnClose.on(cc.Node.EventType.TOUCH_END,function(){t.closeUI()});for(var e=0,o=function(o){var a=f.ComDataMgr.getInstance().getLottyGoodsByGirldId(o);null==a&&p.LogMgr.getInstance().error("cfg is null GirldId:",o);var n=a[i.lottyData.getGirldIdIndex(o)].id,r=f.ComDataMgr.getInstance().getLottyGoodsById(n);i.gildReward.push(r);var s=i.rewardLayout.children[o-1];i.itemNodes.push(s),i.scheduleOnce(function(){cc.tween(s).to(.2,{eulerAngles:new cc.Vec3(0,180,0)}).call(function(){s.eulerAngles=new cc.Vec3(0,0,0);var e=f.ComDataMgr.getInstance().getGoodsById(r.goodId);t.loadSpriteFrame(e.bundleName,e.rewardIcon,function(t){s.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=t}),s.getChildByName("num").getComponent(cc.Label).string="x"+r.rewardNum;var o=s.getChildByName("numGet");if(t.showGetNumText){var i=t.lottyData.getInDontMust(r.id);if(r.mustNum>0&&!i){var a=t.itemNodes[r.girdId-1].getChildByName("numGet"),n=t.lottyData.getLottyIdOutNum(r.id),c=r.mustNum-n;a.getComponent(cc.Label).string=c+1+"\u6b21\u5fc5\u5f97",a.active=!0}else o.active=!1}else o.active=!1}).start()},.1+e),e+=.1},i=this,a=1;a<11;a++)o(a);this.initBtnListener()},e.prototype.initBtnListener=function(){var t=this;this.startLuck.on(cc.Node.EventType.TOUCH_START,function(){u.AudioMgr.getInstance().playEffect(h.ComAudioId.lottyDown),t.startLuck.getComponent(cc.Sprite).spriteFrame=t.startingSpriteFrame,t.checkCurrentFree(),t.freeStart.active=!1,t.quanStart.active=!1,1==t.state||t.isRuning||(t.playNum<t.totalFreeNum&&(t.isFree=!0),!t.isFree&&t.lottyData.getLottyTickNum()<=0?d.SdkMgr.getInstance().playVideo(d.AdType.FreeLotty,function(){t.needplayVideo=!0,t.isRuning=!0,t.startLotty()}):(t.needplayVideo=!1,t.isRuning=!0,t.startLotty()))}),this.startLuck.on(cc.Node.EventType.TOUCH_END,function(){t.checkCurrentFree(),t.startLuck.getComponent(cc.Sprite).spriteFrame=t.normalSpriteFrame}),this.startLuck.on(cc.Node.EventType.TOUCH_CANCEL,function(){t.startLuck.getComponent(cc.Sprite).spriteFrame=t.normalSpriteFrame})},e.prototype.startLotty=function(){var t,e=this;this.curNode&&this.curNode.stopAllActions(),this.index=this.getCurentReward()-1,0==this.i?this.totalNum=(this.repeat-1)*this.oneRepetNum+this.index+1:(t=this.i>this.index?this.oneRepetNum-this.i+this.index:this.i==this.index?this.oneRepetNum:this.index-this.i,this.totalNum=(this.repeat-1)*this.oneRepetNum+t),this.index<5?this.needSecond=!0:this.needSecond=!1,this.refreshState(),this.scheduleOnce(function(){e.state=1}),this.isFree||this.needplayVideo||(this.lottyData.refreshTickNum(1,!1),this.quanNum.string=this.lottyData.getLottyTickNum()+"")},e.prototype.checkCurrentFree=function(){this.playNum<this.totalFreeNum?(this.freeStart.active=!1,this.quanStart.active=!1,this.isFree=!0,this.needplayVideo=!1):this.lottyData.getLottyTickNum()<=0?(this.freeStart.active=!0,this.quanStart.active=!1,this.needplayVideo=!0,this.isFree=!1):(this.freeStart.active=!1,this.quanStart.active=!0,this.needplayVideo=!1,this.isFree=!1)},e.prototype.refreshState=function(){this.girdIndexNum=1,this.finishNum=0,this.passed_time=0,this.walk_time=.2,this.curNode&&(this.curNode.eulerAngles=new cc.Vec3(0,0,0));for(var t=0;t<this.itemNodes.length;t++){var e=this.itemNodes[t];e.getChildByName("bg").active=!1,e.getChildByName("buttonLight").active=!1}},e.prototype.update=function(t){if(0!=this.state){if(1==this.state&&(this.passed_time+=t,this.passed_time>=this.walk_time)){this.i>=this.itemNodes.length&&(this.i=0),this.girdIndexNum%this.oneRepetNum==0&&this.finishNum++,0==this.i||3==this.i||6==this.i||9==this.i?u.AudioMgr.getInstance().playMusic(h.ComAudioId.ding,"lottyRun1",!1):1==this.i||4==this.i||7==this.i||10==this.i?u.AudioMgr.getInstance().playMusic(h.ComAudioId.ding,"lottyRun2",!1):u.AudioMgr.getInstance().playMusic(h.ComAudioId.ding,"lottyRun3",!1);var e=this.itemNodes[this.i];e.getChildByName("bg").active=!0,e.getChildByName("buttonLight").active=!0;var o=void 0,i=(o=this.i-1<0?this.itemNodes[this.itemNodes.length-1]:this.itemNodes[this.i-1]).getChildByName("bg");cc.tween(i).to(.4,{opacity:0}).call(function(){i.active=!1,i.opacity=255}).start();var a=o.getChildByName("buttonLight");if(cc.tween(i).to(.2,{opacity:0}).call(function(){a.active=!1,a.opacity=255}).start(),this.girdIndexNum>this.totalNum-2&&this.i==this.index)return this.state=2,void this.selectNode();this.passed_time=0,this.walk_time=.1,this.girdIndexNum<3?this.walk_time=.5:this.girdIndexNum<4?this.walk_time=.4:this.girdIndexNum<6?this.walk_time=.3:this.girdIndexNum>this.totalNum-1?this.walk_time=.8:this.girdIndexNum>this.totalNum-2?this.walk_time=.6:this.girdIndexNum>this.totalNum-3?this.walk_time=.5:this.girdIndexNum>this.totalNum-4&&(this.walk_time=.3),this.i++,this.girdIndexNum+=1}2==this.state&&(this.state=0)}},e.prototype.selectNode=function(){var t=this;this.curNode=this.itemNodes[this.index],this.selectNodeTween=cc.tween(this.curNode).to(1,{scale:1.15}).to(1,{scale:1}).union().repeatForever(),this.selectNodeTween.start(),this.curNode.getChildByName("bg").active=!0;var e=this.curNode.getChildByName("icon"),o=e.scale;cc.tween(e).parallel(cc.tween(e).by(.2,{position:new cc.Vec3(0,20,0)}).by(.2,{position:new cc.Vec3(0,-20,0)}).start(),cc.tween(e).to(.2,{scale:1.02}).to(.2,{scale:o}).start()).by(.2,{position:new cc.Vec3(0,10,0)}).by(.2,{position:new cc.Vec3(0,-10,0)}).call(function(){t.finishEnd()}).start()},e.prototype.getCurentReward=function(){for(var t=[],e=0;e<this.gildReward.length;e++)if((r=this.gildReward[e]).mustNum>0){var o=this.lottyData.getLottyIdOutNum(r.id),i=this.lottyData.getInDontMust(r.id);if(r.mustNum<=o&&!i)return this.goodId=r.goodId,this.goodNum=r.rewardNum,this.lottyGoodCfg=r,e+1}else{var a=new l.WeightObject;a.id=r.id,a.weight=r.weight,t.push(a)}if(t.length>0){var n=g.Utils.weight_rand(t),r=f.ComDataMgr.getInstance().getLottyGoodsById(n.id);return this.goodId=r.goodId,this.goodNum=r.rewardNum,this.lottyGoodCfg=r,r.girdId}},e.prototype.finishEnd=function(){var t=this;this.scheduleOnce(function(){var e=t.curNode.convertToWorldSpaceAR(cc.Vec2.ZERO);y.ComPlayerMgr.getInstance().checkOpenReward(t.goodId+h.CommonCfg.splitNum+t.goodNum,e)},.2)},e.prototype.refreshRewardEnd=function(){this.eventCloseUI(h.ComUIID.UIReward)},e.prototype.eventCloseUI=function(t){var e=this;if(t==h.ComUIID.UIReward){this.selectNodeTween&&this.selectNodeTween.stop(),cc.tween(this.curNode).to(.1,{scale:1}).start();for(var o=0;o<this.gildReward.length;o++){var i=this.gildReward[o];if(this.lottyData.addLottyIdOutNum(i.id),this.showGetNumText&&i.mustNum>0){var a=this.itemNodes[i.girdId-1].getChildByName("numGet"),n=this.lottyData.getLottyIdOutNum(i.id),r=i.mustNum-n;a.getComponent(cc.Label).string=r+1+"\u6b21\u5fc5\u5f97"}}this.playNum++,this.lottyData.addLottyNum(),this.startLuck.active=!0,this.starting.active=!1,this.checkCurrentFree();var s=this.lottyGoodCfg.girdId,c=this.lottyData.getGirldIdIndex(s),l=f.ComDataMgr.getInstance().getLottyGoodsByGirldId(s),u=c;c<l.length-1&&(u+=1),this.lottyGoodCfg.mustNum>0&&this.lottyData.addInDontMust(this.lottyGoodCfg.id);var d=this.itemNodes[this.lottyGoodCfg.girdId-1],g=d.getChildByName("numGet");if(1==this.lottyGoodCfg.replace&&u!=c){this.lottyData.setGirldReward(s,u),i=l[u];var y=f.ComDataMgr.getInstance().getGoodsById(i.goodId);this.loadSpriteFrame(y.bundleName,y.rewardIcon,function(t){d.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=t}),d.getChildByName("num").getComponent(cc.Label).string="x"+i.rewardNum,this.showGetNumText&&i.mustNum>0?(g.getComponent(cc.Label).string=i.mustNum+"\u6b21\u5fc5\u5f97",g.active=!0):g.active=!1,this.gildReward[this.lottyGoodCfg.girdId-1]=i,cc.tween(this.curNode).to(.4,{eulerAngles:new cc.Vec3(0,180,0)}).call(function(){e.curNode.eulerAngles=new cc.Vec3(0,0,0)}).start()}else p.LogMgr.getInstance().debug("\u6ca1\u6709\u53ef\u66ff\u6362\u7684"),g.active=!1;this.isRuning=!1}},e.prototype.onClose=function(){u.AudioMgr.getInstance().stopMusic("lottyMusic")},s([I({type:cc.Label,displayName:"\u5238\u7684\u6570\u91cf"})],e.prototype,"quanNum",void 0),s([I({type:cc.Node})],e.prototype,"rewardLayout",void 0),s([I(cc.Node)],e.prototype,"startLuck",void 0),s([I(cc.Node)],e.prototype,"freeStart",void 0),s([I(cc.Node)],e.prototype,"quanStart",void 0),s([I(cc.Node)],e.prototype,"starting",void 0),s([I(cc.Node)],e.prototype,"btnClose",void 0),s([I(cc.SpriteFrame)],e.prototype,"startingSpriteFrame",void 0),s([v],e)}(c.default);n.default=k,cc._RF.pop()},{}],UIMainTask:[function(t,e,o){"use strict";cc._RF.push(e,"e76b9frSjRAuqDt0IZTkpli","UIMainTask");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.UIMainTask=void 0;var c=a("BaseUI"),l=a("ResourceMgr"),u=a("SdkMgr"),p=a("UIMgr"),d=a("Config"),g=a("TrackDataEvent"),h=a("DataMgr"),f=a("GoodsManager"),y=a("PlayerMgr"),m=a("TimeMgr"),v=cc._decorator,I=v.ccclass,k=v.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spBar=null,e.labTaskProgress=null,e.labTaskDec=null,e.btnGet=null,e.btnVideoGet=null,e.btnGoto=null,e.btnClose=null,e.rewardItem=null,e.curTaskId=1,e}return r(e,t),e.prototype.start=function(){this.registerBtnEvent(),this.initData(),this.initView()},e.prototype.registerBtnEvent=function(){var t=this;this.btnClose.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()}),this.btnGoto.on(cc.Node.EventType.TOUCH_END,function(){var e=y.PlayerMgr.getInstance().getMainTaskData().getCurrentId(),o=h.DataMgr.getInstance().getMission(e);if(d.UIID.UIHome!=o.JumpRoute){var i=d.UIID.UIHomeNew;d.UIID.UIOnlineReward==o.JumpRoute?m.TimeMgr.getInstance().time_online<60?p.UIMgr.getInstance().openUI(d.UIID.UITips,-1,"\u8fd8\u672a\u83b7\u5f97\u5956\u52b1"):p.UIMgr.getInstance().openUI(d.UIID.UIOnlineReward,-1):(d.UIID.UIMysticalShop!=o.JumpRoute&&p.UIMgr.getInstance().closeById(i),p.UIMgr.getInstance().openUI(o.JumpRoute,-1))}t.closeView()}),this.btnGet.on(cc.Node.EventType.TOUCH_END,function(){t.curTaskId<=30&&y.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.mainlinetask_X,t.curTaskId),y.PlayerMgr.getInstance().getMainTaskData().addTaskId(),t.getReward(),t.closeView()}),this.btnVideoGet.on(cc.Node.EventType.TOUCH_END,function(){u.SdkMgr.getInstance().playVideo(1,function(){t.curTaskId<=30&&y.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.mainlinetask_X,t.curTaskId),y.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.task_doubleaward),y.PlayerMgr.getInstance().getMainTaskData().addTaskId(),t.getReward(!0),t.closeView()})})},e.prototype.initData=function(){this.curTaskId=y.PlayerMgr.getInstance().getMainTaskData().getCurrentId()},e.prototype.initView=function(){this.refreshView(),this.initRewardView()},e.prototype.refreshView=function(){var t=h.DataMgr.getInstance().getMission(this.curTaskId);if(t){this.labTaskDec.string=""+t.Desc1+t.TaskParameter+t.Desc2,this.spBar.fillRange=y.PlayerMgr.getInstance().getMainTaskData().getCurrentParameter()/t.TaskParameter,this.labTaskProgress.string=y.PlayerMgr.getInstance().getMainTaskData().getCurrentParameter()+"/"+t.TaskParameter;var e=y.PlayerMgr.getInstance().getMainTaskData().getCurrentState();this.btnGoto.active=!e,this.btnGet.active=e,this.btnVideoGet.active=e}},e.prototype.initRewardView=function(){var t,e=this,o=y.PlayerMgr.getInstance().getMainTaskData().getCurrentId(),i=h.DataMgr.getInstance().getMission(o),a=h.DataMgr.getInstance().getGoodsCfg(i.RewardType);switch(l.ResourceMgr.getInstance().loadSpriteframe(a.bundleQuality,a.iconQuality,function(t){e.rewardItem.getChildByName("SpIconBg").getComponent(cc.Sprite).spriteFrame=t}),this.rewardItem.getChildByName("LabIconName").getComponent(cc.Label).string=a.goodsName+"x"+i.RewardNum,this.rewardItem.getChildByName("LabIconName").color=f.default.getInstance().seleColor(a.goodsQualityId),a.goodsType){case"gold":case"inGot":case"power":t=h.DataMgr.getInstance().getGoodsCfg(i.RewardType),l.ResourceMgr.getInstance().loadSpriteframe(t.bundle,t.goodsGameIcon,function(t){e.rewardItem.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t})}},e.prototype.getReward=function(t){void 0===t&&(t=!1);var e=y.PlayerMgr.getInstance().getMainTaskData().getCurrentId(),o=h.DataMgr.getInstance().getMission(e),i=h.DataMgr.getInstance().getGoodsCfg(o.RewardType),a=y.PlayerMgr.getInstance().geUserData(),n=t?2*o.RewardNum:o.RewardNum;switch(i.goodsType){case"gold":a.addGoldNum(n),p.UIMgr.getInstance().openUI(d.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 \u91d1\u5e01x"+n);break;case"inGot":a.addInGotNum(n),p.UIMgr.getInstance().openUI(d.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 \u5143\u5b9dx"+n);break;case"power":a.addPowerNum(n),p.UIMgr.getInstance().openUI(d.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 \u4f53\u529bx"+n)}},e.prototype.closeView=function(){this.closeUI()},s([k({type:cc.Sprite,displayName:""})],e.prototype,"spBar",void 0),s([k({type:cc.Label,displayName:""})],e.prototype,"labTaskProgress",void 0),s([k({type:cc.Label,displayName:""})],e.prototype,"labTaskDec",void 0),s([k({type:cc.Node,displayName:""})],e.prototype,"btnGet",void 0),s([k({type:cc.Node,displayName:""})],e.prototype,"btnVideoGet",void 0),s([k({type:cc.Node,displayName:""})],e.prototype,"btnGoto",void 0),s([k({type:cc.Node,displayName:""})],e.prototype,"btnClose",void 0),s([k(cc.Node)],e.prototype,"rewardItem",void 0),s([I("UIMainTask")],e)}(c.default);n.UIMainTask=S,cc._RF.pop()},{}],UIMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ce4b5DsRi9JnJiilB/Cdu7a","UIMgr");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.UIMgr=void 0;var n=i("Config"),r=i("BaseUI"),s=i("Appcfg"),c=i("EventMgr"),l=i("LogMgr"),u=i("ResourceMgr"),p=function(t,e,o,i,a,n,r,s,c){this.uid=t,this.callback=i,this.parent=o,this.fromId=e,this.param1=a,this.param2=n,this.param3=r,this.param4=s,this.param5=c},d=function(){function t(){this.uistatck=new Map,this.uichace=new Map,this.orderMap=new Map,this.popStatck=[],this.logStatck=[],this.watingOpen=[],this.onlyShowOne=[],this.activityOne=[],this.layerNodeMap=new Map,this.otherUIConf=[],this.uiRoot=null,this.UIConf={},this.isopening=!1,this.touchTime=-1}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.preLoadUI=function(t,e){var o=this,i=this.getUICnf(t);i?u.ResourceMgr.getInstance().loadRes(i.bundleName,i.prefab,cc.Prefab,function(a){var n=cc.instantiate(a);n.name=i.name;var s=n.getComponent(r.default);o.uichace.set(t,s),e&&e()}):l.LogMgr.getInstance().error("ui\u6ca1\u6709\u914d\u7f6e\uff1a",t)},t.prototype.addLayerShowOne=function(t){this.onlyShowOne.push(t)},t.prototype.addLayerActivityOne=function(t){this.activityOne.push(t)},t.prototype.addUICnf=function(t){this.otherUIConf.push(t)},t.prototype.setConf=function(t){this.UIConf=t},t.prototype.Init=function(t){this.uiRoot=t,this.UIConf=n.UICF,this.touchTime=-1,this.addTipsNode()},t.prototype.getUIRoot=function(t){var e=this.uiRoot.getChildByName(n.UICF[t].name);if(cc.isValid(e))return e},t.prototype.addBlockTouch=function(){this.blockNode=new cc.Node,this.blockNode.height=cc.view.getVisibleSize().height,this.blockNode.width=cc.view.getVisibleSize().width,this.blockNode.parent=this.uiRoot,this.blockNode.zIndex=99999,this.blockNode.on(cc.Node.EventType.TOUCH_START,function(){})},t.prototype.addTipsNode=function(){var t=this;this.tipsNode&&this.tipsNode.destroy(),this.tipsNode=new cc.Node,this.tipsNode.height=cc.view.getVisibleSize().height,this.tipsNode.width=cc.view.getVisibleSize().width;var e=new cc.Node,o=e.addComponent(cc.Label);o.string="\u8457\u4f5c\u6743\u4eba\uff1a\u5b9e\u4e30\uff08\u6df1\u5733\uff09\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",o.fontSize=20,e.parent=this.tipsNode,e.y=-(cc.view.getVisibleSize().height/2-20),e.active=!1,this.tipsNode.parent=this.uiRoot,this.tipsNode.zIndex=99999,this.tipsNode.on(cc.Node.EventType.TOUCH_START,function(){var o=(new Date).getTime();-1!=t.touchTime&&o-t.touchTime<200?t.touchNum++:t.touchNum=0,t.touchNum>=20&&(e.active=!0),t.touchTime=(new Date).getTime()}),this.tipsNode._touchListener.setSwallowTouches(!1)},t.prototype.openUIOfParent=function(t,e,o,i,a,n,r,s){this.open(t,e,o,i,a,n,r,s)},t.prototype.openUIOfCallback=function(t,e,o,i,a,n,r,s){this.open(t,e,this.uiRoot,o,i,a,n,r,s)},t.prototype.openUIOfParentAndCallback=function(t,e,o,i,a,n,r,s,c){this.open(t,e,o,i,a,n,r,s,c)},t.prototype.openUI=function(t,e,o,i,a,n,r){this.open(t,e,this.uiRoot,null,o,i,a,n,r)},t.prototype.open=function(t,e,o,i,a,n,d,g,h){var f=this;if(this.isopening){var y=new p(t,e,o,i,a,n,d,g,h);this.watingOpen.push(y)}else{this.isopening=!0;var m=this.getUICnf(t);if(null==m)return l.LogMgr.getInstance().debug(t+"\u4e0d\u5b58\u5728"),void(this.isopening=!1);var v=new p(t,e,o,i,a,n,d,g,h);if(this.popCanShow(t,m,v)){if(this.uistatck.get(t)&&!m.showMult)return l.LogMgr.getInstance().debug(t+"\u5df2\u7ecf\u5b58\u5728"),this.uistatck.get(t).node.getComponent(r.default).refreshUI(t,e,i,a,n,d,g,h),void(this.isopening=!1);var I=this.uichace.get(t);if(I){this.uistatck.set(t,I),I.init&&I.init(a,n,d,g,h),this.uichace.delete(t);var k=o.getChildByName(m.name);null==k&&((k=I.node).active=!1,k.name=m.name,o.addChild(k)),k.x=0,k.y=0,k.active=!1,I.layer=m.zIndex;var S=m.zIndex;this.orderMap.has(I.layer)&&(S=this.orderMap.get(I.layer)+1),this.orderMap.set(I.layer,S),k.zIndex=S,I.setUid(t),I.fromId=e,this.updateMainUI(t,m);var C=this.layerNodeMap.get(m.zIndex);if(C)C.push(k);else{var b=[];b.push(k),this.layerNodeMap.set(m.zIndex,b)}I.openAni(),i&&i(k),c.EventMgr.getInstance().emit(s.BaseEventName.OpenUI,t,k),this.isopening=!1,this.openWaiting(),k.active=!0}else u.ResourceMgr.getInstance().loadRes(m.bundleName,m.prefab,cc.Prefab,function(l){var u=cc.instantiate(l);u.active=!1,u.name=m.name,o.addChild(u);var p=u.getComponent(r.default);f.uistatck.set(t,p),p.init&&p.init(a,n,d,g,h),p.setUid(t),p.fromId=e,p.layer=m.zIndex;var y=m.zIndex;f.orderMap.has(p.layer)&&(y=f.orderMap.get(p.layer)+1),f.orderMap.set(p.layer,y),u.zIndex=y,u.x=0,u.y=0,f.updateMainUI(t,m);var v=f.layerNodeMap.get(m.zIndex);if(v)v.push(u);else{var I=[];I.push(u),f.layerNodeMap.set(m.zIndex,I)}p.openAni(),i&&i(u),c.EventMgr.getInstance().emit(s.BaseEventName.OpenUI,t,u),f.isopening=!1,f.openWaiting(),u.active=!0})}else this.isopening=!1}},t.prototype.getChildByName=function(t){return this.uiRoot.getChildByName(t)},t.prototype.openWaiting=function(){if(this.watingOpen.length>0){var t=this.watingOpen.pop();this.openUIOfParentAndCallback(t.uid,t.fromId,t.parent,t.callback,t.param1,t.param2,t.param3,t.param4,t.param5)}},t.prototype.closeUI=function(t,e,o,i,a){var n=this;if(null!=t&&t.isValid){var u=t.getComponent(r.default);u.closeAni(function(){var r=u.getUid(),l=n.getUICnf(r);if(u.onClose(),u.cache?(t.removeFromParent(),n.uichace.set(r,u)):t.destroy(),n.uistatck.delete(r),null!=l){var p=n.layerNodeMap.get(l.zIndex);if(p)for(var d=0;d<p.length;d++)if(p[d].name==t.name){p=p.splice(d,1);break}var g=u.layer;if(n.orderMap.has(u.layer)&&(g=n.orderMap.get(u.layer)-1)<u.layer&&(g=u.layer),n.orderMap.set(u.layer,g),c.EventMgr.getInstance().emit(s.BaseEventName.CloseUI,r,e,o,i,a),l.zIndex==s.OrderLayer.pop){if(n.popStatck.length>0){var h=n.popStatck.pop();n.openUIOfCallback(h.uid,h.fromId,h.callback,h.param1,h.param2,h.param3,h.param4,h.param5)}}else if(l.zIndex==s.OrderLayer.main){var f=n.layerNodeMap.get(l.zIndex);f&&f.length>0&&(f[f.length-1].active=!0)}else l.zIndex==s.OrderLayer.Log&&n.logStatck.length>0&&(h=n.logStatck.pop(),n.openUIOfCallback(h.uid,h.fromId,h.callback,h.param1,h.param2,h.param3,h.param4,h.param5));n.checkHomeShow()}})}else l.LogMgr.getInstance().debug("\u5173\u95ed\u5931\u8d25")},t.prototype.checkHomeShow=function(){},t.prototype.checkOtherEmpty=function(){var t=this.layerNodeMap.get(s.OrderLayer.pop),e=this.layerNodeMap.get(s.OrderLayer.pop2);return!(t&&t.length>0||e&&e.length>0)},t.prototype.updateMainUI=function(){},t.prototype.popCanShow=function(t,e,o){var i=this.layerNodeMap.get(e.zIndex);if(e.zIndex==s.OrderLayer.pop){if(i&&i.length>0){for(var a=0;a<this.popStatck.length;a++)if(this.popStatck[a].uid==t)return!1;return this.popStatck.push(o),!1}}else if(e.zIndex==s.OrderLayer.Log&&i&&i.length>0)return this.logStatck.push(o),!1;return!0},t.prototype.closeById=function(t,e,o,i,a,n){var r=this.uistatck.get(t);r?r.node?this.closeUI(r.node,e,o,i,a,n):l.LogMgr.getInstance().debug("\u5173\u95ed\u5931\u8d252"):l.LogMgr.getInstance().debug("\u5173\u95ed\u5931\u8d251")},t.prototype.getUIById=function(t){var e=this.uistatck.get(t);if(e)return e;var o=this.uiRoot.getChildByName(this.getUICnf(t).name);return o?o.getComponent(r.default):null},t.prototype.getUIShowNum=function(t){var e=0;return this.uistatck.forEach(function(o,i){i==t&&e++}),e},t.prototype.getUIByIdWithNode=function(t,e){var o=this.uistatck.get(t);if(o)return o;if(null==e)return null;var i=e.getChildByName(this.getUICnf(t).name);return i?i.getComponent(r.default):null},t.prototype.getUICnf=function(t){var e=this.UIConf[t];if(e)return e;for(var o=0;o<this.otherUIConf.length;o++){var i=this.otherUIConf[o][t];if(i)return i}return null},t.instance=null,t}();a.UIMgr=d,cc._RF.pop()},{}],UIMysticalShop:[function(t,e,o){"use strict";cc._RF.push(e,"c465eFlBz1DmqLAY15qYlHK","UIMysticalShop");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("EventMgr"),u=a("PlatformManager"),p=a("SdkMgr"),d=a("UIMgr"),g=a("TimeUtils"),h=a("Config"),f=a("TrackDataEvent"),y=a("DataMgr"),m=a("GameMgr"),v=a("GoodsManager"),I=a("PlayerMgr"),k=a("TimeMgr"),S=cc._decorator,C=S.ccclass,b=S.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.CostIcon=[],e.BtnBack=null,e.BtnRefresh=null,e.NodeItem=null,e.LayoutShop=null,e.LabRefreshTime=null,e.NodeEff=null,e.curItemList=[],e}return r(e,t),e.prototype.start=function(){this.refreshMysticalShopSaveTime(),this.registerEvent(),this.registerBtnEvent(),this.initView(),u.PlatformManager.getInstance().hideBlockAd(2)},e.prototype.registerEvent=function(){},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()}),this.BtnRefresh.on(cc.Node.EventType.TOUCH_END,function(){p.SdkMgr.getInstance().playVideo(1,function(){I.PlayerMgr.getInstance().getTrackData().youmengTrack(f.TrackId.store_refresh),t.refreshItemList()})})},e.prototype.refreshMysticalShopSaveTime=function(){var t=I.PlayerMgr.getInstance().getMysticalShopData().getLastLoginTime();if(I.PlayerMgr.getInstance().getMysticalShopData().refreshLastLoginTime(),0!=t){var e=I.PlayerMgr.getInstance().getMysticalShopData().getLastLoginTime()-t;I.PlayerMgr.getInstance().getMysticalShopData().subMysticalShopTime(e)}},e.prototype.openMysticalShopTimer=function(){k.TimeMgr.getInstance().openTimer_MysticalShop()},e.prototype.refreshTime=function(t){var e=g.TimeUtils.SecondToHours(t);t<=0&&this.refreshItemList(),this.LabRefreshTime.string=e},e.prototype.initView=function(){this.initItemLayout()},e.prototype.initItemLayout=function(){var t=this,e=I.PlayerMgr.getInstance().getMysticalShopData().getMysticalShopList();e.length<9&&(m.default.getInstance().refreshMysticalShopData(),e=I.PlayerMgr.getInstance().getMysticalShopData().getMysticalShopList());for(var o=function(o){var a=cc.instantiate(i.NodeItem);a.active=!0,a.parent=i.LayoutShop,a.position=cc.v3(),i.curItemList.push(a);var n=y.DataMgr.getInstance().getMysticalShop(e[o].id),r=[y.DataMgr.getInstance().getGoodsCfg(n.GoodsID).goodsType,e[o].itemId];I.PlayerMgr.getInstance().getMysticalShopData().addMysticalShopList(e[o]),i.loadItemList(a,r,n,e[o]),a.on(cc.Node.EventType.TOUCH_END,function(){t.refreshCurItem(o)})},i=this,a=0;a<9;a++)o(a)},e.prototype.loadItemList=function(t,e,o,i){if(e&&!(e.length<=0)){var a=y.DataMgr.getInstance().getGoodsCfg(o.GoodsID);switch(this.loadSpriteFrame(a.bundleQuality,a.iconQuality,function(e){t.getChildByName("SpIconBg").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("NodeCost").getChildByName("SpCostIcon").getComponent(cc.Sprite).spriteFrame=this.CostIcon[o.SaleType-1],1==o.SaleType?(t.getChildByName("NodeCost").getChildByName("LabCostCount").getComponent(cc.Label).string=i.videoCount+"/"+o.SalePrice,t.getChildByName("NodeCost").getChildByName("SpCostIcon").scale=1):t.getChildByName("NodeCost").getChildByName("LabCostCount").getComponent(cc.Label).string=""+o.SalePrice,o.DiscountLabel?(t.getChildByName("SpDiscount").active=!0,t.getChildByName("SpDiscount").getChildByName("LabDiscount").getComponent(cc.Label).string=o.DiscountLabel+"\u6298"):t.getChildByName("SpDiscount").active=!1,i.isBuy?(t.getChildByName("SpDiscount").active=!1,t.getChildByName("SpLight").active=!1,t.getChildByName("NodeCost").active=!1):(t.getChildByName("SpLight").active=!0,t.getChildByName("NodeCost").active=!0),e[0]){case"equip":var n=y.DataMgr.getInstance().getEquipCfg(e[1]);this.loadSpriteFrame(n.bundle,n.equipIcon,function(e){t.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("SpIcon").scale=1,t.getChildByName("LabIconName").getComponent(cc.Label).string=n.equipName,t.getChildByName("LabIconName").color=v.default.getInstance().seleColor(n.qualityId),t.getChildByName("SpItemMask").getChildByName("LabIconNameMask").getComponent(cc.Label).string=n.equipName,t.getChildByName("SpItemMask").getChildByName("LabIconNameMask").color=v.default.getInstance().seleColor(n.qualityId),i.isBuy?t.getChildByName("SpItemMask").active=!0:t.getChildByName("SpItemMask").active=!1,t.getChildByName("LabSkillName").active=!1;break;case"skillBook":var r=y.DataMgr.getInstance().getSkillBook(e[1]);y.DataMgr.getInstance().getSkillQuality(r.qualityId),this.loadSpriteFrame("iconImg",r.SkillIcon,function(e){t.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("LabSkillName").active=!1,t.getChildByName("SpIcon").scale=.75,t.getChildByName("LabIconName").getComponent(cc.Label).string=r.name,t.getChildByName("LabIconName").color=v.default.getInstance().seleColor(r.qualityId),t.getChildByName("SpItemMask").getChildByName("LabIconNameMask").getComponent(cc.Label).string=r.name,t.getChildByName("SpItemMask").getChildByName("LabIconNameMask").color=v.default.getInstance().seleColor(r.qualityId),i.isBuy?t.getChildByName("SpItemMask").active=!0:t.getChildByName("SpItemMask").active=!1,t.getChildByName("LabSkillName").getComponent(cc.Label).string=r.name}}},e.prototype.refreshItemList=function(){var t=this;if(this.saoGuangAnim(),m.default.getInstance().refreshMysticalShopData(),this.curItemList.length<=0)for(var e=I.PlayerMgr.getInstance().getMysticalShopData().getMysticalShopList(),o=function(o){var a=cc.instantiate(i.NodeItem);a.active=!0,a.parent=i.LayoutShop,a.position=cc.v3(),i.curItemList.push(a);var n=y.DataMgr.getInstance().getMysticalShop(e[o].id),r=[y.DataMgr.getInstance().getGoodsCfg(n.GoodsID).goodsType,e[o].itemId];i.loadItemList(a,r,n,e[o]),I.PlayerMgr.getInstance().getMysticalShopData().refreshMysticalShopList(o,e[o]),a.on(cc.Node.EventType.TOUCH_END,function(){t.refreshCurItem(o)})},i=this,a=0;a<9;a++)o(a);else for(e=I.PlayerMgr.getInstance().getMysticalShopData().getMysticalShopList(),a=0;a<this.curItemList.length;a++){var n=y.DataMgr.getInstance().getMysticalShop(e[a].id),r=[y.DataMgr.getInstance().getGoodsCfg(n.GoodsID).goodsType,e[a].itemId];I.PlayerMgr.getInstance().getMysticalShopData().addMysticalShopList(e[a]),this.loadItemList(this.curItemList[a],r,n,e[a])}},e.prototype.refreshCurItem=function(t){var e=this,o=I.PlayerMgr.getInstance().getMysticalShopData().getMysticalShopList()[t];if(!o.isBuy){var i=y.DataMgr.getInstance().getMysticalShop(o.id),a=y.DataMgr.getInstance().getGoodsCfg(i.GoodsID);switch(i.SaleType){case 1:p.SdkMgr.getInstance().playVideo(1,function(){"equip"==a.goodsType?I.PlayerMgr.getInstance().getTrackData().youmengTrack(f.TrackId.store_getequip):I.PlayerMgr.getInstance().getTrackData().youmengTrack(f.TrackId.store_getskill);var n=o.videoCount+1;n>=i.SalePrice?I.PlayerMgr.getInstance().getMysticalShopData().setMysticalShopList(o.id,!0,n):(d.UIMgr.getInstance().openUI(h.UIID.UITips,-1,"\u89c2\u770b\u6210\u529f\uff0c\u8fdb\u5ea6+1"),I.PlayerMgr.getInstance().getMysticalShopData().setMysticalShopList(o.id,!1,n)),e.curItemList[t].getChildByName("NodeCost").getChildByName("LabCostCount").getComponent(cc.Label).string=o.videoCount+"/"+i.SalePrice,e.buySuccess(t,a)});break;case 2:I.PlayerMgr.getInstance().geUserData().subGoldNum(i.SalePrice)&&I.PlayerMgr.getInstance().getMysticalShopData().setMysticalShopList(o.id,!0),this.buySuccess(t,a);break;case 3:I.PlayerMgr.getInstance().geUserData().subInGotNum(i.SalePrice)&&I.PlayerMgr.getInstance().getMysticalShopData().setMysticalShopList(o.id,!0),this.buySuccess(t,a)}}},e.prototype.buySuccess=function(t,e){var o=I.PlayerMgr.getInstance().getMysticalShopData().getMysticalShopList()[t];if(o.isBuy)switch(I.PlayerMgr.getInstance().getTrackData().addCountStore(),I.PlayerMgr.getInstance().getTrackData().getCountStore()<=10&&I.PlayerMgr.getInstance().getTrackData().youmengTrack(f.TrackId.store_time_X,I.PlayerMgr.getInstance().getTrackData().getCountStore()),I.PlayerMgr.getInstance().getMainTaskData().mainTask(4),this.curItemList[t].getChildByName("SpDiscount").active=!1,this.curItemList[t].getChildByName("NodeCost").active=!1,this.curItemList[t].getChildByName("SpLight").active=!1,this.curItemList[t].getChildByName("SpItemMask").active=!0,e.goodsType){case"equip":var i=y.DataMgr.getInstance().getEquipCfg(o.itemId);I.PlayerMgr.getInstance().getTrackData().youmengTrack(f.TrackId.store_quip_X,i.id),I.PlayerMgr.getInstance().geUserData().addBaseEquip(i);var a=v.default.getInstance().getColorForQuality(i.qualityId);d.UIMgr.getInstance().openUI(h.UIID.UITips,-1,"\u6210\u529f\u83b7\u53d6 <color = #"+a+">"+i.equipName+"</c>x1"),l.EventMgr.getInstance().emit(h.EventName.RefreshRedDot,!0,!1,!1,!0,!1);break;case"skillBook":var n=y.DataMgr.getInstance().getSkillBook(o.itemId);I.PlayerMgr.getInstance().getTrackData().youmengTrack(f.TrackId.store_skill_X,n.id),I.PlayerMgr.getInstance().geUserData().addSkillBookId(o.itemId),a=v.default.getInstance().getColorForQuality(n.qualityId),d.UIMgr.getInstance().openUI(h.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 <color = #"+a+">"+n.name+"</c>x1"),l.EventMgr.getInstance().emit(h.EventName.RefreshRedDot,!0,!1,!0,!1,!1)}else this.curItemList[t].getChildByName("SpLight").active=!0,this.curItemList[t].getChildByName("SpItemMask").active=!1},e.prototype.saoGuangAnim=function(){this.NodeEff.active=!0,this.NodeEff.getComponent(sp.Skeleton).setAnimation(0,"saoguang",!1)},e.prototype.closeView=function(){this.closeUI(),this.refreshMysticalShopSaveTime(),u.PlatformManager.getInstance().showBlockAd(2)},s([b(cc.SpriteFrame)],e.prototype,"CostIcon",void 0),s([b(cc.Node)],e.prototype,"BtnBack",void 0),s([b(cc.Node)],e.prototype,"BtnRefresh",void 0),s([b(cc.Node)],e.prototype,"NodeItem",void 0),s([b(cc.Node)],e.prototype,"LayoutShop",void 0),s([b(cc.Label)],e.prototype,"LabRefreshTime",void 0),s([b(cc.Node)],e.prototype,"NodeEff",void 0),s([C],e)}(c.default);n.default=_,cc._RF.pop()},{}],UINotBagIndex:[function(t,e,o){"use strict";cc._RF.push(e,"102dbEQAipHQLPTvMy7NE96","UINotBagIndex");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("SdkMgr"),u=a("UIMgr"),p=a("TimeUtils"),d=a("Config"),g=a("TrackDataEvent"),h=a("EquipMgr"),f=a("GoodsManager"),y=a("PlayerMgr"),m=cc._decorator,v=m.ccclass,I=m.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabDec=null,e.BtnSellEquip=null,e.BtnAddBagIndex=null,e.curTurnView=d.UIID.UIHome,e}return r(e,t),e.prototype.init=function(t){this.curTurnView=t||d.UIID.UIHome},e.prototype.onLoad=function(){},e.prototype.start=function(){this.registerBtnEvent(),this.initView()},e.prototype.registerBtnEvent=function(){var t=this;this.BtnSellEquip.on(cc.Node.EventType.TOUCH_END,function(){t.closeView(),u.UIMgr.getInstance().openUI(d.UIID.UISellView,-1,t.curTurnView)}),this.BtnAddBagIndex.on(cc.Node.EventType.TOUCH_END,function(){var e=p.TimeUtils.GetTimeBySecond(),o=p.TimeUtils.GetTimeByHours2();l.SdkMgr.getInstance().playVideo(1,function(){var i=p.TimeUtils.GetTimeBySecond(),a=p.TimeUtils.GetTimeByHours2();y.PlayerMgr.getInstance().getTrackData().testTrackTime("equipvacancy",o,a,e,i),y.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.equipvacancy),y.PlayerMgr.getInstance().getTrackData().youmengTrackNew("equipvacancy_b"),y.PlayerMgr.getInstance().geUserData().addbagIndexCount(),t.initBtn(),t.curTurnView==d.UIID.UIEquip&&t.sendEvent(d.EventName.RefreshBagIndexCount),f.default.getInstance().isOverEquipBagForIndex()?t.initDec():t.closeView()})})},e.prototype.initView=function(){this.initDec(),this.initBtn()},e.prototype.initBtn=function(){y.PlayerMgr.getInstance().geUserData().getBagIndexCount()>=144&&(this.BtnAddBagIndex.active=!1)},e.prototype.initDec=function(){var t=y.PlayerMgr.getInstance().geUserData().getBagIndexCount(),e=h.default.getInstance().getOwnedEquipCount();this.LabDec.string="\u88c5\u5907\u4ed3\u5e93\u5df2\u6ee1\uff0c\u90e8\u5206\u88c5\u5907<color = #ff0000 >\uff08"+(e-t)+"\uff09</c>\u672a\u80fd\u83b7\u5f97\uff0c\u5efa\u8bae\u51fa\u552e\u65e0\u7528\u7684\u88c5\u5907\u6216\u8005\u6269\u5145\u4ed3\u5e93\u69fd\u4f4d\uff01"},e.prototype.closeView=function(){this.closeUI()},s([I(cc.RichText)],e.prototype,"LabDec",void 0),s([I(cc.Node)],e.prototype,"BtnSellEquip",void 0),s([I(cc.Node)],e.prototype,"BtnAddBagIndex",void 0),s([v],e)}(c.default);n.default=k,cc._RF.pop()},{}],UIOnlineReward:[function(t,e,o){"use strict";cc._RF.push(e,"386afW5wrxCjaU2q7QaBU4e","UIOnlineReward");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("EventMgr"),u=a("ResourceMgr"),p=a("SdkMgr"),d=a("TimeUtils"),g=a("Utils"),h=a("Config"),f=a("DataMgr"),y=a("PlayerMgr"),m=a("TimeMgr"),v=a("GoodsManager"),I=a("TaskMgr"),k=a("TrackDataEvent"),S=a("GameMgr"),C=a("PlatformManager"),b=cc._decorator,_=b.ccclass,N=b.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeRewardItem=null,e.LayoutReward=null,e.BtnBack=null,e.BtnFreeGet=null,e.BtnVideoGet=null,e.LabTime=null,e.onlineGoodsIdList=[],e}return r(e,t),e.prototype.onLoad=function(){this.registerEvent()},e.prototype.start=function(){this.registerBtnEvent(),p.SdkMgr.getInstance().showBanner(),y.PlayerMgr.getInstance().getTrackData().youmengTrack(k.TrackId.onhookreward_click),this.initData(),this.initView(),C.PlatformManager.getInstance().hideBlockAd(2)},e.prototype.registerEvent=function(){},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){t.closeView(),S.default.getInstance().openHomeUI()}),this.BtnFreeGet.on(cc.Node.EventType.TOUCH_END,function(){y.PlayerMgr.getInstance().getTrackData().youmengTrack(k.TrackId.onhookreward_get),v.default.getInstance().getReward(t.onlineGoodsIdList),t.closeView(),t.resetOnHookRewardAndTime(),S.default.getInstance().openHomeUI(),y.PlayerMgr.getInstance().getMainTaskData().mainTask(9)}),this.BtnVideoGet.on(cc.Node.EventType.TOUCH_END,function(){var e=d.TimeUtils.GetTimeBySecond(),o=d.TimeUtils.GetTimeByHours2();p.SdkMgr.getInstance().playVideo(1,function(){var i=d.TimeUtils.GetTimeBySecond(),a=d.TimeUtils.GetTimeByHours2();y.PlayerMgr.getInstance().getTrackData().testTrackTime("offlineaward",o,a,e,i),y.PlayerMgr.getInstance().getTrackData().youmengTrack(k.TrackId.offlineaward),y.PlayerMgr.getInstance().getTrackData().youmengTrackNew("offlineaward_b"),y.PlayerMgr.getInstance().getTrackData().youmengTrack(k.TrackId.onhookreward_getdouble),v.default.getInstance().getRewardDouble(t.onlineGoodsIdList),t.closeView(),t.resetOnHookRewardAndTime(),S.default.getInstance().openHomeUI(),y.PlayerMgr.getInstance().getMainTaskData().mainTask(9)})})},e.prototype.resetOnHookRewardAndTime=function(){I.default.getInstance().addOnHookCountForTask(),l.EventMgr.getInstance().emit(h.EventName.RefreshOnlineTime,0),y.PlayerMgr.getInstance().geUserData().refreshLastOfflineTime(),y.PlayerMgr.getInstance().geUserData().resetOnHookTime(),m.TimeMgr.getInstance().resetTimerData_online(),m.TimeMgr.getInstance().openTimer_online(),l.EventMgr.getInstance().emit(h.EventName.RefreshRedDot,!0,!0,!0,!0,!1)},e.prototype.initData=function(){this.initCurOnlineRewardList()},e.prototype.initCurOnlineRewardList=function(){var t=y.PlayerMgr.getInstance().geUserData();this.onlineGoodsIdList=[];for(var e=f.DataMgr.getInstance().getSecCfg(t.getCurSec()),o=g.Utils.getTabelArr(e.HangUpRewardId),i=g.Utils.getTabelArr(e.HangUpRewardNum),a=g.Utils.getTabelArr(e.HangUpRewardProbability),n=d.TimeUtils.timeExchange(1,m.TimeMgr.getInstance().time_online),r=0;r<o.length;r++)for(var s=0;s<n;s++)if(g.Utils.weight_randSingle(Number(a[r]))){var c=v.default.getInstance().getGoodsCfgForGoodsType(Number(o[r])),l={id:Number(o[r]),goodsId:Number(c[1]),goodsType:c[0].toString(),iCount:Number(i[r])};this.addDataToRewardList(l)}},e.prototype.addDataToRewardList=function(t){for(var e=!1,o=0;o<this.onlineGoodsIdList.length;o++)if((1==t.id||2==t.id)&&this.onlineGoodsIdList[o].id==t.id){this.onlineGoodsIdList[o].iCount+=t.iCount,e=!0;break}e||this.onlineGoodsIdList.push(t)},e.prototype.initView=function(){this.refreshOnlineTime(m.TimeMgr.getInstance().time_online),this.initRewardView()},e.prototype.refreshOnlineTime=function(t){this.LabTime.string=d.TimeUtils.SecondToHours(t)},e.prototype.initRewardView=function(){for(var t=this,e=function(e){o.scheduleOnce(function(){var o=cc.instantiate(t.NodeRewardItem);o.parent=t.LayoutReward,o.position=cc.Vec3.ZERO;var i,a=f.DataMgr.getInstance().getGoodsCfg(t.onlineGoodsIdList[e].id);switch(u.ResourceMgr.getInstance().loadSpriteframe(a.bundleQuality,a.iconQuality,function(t){o.getComponent(cc.Sprite).spriteFrame=t}),o.getChildByName("LabName").color=v.default.getInstance().seleColor(a.goodsQualityId),t.onlineGoodsIdList[e].goodsType){case"gold":case"inGot":case"power":i=f.DataMgr.getInstance().getGoodsCfg(t.onlineGoodsIdList[e].goodsId),u.ResourceMgr.getInstance().loadSpriteframe(i.bundle,i.goodsGameIcon,function(t){o.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),o.getChildByName("LabCount").getComponent(cc.Label).string="x"+t.onlineGoodsIdList[e].iCount,o.getChildByName("LabName").getComponent(cc.Label).string=""+i.goodsName;break;case"equip":i=f.DataMgr.getInstance().getEquipCfg(t.onlineGoodsIdList[e].goodsId),u.ResourceMgr.getInstance().loadSpriteframe(i.bundle,i.equipIcon,function(t){o.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),o.getChildByName("LabCount").active=!1,o.getChildByName("LabName").getComponent(cc.Label).string=""+i.equipName;break;case"skillBook":i=f.DataMgr.getInstance().getSkillBook(t.onlineGoodsIdList[e].goodsId),f.DataMgr.getInstance().getSkillQuality(i.qualityId),o.getChildByName("LabSkillBookName").getComponent(cc.Label).string=i.name,o.getChildByName("SpIcon").scale=.75,y.PlayerMgr.getInstance().getTrackData().getAbType(),t.loadSpriteFrame("iconImg",i.SkillIcon,function(t){o.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),o.getChildByName("LabSkillBookName").active=!1,o.getChildByName("LabCount").active=!1,o.getChildByName("LabName").getComponent(cc.Label).string=""+i.name}},.02*e)},o=this,i=0;i<this.onlineGoodsIdList.length;i++)e(i)},e.prototype.closeView=function(){p.SdkMgr.getInstance().hideBanner(),this.closeUI(),C.PlatformManager.getInstance().showBlockAd(2)},s([N({type:cc.Prefab,tooltip:"\u5956\u52b1item"})],e.prototype,"NodeRewardItem",void 0),s([N(cc.Node)],e.prototype,"LayoutReward",void 0),s([N(cc.Node)],e.prototype,"BtnBack",void 0),s([N(cc.Node)],e.prototype,"BtnFreeGet",void 0),s([N(cc.Node)],e.prototype,"BtnVideoGet",void 0),s([N(cc.Label)],e.prototype,"LabTime",void 0),s([_],e)}(c.default);n.default=T,cc._RF.pop()},{}],UIPause:[function(t,e,o){"use strict";cc._RF.push(e,"509f8YaN4xM67GQE8D6pOgv","UIPause");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("AudioMgr"),u=a("ResourceMgr"),p=a("SdkMgr"),d=a("UIMgr"),g=a("Main"),h=a("Config"),f=a("DataMgr"),y=a("GameDataMgr"),m=a("GameMgr"),v=a("GoodsManager"),I=cc._decorator,k=I.ccclass,S=I.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeRewardItem=null,e.BtnContinue=null,e.BtnFreeGet=null,e.LayoutReward=null,e.SpLevelBar=null,e.LabLevelNum=null,e.callback=function(){},e.curSec=1,e.curLevel=1,e}return r(e,t),e.prototype.init=function(t,e,o){this.callback=t||function(){},this.curSec=e||1,this.curLevel=o||1},e.prototype.onLoad=function(){},e.prototype.start=function(){this.registerBtnEvent(),p.SdkMgr.getInstance().showBanner(),this.initData(),this.initView()},e.prototype.carryCallback=function(){this.callback&&this.callback()},e.prototype.registerBtnEvent=function(){var t=this;this.BtnContinue.on(cc.Node.EventType.TOUCH_END,function(){g.default.instance.isLookSkill||y.default.getInstance().setGameState(h.EnumGameState.GameDoing),g.default.instance.controlObjectsAnim(!1),t.closeView()}),this.BtnFreeGet.on(cc.Node.EventType.TOUCH_END,function(){g.default.instance.isLookSkill&&d.UIMgr.getInstance().closeById(h.UIID.UIDrawCard),g.default.instance.openPetTimer(),t.carryCallback();var e=y.default.getInstance().getDropGoodsList();v.default.getInstance().getReward(e),y.default.getInstance().resetDropGoodsData(),m.default.getInstance().openHomeUI(),l.AudioMgr.getInstance().playMusic(h.AudioId.BGM_Main,"bg"),y.default.getInstance().setGameState(h.EnumGameState.GamePrePare),t.closeView()})},e.prototype.initData=function(){},e.prototype.initView=function(){this.initBarView(),this.initRewardView()},e.prototype.initBarView=function(){var t=f.DataMgr.getInstance().getSecCfg(this.curSec).levelCount;this.LabLevelNum.string=this.curLevel+"/"+t,this.SpLevelBar.fillRange=this.curLevel/t},e.prototype.initRewardView=function(){for(var t=this,e=y.default.getInstance().getDropGoodsList(),o=function(o){i.scheduleOnce(function(){var i=cc.instantiate(t.NodeRewardItem);i.parent=t.LayoutReward,i.position=cc.Vec3.ZERO;var a,n=f.DataMgr.getInstance().getGoodsCfg(e[o].id);switch(u.ResourceMgr.getInstance().loadSpriteframe(n.bundleQuality,n.iconQuality,function(t){i.getComponent(cc.Sprite).spriteFrame=t}),i.getChildByName("LabName").color=v.default.getInstance().seleColor(n.goodsQualityId),e[o].goodsType){case"gold":case"inGot":case"power":a=f.DataMgr.getInstance().getGoodsCfg(e[o].goodsId),u.ResourceMgr.getInstance().loadSpriteframe(a.bundle,a.goodsGameIcon,function(t){i.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),i.getChildByName("LabCount").getComponent(cc.Label).string="x"+e[o].iCount,i.getChildByName("LabName").getComponent(cc.Label).string=""+a.goodsName;break;case"equip":a=f.DataMgr.getInstance().getEquipCfg(e[o].goodsId),u.ResourceMgr.getInstance().loadSpriteframe(a.bundle,a.equipIcon,function(t){i.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),i.getChildByName("LabCount").active=!1,i.getChildByName("LabName").getComponent(cc.Label).string=""+a.equipName;break;case"skillBook":a=f.DataMgr.getInstance().getSkillBook(e[o].goodsId);var r=f.DataMgr.getInstance().getSkillQuality(a.qualityId);i.getChildByName("LabSkillBookName").active=!0,i.getChildByName("LabSkillBookName").getComponent(cc.Label).string=a.name,i.getChildByName("SpIcon").scale=.75,u.ResourceMgr.getInstance().loadSpriteframe(r.bundle,r.iconImg,function(t){i.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),i.getChildByName("LabCount").active=!1,i.getChildByName("LabName").getComponent(cc.Label).string=""+a.name}},.02*o)},i=this,a=0;a<e.length;a++)o(a)},e.prototype.closeView=function(){p.SdkMgr.getInstance().hideBanner(),this.closeUI()},s([S({type:cc.Prefab,tooltip:"\u5956\u52b1item"})],e.prototype,"NodeRewardItem",void 0),s([S(cc.Node)],e.prototype,"BtnContinue",void 0),s([S(cc.Node)],e.prototype,"BtnFreeGet",void 0),s([S(cc.Node)],e.prototype,"LayoutReward",void 0),s([S(cc.Sprite)],e.prototype,"SpLevelBar",void 0),s([S(cc.Label)],e.prototype,"LabLevelNum",void 0),s([k],e)}(c.default);n.default=C,cc._RF.pop()},{}],UIPet:[function(t,e,o){"use strict";cc._RF.push(e,"7f9afAl3BFISYoLmYuwMhWL","UIPet");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("SdkMgr"),u=a("TimeUtils"),p=a("Utils"),d=a("Config"),g=a("TrackDataEvent"),h=a("DataMgr"),f=a("EquipMgr"),y=a("PetMgr"),m=a("PlayerMgr"),v=a("TimeMgr"),I=a("TipsMgr"),k=cc._decorator,S=k.ccclass,C=k.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnBack=null,e.BtnFalse=null,e.BtnTrue=null,e.BtnVideoGet=null,e.LabName=null,e.LabProp1=null,e.LabProp2=null,e.LabTime=null,e}return r(e,t),e.prototype.onLoad=function(){this.registerEvent()},e.prototype.start=function(){this.registerBtnEvent(),this.initData(),this.initView()},e.prototype.onClose=function(){},e.prototype.registerEvent=function(){this.addEvent(d.EventName.RefreshPetViewTime,this.refreshTime)},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){m.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.pet_cancel),t.closeView()}),this.BtnFalse.on(cc.Node.EventType.TOUCH_END,function(){m.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.pet_cancel),t.closeView()}),this.BtnTrue.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()}),this.BtnVideoGet.on(cc.Node.EventType.TOUCH_END,function(){var e=u.TimeUtils.GetTimeBySecond(),o=u.TimeUtils.GetTimeByHours2();l.SdkMgr.getInstance().playVideo(1,function(){var i=u.TimeUtils.GetTimeBySecond(),a=u.TimeUtils.GetTimeByHours2();m.PlayerMgr.getInstance().getTrackData().testTrackTime("pet",o,a,e,i),m.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.pet),m.PlayerMgr.getInstance().getTrackData().youmengTrackNew("pet_b"),m.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.pet_get);var n=m.PlayerMgr.getInstance().geUserData().getCurSec();m.PlayerMgr.getInstance().geUserData().getEnterSecCountForSecId(n)<=0&&(n-=1)<1&&(n=1),n<=5&&m.PlayerMgr.getInstance().getTrackData().youmengTrack(g.TrackId.pet_X,n),m.PlayerMgr.getInstance().geUserData().addPetToList(1),t.controlBtn(!1,!1,!0),y.default.getInstance().isOwnedPet=!0,v.TimeMgr.getInstance().closeTimer_pet(),t.refreshTime(0),I.default.getInstance().playFightTips(t.node)})})},e.prototype.initData=function(){this.curPetCfg=h.DataMgr.getInstance().getPetsCfg()},e.prototype.initView=function(){this.initPetInfo(),this.initBtnShow(),this.refreshTime(v.TimeMgr.getInstance().time_pet)},e.prototype.initPetInfo=function(){var t=f.default.getInstance();this.LabName.string=this.curPetCfg.Name;var e=p.Utils.getTabelArr(this.curPetCfg.PetsAttribute1),o=p.Utils.getTabelArr(this.curPetCfg.PetsAttribute2);this.LabProp1.string="<b>"+t.getPropNameForPropType(Number(e[0]))+"+"+Number(e[1])+t.getPropPercent(Number(e[0]))+"</b>",this.LabProp2.string="<b>"+t.getPropNameForPropType(Number(o[0]))+"+"+Number(o[1])+t.getPropPercent(Number(o[0]))+"</b>"},e.prototype.initBtnShow=function(){m.PlayerMgr.getInstance().geUserData().isExistPetFotId(1)?this.controlBtn(!1,!1,!0):this.controlBtn(!0,!0,!1)},e.prototype.controlBtn=function(t,e,o){this.BtnFalse.active=t,this.BtnVideoGet.active=e,this.BtnTrue.active=o},e.prototype.refreshTime=function(t){(y.default.getInstance().isOwnedPet||t>=30||t<=0)&&(this.LabTime.node.active=!1),this.LabTime.string="<color = #ff0000>"+(30-t)+"s</c>\u540e\u79bb\u5f00"},e.prototype.closeView=function(){this.closeUI()},s([C(cc.Node)],e.prototype,"BtnBack",void 0),s([C(cc.Node)],e.prototype,"BtnFalse",void 0),s([C(cc.Node)],e.prototype,"BtnTrue",void 0),s([C(cc.Node)],e.prototype,"BtnVideoGet",void 0),s([C(cc.Label)],e.prototype,"LabName",void 0),s([C(cc.RichText)],e.prototype,"LabProp1",void 0),s([C(cc.RichText)],e.prototype,"LabProp2",void 0),s([C(cc.RichText)],e.prototype,"LabTime",void 0),s([S],e)}(c.default);n.default=b,cc._RF.pop()},{}],UIRealName:[function(t,e,o){"use strict";cc._RF.push(e,"7d040n8tzZCQ6+770ZYUet3","UIRealName");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("CardMgr"),u=cc._decorator,p=u.ccclass,d=u.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.IDname=null,e.IDcard=null,e.btnStart=null,e}return r(e,t),e.prototype.init=function(t){this.cb=t},e.prototype.start=function(){var t=this;this.btnStart.on(cc.Node.EventType.TOUCH_END,function(){l.default.getInstance().vifyCardId(t.IDname.string,t.IDcard.string,function(e){e&&(t.closeUI(),t.cb&&t.cb())})})},s([d(cc.EditBox)],e.prototype,"IDname",void 0),s([d(cc.EditBox)],e.prototype,"IDcard",void 0),s([d(cc.Node)],e.prototype,"btnStart",void 0),s([p],e)}(c.default);n.default=g,cc._RF.pop()},{}],UIReward:[function(t,e,o){"use strict";cc._RF.push(e,"ce127ZVqwlHa50pVzn6oYN+","UIReward");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("AudioMgr"),u=a("CommonCfg"),p=a("ComDataMgr"),d=a("ComPlayerMgr"),g=cc._decorator,h=g.ccclass,f=g.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.root=null,e.btnOk=null,e.num=null,e.icon=null,e.quanLight=null,e.muiltNode=null,e.item=null,e.addCollection=!0,e}return r(e,t),e.prototype.init=function(t,e,o){if(void 0===o&&(o=!0),-1!=t.indexOf(u.CommonCfg.splitNum)){if(this.rewardStr=t,1==this.rewardStr.split(u.CommonCfg.splitCount).length){var i=this.rewardStr.split(u.CommonCfg.splitNum);this.rewardId=Number(i[0]),this.rewardNum=Number(i[1]),this.rewardStr=null}}else this.rewardId=Number(t);this.rewardNum=e,this.addCollection=o,l.AudioMgr.getInstance().playEffect(u.ComAudioId.reward)},e.prototype.start=function(){var t=this;if(this.btnOk.on(cc.Node.EventType.TOUCH_END,function(){var e=t.rewardStr;null==e&&(e=t.rewardId+u.CommonCfg.splitNum+t.rewardNum),d.ComPlayerMgr.getInstance().addReward(e,1,t.addCollection),t.closeUI()}),null==this.rewardStr){this.muiltNode.active=!1;var e=p.ComDataMgr.getInstance().getGoodsById(this.rewardId);this.loadSpriteFrame(e.bundleName,e.rewardIcon,function(e){t.icon.spriteFrame=e}),1==e.rewardtype?this.num.string="+"+this.rewardNum:this.num.string=e.name}else{this.muiltNode.active=!0;for(var o=this.rewardStr.split(u.CommonCfg.splitCount),i=function(t){var e=cc.instantiate(a.item);e.parent=a.muiltNode;var i=o[t].split(u.CommonCfg.splitNum),n=Number(i[0]),r=Number(i[1]);e.active=!0;var s=e.getChildByName("icon").getComponent(cc.Sprite),c=e.getChildByName("num").getComponent(cc.Label),l=p.ComDataMgr.getInstance().getGoodsById(n);a.loadSpriteFrame(l.bundleName,l.rewardIcon,function(t){s.spriteFrame=t}),1==l.rewardtype?c.string="+"+r:c.string=l.name},a=this,n=0;n<o.length;n++)i(n)}this.root.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED,function(){t.quanLight.opacity=225,t.quanLight.active=!0,cc.tween(t.quanLight).by(.2,{angle:10}).repeatForever().start()})},e.prototype.onClose=function(){l.AudioMgr.getInstance().stopEffect()},s([f(cc.Node)],e.prototype,"root",void 0),s([f(cc.Node)],e.prototype,"btnOk",void 0),s([f(cc.Label)],e.prototype,"num",void 0),s([f(cc.Sprite)],e.prototype,"icon",void 0),s([f(cc.Node)],e.prototype,"quanLight",void 0),s([f(cc.Node)],e.prototype,"muiltNode",void 0),s([f(cc.Node)],e.prototype,"item",void 0),s([h],e)}(c.default);n.default=y,cc._RF.pop()},{}],UISalutation:[function(t,e,o){"use strict";cc._RF.push(e,"5e1dc15GhRBJIseIbg9yMoN","UISalutation");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("UIMgr"),u=a("Utils"),p=a("Main"),d=a("Config"),g=a("DataMgr"),h=a("EquipMgr"),f=a("PlayerMgr"),y=a("TipsMgr"),m=cc._decorator,v=m.ccclass,I=m.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpNotGet=null,e.SpGet=null,e.SpWear=null,e.NodeSalutation=null,e.contentSalutation=null,e.BtnBack=null,e.BtnWear=null,e.SpSalutation=null,e.LabDec=null,e.LabProp1=null,e.LabProp2=null,e.LayoutBtn=null,e.curTurnView=d.UIID.UIHome,e.allSalutationArr=[],e.curSeleIndex=0,e}return r(e,t),e.prototype.init=function(t){this.curTurnView=t||d.UIID.UIHome},e.prototype.onLoad=function(){},e.prototype.start=function(){this.registerBtnEvent(),this.initData(),this.initView()},e.prototype.initData=function(){this.refreshTitleSave()},e.prototype.refreshTitleSave=function(){f.PlayerMgr.getInstance().geUserData().autoAddSalutation(),f.PlayerMgr.getInstance().geUserData().setIsNewSalutation(!1),this.sendEvent(d.EventName.RefreshSalutationRedDot)},e.prototype.initView=function(){this.loadSalutationItem(),this.refreshSalutationView(this.curSeleIndex)},e.prototype.refreshSalutationView=function(t){var e=this,o=t+1,i=f.PlayerMgr.getInstance().geUserData(),a=g.DataMgr.getInstance().getSalutation(o);this.loadSpriteFrame(a.titleBundle,a.ResourcesRoute,function(t){e.SpSalutation.getComponent(cc.Sprite).spriteFrame=t});var n=this.SpSalutation.getComponent(cc.Animation);this.loadResFromBundle(a.AnimBundle,a.AnimName,cc.AnimationClip,function(t){n.addClip(t),n.play(a.AnimName).repeatCount=1e5});var r=a.Desc.replace("%s",""+i.getCompletedTaskCount());this.LabDec.string=r;var s=u.Utils.getTabelArr(a.TitleAttribute1);this.LabProp1.string=h.default.getInstance().getPropNameForPropType(Number(s[0]))+"\uff1a"+Number(s[1])+h.default.getInstance().getPropPercent(Number(s[0]));var c=u.Utils.getTabelArr(a.TitleAttribute2);this.LabProp2.string=h.default.getInstance().getPropNameForPropType(Number(c[0]))+"\uff1a"+Number(c[1])+h.default.getInstance().getPropPercent(Number(c[0]));var l=i.isExistSalutation(o),p=i.getWearSalutationId()==o;this.BtnWear.getComponent(cc.Button).interactable=!!l&&!p},e.prototype.loadSalutationItem=function(){for(var t=this,e=f.PlayerMgr.getInstance().geUserData(),o=g.DataMgr.getInstance().getSalutationCfg(),i=function(i){var n=cc.instantiate(a.NodeSalutation);n.parent=a.contentSalutation,a.allSalutationArr.push(n),i==a.curSeleIndex&&(n.getChildByName("SpSele").active=!0);var r=i+1,s=n.getChildByName("SpState").getComponent(cc.Sprite);e.getWearSalutationId()==r?s.spriteFrame=a.SpWear:e.isExistSalutation(r)?s.spriteFrame=a.SpGet:s.spriteFrame=a.SpNotGet,a.loadSpriteFrame(o[i].titleBundle,o[i].ResourcesRoute,function(t){n.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t});var c=n.getChildByName("SpIcon").getComponent(cc.Animation);a.loadResFromBundle(o[i].AnimBundle,o[i].AnimName,cc.AnimationClip,function(t){c.addClip(t),c.play(o[i].AnimName).repeatCount=1e5}),n.on(cc.Node.EventType.TOUCH_END,function(){t.refreshSalutation(i)})},a=this,n=0;n<o.length;n++)i(n)},e.prototype.refreshSalutation=function(t){if(t!=this.curSeleIndex){this.curSeleIndex=t;for(var e=0;e<this.allSalutationArr.length;e++)cc.isValid(this.allSalutationArr[e])&&(t==e?(this.allSalutationArr[e].getChildByName("SpSele").active=!0,this.refreshSalutationView(t)):this.allSalutationArr[e].getChildByName("SpSele").active=!1)}},e.prototype.refreshSalutation1=function(t){var e=f.PlayerMgr.getInstance().geUserData();this.curSeleIndex=t;for(var o=0;o<this.allSalutationArr.length;o++)if(cc.isValid(this.allSalutationArr[o])){var i=this.allSalutationArr[o].getChildByName("SpState").getComponent(cc.Sprite);e.getWearSalutationId()==o+1?i.spriteFrame=this.SpWear:e.isExistSalutation(o+1)?i.spriteFrame=this.SpGet:i.spriteFrame=this.SpNotGet}},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()}),this.BtnWear.on(cc.Node.EventType.TOUCH_END,function(){if(t.BtnWear.getComponent(cc.Button).interactable){t.BtnWear.getComponent(cc.Button).interactable=!1;var e=t.curSeleIndex+1;f.PlayerMgr.getInstance().geUserData().setWearSalutation(e),t.refreshSalutation1(t.curSeleIndex),y.default.getInstance().playFightTips(t.node),l.UIMgr.getInstance().openUI(d.UIID.UITips,d.UIID.UISalutation,"\u7a7f\u6234\u79f0\u53f7\u6210\u529f"),p.default.instance.refreshWearSalutation(),t.sendEvent(d.EventName.RefreshSalutation),t.sendEvent(d.EventName.RefreshEquipViewInfo)}})},e.prototype.closeView=function(){this.closeUI()},s([I(cc.SpriteFrame)],e.prototype,"SpNotGet",void 0),s([I(cc.SpriteFrame)],e.prototype,"SpGet",void 0),s([I(cc.SpriteFrame)],e.prototype,"SpWear",void 0),s([I(cc.Node)],e.prototype,"NodeSalutation",void 0),s([I(cc.Node)],e.prototype,"contentSalutation",void 0),s([I(cc.Node)],e.prototype,"BtnBack",void 0),s([I(cc.Node)],e.prototype,"BtnWear",void 0),s([I(cc.Node)],e.prototype,"SpSalutation",void 0),s([I(cc.RichText)],e.prototype,"LabDec",void 0),s([I(cc.Label)],e.prototype,"LabProp1",void 0),s([I(cc.Label)],e.prototype,"LabProp2",void 0),s([I(cc.Node)],e.prototype,"LayoutBtn",void 0),s([v],e)}(c.default);n.default=k,cc._RF.pop()},{}],UISellView:[function(t,e,o){"use strict";cc._RF.push(e,"ca45aVMtZJPcqM4mCVcVRE0","UISellView");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("EventMgr"),u=a("UIMgr"),p=a("Config"),d=a("EquipMgr"),g=a("GoodsManager"),h=cc._decorator,f=h.ccclass,y=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LayoutSell=null,e.BtnClose=null,e.BtnSellQuick=null,e.curSeleIdList=[1],e.curTurnView=p.UIID.UIHome,e}return r(e,t),e.prototype.init=function(t){this.curTurnView=t||p.UIID.UIHome},e.prototype.start=function(){l.EventMgr.getInstance().emit(p.EventName.ShowUITop,!1),this.registerBtnEvent()},e.prototype.registerBtnEvent=function(){var t=this;this.BtnClose.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()}),this.BtnSellQuick.on(cc.Node.EventType.TOUCH_END,function(){t.curTurnView==p.UIID.UIEquip?t.sendEvent(p.EventName.SellQuickEquip,t.curSeleIdList):d.default.getInstance().quickSellForSaveData(t.curSeleIdList),l.EventMgr.getInstance().emit(p.EventName.RefreshRedDot,!1,!1,!1,!0,!1),t.closeView()});for(var e=function(e){var i=o.LayoutSell.getChildByName("BtnQuality"+e);cc.isValid(i)&&i.on(cc.Node.EventType.TOUCH_END,function(o){var i=o.target.getChildByName("SpSeleIcon");i.active=!i.active;var a=e;i.active?t.curSeleIdList.push(a):t.curSeleIdList.splice(t.curSeleIdList.indexOf(a),1)})},o=this,i=1;i<=5;i++)e(i)},e.prototype.closeView=function(){g.default.getInstance().isOverEquipBagForIndex()&&u.UIMgr.getInstance().openUI(p.UIID.UINotBagIndex,-1,this.curTurnView),this.closeUI()},s([y(cc.Node)],e.prototype,"LayoutSell",void 0),s([y(cc.Node)],e.prototype,"BtnClose",void 0),s([y(cc.Node)],e.prototype,"BtnSellQuick",void 0),s([f],e)}(c.default);n.default=m,cc._RF.pop()},{}],UISetting:[function(t,e,o){"use strict";cc._RF.push(e,"b578cqeOH1D5J+EtsI/rRvh","UISetting");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BasePlatform"),l=a("BaseUI"),u=a("AudioMgr"),p=a("PlatformManager"),d=a("CacheUtils"),g=a("Config"),h=cc._decorator,f=h.ccclass,y=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ToggleMusic=null,e.ToggleAudio=null,e.BtnBack=null,e.BtnTrue=null,e.privacyPolicy=null,e.LayoutBtn=null,e.curTurnView=g.UIID.UIHome,e}return r(e,t),e.prototype.init=function(t){this.curTurnView=t||g.UIID.UIHome},e.prototype.onLoad=function(){},e.prototype.start=function(){this.registerBtnEvent(),this.initView(),p.PlatformManager.currentPlatform!=c.Platform.ANDROID_TAP&&p.PlatformManager.currentPlatform!=c.Platform.ANDROID_233||(this.privacyPolicy.active=!0,this.privacyPolicy.on(cc.Node.EventType.TOUCH_END,function(){cc.sys.openURL("https://game.sfplay.net/yszc/xjzqg/233.html")}))},e.prototype.initView=function(){this.ToggleMusic.isChecked=d.CacheUtils.canPlayMusin(),this.ToggleAudio.isChecked=d.CacheUtils.canPlayEffect()},e.prototype.callbackMusic=function(){d.CacheUtils.setPlayMusic(!d.CacheUtils.canPlayMusin()),console.log("CacheUtils.canPlayMusin():",d.CacheUtils.canPlayMusin()),d.CacheUtils.canPlayMusin()?this.curTurnView==g.UIID.UIHome?u.AudioMgr.getInstance().playMusic(g.AudioId.BGM_Main,"bg"):u.AudioMgr.getInstance().playMusic(g.AudioId.BGM_Battle,"bg"):u.AudioMgr.getInstance().stopMusic("bg")},e.prototype.callbackAudio=function(){d.CacheUtils.setPlayEffect(!d.CacheUtils.canPlayEffect()),d.CacheUtils.canPlayMusin()||u.AudioMgr.getInstance().stopEffect()},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()}),this.BtnTrue.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()})},e.prototype.closeView=function(){this.closeUI()},s([y(cc.Toggle)],e.prototype,"ToggleMusic",void 0),s([y(cc.Toggle)],e.prototype,"ToggleAudio",void 0),s([y(cc.Node)],e.prototype,"BtnBack",void 0),s([y(cc.Node)],e.prototype,"BtnTrue",void 0),s([y(cc.Node)],e.prototype,"privacyPolicy",void 0),s([y(cc.Node)],e.prototype,"LayoutBtn",void 0),s([f],e)}(l.default);n.default=m,cc._RF.pop()},{}],UISettle:[function(t,e,o){"use strict";cc._RF.push(e,"49098CaatdJRLvAKReU+eOq","UISettle");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BasePlatform"),l=a("BaseUI"),u=a("AudioMgr"),p=a("PlatformManager"),d=a("ResourceMgr"),g=a("SdkMgr"),h=a("TweenMgr"),f=a("UIMgr"),y=a("TimeUtils"),m=a("Main"),v=a("Config"),I=a("TrackDataEvent"),k=a("DataMgr"),S=a("GameDataMgr"),C=a("GoodsManager"),b=a("PlayerMgr"),_=a("UIGuide"),N=cc._decorator,T=N.ccclass,D=N.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeRewardItem=null,e.BtnBack=null,e.BtnFreeGet=null,e.BtnVideoGet=null,e.NodePass=null,e.SpTitlePass=null,e.SpBgPass=null,e.NodeFail=null,e.SpTitleFail=null,e.SpBgFail=null,e.LayoutReward=null,e.NodeBtn=null,e.NodeStrategy=null,e.NodeBar=null,e.SpLevelBar=null,e.LabLevelNum=null,e.callback=function(){},e.isWin=!0,e.curSec=1,e.curLevel=1,e}return r(e,t),e.prototype.init=function(t,e,o,i){this.callback=t||function(){},this.isWin=e,this.curSec=o||1,this.curLevel=i||1,b.PlayerMgr.getInstance().getShareData().stopRecord(!1)},e.prototype.onLoad=function(){this.guideData()},e.prototype.start=function(){this.registerBtnEvent(),this.shareRecord(),p.PlatformManager.getInstance().showBlockAd(1),g.SdkMgr.getInstance().showInsert(g.AdType.FreeLotty),this.carryCallback(),this.initData(),this.initView()},e.prototype.shareRecord=function(){if(1!=this.curSec){var t=b.PlayerMgr.getInstance().getShareData();t.stopRecord(!1),t.getCanShare()&&g.SdkMgr.getInstance().getShare()&&p.PlatformManager.currentPlatform==c.Platform.BYTEDANCE&&f.UIMgr.getInstance().openUI(v.UIID.UIShareVideo,-1)}},e.prototype.guideData=function(){var t=b.PlayerMgr.getInstance().geUserData();if(this.isWin&&2==t.getCurSec()&&1==t.getEnterFirstSecCount()){var e=b.PlayerMgr.getInstance().getGuideData();e.getGuideEnd()||e.getCurrentId()==7+e.putGuideNum&&(this.guideCfg=new _.GuildCfg)}},e.prototype.guideShow=function(){var t=b.PlayerMgr.getInstance().geUserData();if(this.isWin&&2==t.getCurSec()&&1==t.getEnterFirstSecCount()){var e=b.PlayerMgr.getInstance().getGuideData();e.getGuideEnd()||e.getCurrentId()==7+e.putGuideNum&&this.guideCfg&&(this.guideCfg.distNode=this.BtnFreeGet,this.openUICallBack(v.UIID.UIGuide,function(){e.addCurrentId()},this.guideCfg))}},e.prototype.carryCallback=function(){this.callback&&this.callback()},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()}),this.BtnFreeGet.on(cc.Node.EventType.TOUCH_END,function(){b.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.guide8);var e=S.default.getInstance().getDropGoodsList();C.default.getInstance().getReward(e),t.closeView()}),this.BtnVideoGet.on(cc.Node.EventType.TOUCH_END,function(){var e=y.TimeUtils.GetTimeBySecond(),o=y.TimeUtils.GetTimeByHours2();g.SdkMgr.getInstance().playVideo(1,function(){var i=y.TimeUtils.GetTimeBySecond(),a=y.TimeUtils.GetTimeByHours2();b.PlayerMgr.getInstance().getTrackData().testTrackTime("doubleaward",o,a,e,i),b.PlayerMgr.getInstance().getTrackData().youmengTrack(I.TrackId.doubleaward),b.PlayerMgr.getInstance().getTrackData().youmengTrackNew("doubleaward_b");var n=S.default.getInstance().getDropGoodsList();C.default.getInstance().getRewardDouble(n),t.scheduleOnce(function(){t.closeView()},.01)})})},e.prototype.initData=function(){S.default.getInstance().setGameState(v.EnumGameState.GamePrePare),this.initNodeProp()},e.prototype.initNodeProp=function(){this.SpBgPass.opacity=0,this.SpBgPass.scale=1.5,this.SpTitlePass.opacity=0,this.SpTitlePass.scale=1.5,this.SpBgFail.opacity=0,this.SpBgFail.scale=1.5,this.SpTitleFail.opacity=0,this.SpTitleFail.scale=1.5,this.NodeBar.opacity=0,this.NodeStrategy.opacity=0,this.NodeBtn.opacity=0},e.prototype.initView=function(){this.initPassAndFailView(),this.initBarView(),this.settleAnim()},e.prototype.settleAnim=function(){var t=this;this.isWin?(cc.tween(this.SpTitlePass).parallel(cc.tween().to(.3,{scale:1}),cc.tween().to(.3,{opacity:255})).start(),cc.tween(this.NodeBar).to(.3,{opacity:255}).call(function(){var e=k.DataMgr.getInstance().getSecCfg(t.curSec).levelCount;h.TweenMgr.getInstance().rollBarAnim(!0,t.SpLevelBar,0,t.curLevel/e,function(){cc.tween(t.SpBgPass).parallel(cc.tween().to(.3,{scale:1}),cc.tween().to(.3,{opacity:255})).call(function(){t.initRewardView(function(){cc.tween(t.NodeBtn).to(.5,{opacity:255}).call(function(){t.playVideoBtnAnim(),t.guideShow()}).start()})}).start()})}).start()):(cc.tween(this.SpTitleFail).parallel(cc.tween().to(.3,{scale:1}),cc.tween().to(.3,{opacity:255})).start(),cc.tween(this.NodeBar).to(.3,{opacity:255}).call(function(){var e=k.DataMgr.getInstance().getSecCfg(t.curSec).levelCount;h.TweenMgr.getInstance().rollBarAnim(!0,t.SpLevelBar,0,t.curLevel/e,function(){cc.tween(t.SpBgFail).parallel(cc.tween().to(.3,{scale:1}),cc.tween().to(.3,{opacity:255})).call(function(){t.initRewardView(function(){cc.tween(t.NodeStrategy).to(.5,{opacity:255}).call(function(){cc.tween(t.NodeBtn).to(.5,{opacity:255}).call(function(){t.playVideoBtnAnim()}).start()}).start()})}).start()})}).start())},e.prototype.initPassAndFailView=function(){this.isWin?u.AudioMgr.getInstance().playMusic(v.AudioId.Sound_Victory,"bg",!1):u.AudioMgr.getInstance().playMusic(v.AudioId.Sound_Fail,"bg",!1),this.NodePass.active=this.isWin,this.NodeFail.active=!this.isWin,this.NodeStrategy.active=!this.isWin},e.prototype.initBarView=function(){var t=k.DataMgr.getInstance().getSecCfg(this.curSec).levelCount;this.LabLevelNum.string=this.curLevel+"/"+t},e.prototype.initRewardView=function(t){var e=this;void 0===t&&(t=function(){});var o=S.default.getInstance().getDropGoodsList();(!o||o.length<=0)&&t&&t();for(var i=function(i){a.scheduleOnce(function(){var a=cc.instantiate(e.NodeRewardItem);a.parent=e.LayoutReward,a.position=cc.Vec3.ZERO;var n,r=k.DataMgr.getInstance().getGoodsCfg(o[i].id);switch(d.ResourceMgr.getInstance().loadSpriteframe(r.bundleQuality,r.iconQuality,function(t){a.getComponent(cc.Sprite).spriteFrame=t}),a.getChildByName("LabName").color=C.default.getInstance().seleColor(r.goodsQualityId),o[i].goodsType){case"gold":case"inGot":case"power":n=k.DataMgr.getInstance().getGoodsCfg(o[i].goodsId),d.ResourceMgr.getInstance().loadSpriteframe(n.bundle,n.goodsGameIcon,function(t){a.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),a.getChildByName("LabCount").getComponent(cc.Label).string="x"+o[i].iCount,a.getChildByName("LabName").getComponent(cc.Label).string=""+n.goodsName;break;case"equip":n=k.DataMgr.getInstance().getEquipCfg(o[i].goodsId),d.ResourceMgr.getInstance().loadSpriteframe(n.bundle,n.equipIcon,function(t){a.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),a.getChildByName("LabCount").active=!1,a.getChildByName("LabName").getComponent(cc.Label).string=""+n.equipName;break;case"skillBook":n=k.DataMgr.getInstance().getSkillBook(o[i].goodsId),k.DataMgr.getInstance().getSkillQuality(n.qualityId),a.getChildByName("LabSkillBookName").getComponent(cc.Label).string=n.name,a.getChildByName("SpIcon").scale=.75,e.loadSpriteFrame("iconImg",n.SkillIcon,function(t){a.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=t}),a.getChildByName("LabSkillBookName").active=!1,a.getChildByName("LabCount").active=!1,a.getChildByName("LabName").getComponent(cc.Label).string=""+n.name}i>=o.length-1&&t&&t()},.3*i)},a=this,n=0;n<o.length;n++)i(n)},e.prototype.playVideoBtnAnim=function(){},e.prototype.closeView=function(){var t=this;m.default.instance.openPetTimer(),S.default.getInstance().resetDropGoodsData(),p.PlatformManager.getInstance().hideBlockAd(1);var e=v.UIID.UIHomeNew;f.UIMgr.getInstance().openUIOfCallback(e,-1,function(){g.SdkMgr.getInstance().showInsert(g.AdType.FreeLotty),(b.PlayerMgr.getInstance().getGuideData().getGuideEnd()||2==t.curSec)&&g.SdkMgr.getInstance().toAppStore()}),u.AudioMgr.getInstance().playMusic(v.AudioId.BGM_Main,"bg"),this.closeUI()},s([D({type:cc.Prefab,tooltip:"\u5956\u52b1item"})],e.prototype,"NodeRewardItem",void 0),s([D(cc.Node)],e.prototype,"BtnBack",void 0),s([D(cc.Node)],e.prototype,"BtnFreeGet",void 0),s([D(cc.Node)],e.prototype,"BtnVideoGet",void 0),s([D(cc.Node)],e.prototype,"NodePass",void 0),s([D(cc.Node)],e.prototype,"SpTitlePass",void 0),s([D(cc.Node)],e.prototype,"SpBgPass",void 0),s([D(cc.Node)],e.prototype,"NodeFail",void 0),s([D(cc.Node)],e.prototype,"SpTitleFail",void 0),s([D(cc.Node)],e.prototype,"SpBgFail",void 0),s([D(cc.Node)],e.prototype,"LayoutReward",void 0),s([D(cc.Node)],e.prototype,"NodeBtn",void 0),s([D(cc.Node)],e.prototype,"NodeStrategy",void 0),s([D(cc.Node)],e.prototype,"NodeBar",void 0),s([D(cc.Sprite)],e.prototype,"SpLevelBar",void 0),s([D(cc.Label)],e.prototype,"LabLevelNum",void 0),s([T],e)}(l.default);n.default=M,cc._RF.pop()},{}],UIShareVideo:[function(t,e,o){"use strict";cc._RF.push(e,"7f4daqn7axJ5pV2ZpcDNcP4","UIShareVideo");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("PlayerMgr"),u=cc._decorator,p=u.ccclass,d=u.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnClose=null,e.BtnShare=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.registerBtnEvent()},e.prototype.registerBtnEvent=function(){var t=this;this.BtnClose.on(cc.Node.EventType.TOUCH_END,function(){l.PlayerMgr.getInstance().getShareData().clearData(),t.closeView()}),this.BtnShare.on(cc.Node.EventType.TOUCH_END,function(){var e=l.PlayerMgr.getInstance().getShareData();e.toShare(!1,function(){e.clearData(),console.log("\u89c6\u9891\u5206\u4eab\u6210\u529f\uff01"),t.closeView()})})},e.prototype.closeView=function(){this.closeUI()},s([d(cc.Node)],e.prototype,"BtnClose",void 0),s([d(cc.Node)],e.prototype,"BtnShare",void 0),s([p],e)}(c.default);n.default=g,cc._RF.pop()},{}],UIShop:[function(t,e,o){"use strict";cc._RF.push(e,"ed4591U1u9NE7AjTVgoQwPL","UIShop");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("AudioMgr"),u=a("EventMgr"),p=a("SdkMgr"),d=a("TweenMgr"),g=a("UIMgr"),h=a("TimeUtils"),f=a("Utils"),y=a("Config"),m=a("TrackDataEvent"),v=a("DataMgr"),I=a("EquipMgr"),k=a("GameMgr"),S=a("GoodsManager"),C=a("PlayerMgr"),b=a("RedDotMgr"),_=a("TaskMgr"),N=a("UIGuide"),T=cc._decorator,D=T.ccclass,M=T.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeUp=null,e.BtnBack=null,e.BtnTrue=null,e.BtnAgain=null,e.LayoutShop=null,e.NodeDrawReward=null,e.SpLight=null,e.NodeBtn=null,e.NodeBox=null,e.NodeEquip=null,e.NodeSkillBook=null,e.curShopId=0,e.isGuideState=!1,e}return r(e,t),e.prototype.onLoad=function(){this.registerEvent()},e.prototype.start=function(){this.registerBtnEvent(),u.EventMgr.getInstance().emit(y.EventName.ShowUITop,!1),this.initData(),this.initView(),this.guideShow()},e.prototype.shopRedDot=function(){b.default.getInstance().shopForRedDot(this.LayoutShop.getChildByName("NodeShop1").getChildByName("BtnLuckyDraw").getChildByName("SpRedDot")),b.default.getInstance().shopForRedDot(this.LayoutShop.getChildByName("NodeShop3").getChildByName("BtnLuckyDraw").getChildByName("SpRedDot"))},e.prototype.guideShow=function(){var t=this,e=C.PlayerMgr.getInstance().getGuideData();if(!e.getGuideEnd()){var o=e.getCurrentId();if(o==16+e.putGuideNum)this.isGuideState=!0,(i=new N.GuildCfg).distNode=this.LayoutShop.getChildByName("NodeShop1").getChildByName("BtnLuckyDraw"),i.tipstring="\u5546\u57ce\u4e2d\uff0c\u53ef\u4ee5<color=#ff6b1b>\u5feb\u901f\u83b7\u5f97</color>\u88c5\u5907\u548c\u6280\u80fd\u5662\uff0c\u5148\u8bd5\u8bd5\u770b<color=#ff6b1b>\u88c5\u5907\u62bd\u5956</color>\u5427",i.yDec=-350,this.openUICallBack(y.UIID.UIGuide,function(){e.addCurrentId()},i);else if(o==17+e.putGuideNum)this.isGuideState=!0,(i=new N.GuildCfg).distNode=this.LayoutShop.getChildByName("NodeShop3").getChildByName("BtnLuckyDraw"),i.tipstring="\u83b7\u5f97\u65b0\u88c5\u5907\u540e\u8bb0\u5f97\u53bb\u7a7f\u6234\u5662\uff01\n\u73b0\u5728\u518d\u6765\u770b\u770b<color=#ff6b1b>\u6280\u80fd\u62bd\u5956</color>\u5427",i.yDec=0,this.openUICallBack(y.UIID.UIGuide,function(){e.addCurrentId()},i);else if(o==18+e.putGuideNum)this.isGuideState=!1,(i=new N.GuildCfg).tipstring="<color=#ff6b1b>\u7a7f\u6234\u88c5\u5907</color>\u63d0\u5347<color=#ff6b1b>\u57fa\u7840\u5c5e\u6027</color>\uff0c<color=#ff6b1b>\u5b66\u4e60\u6280\u80fd</color>\u83b7\u5f97<color=#ff6b1b>\u6218\u6597\u52a0\u6210</color>",i.yDec=-150,i.isWeek=!0,i.showHand=!1,i.callBack=function(){setTimeout(function(){t.guideShow()},200)},this.openUICallBack(y.UIID.UIGuide,function(){e.addCurrentId()},i);else if(o==19+e.putGuideNum){var i;this.isGuideState=!1,(i=new N.GuildCfg).tipstring="\u8bb0\u4f4f\u5566\uff01\u8fd9\u5c31\u662f<color=#ff6b1b>\u53d8\u5f3a\u7684\u79d8\u8bc0</color>\u5662\uff01\u51c6\u5907\u597d\u4e86\uff0c\u5c31\u884c\u3002\u53bb\u6311\u6218\u4e0b\u4e00\u7ae0\u5427\uff01",i.yDec=-150,i.isWeek=!0,i.showHand=!1,this.openUICallBack(y.UIID.UIGuide,function(){e.addCurrentId()},i)}}},e.prototype.registerEvent=function(){this.addEvent(y.EventName.RefreshShopRedDot,this.shopRedDot)},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.guide21),k.default.getInstance().openHomeUI(),t.closeUI(),p.SdkMgr.getInstance().showInsert(p.AdType.FreeLotty)}),this.BtnTrue.on(cc.Node.EventType.TOUCH_END,function(){l.AudioMgr.getInstance().playEffect(y.AudioId.btnClick),t.trackEvent1(t.curShopId),t.isGuideState=!1,t.initAgainView(),t.initDrawRewardView(),t.guideShow(),t.shopRedDot()}),this.BtnAgain.on(cc.Node.EventType.TOUCH_END,function(){l.AudioMgr.getInstance().playEffect(y.AudioId.btnClick);var e=t.userData,o=v.DataMgr.getInstance().getShopCfg(t.curShopId);switch(o.ConsumeType){case 0:var i=h.TimeUtils.GetTimeBySecond(),a=h.TimeUtils.GetTimeByHours2();p.SdkMgr.getInstance().playVideo(1,function(){var e=h.TimeUtils.GetTimeBySecond(),n=h.TimeUtils.GetTimeByHours2();2==t.curShopId?(C.PlayerMgr.getInstance().getTrackData().testTrackTime("equipbox",a,n,i,e),C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.equipbox),C.PlayerMgr.getInstance().getTrackData().youmengTrackNew("equipbox_b")):4==t.curShopId&&(C.PlayerMgr.getInstance().getTrackData().testTrackTime("skillbox",a,n,i,e),C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.skillbox),C.PlayerMgr.getInstance().getTrackData().youmengTrackNew("skillbox_b")),t.initAgainView(),t.drawReward(o),_.default.getInstance().addDrawRewardCountForCount(),t.trackEvent2(t.curShopId)});break;case 1:e.getGoldNum()>=o.ConsumeNum?(e.subGoldNum(o.ConsumeNum),t.initAgainView(),t.drawReward(o),_.default.getInstance().addDrawRewardCountForCount(),t.trackEvent2(t.curShopId)):g.UIMgr.getInstance().openUI(y.UIID.UIGeneralWindow,-1,y.GeneralWindowType.GoldWindow,function(){e.subGoldNum(o.ConsumeNum),t.initAgainView(),t.drawReward(o),_.default.getInstance().addDrawRewardCountForCount(),t.trackEvent2(t.curShopId)});break;case 2:e.getInGotNum()>=o.ConsumeNum?(e.subInGotNum(o.ConsumeNum),t.initAgainView(),t.drawReward(o),_.default.getInstance().addDrawRewardCountForCount(),t.trackEvent2(t.curShopId)):g.UIMgr.getInstance().openUI(y.UIID.UIGeneralWindow,-1,y.GeneralWindowType.InGotWindow,function(){e.subInGotNum(o.ConsumeNum),t.initAgainView(),t.drawReward(o),_.default.getInstance().addDrawRewardCountForCount(),t.trackEvent2(t.curShopId)})}})},e.prototype.initData=function(){this.userData=C.PlayerMgr.getInstance().geUserData()},e.prototype.initView=function(){this.initCurrency(),this.initDrawRewardView(),this.initShopItem()},e.prototype.initCurrency=function(){var t=this;this.loadPrefab("prefabs","widget/NodeCurrency",function(e){cc.instantiate(e).parent=t.NodeUp})},e.prototype.initDrawRewardView=function(){this.NodeDrawReward.active=!1,this.NodeBtn.active=!1,this.NodeEquip.position=cc.v3(0,1500,0),this.NodeSkillBook.position=cc.v3(0,1500,0)},e.prototype.initAgainView=function(){this.NodeBtn.active=!1,this.NodeEquip.position=cc.v3(0,1500,0),this.NodeEquip.getChildByName("LabName").opacity=0,this.NodeEquip.getChildByName("SpFightNum").opacity=0,this.NodeEquip.getChildByName("SpFightNum").getChildByName("LabFightnNum").getComponent(cc.Label).string="0",this.NodeSkillBook.position=cc.v3(0,1500,0),this.NodeSkillBook.getChildByName("LabName").opacity=0,this.NodeSkillBook.getChildByName("SpBarBg").opacity=0,this.NodeSkillBook.getChildByName("SpNew").opacity=0,this.NodeSkillBook.getChildByName("NodeSell").opacity=0,this.NodeSkillBook.getChildByName("SpBarBg").getChildByName("SpUp").active=!1,this.NodeSkillBook.getChildByName("SpBarBg").getChildByName("SpBar").getComponent(cc.Sprite).fillRange=0,this.SpLight.opacity=0},e.prototype.initShopItem=function(){for(var t=this,e=function(e){var i=e+1,a=o.LayoutShop.children[e],n=a.getChildByName("SpBox").getComponent(sp.Skeleton),r=f.Utils.randomRang(0,3);o.scheduleOnce(function(){var e;e=0==f.Utils.randomRang(0,2)?"idle2":"idle3",n.setAnimation(0,e,!1),n.setCompleteListener(function(){var e=f.Utils.randomRang(1,4);t.scheduleOnce(function(){var t;t=0==f.Utils.randomRang(0,2)?"idle2":"idle3",n.setAnimation(0,t,!1)},e)})},r);var s=v.DataMgr.getInstance().getShopCfg(i);a.getChildByName("Lab1").getComponent(cc.RichText).string="<outline color=#000000 width = 3>"+s.RewardDesc+"</outline>";var c=s.ProtectNum-o.userData.getShopDrawRewardCount(i),l=1==c?"\u672c":""+c,u=s.ProtectDesc.replace("%s",l);1!=c&&(u="<outline color=#000000 width = 3>\u518d\u5f00</outline>"+u),a.getChildByName("Lab2").getComponent(cc.RichText).string=""+u;var d=a.getChildByName("BtnLuckyDraw");1!=i&&3!=i||b.default.getInstance().shopForRedDot(d.getChildByName("SpRedDot")),s.ConsumeType&&(d.getChildByName("LabCost").getComponent(cc.Label).string=""+s.ConsumeNum),d.on(cc.Node.EventType.TOUCH_END,function(){t.curShopId=i,t.refreshAgainTimeBtn(s);var e=t.userData;switch(s.ConsumeType){case 0:var o=h.TimeUtils.GetTimeBySecond(),a=h.TimeUtils.GetTimeByHours2();p.SdkMgr.getInstance().playVideo(1,function(){var e=h.TimeUtils.GetTimeBySecond(),n=h.TimeUtils.GetTimeByHours2();2==t.curShopId?(C.PlayerMgr.getInstance().getTrackData().testTrackTime("equipbox",a,n,o,e),C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.equipbox),C.PlayerMgr.getInstance().getTrackData().youmengTrackNew("equipbox_b")):4==t.curShopId&&(C.PlayerMgr.getInstance().getTrackData().testTrackTime("skillbox",a,n,o,e),C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.skillbox),C.PlayerMgr.getInstance().getTrackData().youmengTrackNew("skillbox_b")),t.drawReward(s),_.default.getInstance().addDrawRewardCountForCount(),t.trackEvent(i),t.trackEvent2(t.curShopId)});break;case 1:e.getGoldNum()>=s.ConsumeNum?(e.subGoldNum(s.ConsumeNum),t.drawReward(s),_.default.getInstance().addDrawRewardCountForCount(),t.trackEvent(i),t.trackEvent2(t.curShopId)):g.UIMgr.getInstance().openUI(y.UIID.UIGeneralWindow,-1,y.GeneralWindowType.GoldWindow,function(){e.subGoldNum(s.ConsumeNum),t.drawReward(s),_.default.getInstance().addDrawRewardCountForCount(),t.trackEvent(i),t.trackEvent2(t.curShopId)});break;case 2:e.getInGotNum()>=s.ConsumeNum?(e.subInGotNum(s.ConsumeNum),t.drawReward(s),_.default.getInstance().addDrawRewardCountForCount(),t.trackEvent(i),t.trackEvent2(t.curShopId)):g.UIMgr.getInstance().openUI(y.UIID.UIGeneralWindow,-1,y.GeneralWindowType.InGotWindow,function(){e.subInGotNum(s.ConsumeNum),t.drawReward(s),_.default.getInstance().addDrawRewardCountForCount(),t.trackEvent(i),t.trackEvent2(t.curShopId)})}})},o=this,i=0;i<this.LayoutShop.childrenCount;i++)e(i)},e.prototype.refreshShopItem=function(t){var e=this.LayoutShop.children[t-1],o=v.DataMgr.getInstance().getShopCfg(t),i=o.ProtectNum-this.userData.getShopDrawRewardCount(t),a=1==i?"\u672c":""+i,n=o.ProtectDesc.replace("%s",a);1!=i&&(n="<outline color=#000000 width = 3>\u518d\u5f00</outline>"+n),e.getChildByName("Lab2").getComponent(cc.RichText).string=""+n},e.prototype.drawReward=function(t){var e=this;C.PlayerMgr.getInstance().getMainTaskData().mainTask(7),this.userData.addShopDrawReward(t.ID),this.NodeDrawReward.active=!0;var o=this.NodeBox.getComponent(sp.Skeleton);o.setSkin(t.BoxSkin),o.setAnimation(0,"open",!1),o.setEventListener(function(o,i){"open"==i.data.name&&(l.AudioMgr.getInstance().playEffect(y.AudioId.Sound_LuckDraw),1==t.ID||2==t.ID?(e.loadRewardItem(e.NodeEquip,t),e.rewardItemAnim(e.NodeEquip,e.NodeBox.position),e.lightAnim(),_.default.getInstance().addEquipCountForTask()):(e.loadRewardItem(e.NodeSkillBook,t),e.rewardItemAnim(e.NodeSkillBook,e.NodeBox.position),e.lightAnim(),_.default.getInstance().addSkillBookCountForTask()),u.EventMgr.getInstance().emit(y.EventName.RefreshRedDot,!0,!1,!0,!0,!1))})},e.prototype.loadRewardItem=function(t,e){var o=this.userData,i=[];o.getShopDrawRewardCount(e.ID)>=e.ProtectNum?(console.log("\u5fc5\u5f97\uff01\uff01\uff01"),o.resetDrawRewardCount(e.ID),i=f.Utils.getTabelArr(e.ProtectLibraryRange)):i=f.Utils.getTabelArr(e.RoutineLibraryRange);for(var a=[],n=Number(i[0]);n<=Number(i[1]);n++){var r=v.DataMgr.getInstance().getRewardPoolCfg(n),s={id:r.Reward,weight:r.Weight};a.push(s)}var c=f.Utils.weight_rand(a),l=1==this.curShopId||2==this.curShopId?["equip",40]:["skillBook",22];if(this.isGuideState){var u=C.PlayerMgr.getInstance().getGuideData();if(!u.getGuideEnd()){var p=u.getCurrentId();p==17+u.putGuideNum?l=["equip",40]:18==p&&(l=["skillBook",22]),this.isGuideState=!1}}else l=S.default.getInstance().getGoodsCfgForGoodsType(c.id);this.curRewardData=l,this.loadRewardForType(t,l),this.refreshShopItem(e.ID)},e.prototype.loadRewardForType=function(t,e){if(e&&!(e.length<=0))switch(e[0]){case"equip":var o=v.DataMgr.getInstance().getEquipCfg(e[1]);this.loadSpriteFrame(o.bundleQuality,o.iconQuality,function(e){t.getComponent(cc.Sprite).spriteFrame=e}),this.loadSpriteFrame(o.bundle,o.equipIcon,function(e){t.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("LabName").getComponent(cc.Label).string=o.equipName,t.getChildByName("LabName").color=S.default.getInstance().seleColor(o.qualityId),this.userData.addBaseEquip(o);break;case"skillBook":var i=v.DataMgr.getInstance().getSkillBook(e[1]);this.loadSpriteFrame("iconImg",i.SkillIcon,function(e){t.getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("LabSkilllName").active=!1,t.getChildByName("LabSkilllName").getComponent(cc.Label).string=i.name,t.getChildByName("LabName").getComponent(cc.Label).string=i.name,t.getChildByName("LabName").color=S.default.getInstance().seleColor(i.qualityId),this.userData.addSkillBookId(i.id);var a=t.getChildByName("SpBarBg"),n=this.userData.getSkillBookForId(i.id),r=v.DataMgr.getInstance().getSkillBookLevelCfg1(i.StartLevelID,n.level);n.level>=i.MaxLevel?a.getChildByName("LabBar").getComponent(cc.Label).string="MAX":a.getChildByName("LabBar").getComponent(cc.Label).string=n.iCount+"/"+r.ConsumeSkillBookNum}},e.prototype.lightAnim=function(){this.SpLight.opacity=0,cc.tween(this.SpLight).to(.7,{opacity:255}).start()},e.prototype.rewardItemAnim=function(t,e){var o=this;if(t.position=e,t.scale=0,"skillBook"==this.curRewardData[0])if(0==this.userData.getSkillBookForId(this.curRewardData[1]).iCount)t.getChildByName("SpBarBg").active=!1,t.getChildByName("SpNew").active=!0,t.getChildByName("NodeSell").active=!1;else{var i=v.DataMgr.getInstance().getSkillBook(this.curRewardData[1]),a=v.DataMgr.getInstance().getSkillQuality(i.qualityId),n=f.Utils.getTabelArr(a.FullGradeCompensate);this.userData.getSkillBookForId(this.curRewardData[1]).level>=i.MaxLevel?(t.getChildByName("SpBarBg").active=!1,t.getChildByName("SpNew").active=!1,t.getChildByName("NodeSell").active=!0,t.getChildByName("NodeSell").getChildByName("LabSell").getComponent(cc.Label).string=""+n[1],this.userData.subSkillBookCount(i.id),S.default.getInstance().getRewardForType(Number(n[0]),Number(n[1]))):(t.getChildByName("SpBarBg").active=!0,t.getChildByName("SpNew").active=!1,t.getChildByName("NodeSell").active=!1)}cc.tween(t).parallel(cc.tween().by(.3,{y:550}),cc.tween().to(.3,{scale:1})).call(function(){var e=C.PlayerMgr.getInstance().getGuideData();if(e.getGuideEnd())o.BtnAgain.active=!0;else{var i=e.getCurrentId();i==17+e.putGuideNum||i==18+e.putGuideNum?o.BtnAgain.active=!1:o.BtnAgain.active=!0}var a=t.getComponent(cc.Animation);a.play(),a.on(cc.Animation.EventType.FINISHED,function(){var e=function(){o.NodeBtn.active=!0,o.playAnimFotBtn()};switch(o.curRewardData[0]){case"equip":var i,a=v.DataMgr.getInstance().getEquipCfg(o.curRewardData[1]);i="D"==C.PlayerMgr.getInstance().getAbType()?I.default.getInstance().getEquipFightForId(o.curRewardData[1],!0):v.DataMgr.getInstance().getEquipStrengthenCfg1(a.strengthenStartId,0).fightNum,d.TweenMgr.getInstance().rollLabAnim(!0,t.getChildByName("SpFightNum").getChildByName("LabFightnNum").getComponent(cc.Label),0,i,function(){S.default.getInstance().isOverEquipBagForIndex()&&g.UIMgr.getInstance().openUI(y.UIID.UINotBagIndex,-1),e()});break;case"skillBook":var n=v.DataMgr.getInstance().getSkillBook(o.curRewardData[1]),r=o.userData.getSkillBookForId(n.id),s=v.DataMgr.getInstance().getSkillBookLevelCfg1(n.StartLevelID,r.level),c=r.iCount/s.ConsumeSkillBookNum>1?1:r.iCount/s.ConsumeSkillBookNum;d.TweenMgr.getInstance().rollBarAnim(!0,t.getChildByName("SpBarBg").getChildByName("SpBar").getComponent(cc.Sprite),0,c,function(){t.getChildByName("SpBarBg").getChildByName("SpUp").active=c>=1,c>=1&&d.TweenMgr.getInstance().animUpLv(t.getChildByName("SpBarBg").getChildByName("SpUp")),e()})}})}).start()},e.prototype.refreshAgainTimeBtn=function(t){var e=this,o="commonImg",i="cq_ty_sp",a="\u518d\u6765\u4e00\u6b21";switch(t.ConsumeType){case 0:break;case 1:case 2:var n=v.DataMgr.getInstance().getGoodsCfg(t.ConsumeType);o=n.bundle,i=n.goodsICon,a=""+t.ConsumeNum}this.loadSpriteFrame(o,i,function(t){e.BtnAgain.getChildByName("LayoutAgain").getChildByName("SpCost").getComponent(cc.Sprite).spriteFrame=t}),this.BtnAgain.getChildByName("LayoutAgain").getChildByName("LabAgain").getComponent(cc.Label).string=a},e.prototype.playAnimFotBtn=function(){var t=this,e=v.DataMgr.getInstance().getShopCfg(this.curShopId),o=e.ProtectNum-this.userData.getShopDrawRewardCount(this.curShopId);if(2==this.curShopId||4==this.curShopId){this.BtnAgain.getChildByName("LabDec").active=!0;var i=1==o?"\u672c":""+o,a=e.ProtectDesc.replace("%s",i);1!=o&&(a="<outline color=#000000 width = 3>\u518d\u5f00</outline>"+a),this.BtnAgain.getChildByName("LabDec").getComponent(cc.RichText).string=a}else this.BtnAgain.getChildByName("LabDec").active=!1;d.TweenMgr.getInstance().quickBigAndSmallAni(this.BtnTrue,function(){t.BtnTrue.scale=1}),d.TweenMgr.getInstance().quickBigAndSmallAni(this.BtnAgain,function(){t.BtnAgain.scale=1,2!=t.curShopId&&4!=t.curShopId||d.TweenMgr.getInstance().playHeartAni(t.BtnAgain)})},e.prototype.trackEvent=function(t){switch(t){case 1:C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.guide17);break;case 2:break;case 3:C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.guide19)}},e.prototype.trackEvent1=function(t){switch(t){case 1:C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.guide18);break;case 2:break;case 3:C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.guide20)}},e.prototype.trackEvent2=function(t){var e=C.PlayerMgr.getInstance().geUserData();e.addBoxOpenTimeForBoxId(t);var o=e.getBoxOpenTimeForBoxId(t);o<=20&&C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.box_time_X_Y,t,o);var i=e.getCurSec();if(e.getEnterSecCountForSecId(i)<=0&&(i-=1)<1&&(i=1),2==t){e.addBox2CountForSec(i);var a=e.getBox2CountForSec(i);i<=5&&a<=5&&C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.box2_chaptertime_X_Y,i,a)}else if(4==t){e.addBox3CountForSec(i);var n=e.getBox3CountForSec(i);i<=5&&n<=5&&C.PlayerMgr.getInstance().getTrackData().youmengTrack(m.TrackId.box3_chaptertime_X_Y,i,n)}},s([M(cc.Node)],e.prototype,"NodeUp",void 0),s([M(cc.Node)],e.prototype,"BtnBack",void 0),s([M(cc.Node)],e.prototype,"BtnTrue",void 0),s([M(cc.Node)],e.prototype,"BtnAgain",void 0),s([M(cc.Node)],e.prototype,"LayoutShop",void 0),s([M({type:cc.Node,tooltip:"\u62bd\u5956\u754c\u9762"})],e.prototype,"NodeDrawReward",void 0),s([M(cc.Node)],e.prototype,"SpLight",void 0),s([M(cc.Node)],e.prototype,"NodeBtn",void 0),s([M(cc.Node)],e.prototype,"NodeBox",void 0),s([M({type:cc.Node,tooltip:"\u88c5\u5907\u5956\u52b1\u8282\u70b9"})],e.prototype,"NodeEquip",void 0),s([M({type:cc.Node,tooltip:"\u6280\u80fd\u4e66\u5956\u52b1\u8282\u70b9"})],e.prototype,"NodeSkillBook",void 0),s([D],e)}(c.default);n.default=B,cc._RF.pop()},{}],UISign:[function(t,e,o){"use strict";cc._RF.push(e,"b6b74mUbbRIcaedM7IMMDoR","UISign");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("LogMgr"),u=a("SdkMgr"),p=a("TweenMgr"),d=a("UIMgr"),g=a("TimeUtils"),h=a("Utils"),f=a("Config"),y=a("TrackDataEvent"),m=a("DataMgr"),v=a("GoodsManager"),I=a("PlayerMgr"),k=a("ComDataMgr"),S=a("ComPlayerMgr"),C=cc._decorator,b=C.ccclass,_=C.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e.reissueItem=null,e.btnClose=null,e.signLayout=null,e.signData=null,e.currentItem=null,e.defalutSpritefarm=[],e}return r(e,t),e.prototype.start=function(){var t=this;u.SdkMgr.getInstance().showBanner(),this.signData=S.ComPlayerMgr.getInstance().getSignData();for(var e=function(e){var i=o.signLayout.getChildByName(""+e),a=k.ComDataMgr.getInstance().getSignById(e),n=m.DataMgr.getInstance().getGoodsCfg(a.rewardId);if(o.loadSpriteFrame(n.bundle,n.goodsGameIcon,function(t){i.getChildByName("SpReward").getComponent(cc.Sprite).spriteFrame=t}),i.getChildByName("LabReward").getComponent(cc.Label).string="x"+a.rewardNum,o.defalutSpritefarm.push(i.getComponent(cc.Sprite).spriteFrame),o.signData.checkIsSigned(e)){var r=cc.instantiate(o.item);r.parent=i,r.active=!0,r.setContentSize(i.getContentSize())}else if(o.signData.checkReissue(e)){var s=cc.instantiate(o.reissueItem);s.parent=i,s.position=new cc.Vec3(0,0),s.active=!0;var c=g.TimeUtils.GetTimeBySecond(),d=g.TimeUtils.GetTimeByHours2();s.on(cc.Node.EventType.TOUCH_END,function(){u.SdkMgr.getInstance().playVideo(u.AdType.ReissueSign,function(){var o=g.TimeUtils.GetTimeBySecond(),a=g.TimeUtils.GetTimeByHours2();I.PlayerMgr.getInstance().getTrackData().testTrackTime("signin",d,a,c,o),I.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.signin),I.PlayerMgr.getInstance().getTrackData().youmengTrackNew("signin_b"),s.active=!1,t.startSign(i,e),s.targetOff(cc.Node.EventType.TOUCH_END),t.closeView()})})}else o.signData.checkCanSign(e)?(i.getChildByName("SpSele").active=!0,o.currentItem=i,i.getChildByName("SpSele").active=!0,i.on(cc.Node.EventType.TOUCH_END,function(){t.startSign(i,e),i.targetOff(cc.Node.EventType.TOUCH_END)}),p.TweenMgr.getInstance().playHeartAni(i)):l.LogMgr.getInstance().debug("\u4e0d\u53ef\u4ee5\u7b7e\u5230")},o=this,i=1;i<8;i++)e(i);this.initBtn()},e.prototype.initBtn=function(){var t=this;this.btnClose.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()})},e.prototype.startSign=function(t,e){p.TweenMgr.getInstance().stopTween(t);var o=cc.instantiate(this.item);o.parent=t,o.active=!0,o.setContentSize(t.getContentSize()),t.getChildByName("SpSele").active=!1,p.TweenMgr.getInstance().stampAni(o),t.getComponent(cc.Sprite).spriteFrame=this.defalutSpritefarm[e-1],this.signData.startSign(e);var i=k.ComDataMgr.getInstance().getSignById(e);switch(m.DataMgr.getInstance().getGoodsCfg(i.rewardId).goodsType){case"gold":I.PlayerMgr.getInstance().geUserData().addGoldNum(i.rewardNum),d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 \u91d1\u5e01x"+i.rewardNum);break;case"inGot":I.PlayerMgr.getInstance().geUserData().addInGotNum(i.rewardNum),d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 \u5143\u5b9dx"+i.rewardNum);break;case"power":I.PlayerMgr.getInstance().geUserData().addPowerNum(i.rewardNum),d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 \u4f53\u529bx"+i.rewardNum);break;case"equip":var a=v.default.getInstance().getGoodsCfgForGoodsType(i.rewardId),n=m.DataMgr.getInstance().getEquipCfg(Number(a[1]));I.PlayerMgr.getInstance().geUserData().addBaseEquip(n);var r=v.default.getInstance().getColorForQuality(n.qualityId);d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 <color = #"+r+">"+n.equipName+"</c>x"+i.rewardNum),v.default.getInstance().isOverEquipBagForIndex()&&d.UIMgr.getInstance().openUI(f.UIID.UINotBagIndex,-1);break;case"skillBook":a=v.default.getInstance().getGoodsCfgForGoodsType(i.rewardId);var s=m.DataMgr.getInstance().getSkillBook(Number(a[1]));if(I.PlayerMgr.getInstance().geUserData().addSkillBookId(s.id),r=v.default.getInstance().getColorForQuality(s.qualityId),d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u6210\u529f\u9886\u53d6 <color = #"+r+">"+s.name+"</c>x"+i.rewardNum),I.PlayerMgr.getInstance().geUserData().getSkillBookForId(Number(a[1])).level>=s.MaxLevel){var c=m.DataMgr.getInstance().getSkillQuality(s.qualityId),l=h.Utils.getTabelArr(c.FullGradeCompensate);I.PlayerMgr.getInstance().geUserData().subSkillBookCount(s.id),v.default.getInstance().getRewardForType(Number(l[0]),Number(l[1]));var u=m.DataMgr.getInstance().getGoodsCfg(Number(l[0])).goodsName;d.UIMgr.getInstance().openUI(f.UIID.UITips,-1,"\u5df2\u8fbe\u5230\u6700\u5927\u7b49\u7ea7\uff0c\u81ea\u52a8\u8f6c\u5316\u4e3a "+u+"x"+l[1])}}this.closeView()},e.prototype.closeView=function(){u.SdkMgr.getInstance().hideBanner(),this.closeUI()},s([_({type:cc.Node,displayName:"\u5df2\u7ecf\u7b7e\u5230Item"})],e.prototype,"item",void 0),s([_({type:cc.Node,displayName:"\u8865\u7b7eitem"})],e.prototype,"reissueItem",void 0),s([_(cc.Node)],e.prototype,"btnClose",void 0),s([_(cc.Node)],e.prototype,"signLayout",void 0),s([b],e)}(c.default);n.default=N,cc._RF.pop()},{}],UISkillBookInfo:[function(t,e,o){"use strict";cc._RF.push(e,"83174nMvpFCj6ybJvxFXQ3A","UISkillBookInfo");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("AudioMgr"),u=a("EventMgr"),p=a("SdkMgr"),d=a("TweenMgr"),g=a("UIMgr"),h=a("TimeUtils"),f=a("Utils"),y=a("Main"),m=a("Config"),v=a("TrackDataEvent"),I=a("DataMgr"),k=a("EffectMgr"),S=a("GameDataMgr"),C=a("GoodsManager"),b=a("PlayerMgr"),_=a("TaskMgr"),N=a("UIGuide"),T=cc._decorator,D=T.ccclass,M=T.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpSele=null,e.SpNotSele=null,e.BtnClose=null,e.BtnUpLv=null,e.BtnVideoUpLv=null,e.BtnOutSide=null,e.BtnInSide=null,e.LayoutBg=null,e.LabMaxLevel=null,e.LabSkillBookName=null,e.SpFetterIcon1=null,e.LabFetterName1=null,e.SpFetterIcon2=null,e.LabFetterName2=null,e.LayoutStarDec=null,e.LayoutStarInfo=null,e.LayoutNextStarDec=null,e.LayoutNextStarInfo=null,e.LayoutFetter1=null,e.LayoutFetter2=null,e.LayoutUpLvBtn=null,e.LayoutBtn=null,e.NodeBarBg=null,e.curWindow=null,e.curSkillBookId=1,e.pos=cc.Vec3.ZERO,e.isOutSide=!0,e.isLoadOutSide=!1,e.isLoadInSide=!1,e}return r(e,t),e.prototype.init=function(t,e,o){this.curSkillBookId=t||1,this.pos=e||cc.Vec3.ZERO,this.curWindow=o||m.UIID.UIGame},e.prototype.start=function(){this.curWindow==m.UIID.UIGame&&y.default.instance.controlObjectsAnim(!0),this.curWindow==m.UIID.UIGame&&(this.BtnClose.zIndex=1),u.EventMgr.getInstance().emit(m.EventName.ShowUITop,!1),this.registerBtnEvent(),this.initData(),this.initView(),this.guideShow()},e.prototype.guideShow=function(){var t=b.PlayerMgr.getInstance().getGuideData();if(!t.getGuideEnd()){var e=t.getCurrentId();if(e==7+t.putGuideNum)(o=new N.GuildCfg).distNode=this.LayoutBg,this.openUICallBack(m.UIID.UIGuide,function(){t.addCurrentId()},o);else if(e==14+t.putGuideNum){var o;(o=new N.GuildCfg).distNode=this.BtnUpLv,o.tipstring="\u53ef\u6d88\u8017<color=#ff6b1b>\u540c\u540d\u6280\u80fd\u4e66\u5347\u7ea7\u6280\u80fd\uff0c\u63d0\u5347\u5176\u5c5e\u6027</color>\u5662",o.yDec=-550,this.openUICallBack(m.UIID.UIGuide,function(){t.addCurrentId()},o)}}},e.prototype.registerBtnEvent=function(){var t=this;this.BtnClose.on(cc.Node.EventType.TOUCH_END,function(){t.closeView(),t.curWindow==m.UIID.UIGame&&y.default.instance.controlObjectsAnim(!1),t.curWindow!=m.UIID.UIGame&&t.sendEvent(m.EventName.SkillBookGuideShow)}),this.BtnOutSide.on(cc.Node.EventType.TOUCH_END,function(){t.isOutSide=!0,t.refreshBtnChange(),t.initViewForWindow()}),this.BtnInSide.on(cc.Node.EventType.TOUCH_END,function(){b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.click_skillswitch),t.isOutSide=!1,t.refreshBtnChange(),t.initViewForWindow()}),this.BtnUpLv.on(cc.Node.EventType.TOUCH_END,function(){if(t.BtnUpLv.getComponent(cc.Button).interactable){var e=I.DataMgr.getInstance().getSkillBookLevelCfg1(t.curSkillBookData.StartLevelID,t.curSaveSkillBookData.level);if(t.curSaveSkillBookData.iCount>=e.ConsumeSkillBookNum){if(b.PlayerMgr.getInstance().geUserData().subGoldNum(e.ConsumeNum)){if(l.AudioMgr.getInstance().playEffect(m.AudioId.Sound_Upgrade),t.curSaveSkillBookData.iCount-=e.ConsumeSkillBookNum,t.curSaveSkillBookData.level+=1,b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.guide14),t.curSaveSkillBookData.level<=3&&b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.skill_upgrade_X_Y,t.curSaveSkillBookData.id,t.curSaveSkillBookData.level),t.curSaveSkillBookData.iCount>0&&t.curSaveSkillBookData.level>=t.curSkillBookData.MaxLevel){var o=I.DataMgr.getInstance().getSkillQuality(t.curSkillBookData.qualityId),i=f.Utils.getTabelArr(o.FullGradeCompensate),a=t.curSaveSkillBookData.iCount*Number(i[1]);b.PlayerMgr.getInstance().geUserData().subSkillBookCount(t.curSkillBookData.id,t.curSaveSkillBookData.iCount),C.default.getInstance().getRewardForType(Number(i[0]),a);var n=I.DataMgr.getInstance().getGoodsCfg(Number(i[0])).goodsName;g.UIMgr.getInstance().openUI(m.UIID.UITips,-1,"\u5df2\u8fbe\u5230\u6700\u5927\u7b49\u7ea7\uff0c\u591a\u4f59\u6280\u80fd\u4e66\u81ea\u52a8\u8f6c\u5316\u4e3a "+n+"x"+a)}_.default.getInstance().skillBookMaxLvforTask(t.curSaveSkillBookData.level),b.PlayerMgr.getInstance().geUserData().setSkillBookData(t.curSaveSkillBookData),t.initCurBarLv(),t.initStarInfo(),t.initNextLevelDec(),t.initNextStarInfo(),t.initBtnUpLv(),t.playEffForPropUp(),u.EventMgr.getInstance().emit(m.EventName.RefreshUISkillBookShow,t.curSkillBookId),g.UIMgr.getInstance().openUI(m.UIID.UITips,-1,"\u5347\u7ea7\u6210\u529f"),t.guideShow()}}else g.UIMgr.getInstance().openUI(m.UIID.UITips,-1,"\u6280\u80fd\u4e66\u4e0d\u8db3")}}),this.BtnVideoUpLv.on(cc.Node.EventType.TOUCH_END,function(){var e=h.TimeUtils.GetTimeBySecond(),o=h.TimeUtils.GetTimeByHours2();p.SdkMgr.getInstance().playVideo(1,function(){var i=h.TimeUtils.GetTimeBySecond(),a=h.TimeUtils.GetTimeByHours2();b.PlayerMgr.getInstance().getTrackData().testTrackTime("upgradeskill",o,a,e,i),b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.upgradeskill),b.PlayerMgr.getInstance().getTrackData().youmengTrackNew("upgradeskill_b");var n=I.DataMgr.getInstance().getSkillBookLevelCfg1(t.curSkillBookData.StartLevelID,t.curSaveSkillBookData.level);if(t.curSaveSkillBookData.videoCount=t.curSaveSkillBookData.videoCount?t.curSaveSkillBookData.videoCount:0,t.curSaveSkillBookData.videoCount+=1,t.curSaveSkillBookData.videoCount>=n.AdvertisementNum){if(t.curSaveSkillBookData.level+=1,l.AudioMgr.getInstance().playEffect(m.AudioId.Sound_Upgrade),t.curSaveSkillBookData.level<=3&&b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.skill_upgrade_X_Y,t.curSaveSkillBookData.id,t.curSaveSkillBookData.level),t.curSaveSkillBookData.videoCount=0,t.curSaveSkillBookData.iCount>0&&t.curSaveSkillBookData.level>=t.curSkillBookData.MaxLevel){var r=I.DataMgr.getInstance().getSkillQuality(t.curSkillBookData.qualityId),s=f.Utils.getTabelArr(r.FullGradeCompensate),c=t.curSaveSkillBookData.iCount*Number(s[1]);b.PlayerMgr.getInstance().geUserData().subSkillBookCount(t.curSkillBookData.id,t.curSaveSkillBookData.iCount),C.default.getInstance().getRewardForType(Number(s[0]),c);var p=I.DataMgr.getInstance().getGoodsCfg(Number(s[0])).goodsName;g.UIMgr.getInstance().openUI(m.UIID.UITips,-1,"\u5df2\u8fbe\u5230\u6700\u5927\u7b49\u7ea7\uff0c\u591a\u4f59\u6280\u80fd\u4e66\u81ea\u52a8\u8f6c\u5316\u4e3a "+p+"x"+c)}_.default.getInstance().skillBookMaxLvforTask(t.curSaveSkillBookData.level),b.PlayerMgr.getInstance().geUserData().setSkillBookData(t.curSaveSkillBookData),t.initCurBarLv(),t.initStarInfo(),t.initNextLevelDec(),t.initNextStarInfo(),t.initBtnUpLv(),t.playEffForPropUp(),u.EventMgr.getInstance().emit(m.EventName.RefreshUISkillBookShow,t.curSkillBookId),g.UIMgr.getInstance().openUI(m.UIID.UITips,-1,"\u5347\u7ea7\u6210\u529f")}else t.initBtnUpLv(),b.PlayerMgr.getInstance().geUserData().setSkillBookData(t.curSaveSkillBookData)})})},e.prototype.playEffForPropUp=function(){for(var t=1;t<=3;t++){var e=this.LayoutStarInfo.getChildByName("Lab"+t+"StarDec1");cc.isValid(e)&&k.default.playEffectForEffId(m.EnumEffID.EffPropUp,e);var o=this.LayoutStarInfo.getChildByName("Lab"+t+"StarDec2");cc.isValid(o)&&k.default.playEffectForEffId(m.EnumEffID.EffPropUp,o)}},e.prototype.playEffForUpLv=function(){k.default.playEffectForEffId(m.EnumEffID.EffUpLv,this.node.parent.parent,this.node)},e.prototype.callbackBtnClose=function(){this.closeView(),this.curWindow==m.UIID.UIGame&&y.default.instance.controlObjectsAnim(!1)},e.prototype.initData=function(){this.curSkillBookData=I.DataMgr.getInstance().getSkillBook(this.curSkillBookId),this.curSaveSkillBookData=b.PlayerMgr.getInstance().geUserData().getSkillBookForId(this.curSkillBookId)},e.prototype.initView=function(){this.initViewForWindow()},e.prototype.initViewForWindow=function(){switch(this.isLoadOutSide||this.isLoadOutSide||(this.initLayoutBgPos(),this.initSkillBookInfo()),this.curWindow){case m.UIID.UIGame:this.initStarInfo(),this.initAllSuitInfo(),this.LayoutStarDec.active=!1,this.LayoutNextStarDec.active=!1,this.LayoutNextStarInfo.active=!1,this.LayoutUpLvBtn.active=!1,this.LayoutBtn.active=!1;break;case m.UIID.UISkillBook:this.isOutSide?(this.LayoutStarDec.active=!0,this.LayoutNextStarDec.active=!0,this.LayoutNextStarInfo.active=!0,this.LayoutUpLvBtn.active=!0,this.LayoutFetter1.active=!1,this.LayoutFetter2.active=!1):this.isLoadInSide?(this.LayoutStarDec.active=!1,this.LayoutNextStarDec.active=!1,this.LayoutNextStarInfo.active=!1,this.LayoutUpLvBtn.active=!1,this.LayoutFetter1.active=!0,this.LayoutFetter2.active=!0):(this.isLoadInSide=!0,this.initAllSuitInfo(),this.LayoutStarDec.active=!1,this.LayoutNextStarDec.active=!1,this.LayoutNextStarInfo.active=!1,this.LayoutUpLvBtn.active=!1,this.LayoutFetter1.active=!0,this.LayoutFetter2.active=!0),this.LayoutBtn.active=!0,this.initBtnUpLv(),this.initNextLevelDec(),this.initNextStarInfo(),this.isLoadOutSide||(this.refreshBtnChange(),this.initCurBarLv(),this.initStarInfo(),this.isLoadOutSide=!0)}},e.prototype.initLayoutBgPos=function(){},e.prototype.initSkillBookInfo=function(){var t=this;this.LabSkillBookName.string=""+this.curSkillBookData.name,this.LabSkillBookName.node.color=C.default.getInstance().seleColor(this.curSkillBookData.qualityId);var e=I.DataMgr.getInstance().getFetter(this.curSkillBookData.fetterId1);this.loadSpriteFrame(e.bundle,e.iconImg,function(e){t.SpFetterIcon1.spriteFrame=e}),this.LabFetterName1.string=e.name;var o=I.DataMgr.getInstance().getFetter(this.curSkillBookData.fetterId2);this.loadSpriteFrame(o.bundle,o.iconImg,function(e){t.SpFetterIcon2.spriteFrame=e}),this.LabFetterName2.string=o.name},e.prototype.initCurBarLv=function(){var t=I.DataMgr.getInstance().getSkillBookLevelCfg1(this.curSkillBookData.StartLevelID,this.curSaveSkillBookData.level);this.NodeBarBg.getChildByName("SpBar").getComponent(cc.Sprite).fillRange=this.curSaveSkillBookData.iCount/t.ConsumeSkillBookNum,this.NodeBarBg.getChildByName("SpUp").active=this.curSaveSkillBookData.iCount>=t.ConsumeSkillBookNum,this.curSaveSkillBookData.iCount>=t.ConsumeSkillBookNum&&d.TweenMgr.getInstance().animUpLv(this.NodeBarBg.getChildByName("SpUp")),this.NodeBarBg.getChildByName("LabLv").getComponent(cc.Label).string="Lv."+this.curSaveSkillBookData.level+"\uff1a",this.curSaveSkillBookData.level>=this.curSkillBookData.MaxLevel?this.NodeBarBg.getChildByName("LabBar").getComponent(cc.Label).string="MAX":this.NodeBarBg.getChildByName("LabBar").getComponent(cc.Label).string=this.curSaveSkillBookData.iCount+"/"+t.ConsumeSkillBookNum},e.prototype.initStarInfo=function(){for(var t=I.DataMgr.getInstance().getSkillBookLevelCfg1(this.curSkillBookData.StartLevelID,this.curSaveSkillBookData.level),e=S.default.getInstance().getStarNumForSkillBookId(this.curSkillBookId),o=1;o<=3;o++){var i=this.LayoutStarInfo.getChildByName("Lab"+o+"StarDec1");if(cc.isValid(i)){var a=t.skillBookDec,n=f.Utils.getTabelArr(t["addProp"+o]);a=a.replace("%s",n[1]),i.getComponent(cc.Label).string=a,this.curWindow==m.UIID.UIGame&&(e[0]==o?i.color=cc.color(64,156,47):i.opacity=127)}var r=this.LayoutStarInfo.getChildByName("Lab"+o+"StarDec2");cc.isValid(r)&&(a=t["skillBookDec"+o+"Star"],n=f.Utils.getTabelArr(t["starProp"+o]),a=0==Number(n[0])?a.replace("%s",this.curSkillBookData.name):a.replace("%s",n[1]),r.getComponent(cc.Label).string=a,this.curWindow==m.UIID.UIGame&&(e[0]==o?r.color=cc.color(64,156,47,255):r.opacity=127))}},e.prototype.initNextLevelDec=function(){this.curSaveSkillBookData.level>=this.curSkillBookData.MaxLevel?this.LayoutNextStarDec.active=!1:this.LayoutNextStarDec.getChildByName("LabNextStartDec").getComponent(cc.Label).string="\u4e0b\u4e00\u7ea7\u5c40\u5185\u6548\u679c\uff08Lv."+(this.curSaveSkillBookData.level+1)+"\uff09"},e.prototype.initNextStarInfo=function(){if(this.curSaveSkillBookData.level>=this.curSkillBookData.MaxLevel)this.LayoutNextStarInfo.active=!1;else for(var t=I.DataMgr.getInstance().getSkillBookLevelCfg1(this.curSkillBookData.StartLevelID,this.curSaveSkillBookData.level+1),e=1;e<=3;e++){var o=this.LayoutNextStarInfo.getChildByName("Lab"+e+"StarDec1");if(cc.isValid(o)){var i=t.skillBookDec,a=f.Utils.getTabelArr(t["addProp"+e]);i=i.replace("%s",a[1]),o.getComponent(cc.Label).string=i,o.opacity=127}var n=this.LayoutNextStarInfo.getChildByName("Lab"+e+"StarDec2");cc.isValid(n)&&(i=t["skillBookDec"+e+"Star"],a=f.Utils.getTabelArr(t["starProp"+e]),i=0==Number(a[0])?i.replace("%s",this.curSkillBookData.name):i.replace("%s",a[1]),n.getComponent(cc.Label).string=i,n.opacity=127)}},e.prototype.initBtnUpLv=function(){if(-1!=b.PlayerMgr.getInstance().geUserData().isExistSkillBookId(this.curSkillBookData.id)){if(this.curSaveSkillBookData.level>=this.curSkillBookData.MaxLevel)return this.LabMaxLevel.active=!0,this.BtnUpLv.active=!1,this.BtnUpLv.getComponent(cc.Button).interactable=!1,void(this.BtnVideoUpLv.active=!1);var t=I.DataMgr.getInstance().getSkillBookLevelCfg1(this.curSkillBookData.StartLevelID,this.curSaveSkillBookData.level);this.BtnUpLv.getChildByName("LabCost").getComponent(cc.Label).string=""+t.ConsumeNum,this.curSaveSkillBookData.videoCount=this.curSaveSkillBookData.videoCount?this.curSaveSkillBookData.videoCount:0,1==t.AdvertisementNum?(this.BtnVideoUpLv.getChildByName("LabCost").active=!1,this.BtnVideoUpLv.getChildByName("NodeVideo").position=cc.v3(0,0)):(this.BtnVideoUpLv.getChildByName("LabCost").active=!0,this.BtnVideoUpLv.getChildByName("LabCost").getComponent(cc.Label).string="("+this.curSaveSkillBookData.videoCount+"/"+t.AdvertisementNum+")",this.BtnVideoUpLv.getChildByName("NodeVideo").position=cc.v3(0,15))}else this.LayoutUpLvBtn.active=!1},e.prototype.initAllSuitInfo=function(){this.initSuitInfo(this.LayoutFetter1,this.curSkillBookData.fetterId1),this.initSuitInfo(this.LayoutFetter2,this.curSkillBookData.fetterId2)},e.prototype.initSuitInfo=function(t,e){if(cc.isValid(t)){for(var o=t.getChildByName("LayoutSuit1"),i=t.getChildByName("LayoutSuit2"),a=t.getChildByName("LayoutSuit3"),n=S.default.getInstance().getSuitCountForFetterId(e),r=1;r<=3;r++)n==r?(t.getChildByName("LayoutSuit"+r).getChildByName("LabSuit").color=cc.color(255,228,76),t.getChildByName("LayoutSuit"+r).getChildByName("LabSuitDec").color=cc.color(255,228,76)):t.getChildByName("LayoutSuit"+r).opacity=127;var s=I.DataMgr.getInstance().getFetter(e),c=f.Utils.getTabelArr(s.fetterCount),l=f.Utils.getTabelArr(s.fetterFun);o.getChildByName("LabSuit").getComponent(cc.Label).string="("+c[0]+")";var u=s.fetterDec;u=u.replace("%s",l[0]),o.getChildByName("LabSuitDec").getComponent(cc.Label).string=""+u,i.getChildByName("LabSuit").getComponent(cc.Label).string="("+c[1]+")";var p=s.fetterDec;p=p.replace("%s",l[1]),i.getChildByName("LabSuitDec").getComponent(cc.Label).string=""+p,a.getChildByName("LabSuit").getComponent(cc.Label).string="("+c[2]+")";var d=s.fetterDec;d=d.replace("%s",l[2]),a.getChildByName("LabSuitDec").getComponent(cc.Label).string=""+d;var g=t.getChildByName("NodeFetter");this.loadSpriteFrame(s.bundle,s.iconImg,function(t){g.getChildByName("SpFetterIcon").getComponent(cc.Sprite).spriteFrame=t}),g.getChildByName("LabFetterName").getComponent(cc.Label).string=s.name+"\uff08\u540c\u65f6\u4fee\u70bc\uff09"}},e.prototype.refreshBtnChange=function(){this.BtnOutSide.getComponent(cc.Sprite).spriteFrame=this.isOutSide?this.SpSele:this.SpNotSele,this.BtnInSide.getComponent(cc.Sprite).spriteFrame=this.isOutSide?this.SpNotSele:this.SpSele,this.isOutSide?(this.BtnOutSide.getChildByName("Lab").color=cc.color(255,255,255),this.BtnInSide.getChildByName("Lab").color=cc.color(126,142,176)):(this.BtnOutSide.getChildByName("Lab").color=cc.color(126,142,176),this.BtnInSide.getChildByName("Lab").color=cc.color(255,255,255))},e.prototype.closeView=function(){this.closeUI(),this.curWindow!=m.UIID.UIGame&&b.PlayerMgr.getInstance().getTrackData().youmengTrack(v.TrackId.guide15)},s([M(cc.SpriteFrame)],e.prototype,"SpSele",void 0),s([M(cc.SpriteFrame)],e.prototype,"SpNotSele",void 0),s([M(cc.Node)],e.prototype,"BtnClose",void 0),s([M(cc.Node)],e.prototype,"BtnUpLv",void 0),s([M(cc.Node)],e.prototype,"BtnVideoUpLv",void 0),s([M(cc.Node)],e.prototype,"BtnOutSide",void 0),s([M(cc.Node)],e.prototype,"BtnInSide",void 0),s([M(cc.Node)],e.prototype,"LayoutBg",void 0),s([M(cc.Node)],e.prototype,"LabMaxLevel",void 0),s([M(cc.Label)],e.prototype,"LabSkillBookName",void 0),s([M(cc.Sprite)],e.prototype,"SpFetterIcon1",void 0),s([M(cc.Label)],e.prototype,"LabFetterName1",void 0),s([M(cc.Sprite)],e.prototype,"SpFetterIcon2",void 0),s([M(cc.Label)],e.prototype,"LabFetterName2",void 0),s([M(cc.Node)],e.prototype,"LayoutStarDec",void 0),s([M(cc.Node)],e.prototype,"LayoutStarInfo",void 0),s([M(cc.Node)],e.prototype,"LayoutNextStarDec",void 0),s([M(cc.Node)],e.prototype,"LayoutNextStarInfo",void 0),s([M(cc.Node)],e.prototype,"LayoutFetter1",void 0),s([M(cc.Node)],e.prototype,"LayoutFetter2",void 0),s([M(cc.Node)],e.prototype,"LayoutUpLvBtn",void 0),s([M(cc.Node)],e.prototype,"LayoutBtn",void 0),s([M(cc.Node)],e.prototype,"NodeBarBg",void 0),s([D],e)}(c.default);n.default=B,cc._RF.pop()},{}],UISkillBook:[function(t,e,o){"use strict";cc._RF.push(e,"a4a09gvGOxPwr9oFZviZJbL","UISkillBook");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("EventMgr"),u=a("PoolMgr"),p=a("ResourceMgr"),d=a("TweenMgr"),g=a("UIMgr"),h=a("Config"),f=a("TrackDataEvent"),y=a("DataMgr"),m=a("GameMgr"),v=a("GoodsManager"),I=a("PlayerMgr"),k=a("NodeUISkillBook"),S=a("UIGuide"),C=cc._decorator,b=C.ccclass,_=C.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpSkillBookIconArr=[],e.LabNotGet=null,e.NodeUp=null,e.LabOwnedNum=null,e.ScrollViewSkillBook=null,e.viewSkillBook=null,e.LayoutSkillBook=null,e.LayoutOwnedSkillBookLayout=null,e.LayoutNotGetSkillBookLayout=null,e.LayerTouch=null,e.BtnBack=null,e.BtnBox=null,e.curViewContentH=945,e.loadCount=0,e.abType="A",e.itemHeight=234,e}return r(e,t),e.prototype.onLoad=function(){this.registerEvent(),v.default.getInstance().initOwnedSkillBookData()},e.prototype.initAbTypeData=function(){this.abType=I.PlayerMgr.getInstance().getTrackData().getAbType(),this.itemHeight=256,this.LayoutOwnedSkillBookLayout.getComponent(cc.Layout).paddingLeft=30,this.LayoutOwnedSkillBookLayout.getComponent(cc.Layout).paddingRight=16,this.LayoutOwnedSkillBookLayout.getComponent(cc.Layout).spacingX=54,this.LayoutOwnedSkillBookLayout.getComponent(cc.Layout).spacingY=20,this.LayoutNotGetSkillBookLayout.getComponent(cc.Layout).paddingLeft=30,this.LayoutNotGetSkillBookLayout.getComponent(cc.Layout).paddingRight=16,this.LayoutNotGetSkillBookLayout.getComponent(cc.Layout).spacingX=54,this.LayoutNotGetSkillBookLayout.getComponent(cc.Layout).spacingY=20},e.prototype.start=function(){this.initAbTypeData(),this.registerBtnEvent(),l.EventMgr.getInstance().emit(h.EventName.ShowUITop,!1),this.initViewContent(),this.playBoxAnim(),this.initData(),this.initView(),this.guideShow()},e.prototype.initViewContent=function(){this.curViewContentH=cc.winSize.height-335-54+354,console.log("this.curViewContentH\uff1a",this.curViewContentH)},e.prototype.playBoxAnim=function(){d.TweenMgr.getInstance().playHeartAni(this.BtnBox)},e.prototype.guideShow=function(){var t=this,e=I.PlayerMgr.getInstance().getGuideData();if(!e.getGuideEnd()){var o=e.getCurrentId();if(o==13+e.putGuideNum)this.isOpenTouch(!0),this.scheduleOnce(function(){t.ScrollViewSkillBook.scrollToPercentVertical(.85);for(var o=new S.GuildCfg,i=null,a=0;a<t.LayoutOwnedSkillBookLayout.childrenCount;a++){var n=t.LayoutOwnedSkillBookLayout.children[a];if(n.getComponent(k.default)&&16==n.getComponent(k.default).skillBookId){i=n;break}}o.distNode=i,o.tipstring="\u53ea\u6709<color=#ff6b1b>\u5df2\u83b7\u5f97\u7684\u6280\u80fd\u4e66</color>\uff0c\u624d\u4f1a\u5728\u5173\u5361\u4e2d<color=#ff6b1b>\u51fa\u73b0</color>\u5662\uff01\u521a\u521a\u83b7\u5f97\u4e86\u4e00\u672c<color=#ff6b1b>\u3010\u57fa\u7840\u5251\u672f\u3011</color>\uff0c\u73b0\u5728\u6765<color=#ff6b1b>\u5347\u7ea7</color>\u770b\u770b\u5427",o.yDec=200,t.openUICallBack(h.UIID.UIGuide,function(){t.isOpenTouch(!1),e.addCurrentId()},o)},.5);else if(o==15+e.putGuideNum){var i=new S.GuildCfg;i.distNode=this.BtnBox,i.tipstring="\u975e\u5e38\u68d2\uff0c\u521a\u521a\u5269\u4e00\u70b9<color=#ff6b1b>\u5143\u5b9d</color>\uff0c\u5feb\u53bb<color=#ff6b1b>\u5546\u57ce</color>\u770b\u770b\u6709\u4ec0\u4e48\u597d\u8d27\u5427\uff01",i.yDec=-150,this.openUICallBack(h.UIID.UIGuide,function(){e.addCurrentId()},i)}}},e.prototype.isOpenTouch=function(t){void 0===t&&(t=!1),this.LayerTouch.active=t},e.prototype.registerEvent=function(){this.addEvent(h.EventName.SkillBookGuideShow,this.guideShow)},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){m.default.getInstance().openHomeUI(),t.closeView()}),this.BtnBox.on(cc.Node.EventType.TOUCH_END,function(){I.PlayerMgr.getInstance().getTrackData().youmengTrack(f.TrackId.guide16),g.UIMgr.getInstance().openUI(h.UIID.UIShop,-1),t.closeView()})},e.prototype.initData=function(){},e.prototype.initView=function(){this.initCurrency(),this.initSkillBookOwnedCount(),this.initOwnedSkillBook()},e.prototype.initCurrency=function(){var t=this;this.loadPrefab("prefabs","widget/NodeCurrency",function(e){cc.instantiate(e).parent=t.NodeUp})},e.prototype.initSkillBookOwnedCount=function(){var t=y.DataMgr.getInstance().getSkillBookCfg(),e=v.default.getInstance().skillBookOwnedForQuality;this.LabOwnedNum.string="("+e.length+"/"+t.length+")"},e.prototype.initOwnedSkillBook=function(){for(var t=this,e=v.default.getInstance().skillBookOwnedForQuality,o=e.length,i=function(i){var n=.02;a.loadCount>=20&&(n=0),a.scheduleOnce(function(){var a=u.PoolMgr.getInstance().getNode("NodeUISkillBookNew");a?(a.parent=t.LayoutOwnedSkillBookLayout,a.opacity=255,a.position=cc.v3(),t.loadCount+=1,t.loadSkillBookItem(a,e[i],!0),i==o-1&&t.initNotGetSkillBook()):(console.log("\u52a8\u6001\u52a0\u8f7d\u6280\u80fd\u4e66"),p.ResourceMgr.getInstance().loadRes("prefabs","widget/NodeUISkillBook",cc.Prefab,function(n){(a=cc.instantiate(n)).parent=t.LayoutOwnedSkillBookLayout,a.opacity=255,a.position=cc.v3(),t.loadCount+=1,t.loadSkillBookItem(a,e[i],!0),i==o-1&&t.initNotGetSkillBook()}))},i*n)},a=this,n=0;n<o;n++)i(n)},e.prototype.initNotGetSkillBook=function(){var t=this,e=(v.default.getInstance().skillBookOwnedForQuality,v.default.getInstance().skillBookNotGetForQuality),o=e.length;o<=0&&(this.LabNotGet.active=!0,this.LayoutNotGetSkillBookLayout.getComponent(cc.Layout).updateLayout(),this.scrollViewEvent_SkillBook());for(var i=function(i){var n=.02;a.loadCount>=20&&(n=0),a.scheduleOnce(function(){var a=u.PoolMgr.getInstance().getNode("NodeUISkillBookNew");a?(a.parent=t.LayoutNotGetSkillBookLayout,a.opacity=255,a.position=cc.v3(),t.loadCount+=1,t.loadSkillBookItem(a,e[i],!1),i==o-1&&(t.LayoutNotGetSkillBookLayout.getComponent(cc.Layout).updateLayout(),t.scrollViewEvent_SkillBook())):p.ResourceMgr.getInstance().loadRes("prefabs","widget/NodeUISkillBook",cc.Prefab,function(n){(a=cc.instantiate(n)).parent=t.LayoutNotGetSkillBookLayout,a.opacity=255,a.position=cc.v3(),t.loadCount+=1,t.loadSkillBookItem(a,e[i],!1),i==o-1&&(t.LayoutNotGetSkillBookLayout.getComponent(cc.Layout).updateLayout(),t.scrollViewEvent_SkillBook())}),0==i&&(t.LabNotGet.active=!0)},i*n)},a=this,n=0;n<o;n++)i(n)},e.prototype.loadSkillBookItem=function(t,e,o){if(cc.isValid(t)){t.getComponent(k.default).initData(e,h.UIID.UISkillBook);var i=y.DataMgr.getInstance().getSkillBook(e),a=y.DataMgr.getInstance().getSkillQuality(i.qualityId);this.loadSpriteFrame("iconImg",i.SkillIcon,function(e){t.getChildByName("SpSkillBook").getComponent(cc.Sprite).spriteFrame=e}),this.loadSpriteFrame(a.bundle,a.iconImg2,function(e){t.getChildByName("SpNameBg").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("LabName").getComponent(cc.Label).string=i.name,t.getChildByName("LabSkilllName").getComponent(cc.Label).string=i.name;var n=y.DataMgr.getInstance().getFetter(i.fetterId1),r=y.DataMgr.getInstance().getFetter(i.fetterId2);t.getChildByName("LabFetter1").getComponent(cc.Label).string=""+n.name,this.loadSpriteFrame(n.bundle,n.iconImg,function(e){t.getChildByName("SpFetter1").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("LabFetter2").getComponent(cc.Label).string=""+r.name,this.loadSpriteFrame(r.bundle,r.iconImg,function(e){t.getChildByName("SpFetter2").getComponent(cc.Sprite).spriteFrame=e}),t.getChildByName("SpMask").active=!o;var s=I.PlayerMgr.getInstance().geUserData().getSkillBookForId(e),c=y.DataMgr.getInstance().getSkillBookLevelCfg1(i.StartLevelID,s.level),l=t.getChildByName("SpBarBg"),u=c.ConsumeSkillBookNum,p=s.iCount/u;l.getChildByName("SpBar").getComponent(cc.Sprite).fillRange=p>=1?1:p,l.getChildByName("SpUp").active=p>=1,l.getChildByName("LabLv").getComponent(cc.Label).string="Lv."+s.level,s.level>=i.MaxLevel?l.getChildByName("LabBar").getComponent(cc.Label).string="MAX":l.getChildByName("LabBar").getComponent(cc.Label).string=s.iCount+"/"+c.ConsumeSkillBookNum}},e.prototype.scrollViewEvent_SkillBook=function(){for(var t=this.ScrollViewSkillBook.node.getContentSize().height,e=this.itemHeight/2,o=-t-e,i=this.LayoutOwnedSkillBookLayout.getContentSize().height,a=0;a<this.LayoutOwnedSkillBookLayout.childrenCount;a++){var n=this.LayoutOwnedSkillBookLayout.children[a];this.visibleRank_SkillBook(n,o,e)}for(a=0;a<this.LayoutNotGetSkillBookLayout.childrenCount;a++)n=this.LayoutNotGetSkillBookLayout.children[a],this.visibleRank_SkillBook(n,o,e,i)},e.prototype.visibleRank_SkillBook=function(t,e,o,i){void 0===i&&(i=0);var a=t.y+t.parent.y;a+this.LayoutSkillBook.y>e&&a+this.LayoutSkillBook.y<o?t.opacity=255:t.opacity=0},e.prototype.recycleSkillBook=function(t){cc.isValid(t)&&u.PoolMgr.getInstance().freeNode(t.name,t)},e.prototype.destroySkillBook=function(){for(var t=0;t<this.LayoutOwnedSkillBookLayout.childrenCount;t++)this.initSkillBookProp(this.LayoutOwnedSkillBookLayout.children[t]),this.recycleSkillBook(this.LayoutOwnedSkillBookLayout.children[t]);for(t=0;t<this.LayoutNotGetSkillBookLayout.childrenCount;t++)this.initSkillBookProp(this.LayoutNotGetSkillBookLayout.children[t]),this.recycleSkillBook(this.LayoutNotGetSkillBookLayout.children[t])},e.prototype.initSkillBookProp=function(){},e.prototype.closeView=function(){this.destroySkillBook(),this.closeUI()},s([_(cc.SpriteFrame)],e.prototype,"SpSkillBookIconArr",void 0),s([_({type:cc.Node,tooltip:"\u672a\u83b7\u5f97\u7684\u6280\u80fd\u4e66\u6807\u9898"})],e.prototype,"LabNotGet",void 0),s([_(cc.Node)],e.prototype,"NodeUp",void 0),s([_(cc.Label)],e.prototype,"LabOwnedNum",void 0),s([_(cc.ScrollView)],e.prototype,"ScrollViewSkillBook",void 0),s([_(cc.Node)],e.prototype,"viewSkillBook",void 0),s([_(cc.Node)],e.prototype,"LayoutSkillBook",void 0),s([_(cc.Node)],e.prototype,"LayoutOwnedSkillBookLayout",void 0),s([_(cc.Node)],e.prototype,"LayoutNotGetSkillBookLayout",void 0),s([_(cc.Node)],e.prototype,"LayerTouch",void 0),s([_(cc.Node)],e.prototype,"BtnBack",void 0),s([_(cc.Node)],e.prototype,"BtnBox",void 0),s([b],e)}(c.default);n.default=N,cc._RF.pop()},{}],UISkillInfo:[function(t,e,o){"use strict";cc._RF.push(e,"7e5aabTr7NFSrgUmQutQQeE","UISkillInfo");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("PoolMgr"),u=a("Main"),p=a("Config"),d=a("DataMgr"),g=a("EffectMgr"),h=a("PlayerMgr"),f=a("UIGuide"),y=cc._decorator,m=y.ccclass,v=y.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodePlayer=null,e.Player=null,e.NodeGuide=null,e.BtnClose=null,e.SpSkillIcon=null,e.LabSkillName=null,e.LabSkillDec=null,e.curSkillId=1,e.curSkillData=null,e}return r(e,t),e.prototype.init=function(t){this.curSkillId=t||1},e.prototype.onLoad=function(){},e.prototype.start=function(){this.registerBtnEvent(),u.default.instance.controlObjectsAnim(!0),this.initData(),this.initView(),this.guideShow()},e.prototype.guideShow=function(){var t=h.PlayerMgr.getInstance().geUserData();if(1==t.getCurSec()&&1==t.getEnterFirstSecCount()){var e=h.PlayerMgr.getInstance().getGuideData();if(!e.getGuideEnd()){var o=e.getCurrentId();if(o==9+e.putGuideNum)(i=new f.GuildCfg).distNode=this.NodeGuide,i.tipstring="\u90e8\u5206\u6280\u80fd<color=#fce445>\u5347\u81f32\u661f</color>\u540e\uff0c\u53ef\u83b7\u5f97<color=#fce445>\u989d\u5916\u6280\u80fd\u6548\u679c</color>\u5662",i.handIndex=cc.v2(200,-200),this.openUICallBack(p.UIID.UIGuide,function(){e.addCurrentId()},i);else if(o==10+e.putGuideNum){var i;(i=new f.GuildCfg).distNode=this.BtnClose,this.openUICallBack(p.UIID.UIGuide,function(){e.addCurrentId()},i)}}}},e.prototype.registerBtnEvent=function(){var t=this;this.BtnClose.on(cc.Node.EventType.TOUCH_END,function(){t.closeView(),u.default.instance.controlObjectsAnim(!1)}),this.NodeGuide.on(cc.Node.EventType.TOUCH_END,function(){t.guideShow()})},e.prototype.initData=function(){this.curSkillData=d.DataMgr.getInstance().getSkill(this.curSkillId)},e.prototype.initView=function(){this.initSkillInfo(),this.playSkillAnim()},e.prototype.initSkillInfo=function(){var t=this;this.loadSpriteFrame(this.curSkillData.bundle,this.curSkillData.skillIcon,function(e){t.SpSkillIcon.spriteFrame=e}),this.LabSkillName.string=this.curSkillData.skillName;var e="";-1==this.curSkillData.damageType?e="<color=#1425ff>"+this.curSkillData.skillWeight+"%</color>\u6982\u7387\u4f7f<color = #d000dd>\u73a9\u5bb6</color>\u6062\u590d<color = #f60a0a>"+this.curSkillData.damageValue+"%</color>\u8840\u91cf":0==this.curSkillData.damageType?e="<color=#1425ff>"+this.curSkillData.skillWeight+"%</color>\u6982\u7387\u5bf9<color = #d000dd>\u524d\u65b9\u5355\u4f53</color>\u76ee\u6807\u9020\u6210<color = #f60a0a>"+this.curSkillData.damageValue+"%</color>\u4f24\u5bb3":1==this.curSkillData.damageType?e="<color=#1425ff>"+this.curSkillData.skillWeight+"%</color>\u6982\u7387\u5bf9<color = #d000dd>\u524d\u65b9\u654c\u4eba</color>\u76ee\u6807\u9020\u6210<color = #f60a0a>"+this.curSkillData.damageValue+"%</color>\u4f24\u5bb3":1==this.curSkillData.damageType&&(e="<color=#1425ff>"+this.curSkillData.skillWeight+"%</color>\u6982\u7387\u5bf9<color = #d000dd>\u5168\u4f53\u654c\u4eba</color>\u76ee\u6807\u9020\u6210<color = #f60a0a>"+this.curSkillData.damageValue+"%</color>\u4f24\u5bb3"),this.LabSkillDec.string=e},e.prototype.playSkillAnim=function(){var t=this,e=this.Player.getComponent(sp.Skeleton);e&&e.findAnimation(this.curSkillData.skillAnimName)?(e.setAnimation(0,this.curSkillData.skillAnimName,!0),this.curSkillData.skillEffName&&(e.setEventListener(function(e,o){"start"==o.data.name&&g.default.playEff("prefabs","effect/EffSkill","EffSkill",t.curSkillData.skillEffName,t.Player,cc.v2(150,0))}),e.setCompleteListener(function(){t.recycleNodeEff()}))):console.log("\u6280\u80fd\u4e0d\u5b58\u5728\uff01")},e.prototype.recycleNodeEff=function(){var t=this.Player.getChildByName("EffSkill");cc.isValid(t)&&l.PoolMgr.getInstance().freeNode("EffSkill",t)},e.prototype.closeView=function(){this.closeUI()},s([v(cc.Node)],e.prototype,"NodePlayer",void 0),s([v(cc.Node)],e.prototype,"Player",void 0),s([v(cc.Node)],e.prototype,"NodeGuide",void 0),s([v(cc.Node)],e.prototype,"BtnClose",void 0),s([v(cc.Sprite)],e.prototype,"SpSkillIcon",void 0),s([v(cc.Label)],e.prototype,"LabSkillName",void 0),s([v(cc.RichText)],e.prototype,"LabSkillDec",void 0),s([m],e)}(c.default);n.default=I,cc._RF.pop()},{}],UITask:[function(t,e,o){"use strict";cc._RF.push(e,"90830aWjOZNSax6f6dtQccp","UITask");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("SdkMgr"),u=a("TweenMgr"),p=a("DataMgr"),d=a("PlayerMgr"),g=a("TaskMgr"),h=a("NodeTask"),f=cc._decorator,y=f.ccclass,m=f.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabTitle=null,e.SpNotGet=null,e.SpCanGet=null,e.SpBgIconArr=[],e.SpIconArr=[],e.NodeTask=null,e.BtnBack=null,e.contentTask=null,e}return r(e,t),e.prototype.onLoad=function(){this.registerEvent()},e.prototype.start=function(){this.abTypeUI(),this.registerBtnEvent(),l.SdkMgr.getInstance().showBanner(),this.initData(),this.initView()},e.prototype.abTypeUI=function(){this.LabTitle.string="\u6210\u5c31"},e.prototype.registerEvent=function(){},e.prototype.registerBtnEvent=function(){var t=this;this.BtnBack.on(cc.Node.EventType.TOUCH_END,function(){t.closeView()})},e.prototype.initData=function(){},e.prototype.initView=function(){this.initTaskListView()},e.prototype.initTaskListView=function(){for(var t=this,e=d.PlayerMgr.getInstance().geUserData().getCurTaskList(),o=[],i=0;i<e.length;i++)o.push(e[i]);var a=p.DataMgr.getInstance().getTaskCfg(),n=[];for(i=0;i<a.length;i++)o[a[i].Type-1].id==a[i].ID&&n.push(a[i]);o.sort(function(t,e){return e.state-t.state});var r=function(e){for(var i=function(i){o[e].id==n[i].ID&&s.scheduleOnce(function(){var a=cc.instantiate(t.NodeTask);a.active=!0,a.parent=t.contentTask,a.setPosition(cc.v2(-650,0)),t.loadTaskItem(a,n[i],o[e]);var r=a.getChildByName("LayoutDec");t.enterAnimForTask(a,function(){cc.isValid(r)&&(r.active=!0,u.TweenMgr.getInstance().stampAni(r))}),e==o.length-1&&(t.contentTask.getComponent(cc.Layout).updateLayout(),t.scrollViewEvent_Task())},.1*e)},a=0;a<n.length;a++)i(a)},s=this;for(i=0;i<o.length;i++)r(i)},e.prototype.playEnterAnim=function(){for(var t=this,e=function(e){o.scheduleOnce(function(){var o=t.contentTask.children[e],i=o.getChildByName("LayoutDec");t.enterAnimForTask(o,function(){cc.isValid(i)&&(i.active=!0,u.TweenMgr.getInstance().stampAni(i))}),e==t.contentTask.childrenCount-1&&(t.contentTask.getComponent(cc.Layout).updateLayout(),t.scrollViewEvent_Task())},.1*e)},o=this,i=0;i<this.contentTask.childrenCount;i++)e(i)},e.prototype.loadTaskItem=function(t,e,o){t.zIndex=-o.state,t.getComponent(h.default).initData(e,o),t.getComponent(cc.Sprite).spriteFrame=1==o.state?this.SpCanGet:this.SpNotGet;var i=p.DataMgr.getInstance().getGoodsCfg(e.RewardType);t.getChildByName("SpIconBg").getComponent(cc.Sprite).spriteFrame=this.SpBgIconArr[i.goodsQualityId-1],t.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame=this.SpIconArr[i.id-1],t.getChildByName("LabRewardNum").getComponent(cc.Label).string="x"+e.RewardNum;var a=t.getChildByName("LayoutDec");if(e.Desc1&&(a.getChildByName("LabTaskDec1").active=!0,a.getChildByName("LabTaskDec1").getComponent(cc.Label).string=e.Desc1),8==e.Type){var n="\u767d\u8272\u53ca\u4ee5\u4e0a";switch(e.TaskParameterType){case 1:n="\u767d\u8272\u53ca\u4ee5\u4e0a";break;case 2:n="\u7eff\u8272\u53ca\u4ee5\u4e0a";break;case 3:n="\u84dd\u8272\u53ca\u4ee5\u4e0a";break;case 4:n="\u7d2b\u8272\u53ca\u4ee5\u4e0a";break;case 5:n="\u6a59\u8272\u53ca\u4ee5\u4e0a"}a.getChildByName("LabTaskDec2").getComponent(cc.Label).string=""+n}else a.getChildByName("LabTaskDec2").getComponent(cc.Label).string=""+e.TaskParameter;e.Desc2&&(a.getChildByName("LabTaskDec3").active=!0,a.getChildByName("LabTaskDec3").getComponent(cc.Label).string=e.Desc2);var r=g.default.getInstance().taskNeedCountList[o.type-1];switch(t.getChildByName("SpBar").getComponent(cc.Sprite).fillRange=r/e.TaskParameter,t.getChildByName("LabTaskNum").getComponent(cc.Label).string=r+"/"+e.TaskParameter,o.state){case 0:this.taskState(t,!0,!1,!1);var s=t.getChildByName("BtnNotGet").getChildByName("LabNotGet").getComponent(cc.Label);null==e.JumpRoute?(s.string="\u672a\u5b8c\u6210",t.getChildByName("BtnNotGet").getComponent(cc.Button).interactable=!1):s.string="\u524d\u5f80";break;case 1:this.taskState(t,!1,!0,!1);break;case-1:this.taskState(t,!1,!1,!0)}},e.prototype.taskState=function(t,e,o,i){t.getChildByName("BtnNotGet").active=e,t.getChildByName("BtnGet").active=o,t.getChildByName("SpCompleted").active=i},e.prototype.enterAnimForTask=function(t,e){cc.isValid(t)&&(t.x=-650,cc.tween(t).to(.2,{position:cc.v3()}).call(function(){e&&e()}).start())},e.prototype.scrollViewEvent_Task=function(){for(var t=0;t<this.contentTask.children.length;t++){var e=this.contentTask.children[t];this.visibleRank_Task(e,-826.5,61.5)}},e.prototype.visibleRank_Task=function(t,e,o){var i=t.y+t.parent.y;t.opacity=i>e&&i<o?255:0},e.prototype.closeView=function(){l.SdkMgr.getInstance().hideBanner(),this.closeUI(),l.SdkMgr.getInstance().showInsert(l.AdType.FreeLotty)},s([m(cc.Label)],e.prototype,"LabTitle",void 0),s([m(cc.SpriteFrame)],e.prototype,"SpNotGet",void 0),s([m(cc.SpriteFrame)],e.prototype,"SpCanGet",void 0),s([m(cc.SpriteFrame)],e.prototype,"SpBgIconArr",void 0),s([m(cc.SpriteFrame)],e.prototype,"SpIconArr",void 0),s([m({type:cc.Node,tooltip:"\u4efb\u52a1\u8282\u70b9"})],e.prototype,"NodeTask",void 0),s([m(cc.Node)],e.prototype,"BtnBack",void 0),s([m(cc.Node)],e.prototype,"contentTask",void 0),s([y],e)}(c.default);n.default=v,cc._RF.pop()},{}],UITips:[function(t,e,o){"use strict";cc._RF.push(e,"b8ba3ngR21FuYdxTm0/H8bV","UITips");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipsNode=null,e.tips=null,e}return r(e,t),e.prototype.init=function(t){this.str=this.T(t)},e.prototype.uiRefresh=function(t){this.str=this.T(t),this.tweenAction.stop(),this.tipsNode.setPosition(0,200),this.tipsNode.scaleY=0,this.tips.string=t,this.tweenAction.start()},e.prototype.onLoad=function(){var t=this;this.tweenAction=cc.tween(this.tipsNode).to(.2,{scaleY:1}).delay(1).by(1.2,{position:new cc.Vec3(0,100)}).call(function(){t.closeUI()})},e.prototype.start=function(){this.tipsNode.opacity=255,this.tweenAction.stop(),this.tipsNode.setPosition(0,200),this.tipsNode.scaleY=0,this.tips.string=this.str,this.tweenAction.start()},s([p({type:cc.Node,tooltip:"layout\u8282\u70b9"})],e.prototype,"tipsNode",void 0),s([p({type:cc.RichText,tooltip:"\u6587\u5b57"})],e.prototype,"tips",void 0),s([u],e)}(c.default);n.default=d,cc._RF.pop()},{}],UITop:[function(t,e,o){"use strict";cc._RF.push(e,"11a8dapgTpGr6BtdcJA1ZM7","UITop");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("CommonCfg"),l=a("BaseUI"),u=a("AudioMgr"),p=a("UIMgr"),d=a("TimeUtils"),g=a("UIUtils"),h=a("Utils"),f=a("Config"),y=a("DataMgr"),m=a("PlayerMgr"),v=a("TimeMgr"),I=cc._decorator,k=I.ccclass,S=I.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnPower=null,e.BtnGold=null,e.BtnInGot=null,e.goldNum=null,e.goldIcon=null,e.goldLayout=null,e.inGotNum=null,e.inGotIcon=null,e.inGotLayout=null,e.powerNum=null,e.powerIcon=null,e.powerLayout=null,e.LabPowerTime=null,e.LayerTouch=null,e.goldPosArr=[],e}return r(e,t),e.prototype.start=function(){this.registerEvent(),this.registerBtnEvent(),this.initView()},e.prototype.onEnable=function(){var t=this.goldIcon.convertToWorldSpaceAR(cc.Vec2.ZERO);this.goldPos=this.goldLayout.convertToNodeSpaceAR(t)},e.prototype.registerEvent=function(){this.addEvent(f.EventName.RefreshPower,this.refreshPower),this.addEvent(f.EventName.RefreshGold,this.refreshGold),this.addEvent(f.EventName.RefreshInGot,this.refreshInGot),this.addEvent(f.EventName.RefreshPowerTime,this.refreshAndShowPowerTime)},e.prototype.registerBtnEvent=function(){this.BtnPower.on(cc.Node.EventType.TOUCH_END,function(){p.UIMgr.getInstance().openUI(f.UIID.UIGeneralWindow,-1,f.GeneralWindowType.PowerWindow)}),this.BtnGold.on(cc.Node.EventType.TOUCH_END,function(){p.UIMgr.getInstance().openUI(f.UIID.UIGeneralWindow,-1,f.GeneralWindowType.GoldWindow)}),this.BtnInGot.on(cc.Node.EventType.TOUCH_END,function(){p.UIMgr.getInstance().openUI(f.UIID.UIGeneralWindow,-1,f.GeneralWindowType.InGotWindow)})},e.prototype.initView=function(){this.userData=m.PlayerMgr.getInstance().geUserData(),this.powerNum.string=this.userData.getPowerNum()+"",this.goldNum.string=this.userData.getGoldNum()+"",this.inGotNum.string=this.userData.getInGotNum()+"",this.calcItemPos(),this.initShowPowerTime()},e.prototype.calcItemPos=function(){for(var t=0;t<this.goldLayout.childrenCount;t++){var e=this.goldLayout.children[t];this.goldPosArr.push(e.position)}},e.prototype.refreshGold=function(t,e){var o=this,i=this.userData.getGoldNum();g.UIUtils.rollNumLabelAtlas(e,this.goldNum,t,i,function(){o.goldNum.string=o.userData.getGoldNum()+""},4)},e.prototype.flyGoldAni=function(){for(var t=this,e=0,o=0,i=function(i){var n=a.goldLayout.children[i];n.active=!0,n.position=new cc.Vec3(0,0,0);var r=h.Utils.randomRang(1.8,3);n.scale=.5,cc.tween(n).delay(e).show().to(.2,{position:a.goldPosArr[i]}).to(.03,{scale:r}).to(.02,{scale:1}).delay(.2).delay(e).call(function(){cc.tween(n).to(e+.05,{position:new cc.Vec3(t.goldPos.x,t.goldPos.y)}).hide().call(function(){n.position=t.goldPosArr[i],u.AudioMgr.getInstance().playEffect(c.ComAudioId.goldEffect),cc.tween(t.goldIcon).to(.05,{scale:1.5}).to(.1,{scale:1}).start(),++o>=t.goldLayout.children.length-1&&(o=0,t.sendEvent(c.CommonEventName.GetRewardEnd))}).start()}).start(),e+=.04},a=this,n=0;n<this.goldLayout.children.length;n++)i(n)},e.prototype.refreshPower=function(t,e,o,i,a){var n=this;void 0===a&&(a=function(){}),o||(i?this.flyPowerAni_reverse(i,a):a());var r=this.userData.getPowerNum();g.UIUtils.rollNumLabelAtlas(o,this.powerNum,t,r,function(){n.powerNum.string=n.userData.getPowerNum()+""},4)},e.prototype.flyPowerAni_reverse=function(t,e){var o=this;void 0===e&&(e=function(){}),this.openTouchLayer(!0);for(var i=function(i){a.scheduleOnce(function(){var a=cc.instantiate(o.powerIcon);a.parent=o.node,cc.tween(a).to(.5,{position:cc.v3(t.x,t.y,0)}).delay(.1).call(function(){5==i&&(o.openTouchLayer(!1),e&&e()),a.destroy()}).start()},.1*i)},a=this,n=1;n<=5;n++)i(n)},e.prototype.refreshInGot=function(t,e){var o=this,i=this.userData.getInGotNum();g.UIUtils.rollNumLabelAtlas(e,this.inGotNum,t,i,function(){o.inGotNum.string=o.userData.getInGotNum()+""},4)},e.prototype.initShowPowerTime=function(){this.userData.getPowerNum()>=Number(y.DataMgr.getInstance().getParamsCfgForSingle(f.EnumParams.LimitPower).value)?this.LabPowerTime.node.active=!1:v.TimeMgr.getInstance().openTimer_power()},e.prototype.refreshAndShowPowerTime=function(t){if(this.userData.getPowerNum()>=Number(y.DataMgr.getInstance().getParamsCfgForSingle(f.EnumParams.LimitPower).value))this.LabPowerTime.node.active=!1;else{var e=d.TimeUtils.SecondToMinutes(t);this.LabPowerTime.string=""+e,this.LabPowerTime.node.active=!0}},e.prototype.openTouchLayer=function(t){this.LayerTouch.active=t},s([S(cc.Node)],e.prototype,"BtnPower",void 0),s([S(cc.Node)],e.prototype,"BtnGold",void 0),s([S(cc.Node)],e.prototype,"BtnInGot",void 0),s([S(cc.Label)],e.prototype,"goldNum",void 0),s([S(cc.Node)],e.prototype,"goldIcon",void 0),s([S(cc.Node)],e.prototype,"goldLayout",void 0),s([S(cc.Label)],e.prototype,"inGotNum",void 0),s([S(cc.Node)],e.prototype,"inGotIcon",void 0),s([S(cc.Node)],e.prototype,"inGotLayout",void 0),s([S(cc.Label)],e.prototype,"powerNum",void 0),s([S(cc.Node)],e.prototype,"powerIcon",void 0),s([S(cc.Node)],e.prototype,"powerLayout",void 0),s([S(cc.Label)],e.prototype,"LabPowerTime",void 0),s([S({type:cc.Node,tooltip:"\u89e6\u6478\u5c4f\u853d\u5c42"})],e.prototype,"LayerTouch",void 0),s([k],e)}(l.default);n.default=C,cc._RF.pop()},{}],UITouch:[function(t,e,o){"use strict";cc._RF.push(e,"6efe8537FJKFoMtDV9psOIv","UITouch");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("BaseUI"),l=a("Appcfg"),u=cc._decorator,p=u.ccclass,d=u.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchNode=null,e.needEffect=!0,e.touchNodes=[],e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.addEvent(l.BaseEventName.blocktouch,this.onBlockTouch),this.node.on(cc.Node.EventType.TOUCH_START,function(e){if(t.needEffect){var o;t.touchNodes.length>0?(o=t.touchNodes.pop()).active=!0:((o=cc.instantiate(t.touchNode)).active=!0,o.parent=t.node);var i=t.node.convertToNodeSpaceAR(e.getLocation());o.setPosition(i),t.scheduleOnce(function(){o.active=!1,t.touchNodes.push(o)},.5)}}),this.node._touchListener.setSwallowTouches(!1)},e.prototype.onBlockTouch=function(t){this.node._touchListener.setSwallowTouches(!t)},s([d(cc.Node)],e.prototype,"touchNode",void 0),s([d({displayName:"\u662f\u5426\u9700\u8981\u70b9\u51fb\u7279\u6548"})],e.prototype,"needEffect",void 0),s([p],e)}(c.default);n.default=g,cc._RF.pop()},{}],UIUtils:[function(t,e,o){"use strict";cc._RF.push(e,"02b4f3KsDZMT7SinMRf3crw","UIUtils");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.UIUtils=void 0;var a=function(){function t(){}return t.rollNumLabelAtlas=function(t,e,o,i,a,n){void 0===n&&(n=6);var r=o,s=10*n,c=0,l=r/s+1;r<=s?(s=r,l=1):s+=1;var u=function(){if(t){if(c!=r){(c+=l)>r&&(l-=c-r,c=r);var o=Number(e.string),a=Math.floor(o+l).toFixed(0)+"";e.string=a}}else c!=r&&((c+=l)>r&&(l=0,c=r),(o=Number(e.string))>i)&&(a=Math.floor(o-l).toFixed(0)+"",e.string=a)};s>0?cc.tween(e.node).call(function(){u()}).delay(.05).union().repeat(s).call(function(){a()}).start():a()},t.scheduleOnce=function(t,e,o){cc.director.getScheduler().enableForTarget(e),cc.director.getScheduler().schedule(t,e,1,0,o,!1)},t.schedule=function(t,e,o){cc.director.getScheduler().enableForTarget(e),cc.director.getScheduler().schedule(t,e,o,cc.macro.REPEAT_FOREVER,0,!1)},t.unSchedule=function(t,e){cc.director.getScheduler().enableForTarget(e),cc.director.getScheduler().isScheduled(t,e)&&cc.director.getScheduler().unschedule(t,e)},t}();i.UIUtils=a,cc._RF.pop()},{}],UserData:[function(t,e,o){"use strict";cc._RF.push(e,"b1a7cBMu6FI4byGElcDxX5r","UserData");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.TaskData=n.SkillBookSaveData=n.EquipData=n.UserData=void 0;var s=a("BaseData"),c=a("EventMgr"),l=a("UIMgr"),u=a("TimeUtils"),p=a("Utils"),d=a("Config"),g=a("DataMgr"),h=a("PlayerMgr"),f=a("TaskMgr"),y=a("TimeMgr"),m=function(){this.userID="",this.powerNum=1e3,this.goldNum=1e5,this.inGotNum=1e5,this.curSec=1,this.curLevel=1,this.mostLevelForSec=[1,1],this.inGotGetCount=1,this.lastLoginTime=0,this.lastOfflineTime=0,this.loginDay=0,this.onHookTime=0,this.skillBookArr=[],this.bagIndexCount=18,this.curWearEquip=[],this.ownedEquip=[[],[],[],[],[],[]],this.equipIDCard=0,this.shopDrawRewardList=[],this.boxOpenTimeArr=[],this.wearSalutationId=1,this.ownedSalutationId=[1],this.isNewSalutation=!1,this.curTaskArr=[],this.taskNeedCountArr=[],this.completedTaskCount=0,this.wearEquipQualityArr=[0,0,0,0,0,0],this.enterFirstSecCount=0,this.enterSecCountArr=[],this.curGameMultiply=1,this.curUnlockMultiply=1,this.ownedPetsArr=[],this.firstTouchBothNeed=0,this.box2CountForSec=[],this.box3CountForSec=[],this.equipIdCount={},this.isFirstEnterGame=!0},v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ecrypt=!1,e.gameKey=d.GameConfig.AppCacheName+"udata",e.isNewUser=!1,e}return r(e,t),e.prototype.createData=function(){return this.data=new m,this.data.userID=p.Utils.guid(),this.data.goldNum=Number(g.DataMgr.getInstance().getParamsCfgForSingle(d.EnumParams.StartGold).value),this.data.inGotNum=Number(g.DataMgr.getInstance().getParamsCfgForSingle(d.EnumParams.StartIngot).value),this.data.powerNum=Number(g.DataMgr.getInstance().getParamsCfgForSingle(d.EnumParams.StartPower).value),this.data},e.prototype.initData=function(t){t&&(this.isNewUser=!0),this.data.equipIdCount||(this.data.equipIdCount=new Map)},e.prototype.getIsNewUser=function(){return this.isNewUser},e.prototype.getUserID=function(){return null==this.data.userID&&(this.data.userID=p.Utils.guid()),this.data.userID},e.prototype.selfSaveData=function(){this.saveData()},e.prototype.getPowerNum=function(){return null==this.data.powerNum&&(this.data.powerNum=0),this.data.powerNum},e.prototype.addPowerNumForLimit=function(t,e){var o=Number(g.DataMgr.getInstance().getParamsCfgForSingle(d.EnumParams.LimitPower).value);return this.data.powerNum>=o||(this.data.powerNum+=t,this.data.powerNum>=o&&(this.data.powerNum=o),this.saveData(),c.EventMgr.getInstance().emit(d.EventName.RefreshPower,t,!0,e),!1)},e.prototype.addPowerNum=function(t,e){this.data.powerNum+=t,this.data.powerNum>=Number(g.DataMgr.getInstance().getParamsCfgForSingle(d.EnumParams.LimitPower).value)&&(y.TimeMgr.getInstance().closeTimer_power(),c.EventMgr.getInstance().emit(d.EventName.RefreshPowerTime,0)),this.saveData(),c.EventMgr.getInstance().emit(d.EventName.RefreshPower,t,!0,e)},e.prototype.subPowerNum=function(t,e,o){return void 0===o&&(o=function(){}),this.data.powerNum<t?(l.UIMgr.getInstance().openUI(d.UIID.UIGeneralWindow,-1,d.GeneralWindowType.PowerWindow),!1):(h.PlayerMgr.getInstance().getMainTaskData().mainTask(8,t),this.data.powerNum-=t,c.EventMgr.getInstance().emit(d.EventName.RefreshPower,t,!1,!1,e,function(){o&&o(),h.PlayerMgr.getInstance().geUserData().getPowerNum()<Number(g.DataMgr.getInstance().getParamsCfgForSingle(d.EnumParams.LimitPower).value)&&y.TimeMgr.getInstance().openTimer_power()}),this.saveData(),!0)},e.prototype.getGoldNum=function(){return null==this.data.goldNum&&(this.data.goldNum=0),this.data.goldNum},e.prototype.addGoldNum=function(t,e){this.data.goldNum+=t,this.saveData(),c.EventMgr.getInstance().emit(d.EventName.RefreshGold,t,!0,e),c.EventMgr.getInstance().emit(d.EventName.RefreshGoldNumAndShow)},e.prototype.subGoldNum=function(t){return this.data.goldNum<t?(l.UIMgr.getInstance().openUI(d.UIID.UIGeneralWindow,-1,d.GeneralWindowType.GoldWindow),!1):(t||(t=0),this.data.goldNum-=t,c.EventMgr.getInstance().emit(d.EventName.RefreshGold,t,!1),c.EventMgr.getInstance().emit(d.EventName.RefreshGoldNumAndShow),this.saveData(),!0)},e.prototype.getInGotNum=function(){return null==this.data.inGotNum&&(this.data.inGotNum=0),this.data.inGotNum},e.prototype.addInGotNum=function(t,e){this.data.inGotNum+=t,this.saveData(),c.EventMgr.getInstance().emit(d.EventName.RefreshInGot,t,!0,e),c.EventMgr.getInstance().emit(d.EventName.RefreshInGotNumAndShow)},e.prototype.subInGotNum=function(t){return this.data.inGotNum<t?(l.UIMgr.getInstance().openUI(d.UIID.UIGeneralWindow,-1,d.GeneralWindowType.InGotWindow),!1):(this.data.inGotNum-=t,c.EventMgr.getInstance().emit(d.EventName.RefreshInGot,t,!1),c.EventMgr.getInstance().emit(d.EventName.RefreshInGotNumAndShow),this.saveData(),!0)},e.prototype.getCurSec=function(){return this.data.curSec||(this.data.curSec=1),this.data.curSec},e.prototype.setCurSec=function(t){this.data.curSec=t,this.data.curLevel=1,this.setMostLevelForCurSec(this.data.curSec,this.data.curLevel),h.PlayerMgr.getInstance().getMainTaskData().mainTask(1,this.data.curSec-1,!0),this.saveData()},e.prototype.addCurSec=function(){this.data.curSec+=1,this.data.curLevel=1;var t=g.DataMgr.getInstance().getAllSecCfg();this.data.curSec>t.length&&(this.data.curSec=t.length),this.setMostLevelForCurSec(this.data.curSec,this.data.curLevel),h.PlayerMgr.getInstance().getMainTaskData().mainTask(1),this.data.curLevel=1,h.PlayerMgr.getInstance().getMainTaskData().mainTask(1,this.data.curSec-1,!0),this.saveData()},e.prototype.getMostLevelForCurSec=function(){return this.data.mostLevelForSec||(this.data.mostLevelForSec=[0,1]),this.data.mostLevelForSec},e.prototype.setMostLevelForCurSec=function(t,e){this.data.mostLevelForSec||(this.data.mostLevelForSec=[0,1]),t==this.data.mostLevelForSec[0]?e>this.data.mostLevelForSec[1]&&(this.data.mostLevelForSec[1]=e,this.saveData()):t>this.data.mostLevelForSec[0]&&(this.data.mostLevelForSec[0]=t,this.data.mostLevelForSec[1]=e,this.saveData())},e.prototype.isEndForSec=function(){var t=this.getCurSec(),e=g.DataMgr.getInstance().getSecCfg(t).levelCount;return this.getCurLevel()>=e},e.prototype.getCurLevel=function(){return this.data.curLevel||(this.data.curLevel=1),this.data.curLevel},e.prototype.setCurLevel=function(t){this.data.curLevel=t,this.setMostLevelForCurSec(this.data.curSec,this.data.curLevel),this.saveData()},e.prototype.addCurLevel=function(){var t=g.DataMgr.getInstance().getSecCfg(this.data.curSec);this.data.curLevel+=1,this.data.curLevel>t.levelCount&&(this.data.curLevel=t.levelCount),this.setMostLevelForCurSec(this.data.curSec,this.data.curLevel),this.saveData()},e.prototype.resetLevel=function(){this.data.curSec=1,this.data.curLevel=1,this.saveData()},e.prototype.getInGotGetCount=function(){return this.data.inGotGetCount||(this.data.inGotGetCount=1),this.data.inGotGetCount},e.prototype.addInGotGetCount=function(t){void 0===t&&(t=1),this.data.inGotGetCount||(this.data.inGotGetCount=1),this.data.inGotGetCount+=t,this.data.inGotGetCount>15&&(this.data.inGotGetCount=15),this.saveData()},e.prototype.resetInGotGetCount=function(){this.data.inGotGetCount||(this.data.inGotGetCount=1),this.data.inGotGetCount=1,this.saveData()},e.prototype.getSkillBookArr=function(){return this.data.skillBookArr||(this.data.skillBookArr=[]),this.data.skillBookArr},e.prototype.getSkillBookForId=function(t){var e={id:t,level:1,iCount:0,videoCount:0};if(!this.data.skillBookArr)return this.data.skillBookArr=[],e;for(var o=0;o<this.data.skillBookArr.length;o++)if(t==this.data.skillBookArr[o].id)return this.data.skillBookArr[o];return e},e.prototype.setSkillBookData=function(t){this.data.skillBookArr||(this.data.skillBookArr=[]);var e=this.isExistSkillBookId(t.id);if(-1!=e)this.data.skillBookArr[e].iCount=t.iCount,this.data.skillBookArr[e].level=t.level,this.data.skillBookArr[e].videoCount=t.videoCount;else{var o={id:t.id,level:t.level,iCount:t.iCount,videoCount:0};this.data.skillBookArr.push(o)}this.saveData()},e.prototype.subSkillBookCount=function(t,e){void 0===e&&(e=1);for(var o=this.getSkillBookArr(),i=0;i<o.length;i++)if(o[i].id==t)return o[i].iCount-=e,void this.saveData()},e.prototype.addSkillBookId=function(t,e){void 0===e&&(e=1),this.data.skillBookArr||(this.data.skillBookArr=[]);var o=this.isExistSkillBookId(t);if(-1!=o)return h.PlayerMgr.getInstance().getMainTaskData().mainTask(5),this.data.skillBookArr[o].iCount+=1,void this.saveData();h.PlayerMgr.getInstance().getMainTaskData().mainTask(5);var i={id:t,level:1,iCount:0,videoCount:0};this.data.skillBookArr.push(i),this.saveData()},e.prototype.isExistSkillBookId=function(t){this.data.skillBookArr||(this.data.skillBookArr=[]);for(var e=0;e<this.data.skillBookArr.length;e++)if(t==this.data.skillBookArr[e].id)return e;return-1},e.prototype.getEquipIDCard=function(){return null==this.data.equipIDCard&&(this.data.equipIDCard=0),this.data.equipIDCard+=1,this.data.equipIDCard},e.prototype.getWearEquipList=function(){return this.data.curWearEquip||(this.data.curWearEquip=[]),this.data.curWearEquip},e.prototype.getOwnedEquipList=function(){return this.data.ownedEquip||(this.data.ownedEquip=[[],[],[],[],[],[]]),this.data.ownedEquip},e.prototype.isExistEquip=function(t){this.data.curWearEquip||(this.data.curWearEquip=[]);for(var e=0;e<this.data.curWearEquip.length;e++)if(t==this.data.curWearEquip[e].type)return this.data.curWearEquip[e];return null},e.prototype.addManyEquip=function(t){for(var e=0;e<t.length;e++){var o=t[e];if(!o)return void console.log("\u6570\u636e\u51fa\u9519");this.data.ownedEquip||(this.data.ownedEquip=[[],[],[],[],[],[]]),this.data.ownedEquip[o.type-1].push(o)}h.PlayerMgr.getInstance().getMainTaskData().mainTask(10,t.length),this.saveData()},e.prototype.addEquipForId=function(t){var e=g.DataMgr.getInstance().getEquipCfg(t),o={id:t,type:e.equipType,quality:e.qualityId,strengthenLv:0,isUnlock:!0,isWear:!1,videoCount:0,IDCard:this.getEquipIDCard(),starLevel:0};this.data.ownedEquip||(this.data.ownedEquip=[[],[],[],[],[],[]]),h.PlayerMgr.getInstance().getMainTaskData().mainTask(10),this.data.ownedEquip[o.type-1].push(o),this.saveData()},e.prototype.addBaseEquip=function(t){var e={id:t.id,type:t.equipType,quality:t.qualityId,strengthenLv:0,isUnlock:!0,isWear:!1,videoCount:0,IDCard:this.getEquipIDCard(),starLevel:0};this.data.ownedEquip||(this.data.ownedEquip=[[],[],[],[],[],[]]),h.PlayerMgr.getInstance().getMainTaskData().mainTask(10),this.data.ownedEquip[e.type-1].push(e),this.saveData()},e.prototype.addEquip=function(t){t?(this.data.ownedEquip||(this.data.ownedEquip=[[],[],[],[],[],[]]),h.PlayerMgr.getInstance().getMainTaskData().mainTask(10),this.data.ownedEquip[t.type-1].push(t),this.saveData()):console.log("\u6570\u636e\u51fa\u9519")},e.prototype.setEquip=function(t,e){if(void 0===e&&(e=!0),t){if(e)for(var o=this.data.ownedEquip[t.type-1],i=0;i<o.length;i++){var a=o[i];if(t.id==a.id&&t.type==a.type&&t.IDCard==a.IDCard){this.data.ownedEquip[t.type-1][i]=t;break}}else for(i=0;i<this.data.curWearEquip.length;i++)if(a=this.data.curWearEquip[i],t.id==a.id&&t.type==a.type){this.data.curWearEquip[i]=t;break}this.saveData()}else console.log("\u6570\u636e\u51fa\u9519")},e.prototype.abandonEquip=function(t){if(this.data.ownedEquip)if(t){for(var e=this.data.ownedEquip[t.type-1],o=0;o<e.length;o++){var i=e[o];if(t.id==i.id&&t.strengthenLv==i.strengthenLv&&t.IDCard==i.IDCard){this.data.ownedEquip[t.type-1].splice(o,1);break}}this.saveData()}else console.log("\u6570\u636e\u51fa\u9519");else this.data.ownedEquip=[[],[],[],[],[],[]]},e.prototype.replaceEquip=function(t,e){if(t&&e){for(var o=0;o<this.data.curWearEquip.length;o++){var i=this.data.curWearEquip[o];if(t.id==i.id&&t.strengthenLv==i.strengthenLv&&t.IDCard==i.IDCard){this.data.curWearEquip[o]=e,this.data.curWearEquip[o].isWear=!0;break}}var a=this.data.ownedEquip[e.type-1];for(o=0;o<a.length;o++)if(i=a[o],e.id==i.id&&e.strengthenLv==i.strengthenLv&&e.IDCard==i.IDCard){this.data.ownedEquip[t.type-1][o]=t,this.data.ownedEquip[t.type-1][o].isWear=!1;break}this.saveData()}else console.log("\u6570\u636e\u51fa\u9519")},e.prototype.wearEquip=function(t){if(t){for(var e=this.data.ownedEquip[t.type-1],o=0;o<e.length;o++){var i=e[o];if(t.id==i.id&&t.strengthenLv==i.strengthenLv&&t.IDCard==i.IDCard){this.data.ownedEquip[t.type-1].splice(o,1);break}}t.isWear=!0,this.data.curWearEquip.push(t),this.saveData()}else console.log("\u6570\u636e\u51fa\u9519")},e.prototype.unloadEquip=function(t){if(t){t.isWear=!1,this.data.ownedEquip[t.type-1].push(t);for(var e=0;e<this.data.curWearEquip.length;e++){var o=this.data.curWearEquip[e];if(t.id==o.id&&t.strengthenLv==o.strengthenLv&&t.IDCard==o.IDCard){this.data.curWearEquip.splice(e,1);break}}this.saveData()}else console.log("\u6570\u636e\u51fa\u9519")},e.prototype.strengthenEquip=function(t,e){if(void 0===e&&(e=!1),t){if(e)this.setEquip(t);else for(var o=0;o<this.data.curWearEquip.length;o++){var i=this.data.curWearEquip[o];if(t.id==i.id&&t.type==i.type&&t.IDCard==i.IDCard){this.data.curWearEquip[o].strengthenLv=t.strengthenLv;break}}this.saveData()}else console.log("\u6570\u636e\u51fa\u9519")},e.prototype.unlockEquip=function(t){if(t){for(var e=0;e<this.data.ownedEquip.length;e++)if(t.id==this.data.ownedEquip[t.type-1][e].id){this.data.ownedEquip[t.type-1][e].isUnlock=t.isUnlock;break}this.saveData()}else console.log("\u6570\u636e\u51fa\u9519")},e.prototype.getShopDrawRewardCount=function(t){null==this.data.shopDrawRewardList&&(this.data.shopDrawRewardList=[]);var e=this.isExistShopList(t);return 0==e[0]?0:this.data.shopDrawRewardList[e[1]].iCount},e.prototype.addShopDrawReward=function(t){null==this.data.shopDrawRewardList&&(this.data.shopDrawRewardList=[]);var e=this.isExistShopList(t);if(0==e[0]){var o={id:t,iCount:1};this.data.shopDrawRewardList.push(o)}else this.data.shopDrawRewardList[e[1]].iCount+=1;this.saveData()},e.prototype.isExistShopList=function(t){if(null==this.data.shopDrawRewardList)return this.data.shopDrawRewardList=[],[0,0];for(var e=0;e<this.data.shopDrawRewardList.length;e++)if(t==this.data.shopDrawRewardList[e].id)return[1,e];return[0,0]},e.prototype.resetDrawRewardCount=function(t){null==this.data.shopDrawRewardList&&(this.data.shopDrawRewardList=[]);var e=this.isExistShopList(t);if(0==e[0]){var o={id:t,iCount:1};this.data.shopDrawRewardList.push(o)}else this.data.shopDrawRewardList[e[1]].iCount=0;this.saveData()},e.prototype.getWearSalutationId=function(){return null==this.data.wearSalutationId&&(this.data.wearSalutationId=-1),this.data.wearSalutationId},e.prototype.setWearSalutation=function(t){this.data.wearSalutationId=t,this.saveData()},e.prototype.getOwnedSalutation=function(){return this.data.ownedSalutationId||(this.data.ownedSalutationId=[]),this.data.ownedSalutationId},e.prototype.addSalutation=function(t){this.data.ownedSalutationId||(this.data.ownedSalutationId=[]),this.isExistSalutation(t)||(this.setIsNewSalutation(!0),this.data.ownedSalutationId.push(t),this.saveData())},e.prototype.isExistSalutation=function(t){for(var e=this.getOwnedSalutation(),o=0;o<e.length;o++)if(t==e[o])return!0;return!1},e.prototype.autoAddSalutation=function(){for(var t=h.PlayerMgr.getInstance().geUserData(),e=g.DataMgr.getInstance().getSalutationCfg(),o=0;o<e.length;o++)t.getCompletedTaskCount()>=e[o].CompleteTaskNum&&t.addSalutation(e[o].ID)},e.prototype.getIsNewSalutation=function(){return this.data.isNewSalutation||(this.data.isNewSalutation=!1),this.data.isNewSalutation},e.prototype.setIsNewSalutation=function(t){this.data.isNewSalutation||(this.data.isNewSalutation=!1),this.data.isNewSalutation!=t&&(this.data.isNewSalutation=t,this.saveData())},e.prototype.getLastLoginTime=function(){return null==this.data.lastLoginTime&&(this.data.lastLoginTime=0),this.data.lastLoginTime},e.prototype.refreshLastLoginTime=function(){var t=u.TimeUtils.GetTimeBySecond();this.data.lastLoginTime=t,this.saveData()},e.prototype.getLastOfflineTime=function(){return null==this.data.lastOfflineTime&&(this.data.lastOfflineTime=0),0==this.data.lastOfflineTime&&(this.data.lastOfflineTime=u.TimeUtils.GetTimeBySecond(),this.saveData()),this.data.lastOfflineTime},e.prototype.refreshLastOfflineTime=function(){var t=u.TimeUtils.GetTimeBySecond();this.data.lastOfflineTime=t,this.saveData()},e.prototype.getOnHookTime=function(){return null==this.data.onHookTime&&(this.data.onHookTime=0),this.data.onHookTime},e.prototype.setOnHookTime=function(t){this.data.onHookTime=t,this.saveData()},e.prototype.addOnHookTime=function(t){null==this.data.onHookTime&&(this.data.onHookTime=0),this.data.onHookTime+=t;var e=60*Number(g.DataMgr.getInstance().getParamsCfgForSingle(d.EnumParams.OnHookMaxTime).value);this.data.onHookTime>=e&&(this.data.onHookTime=e),this.saveData()},e.prototype.resetOnHookTime=function(){this.data.onHookTime=0,this.saveData()},e.prototype.getCurTaskList=function(){return this.data.curTaskArr||(this.data.curTaskArr=[]),this.data.curTaskArr},e.prototype.setTaskList=function(t){this.data.curTaskArr||(this.data.curTaskArr=[]),this.data.curTaskArr[t.type-1]?this.data.curTaskArr[t.type-1]=t:this.data.curTaskArr.push(t),this.saveData()},e.prototype.getTaskNeedCountArr=function(){return this.data.taskNeedCountArr||(this.data.taskNeedCountArr=[]),this.data.taskNeedCountArr},e.prototype.setTaskNeedCountArr=function(t,e){this.data.taskNeedCountArr||(this.data.taskNeedCountArr=[]),this.data.taskNeedCountArr[t-1]?this.data.taskNeedCountArr[t-1]=e:this.data.taskNeedCountArr.push(e),this.saveData()},e.prototype.getWearedEquipQualityList=function(){return this.data.wearEquipQualityArr||(this.data.wearEquipQualityArr=[0,0,0,0,0,0]),this.data.wearEquipQualityArr},e.prototype.refreshWearEquipQuality=function(t,e){if(this.data.wearEquipQualityArr||(this.data.wearEquipQualityArr=[0,0,0,0,0,0]),this.data.wearEquipQualityArr[t-1]<e){this.data.wearEquipQualityArr[t-1]=e;var o=h.PlayerMgr.getInstance().geUserData().getCurTaskList()[7].id;f.default.getInstance().wearEquipQualityForTask(o),this.saveData()}},e.prototype.getLoginDay=function(){return this.data.loginDay||(this.data.loginDay=0),this.data.loginDay},e.prototype.addLoginDay=function(){this.data.loginDay||(this.data.loginDay=0),this.data.loginDay+=1,this.saveData()},e.prototype.getCompletedTaskCount=function(){return this.data.completedTaskCount||(this.data.completedTaskCount=0),this.data.completedTaskCount},e.prototype.addCompletedTaskCount=function(t){void 0===t&&(t=1),this.data.completedTaskCount||(this.data.completedTaskCount=0),this.data.completedTaskCount+=t,this.saveData()},e.prototype.getEnterFirstSecCount=function(){return null==this.data.enterFirstSecCount&&(this.data.enterFirstSecCount=0),this.data.enterFirstSecCount},e.prototype.addEnterFirstSecCount=function(t){void 0===t&&(t=1),null==this.data.enterFirstSecCount&&(this.data.enterFirstSecCount=0),this.data.enterFirstSecCount+=t,this.saveData()},e.prototype.getCurGameMultiply=function(){return this.data.curGameMultiply||(this.data.curGameMultiply=1),this.data.curGameMultiply},e.prototype.setCurGameMultiply=function(t){this.data.curGameMultiply||(this.data.curGameMultiply=1),this.data.curGameMultiply!=t&&(this.data.curGameMultiply=t,this.saveData())},e.prototype.getCurUnlockMultiply=function(){return this.data.curUnlockMultiply||(this.data.curUnlockMultiply=1),this.data.curUnlockMultiply},e.prototype.addCurUnlockMultiply=function(){this.data.curUnlockMultiply||(this.data.curUnlockMultiply=1),this.data.curUnlockMultiply+=1,this.saveData()},e.prototype.getBagIndexCount=function(){return this.data.bagIndexCount||(this.data.bagIndexCount=18),this.data.bagIndexCount},e.prototype.addbagIndexCount=function(t){void 0===t&&(t=6),this.data.bagIndexCount||(this.data.bagIndexCount=18),this.data.bagIndexCount+=t,this.saveData()},e.prototype.getOwnedPetsList=function(){return this.data.ownedPetsArr||(this.data.ownedPetsArr=[]),this.data.ownedPetsArr},e.prototype.addPetToList=function(t){this.data.ownedPetsArr||(this.data.ownedPetsArr=[]),this.data.ownedPetsArr[t-1]=t,this.saveData()},e.prototype.isExistPetFotId=function(t){return this.data.ownedPetsArr?!!this.data.ownedPetsArr[t-1]:(this.data.ownedPetsArr=[],!1)},e.prototype.getEnterSecCountForSecId=function(t){return this.data.enterSecCountArr||(this.data.enterSecCountArr=[]),this.data.enterSecCountArr[t-1]||(this.data.enterSecCountArr[t-1]=0),this.data.enterSecCountArr[t-1]},e.prototype.addEnterSecCountForSecId=function(t){this.data.enterSecCountArr||(this.data.enterSecCountArr=[]),this.data.enterSecCountArr[t-1]||(this.data.enterSecCountArr[t-1]=0),this.data.enterSecCountArr[t-1]+=1,this.saveData()},e.prototype.getBoxOpenTimeForBoxId=function(t){return this.data.boxOpenTimeArr||(this.data.boxOpenTimeArr=[]),this.data.boxOpenTimeArr[t-1]||(this.data.boxOpenTimeArr[t-1]=0),this.data.boxOpenTimeArr[t-1]},e.prototype.addBoxOpenTimeForBoxId=function(t){this.data.boxOpenTimeArr||(this.data.boxOpenTimeArr=[]),this.data.boxOpenTimeArr[t-1]||(this.data.boxOpenTimeArr[t-1]=0),this.data.boxOpenTimeArr[t-1]+=1,this.saveData()},e.prototype.getIsFirstBothNeed=function(){return null==this.data.firstTouchBothNeed&&(this.data.firstTouchBothNeed=0),this.data.firstTouchBothNeed},e.prototype.addIsFirstBothNeed=function(){null==this.data.firstTouchBothNeed&&(this.data.firstTouchBothNeed=0),this.data.firstTouchBothNeed+=1,this.saveData()},e.prototype.getBox2CountForSec=function(t){return this.data.box2CountForSec||(this.data.box2CountForSec=[]),null==this.data.box2CountForSec[t-1]&&(this.data.box2CountForSec[t-1]=0),this.data.box2CountForSec[t-1]},e.prototype.addBox2CountForSec=function(t){this.data.box2CountForSec||(this.data.box2CountForSec=[]),null==this.data.box2CountForSec[t-1]&&(this.data.box2CountForSec[t-1]=0),this.data.box2CountForSec[t-1]+=1,this.saveData()},e.prototype.getBox3CountForSec=function(t){return this.data.box3CountForSec||(this.data.box3CountForSec=[]),null==this.data.box3CountForSec[t-1]&&(this.data.box3CountForSec[t-1]=0),this.data.box3CountForSec[t-1]},e.prototype.addBox3CountForSec=function(t){this.data.box3CountForSec||(this.data.box3CountForSec=[]),null==this.data.box3CountForSec[t-1]&&(this.data.box3CountForSec[t-1]=0),this.data.box3CountForSec[t-1]+=1,this.saveData()},e.prototype.getEquipCountByid=function(t){return this.data.equipIdCount[t]||(this.data.equipIdCount[t]=0),this.data.equipIdCount[t]},e.prototype.setEquipCountByid=function(t,e){console.log("\u83b7\u53d6\u5404\u88c5\u5907\u5347\u7ea7\u6b21\u6570",typeof this.data.equipIdCount),this.data.equipIdCount[t]||(this.data.equipIdCount[t]=0);var o=this.data.equipIdCount[t];o+=e,this.data.equipIdCount[t]=o,this.saveData()},e.prototype.getIsFirstEnterGame=function(){return null==this.data.isFirstEnterGame&&(this.data.isFirstEnterGame=!0),this.data.isFirstEnterGame},e.prototype.setIsFirstEnterGame=function(t){null==this.data.isFirstEnterGame&&(this.data.isFirstEnterGame=!0),this.data.isFirstEnterGame=t,this.saveData()},e}(s.BaseData);n.UserData=v,n.EquipData=function(){},n.SkillBookSaveData=function(){},n.TaskData=function(){},cc._RF.pop()},{}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"c3094hfLydDo5f53IYbb0ej","Utils");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.Utils=void 0;var a=function(){function t(){}return t.formatStr=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return cc.js.formatStr(t,e)},t.StringFormat=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];for(var i=0;i<e.length;i++){var a=new RegExp("\\{"+i+"\\}","gm");t=t.replace(a,arguments[i+1])}return t},t.formatGold=function(t){return(t+"").replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,")},t.randomRang=function(t,e){return Math.floor(Math.random()*(e-t))+t},t.getRange=function(t,e){for(var o=[],i=t;i<e+1;i++)o.push(i);return o},t.weight_randSingle=function(t){return!(t<=0)&&(t>=100||Math.floor(100*Math.random())<=t)},t.weight_rand=function(t){for(var e,o=0,i=!1,a=function(t,e){var o=Math.min(t,e),i=Math.max(t,e),a=1;if(0===t||0===e)return i;for(var n=o;n>=1;n--)if(o%n==0&&i%n==0){a=n;break}return a},n=new Array,r=0;r<t.length;r++)void 0!==t[r].weight?-1!==t[r].weight.toString().indexOf("%")?(e=Math.floor(t[r].weight.toString().replace("%","")),i=!0):e=Math.floor(100*t[r].weight):e=0,n[r]=e,o=a(o,e);var s=new Array,c=0,l=0;if(i){for(r=0;r<t.length;r++){l=n[r];for(var u=0;u<l&&!(c>=100);u++)s.push(r),c++}for(;c<100;)s.push(t.length-1),c++}else for(r=0;r<t.length;r++){for(l=n[r]/o,u=0;u<l;u++)s.push(r);c+=l}return t[s[Math.floor(Math.random()*c)]]},t.encrypt=function(t,e){if(null==e||e.length<=0)return null;for(var o="",i=0;i<e.length;i++)o+=e.charCodeAt(i).toString();var a=Math.floor(o.length/5),n=parseInt(o.charAt(a)+o.charAt(2*a)+o.charAt(3*a)+o.charAt(4*a)+o.charAt(5*a)),r=Math.ceil(e.length/2),s=Math.pow(2,31)-1;if(n<2)return null;var c=Math.round(1e9*Math.random())%1e8;for(o+=c;o.length>10;)o=(parseInt(o.substring(0,10))+parseInt(o.substring(10,o.length))).toString();o=(n*o+r)%s;var l="",u="";for(i=0;i<t.length;i++){var p=(t.charCodeAt(i)^Math.floor(o/s*255))+"";u+=(l=parseInt(p))<16?"0"+l.toString(16):l.toString(16),o=(n*o+r)%s}for(c=c.toString(16);c.length<8;)c="0"+c;return u+c},t.decrypt=function(t,e){if(!(null==t||t.length<8||null==e||e.length<=0)){for(var o="",i=0;i<e.length;i++)o+=e.charCodeAt(i).toString();var a=Math.floor(o.length/5),n=parseInt(o.charAt(a)+o.charAt(2*a)+o.charAt(3*a)+o.charAt(4*a)+o.charAt(5*a)),r=Math.round(e.length/2),s=Math.pow(2,31)-1,c=parseInt(t.substring(t.length-8,t.length),16);for(t=t.substring(0,t.length-8),o+=c;o.length>10;)o=(parseInt(o.substring(0,10))+parseInt(o.substring(10,o.length))).toString();o=(n*o+r)%s;var l="",u="";for(i=0;i<t.length;i+=2)l=parseInt((parseInt(t.substring(i,i+2),16)^Math.floor(o/s*255))+""),u+=String.fromCharCode(l),o=(n*o+r)%s;return u}},t.randomDiffIndex=function(t,e,o){var i=this.randomRang(0,t);this.checkExist(i,o)?this.randomDiffIndex(t,e,o):(o.push(i),o.length<e&&this.randomDiffIndex(t,e,o))},t.checkExist=function(t,e){for(var o=0;o<e.length;o++)if(e[o]==t)return!0;return!1},t.mapToJson=function(t){return this.MapTOJson(t)},t.jsonToMap=function(t){for(var e=JSON.parse(t),o=new Map,i=0,a=Object.keys(e);i<a.length;i++){var n=a[i];o.set(Number(n),Number(e[n]))}return o},t.MapTOJson=function(t){var e="{",o=1;return t.forEach(function(t,i,a){a.size==o?e+='"'+i+'":"'+t+'"':e+='"'+i+'":"'+t+'",',o++}),e+="}"},t.isCardID=function(t){var e=0;if(!/^\d{17}(\d|x)$/i.test(t))return-1;if(t=t.replace(/x$/i,"a"),null=={11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f",31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"\u65b0\u7586",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",91:"\u56fd\u5916"}[parseInt(t.substr(0,2))])return-2;var o=t.substr(6,4)+"-"+Number(t.substr(10,2))+"-"+Number(t.substr(12,2)),i=new Date(o.replace(/-/g,"/"));if(o!=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate())return-3;for(var a=17;a>=0;a--)e+=Math.pow(2,a)%11*parseInt(t.charAt(17-a),11);return e%11!=1?-4:0},t.checkAdult=function(t){var e=parseInt(t.substring(6,14))+18e4,o=new Date,i=o.getFullYear(),a=o.getMonth()+1,n=o.getDate();return parseInt(i+this.getFormatDate(a)+this.getFormatDate(n))>=e},t.getFormatDate=function(t){if(void 0===t||""===t)return"";var e=t+"";return e.length<2&&(e="0"+e),e},t.guid=function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+""+t()+t()+t()+t()+t()+t()},t.getShortestDistance=function(t,e){if(void 0===e&&(e=[]),t&&e){for(var o=1e3,i=e[0][0],a=0;a<e.length;a++){var n=cc.Vec2.distance(t,cc.v2(e[a][1],e[a][2]));n<o&&(o=n,i=e[a][0])}return i}},t.getTabelArr=function(t){if(!t)return[];for(var e=[],o="",i=0;i<t.length;i++)"["!=t[i]&&(","==t[i]||"]"==t[i]?(e.push(o),o=""):o+=t[i]);return e},t.getTabelArr1=function(t){if(!t)return[];var e=[],o="",i=0;e[i]=[];for(var a=0;a<t.length;a++)"["!=t[a]&&(","==t[a]||"]"==t[a]?(e[i].push(o),o=""):";"==t[a]?(e[i].push(o),o="",e[i+=1]=[]):o+=t[a]);return e},t.typingAni=function(t,e,o,i){var a=t,n="",r=o.split(""),s=r.length,c=0;a.schedule(function t(){n+=r[c],e.string=n,++c==s&&(a.unschedule(t),i&&i())},.05,cc.macro.REPEAT_FOREVER,0)},t.unitConvert=function(t){for(var e=["","\u4e07","\u4ebf","\u4e07\u4ebf","\u4eac"],o=t,i=e[0],a=0;a<5&&(i=e[a],!(this.strNumSize(o)<5));a++)o/=1e4;var n={num:0,unit:""};return o=Math.floor(o),n.num=o,n.unit=i,"\u4eac"==i&&(o=Math.floor(1e4*o),i="\u4e07\u4ebf"),o.toFixed(0)+i},t.unitConvert2=function(t){for(var e=["","\u4e07","\u4ebf","\u4e07\u4ebf"],o=t,i=e[0],a=0;a<4&&(i=e[a],!(this.strNumSize(o)<5));a++)o/=1e4;var n={num:0,unit:""};return n.num=Math.floor(o),n.unit=i,n},t.convertToNum=function(t){return""==t.unit?t.num:"\u4e07"==t.unit?1e4*t.num:"\u4ebf"==t.unit?1e8*t.num:"\u4e07\u4ebf"==t.unit?1e12*t.num:void 0},t.convertToNum2=function(t){return t.match("")?Number(t.substring(0,t.length-1)):t.match("\u4e07")?1e4*Number(t.substring(0,t.length-1)):t.match("\u4ebf")?1e8*Number(t.substring(0,t.length-1)):t.match("\u4e07\u4ebf")?1e12*Number(t.substring(0,t.length-2)):Number(t)},t.convert2SameUnit=function(t,e){var o=t;switch(e){case"":o=t;break;case"\u4e07":o=t/1e4;break;case"\u4ebf":o=t/1e8;break;case"\u4e07\u4ebf":o=t/1e12}return Math.floor(o)},t.strNumSize=function(t){var e=t.toString(),o=e.indexOf("."),i=e;return-1!=o&&(i=e.substring(0,o)),i.length},t.posTransformCamera=function(t,e,o){if(!cc.isValid(t)||!cc.isValid(o))return cc.Vec2.ZERO;var i=t.getScreenToWorldPoint(e),a=o.getWorldToScreenPoint(i);return cc.v2(a.x,a.y)},t.posTransform=function(t,e,o){if(!cc.isValid(parent)||!cc.isValid(o))return cc.Vec2.ZERO;var i=t.convertToWorldSpaceAR(e),a=o.convertToNodeSpaceAR(i);return cc.v2(a.x,a.y)},t}();i.Utils=a,cc._RF.pop()},{}],VivoManager:[function(t,e,o){"use strict";cc._RF.push(e,"1045fyoW+1Iw6uRR9Ulibck","VivoManager");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.VivoManager=void 0;var n=i("LogMgr"),r=i("UIMgr"),s=function(){function t(){this.showBannerTime=0,this.trackAppKey="60783df09e4e8b6f6170467b",this.showAlert=!0}return t.prototype.youmengTrack=function(){},t.prototype.getCode=function(){return"xxx"},t.prototype.pauseRecord=function(){},t.prototype.closeNativeAd=function(){},t.prototype.hasVerify=function(){return!1},t.prototype.toAppStore=function(){},t.prototype.addNotify=function(){},t.prototype.openNotify=function(){},t.prototype.needDouyVefiy=function(){},t.prototype.interVefiy=function(){},t.prototype.showNative=function(){},t.prototype.hideNative=function(){},t.prototype.showInterNative=function(){},t.prototype.hideInterNative=function(){},t.prototype.canShowBtnMore=function(){},t.prototype.canShowEnergyForverVersion=function(){},t.prototype.showFloatIconAd=function(){},t.prototype.hideFloatIconAd=function(){},t.prototype.canCare=function(){return!1},t.prototype.addShortcut=function(t,e){qg.installShortcut({message:"\u6dfb\u52a0\u5230\u684c\u9762\uff0c\u65b9\u4fbf\u4e0b\u6b21\u542f\u52a8",success:function(){e&&e("\u684c\u9762\u56fe\u6807\u6dfb\u52a0\u6210\u529f")},fail:function(){e&&e("\u684c\u9762\u56fe\u6807\u6dfb\u52a0\u5931\u8d25")}})},t.prototype.checkShortcut=function(t,e){e&&e(!0)},t.prototype.shareImg=function(){},t.prototype.getUserInfo=function(t){t(null,null)},t.prototype.showGamePortalAd=function(){n.LogMgr.getInstance().debug("\u66f4\u591a\u6e38\u620f")},t.prototype.getAbName=function(t){t("A")},t.prototype.initTrack=function(){},t.prototype.canShare=function(){return!1},t.prototype.initSdk=function(){this.PlatformInfo=qg.getSystemInfoSync()},t.prototype.login=function(t,e){e&&e()},t.prototype.pay=function(t,e){e&&e()},t.prototype.share=function(t,e){e&&e()},t.prototype.showBanner=function(t,e){this.PlatformInfo.platformVersionCode>=1031?Date.now()-this.showBannerTime>=3e3&&this.createBanner():e&&e()},t.prototype.createBanner=function(){null!=this.BannerAd&&this.hideBanner(),this.BannerAd=qg.createBannerAd({posId:"78d6063321d943f783ae902f768e489d",style:{left:0,top:this.PlatformInfo.screenHeight-170,width:this.PlatformInfo.screenWidth,height:170}});var t=Date.now();this.showBannerTime=t,this.BannerAd.show().then(function(){}).catch(function(){}),this.BannerAd.onError(function(t){console.log(" banner \u5e7f\u544a\u9519\u8bef",t.errCode)})},t.prototype.hideBanner=function(){null!=this.BannerAd&&(this.BannerAd.hide(),this.BannerAd.destroy(),this.BannerAd.offError())},t.prototype.showInsertAd=function(t,e){if(this.PlatformInfo.platformVersionCode>=1031){console.log("\u5f00\u59cb\u663e\u793a\u63d2\u5c4f\u89c6\u9891=============>");var o=qg.createInterstitialAd({posId:"4c653de784624194b1e2b983c28a099b"});o.load(),o.onError(function(){o.offError()}),o.onLoad(function(){o.offLoad()}),o.show().then(function(){e&&e()}).catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})}else e&&e()},t.prototype.showVideoAd=function(t,e,o){if(this.PlatformInfo.platformVersionCode>=1041){var i=qg.createRewardedVideoAd({posId:"15597df0c47847a984f70ed087dfba0b"});i.onError(function(){o&&o(),r.UIMgr.getInstance().openUI(UIID.UITips,-1,"\u6ca1\u6709\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),i.offError()}),i.onLoad(function(){i.show().then(function(){}).catch(function(){}),i.offLoad()}),i.onClose(function(t){t&&t.isEnded?e&&e(!0):o&&o(),i.offClose(),i.load()})}else o&&o()},t.prototype.otherFun=function(t,e){e&&e()},t.prototype.shark=function(t){1==t?qg.vibrateLong():qg.vibrateShort()},t.prototype.recordVideo=function(t,e){e&&e()},t.prototype.shareVideo=function(t,e){e&&e()},t.prototype.stopRecorderManager=function(){},t.prototype.setLanguage=function(t,e){return e&&e(),"zh"},t.prototype.initNativeAd=function(t,e){var o=this,i=function(t){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d",t.adList),e&&e(t.adList),t.adList[0]&&o.nativeAd.reportAdShow({adId:t.adList[0].adId})},a=function(t){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t),e&&e(null)};this.nativeAd&&(this.nativeAd.offLoad(i),this.nativeAd.offError(a),this.nativeAd=null),this.nativeAd=qg.createNativeAd({adUnitId:"af3ef7f7104c4742a4eda8e1c3df0199"}),this.nativeAd.onError(a),this.nativeAd.onLoad(i),this.nativeAd.load()},t.prototype.showNativeAd=function(t){this.nativeAd&&this.nativeAd.reportAdClick({adId:t})},t}();a.VivoManager=s,cc._RF.pop()},{}],Weapon:[function(t,e,o){"use strict";cc._RF.push(e,"bca1fuOJHlA94gRlPmT6ZCH","Weapon");var i,a=t,n=o,r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,i){var a,n=arguments.length,r=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(n<3?a(r):n>3?a(e,o,r):a(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(n,"__esModule",{value:!0});var c=a("Monster"),l=a("ObjectsParent"),u=cc._decorator,p=u.ccclass,d=u.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e.isAttackState=!1,e}return r(e,t),e.prototype.onCollisionEnter=function(t){this.isAttackState||(console.log("\u78b0\u649e\u4f53\uff1a",t),t.node.getComponent(c.default).objectState!=l.EnumObjectState.Die&&(this.isAttackState=!0,console.log("\u78b0\u649e\u68c0\u6d4b\u5f00\u59cb")))},e.prototype.onCollisionExit=function(){this.isAttackState=!1,console.log("\u78b0\u649e\u68c0\u6d4b\u79bb\u5f00")},s([d({type:cc.Node,tooltip:"\u73a9\u5bb6"})],e.prototype,"player",void 0),s([p],e)}(cc.Component);n.default=g,cc._RF.pop()},{}],WebLinkManager:[function(t,e,o){"use strict";cc._RF.push(e,"8ab12yUnhdDFITeKQSSqI23","WebLinkManager");var i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.WebLinkManager=void 0;var a=function(){function t(){this.infostr=[]}return t.prototype.showBlockAd=function(){},t.prototype.hideBlockAd=function(){},t.prototype.getCode=function(){return""},t.prototype.canShare=function(){return!1},t.prototype.pauseRecord=function(){},t.prototype.resumeRecord=function(){},t.prototype.verifyKey=function(){},t.prototype.toAppStore=function(){},t.prototype.openNotify=function(){},t.prototype.shareImg=function(){},t.prototype.showWxNativeAD=function(){},t.prototype.hideWxNativeAD=function(){},t.prototype.hasVerify=function(){return!1},t.prototype.youmengTrack=function(t,e,o){cocosAnalytics&&("userA"==e?cocosAnalytics.CACustomEvent.onSuccess(t,{userA:o}):"userB"==e?cocosAnalytics.CACustomEvent.onSuccess(t,{userB:o}):"userD"==e?cocosAnalytics.CACustomEvent.onSuccess(t,{userD:o}):cocosAnalytics.CACustomEvent.onSuccess(t,{userC:o}))},t.prototype.initSdk=function(t,e){e&&e()},t.prototype.login=function(t,e){e&&e()},t.prototype.pay=function(t,e){e&&e()},t.prototype.share=function(t,e){e&&e()},t.prototype.showBanner=function(t,e){e&&e()},t.prototype.hideBanner=function(t,e){e&&e()},t.prototype.showInsertAd=function(t,e){e&&e()},t.prototype.showVideoAd=function(t,e){e&&e()},t.prototype.otherFun=function(t,e){e&&e()},t.prototype.shark=function(t,e){e&&e()},t.prototype.recordVideo=function(t,e){e&&e()},t.prototype.shareVideo=function(t,e){e&&e()},t.prototype.stopRecorderManager=function(t,e){e&&e()},t.prototype.setLanguage=function(t,e){return e&&e(),"zh"},t}();i.WebLinkManager=a,cc._RF.pop()},{}],WechatManager:[function(t,e,o){"use strict";cc._RF.push(e,"19fbbH59GlI3pQ7lmXK5gwM","WechatManager");var i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.WechatManager=void 0;var n=i("LogMgr"),r=function(){function t(){this.showAlert=!0,this.hasAd=!0,this.hasBanner=!0,this.hasInsertAd=!0,this.hasVideoAd=!0,this.BannerAd=null,this.BannerAdHight=0,this.customAdMap=new Map,this.sdkVersion="",this.videoAd=null}return t.prototype.hasVerify=function(){return!1},t.prototype.canCare=function(){return!1},t.prototype.canShowwBtnMore=function(){return!1},t.prototype.showBlockAd=function(t){console.log("--------showBlock-------");var e=this.customAdMap.get(t);(e=1===t?this.customAdMap.get(1):this.customAdMap.get(2))&&e.show()},t.prototype.hideBlockAd=function(t){var e=this.customAdMap.get(t);(e=1===t?this.customAdMap.get(1):this.customAdMap.get(2))&&e.hide()},t.prototype.showFloatIconAd=function(){},t.prototype.hideFloatIconAd=function(){},t.prototype.addShortcut=function(){},t.prototype.checkShortcut=function(){},t.prototype.shareImg=function(){},t.prototype.getUserInfo=function(t){t&&t(null,null)},t.prototype.initNativeAd=function(){},t.prototype.showNativeAd=function(){},t.prototype.showGamePortalAd=function(){n.LogMgr.getInstance().debug("\u66f4\u591a\u6e38\u620f")},t.prototype.initTrack=function(){},t.prototype.youmengTrack=function(t,e,o){wx.uma&&(e&&o?"userA"==e?wx.uma.trackEvent(t,{userA:o}):"userB"==e?wx.uma.trackEvent(t,{userB:o}):"userD"==e?wx.uma.trackEvent(t,{userD:o}):wx.uma.trackEvent(t,{userC:o}):wx.uma.trackEvent(t))},t.prototype.canShare=function(){return!0},t.prototype.initSdk=function(){var t=this,e=wx.getSystemInfoSync();this.sdkVersion=e.SDKVersion;var o=e.screenWidth,i=e.screenHeight;this.compareVersion(this.sdkVersion,"1.1.0")>=0&&(wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){var t=Math.floor(2*Math.random());return{title:["\u6211\u8fd9\u5957\u88c5\u5907\uff0c\u4e00\u5200999\uff01","\u5c40\u5185\u6389\u843d\u4e00\u628a\u5c60\u9f99\u5200\uff0c1\u5206\u949f\u540e\u6d88\u5931\uff01","\u771f\u7684\u6253\u4e0d\u8fc7\u4e86\uff0c\u5e2e\u5e2e\u6211\uff01"][Math.floor(3*Math.random())],imageUrl:"https://game.sfplay.net/knife/wechat/"+["1.jpeg","2.jpeg"][t]}})),this.compareVersion(this.sdkVersion,"2.0.4")>=0&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-61681feb644afbc6"}),this.videoAd.onError(function(t){console.log(t)})),this.compareVersion(this.sdkVersion,"2.0.4")>=0&&(this.BannerAd=wx.createBannerAd({adUnitId:"adunit-d208baeb29ec3299",adIntervals:30,style:{left:0,top:0,width:320}}),this.BannerAd.onResize(function(e){t.BannerAdHight=e.height,t.BannerAd.style.top=i-t.BannerAdHight,t.BannerAd.style.left=(o-320)/2}),this.BannerAd.onError(function(){}),this.BannerAd.onLoad(function(){}));var a=wx.createCustomAd({adUnitId:"adunit-e15fc561db927d89",style:{left:5,top:i/3}}),n=wx.createCustomAd({adUnitId:"adunit-a90247322a12da9b",style:{left:o/2-150,top:i-100,fixed:!0}});this.customAdMap.set(2,a),this.customAdMap.set(1,n)},t.prototype.login=function(t,e){e&&e()},t.prototype.showWxNativeAD=function(t){var e=this.customAdMap.get(t);e&&e.show()},t.prototype.hideWxNativeAD=function(t){var e=this.customAdMap.get(t);e&&e.hide()},t.prototype.pay=function(t,e){e&&e()},t.prototype.share=function(t,e){var o=Math.floor(3*Math.random());wx.shareAppMessage({title:["\u5e2e\u6211\u770b\u770b\u54ea\u4e2a\u5b57\u9519\u4e86\uff1f","\u4f60\u662f\u9003\u4e0d\u8fc7\u6211\u7684\u773c\u775b\u7684\uff01","\u5e2e\u6211\u770b\u770b\u54ea\u4e00\u53ea\u4e0d\u662f\u4f01\u9e45"][o],desc:"",imageUrl:"https://game2.sfplay.net/werid_assets/wechat/shareIcon/"+["1.jpeg","2.jpeg","3.jpeg"][o],query:"",success:function(){},fail:function(){}}),setTimeout(function(){e&&e()},3500)},t.prototype.showBanner=function(t,e){null!=this.BannerAd&&(this.BannerAd.show().then(function(){}).catch(function(){}),e&&e())},t.prototype.hideBanner=function(){null!=this.BannerAd&&this.BannerAd.hide()},t.prototype.showInsertAd=function(t,e){if(this.compareVersion(this.sdkVersion,"2.6.0")>=0){var o=wx.createInterstitialAd({adUnitId:"adunit-d208baeb29ec3299"});o.onLoad(function(){o.show().then(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),e&&e()}).catch(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})}),o.onClose(function t(){o.offClose(t),o.destroy()}),o.onError(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t),o.offError()}),o.onLoad(function(t){console.log("\u63d2\u5c4f\u5e7f\u544aonLoad\u5931\u8d25",t),o.offLoad()})}},t.prototype.showVideoAd=function(t,e,o){var i=this.videoAd;i.show().then().catch(function(t){console.log(t.errMsg),i.load().then(function(){return i.show()})}),i.onClose(function t(a){a&&a.isEnded||void 0===a?e&&e():o&&o(),i.load(),i.offClose(t)})},t.prototype.otherFun=function(t,e){e&&e()},t.prototype.shark=function(t,e){e&&e()},t.prototype.recordVideo=function(t,e){e&&e()},t.prototype.shareVideo=function(t,e){e&&e()},t.prototype.stopRecorderManager=function(t,e){e&&e("test.png")},t.prototype.setLanguage=function(t,e){return e&&e(),"zh"},t.prototype.compareVersion=function(t,e){t=t.split("."),e=e.split(".");for(var o=Math.max(t.length,e.length);t.length<o;)t.push("0");for(;e.length<o;)e.push("0");for(var i=0;i<o;i++){var a=parseInt(t[i]),n=parseInt(e[i]);if(a>n)return 1;if(a<n)return-1}return 0},t}();a.WechatManager=r,cc._RF.pop()},{}]},{},["AndroidManager","Appcfg","ArgsParseUtils","AudioMgr","BaseButton","BaseCtrl","BaseData","BaseMgr","BasePlatform","BaseUI","ByteDanceManager","CacheUtils","CameraMgr","CardMgr","CityMgr","ComCollectionData","ComDataMgr","ComFreeTimeData","ComGameData","ComLottyData","ComPlayerMgr","ComSignData","CommonBirge","CommonCfg","CommonModel","Config","DataMgr","EditorManager","EffectMgr","EquipMgr","EventMgr","FetterMgr","GameData","GameDataMgr","GameMgr","GoodsManager","GuideData","HttpMgr","IosManager","KSManager","LabPlatform","LabelPlus","LadleWordMgr","LanguageMgr","List","ListItem","Loading","LogMgr","Main","MainTaskData","Monster","MysticalShopData","NodeCurrency","NodeDropGoods","NodeEquip","NodeEquipComposite","NodeFetter","NodeMainTask","NodeSkill","NodeSkillBook","NodeTask","NodeUISkillBook","NodeUISkillBookNew","NodeWearEquip","ObjectMgr","ObjectsParent","OppoManager","PetMgr","PlatformManager","Player","PlayerMgr","PoolMgr","RedDotMgr","ResCacheMgr","ResourceMgr","RoleMgr","ScrollCard","SdkMgr","ShareData","SkillMgr","SpineUtils","TaskMgr","TimeMgr","TimeUtils","TipsMgr","TrackData","TrackDataEvent","TranstaLabel","TranstanImg","TweenMgr","UIBecoming","UICollection","UICompositeEnd","UIDrawCard","UIEquip","UIEquipComposite","UIEquipInfo","UIExit","UIFastPass","UIFetterInfo","UIFreeTime","UIGame","UIGeneralWindow","UIGeneralWindow1","UIGuide","UIHome","UILotty","UIMainTask","UIMgr","UIMysticalShop","UINotBagIndex","UIOnlineReward","UIPause","UIPet","UIRealName","UIReward","UISalutation","UISellView","UISetting","UISettle","UIShareVideo","UIShop","UISign","UISkillBook","UISkillBookInfo","UISkillInfo","UITask","UITips","UITop","UITouch","UIUtils","UserData","Utils","VivoManager","Weapon","WebLinkManager","WechatManager"]);
//# sourceMappingURL=index.js.map
