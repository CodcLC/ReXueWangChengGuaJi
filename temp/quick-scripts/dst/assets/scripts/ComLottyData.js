
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ComLottyData.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '072f1QDdjdI2L/rsXr5r5yE', 'ComLottyData');
// scripts/ComLottyData.js

"use strict";

var t = require;
var e = module;
var o = exports;

var _a,
    i = void 0 && (void 0).__extends || (_a = function a(t, e) {
  return (_a = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (t, e) {
    t.__proto__ = e;
  } || function (t, e) {
    for (var o in e) {
      Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
    }
  })(t, e);
}, function (t, e) {
  function o() {
    this.constructor = t;
  }

  _a(t, e), t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o());
});

Object.defineProperty(o, "__esModule", {
  value: !0
}), o.ComLottyData = void 0;

var r = t("BaseData"),
    n = t("EventMgr"),
    s = t("CacheUtils"),
    c = t("Utils"),
    l = t("Config"),
    u = t("CommonCfg"),
    p = t("ComDataMgr"),
    g = function g() {
  this.lottyNum = 0, this.dontMustIds = [], this.lottyTickNum = 0;
},
    d = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    return e.ecrypt = !1, e.gameKey = l.GameConfig.AppCacheName + "lotty", e.indexString = "mapIndex", e.numString = "mapNum", e;
  }

  return i(e, t), e.prototype.getMapData = function () {
    if (null == this.lottyIndexs) {
      var t = null;
      t = this.ecrypt ? s.CacheUtils.getDataDecrypt(this.gameKey + this.indexString, this.pwd) : s.CacheUtils.getData(this.gameKey + this.indexString), this.lottyIndexs = t ? c.Utils.jsonToMap(t) : new Map();
    }

    null == this.lottyIdNumMap && (t = null, t = this.ecrypt ? s.CacheUtils.getDataDecrypt(this.gameKey + this.numString, this.pwd) : s.CacheUtils.getData(this.gameKey + this.numString), this.lottyIdNumMap = t ? c.Utils.jsonToMap(t) : new Map());
  }, e.prototype.initData = function () {
    this.getMapData(), n.EventMgr.getInstance().on(u.CommonEventName.callRefreshTick, this, this.refreshTickNum);
  }, e.prototype.getLottyNum = function () {
    return this.data.lottyNum;
  }, e.prototype.addLottyNum = function () {
    this.data.lottyNum += 1, this.saveData();
  }, e.prototype.createData = function () {
    this.data = new g(), this.data.lottyNum = 0, this.data.dontMustIds = [];
    var t = p.ComDataMgr.getInstance().getCommonParam(p.CommonParamType.defTickNum);
    return this.data.lottyTickNum = t, this.data;
  }, e.prototype.getGirldIdIndex = function (t) {
    return this.lottyIndexs.has(t) ? Number(this.lottyIndexs.get(t)) : 0;
  }, e.prototype.setGirldReward = function (t, e) {
    this.lottyIndexs.set(t, e), this.saveMapData();
  }, e.prototype.addLottyIdOutNum = function (t) {
    var e = 1;
    this.lottyIdNumMap.has(t) && (e = this.lottyIdNumMap.get(t) + 1), this.lottyIdNumMap.set(t, e), this.saveNumMapData();
  }, e.prototype.getLottyIdOutNum = function (t) {
    var e = 1;
    return this.lottyIdNumMap.has(t) ? e = this.lottyIdNumMap.get(t) : this.lottyIdNumMap.set(t, e), e;
  }, e.prototype.getInDontMust = function (t) {
    for (var e = 0; e < this.data.dontMustIds.length; e++) {
      if (this.data.dontMustIds[e] == t) return !0;
    }

    return !1;
  }, e.prototype.addInDontMust = function (t) {
    this.data.dontMustIds.push(t), this.saveData();
  }, e.prototype.getLottyTickNum = function () {
    return this.data.lottyTickNum;
  }, e.prototype.refreshTickNum = function (t, e) {
    if (e) this.data.lottyTickNum += t;else {
      if (this.data.lottyTickNum < t) return !1;
      this.data.lottyTickNum -= t;
    }
    n.EventMgr.getInstance().emit(u.CommonEventName.RefreshTickNum, t, e), this.saveData();
  }, e.prototype.saveMapData = function () {
    var t = c.Utils.mapToJson(this.lottyIndexs);
    this.ecrypt ? s.CacheUtils.saveDataEncrypt(this.gameKey + this.indexString, t, this.pwd) : s.CacheUtils.saveData(this.gameKey + this.indexString, t);
  }, e.prototype.saveNumMapData = function () {
    var t = c.Utils.mapToJson(this.lottyIdNumMap);
    this.ecrypt ? s.CacheUtils.saveDataEncrypt(this.gameKey + this.numString, t, this.pwd) : s.CacheUtils.saveData(this.gameKey + this.numString, t);
  }, e;
}(r.BaseData);

o.ComLottyData = d;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQ29tTG90dHlEYXRhLmpzIl0sIm5hbWVzIjpbInQiLCJyZXF1aXJlIiwiZSIsIm1vZHVsZSIsIm8iLCJleHBvcnRzIiwiYSIsImkiLCJfX2V4dGVuZHMiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiQ29tTG90dHlEYXRhIiwiciIsIm4iLCJzIiwiYyIsImwiLCJ1IiwicCIsImciLCJsb3R0eU51bSIsImRvbnRNdXN0SWRzIiwibG90dHlUaWNrTnVtIiwiZCIsImFwcGx5IiwiYXJndW1lbnRzIiwiZWNyeXB0IiwiZ2FtZUtleSIsIkdhbWVDb25maWciLCJBcHBDYWNoZU5hbWUiLCJpbmRleFN0cmluZyIsIm51bVN0cmluZyIsImdldE1hcERhdGEiLCJsb3R0eUluZGV4cyIsIkNhY2hlVXRpbHMiLCJnZXREYXRhRGVjcnlwdCIsInB3ZCIsImdldERhdGEiLCJVdGlscyIsImpzb25Ub01hcCIsIk1hcCIsImxvdHR5SWROdW1NYXAiLCJpbml0RGF0YSIsIkV2ZW50TWdyIiwiZ2V0SW5zdGFuY2UiLCJvbiIsIkNvbW1vbkV2ZW50TmFtZSIsImNhbGxSZWZyZXNoVGljayIsInJlZnJlc2hUaWNrTnVtIiwiZ2V0TG90dHlOdW0iLCJkYXRhIiwiYWRkTG90dHlOdW0iLCJzYXZlRGF0YSIsImNyZWF0ZURhdGEiLCJDb21EYXRhTWdyIiwiZ2V0Q29tbW9uUGFyYW0iLCJDb21tb25QYXJhbVR5cGUiLCJkZWZUaWNrTnVtIiwiZ2V0R2lybGRJZEluZGV4IiwiaGFzIiwiTnVtYmVyIiwiZ2V0Iiwic2V0R2lybGRSZXdhcmQiLCJzZXQiLCJzYXZlTWFwRGF0YSIsImFkZExvdHR5SWRPdXROdW0iLCJzYXZlTnVtTWFwRGF0YSIsImdldExvdHR5SWRPdXROdW0iLCJnZXRJbkRvbnRNdXN0IiwibGVuZ3RoIiwiYWRkSW5Eb250TXVzdCIsInB1c2giLCJnZXRMb3R0eVRpY2tOdW0iLCJlbWl0IiwiUmVmcmVzaFRpY2tOdW0iLCJtYXBUb0pzb24iLCJzYXZlRGF0YUVuY3J5cHQiLCJCYXNlRGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxDQUFDLEdBQUdDLE9BQVI7QUFDQSxJQUFJQyxDQUFDLEdBQUdDLE1BQVI7QUFDQSxJQUFJQyxDQUFDLEdBQUdDLE9BQVI7O0FBQ0EsSUFBSUMsRUFBSjtBQUFBLElBQU9DLENBQUMsR0FBRyxVQUFRLFNBQUtDLFNBQWIsS0FBMkJGLEVBQUMsR0FBRyxXQUFTTixDQUFULEVBQVlFLENBQVosRUFBZTtFQUNyRCxPQUFPLENBQUNJLEVBQUMsR0FBR0csTUFBTSxDQUFDQyxjQUFQLElBQXlCO0lBQ2pDQyxTQUFTLEVBQUU7RUFEc0IsYUFHMUJDLEtBSDBCLElBSXJDLFVBQVNaLENBQVQsRUFBWUUsQ0FBWixFQUFlO0lBQ1hGLENBQUMsQ0FBQ1csU0FBRixHQUFjVCxDQUFkO0VBQ0gsQ0FOVyxJQU9aLFVBQVNGLENBQVQsRUFBWUUsQ0FBWixFQUFlO0lBQ1gsS0FBSyxJQUFJRSxDQUFULElBQWNGLENBQWQ7TUFBaUJPLE1BQU0sQ0FBQ0ksU0FBUCxDQUFpQkMsY0FBakIsQ0FBZ0NDLElBQWhDLENBQXFDYixDQUFyQyxFQUF3Q0UsQ0FBeEMsTUFBK0NKLENBQUMsQ0FBQ0ksQ0FBRCxDQUFELEdBQU9GLENBQUMsQ0FBQ0UsQ0FBRCxDQUF2RDtJQUFqQjtFQUNILENBVE0sRUFTSkosQ0FUSSxFQVNERSxDQVRDLENBQVA7QUFVSCxDQVhxQyxFQVl0QyxVQUFTRixDQUFULEVBQVlFLENBQVosRUFBZTtFQUNYLFNBQVNFLENBQVQsR0FBYTtJQUNULEtBQUtZLFdBQUwsR0FBbUJoQixDQUFuQjtFQUNIOztFQUNETSxFQUFDLENBQUNOLENBQUQsRUFBSUUsQ0FBSixDQUFELEVBQ0FGLENBQUMsQ0FBQ2Es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RCxRQUFMLEVBREE7RUFFSCxDQWpFTSxFQWtFUDNELENBQUMsQ0FBQ1csU0FBRixDQUFZNEQsV0FBWixHQUEwQixZQUFXO0lBQ2pDLElBQUl6RSxDQUFDLEdBQUd3QixDQUFDLENBQUN1QixLQUFGLENBQVFxQyxTQUFSLENBQWtCLEtBQUsxQyxXQUF2QixDQUFSO0lBQ0EsS0FBS1AsTUFBTCxHQUFjWixDQUFDLENBQUNvQixVQUFGLENBQWEwQyxlQUFiLENBQTZCLEtBQUtqRCxPQUFMLEdBQWUsS0FBS0csV0FBakQsRUFBOER2QyxDQUE5RCxFQUFpRSxLQUFLNkMsR0FBdEUsQ0FBZCxHQUEyRnRCLENBQUMsQ0FBQ29CLFVBQUYsQ0FBYWtCLFFBQWIsQ0FBc0IsS0FBS3pCLE9BQUwsR0FBZSxLQUFLRyxXQUExQyxFQUF1RHZDLENBQXZELENBQTNGO0VBQ0gsQ0FyRU0sRUFzRVBFLENBQUMsQ0FBQ1csU0FBRixDQUFZOEQsY0FBWixHQUE2QixZQUFXO0lBQ3BDLElBQUkzRSxDQUFDLEdBQUd3QixDQUFDLENBQUN1QixLQUFGLENBQVFxQyxTQUFSLENBQWtCLEtBQUtsQyxhQUF2QixDQUFSO0lBQ0EsS0FBS2YsTUFBTCxHQUFjWixDQUFDLENBQUNvQixVQUFGLENBQWEwQyxlQUFiLENBQTZCLEtBQUtqRCxPQUFMLEdBQWUsS0FBS0ksU0FBakQsRUFBNER4QyxDQUE1RCxFQUErRCxLQUFLNkMsR0FBcEUsQ0FBZCxHQUF5RnRCLENBQUMsQ0FBQ29CLFVBQUYsQ0FBYWtCLFFBQWIsQ0FBc0IsS0FBS3pCLE9BQUwsR0FBZSxLQUFLSSxTQUExQyxFQUFxRHhDLENBQXJELENBQXpGO0VBQ0gsQ0F6RU0sRUEwRVBFLENBMUVBO0FBMkVILENBcEZHLENBb0ZEbUIsQ0FBQyxDQUFDaUUsUUFwRkQsQ0FaSjs7QUFpR0FsRixDQUFDLENBQUNnQixZQUFGLEdBQWlCWSxDQUFqQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHQgPSByZXF1aXJlO1xudmFyIGUgPSBtb2R1bGU7XG52YXIgbyA9IGV4cG9ydHM7XG52YXIgYSwgaSA9IHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMgfHwgKGEgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgcmV0dXJuIChhID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IHtcbiAgICAgICAgX19wcm90b19fOiBbXVxuICAgIH1cbiAgICBpbnN0YW5jZW9mIEFycmF5ICYmXG4gICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB0Ll9fcHJvdG9fXyA9IGVcbiAgICB9IHx8XG4gICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKHZhciBvIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBvKSAmJiAodFtvXSA9IGVbb10pXG4gICAgfSkodCwgZSlcbn0sXG5mdW5jdGlvbih0LCBlKSB7XG4gICAgZnVuY3Rpb24gbygpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IHRcbiAgICB9XG4gICAgYSh0LCBlKSxcbiAgICB0LnByb3RvdHlwZSA9IG51bGwgPT09IGUgPyBPYmplY3QuY3JlYXRlKGUpIDogKG8ucHJvdG90eXBlID0gZS5wcm90b3R5cGUsIG5ldyBvKVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogITBcbn0pLFxuby5Db21Mb3R0eURhdGEgPSB2b2lkIDA7XG52YXIgciA9IHQoXCJCYXNlRGF0YVwiKSxcbm4gPSB0KFwiRXZlbnRNZ3JcIiksXG5zID0gdChcIkNhY2hlVXRpbHNcIiksXG5jID0gdChcIlV0aWxzXCIpLFxubCA9IHQoXCJDb25maWdcIiksXG51ID0gdChcIkNvbW1vbkNmZ1wiKSxcbnAgPSB0KFwiQ29tRGF0YU1nclwiKSxcbmcgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmxvdHR5TnVtID0gMCxcbiAgICB0aGlzLmRvbnRNdXN0SWRzID0gW10sXG4gICAgdGhpcy5sb3R0eVRpY2tOdW0gPSAwXG59LFxuZCA9IGZ1bmN0aW9uKHQpIHtcbiAgICBmdW5jdGlvbiBlKCkge1xuICAgICAgICB2YXIgZSA9IG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIHJldHVybiBlLmVjcnlwdCA9ICExLFxuICAgICAgICBlLmdhbWVLZXkgPSBsLkdhbWVDb25maWcuQXBwQ2FjaGVOYW1lICsgXCJsb3R0eVwiLFxuICAgICAgICBlLmluZGV4U3RyaW5nID0gXCJtYXBJbmRleFwiLFxuICAgICAgICBlLm51bVN0cmluZyA9IFwibWFwTnVtXCIsXG4gICAgICAgIGVcbiAgICB9XG4gICAgcmV0dXJuIGkoZSwgdCksXG4gICAgZS5wcm90b3R5cGUuZ2V0TWFwRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAobnVsbCA9PSB0aGlzLmxvdHR5SW5kZXhzKSB7XG4gICAgICAgICAgICB2YXIgdCA9IG51bGw7XG4gICAgICAgICAgICB0ID0gdGhpcy5lY3J5cHQgPyBzLkNhY2hlVXRpbHMuZ2V0RGF0YURlY3J5cHQodGhpcy5nYW1lS2V5ICsgdGhpcy5pbmRleFN0cmluZywgdGhpcy5wd2QpIDogcy5DYWNoZVV0aWxzLmdldERhdGEodGhpcy5nYW1lS2V5ICsgdGhpcy5pbmRleFN0cmluZyksXG4gICAgICAgICAgICB0aGlzLmxvdHR5SW5kZXhzID0gdCA/IGMuVXRpbHMuanNvblRvTWFwKHQpIDogbmV3IE1hcFxuICAgICAgICB9XG4gICAgICAgIG51bGwgPT0gdGhpcy5sb3R0eUlkTnVtTWFwICYmICh0ID0gbnVsbCwgdCA9IHRoaXMuZWNyeXB0ID8gcy5DYWNoZVV0aWxzLmdldERhdGFEZWNyeXB0KHRoaXMuZ2FtZUtleSArIHRoaXMubnVtU3RyaW5nLCB0aGlzLnB3ZCkgOiBzLkNhY2hlVXRpbHMuZ2V0RGF0YSh0aGlzLmdhbWVLZXkgKyB0aGlzLm51bVN0cmluZyksIHRoaXMubG90dHlJZE51bU1hcCA9IHQgPyBjLlV0aWxzLmpzb25Ub01hcCh0KSA6IG5ldyBNYXApXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5pbml0RGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmdldE1hcERhdGEoKSxcbiAgICAgICAgbi5FdmVudE1nci5nZXRJbnN0YW5jZSgpLm9uKHUuQ29tbW9uRXZlbnROYW1lLmNhbGxSZWZyZXNoVGljaywgdGhpcywgdGhpcy5yZWZyZXNoVGlja051bSlcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmdldExvdHR5TnVtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubG90dHlOdW1cbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmFkZExvdHR5TnVtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZGF0YS5sb3R0eU51bSArPSAxLFxuICAgICAgICB0aGlzLnNhdmVEYXRhKClcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmNyZWF0ZURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IGcsXG4gICAgICAgIHRoaXMuZGF0YS5sb3R0eU51bSA9IDAsXG4gICAgICAgIHRoaXMuZGF0YS5kb250TXVzdElkcyA9IFtdO1xuICAgICAgICB2YXIgdCA9IHAuQ29tRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldENvbW1vblBhcmFtKHAuQ29tbW9uUGFyYW1UeXBlLmRlZlRpY2tOdW0pO1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmxvdHR5VGlja051bSA9IHQsXG4gICAgICAgIHRoaXMuZGF0YVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuZ2V0R2lybGRJZEluZGV4ID0gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb3R0eUluZGV4cy5oYXModCkgPyBOdW1iZXIodGhpcy5sb3R0eUluZGV4cy5nZXQodCkpIDogMFxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuc2V0R2lybGRSZXdhcmQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHRoaXMubG90dHlJbmRleHMuc2V0KHQsIGUpLFxuICAgICAgICB0aGlzLnNhdmVNYXBEYXRhKClcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmFkZExvdHR5SWRPdXROdW0gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHZhciBlID0gMTtcbiAgICAgICAgdGhpcy5sb3R0eUlkTnVtTWFwLmhhcyh0KSAmJiAoZSA9IHRoaXMubG90dHlJZE51bU1hcC5nZXQodCkgKyAxKSxcbiAgICAgICAgdGhpcy5sb3R0eUlkTnVtTWFwLnNldCh0LCBlKSxcbiAgICAgICAgdGhpcy5zYXZlTnVtTWFwRGF0YSgpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5nZXRMb3R0eUlkT3V0TnVtID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgZSA9IDE7XG4gICAgICAgIHJldHVybiB0aGlzLmxvdHR5SWROdW1NYXAuaGFzKHQpID8gZSA9IHRoaXMubG90dHlJZE51bU1hcC5nZXQodCkgOiB0aGlzLmxvdHR5SWROdW1NYXAuc2V0KHQsIGUpLFxuICAgICAgICBlXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5nZXRJbkRvbnRNdXN0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IHRoaXMuZGF0YS5kb250TXVzdElkcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZGF0YS5kb250TXVzdElkc1tlXSA9PSB0KSByZXR1cm4gISAwO1xuICAgICAgICByZXR1cm4gISAxXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5hZGRJbkRvbnRNdXN0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICB0aGlzLmRhdGEuZG9udE11c3RJZHMucHVzaCh0KSxcbiAgICAgICAgdGhpcy5zYXZlRGF0YSgpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5nZXRMb3R0eVRpY2tOdW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5sb3R0eVRpY2tOdW1cbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnJlZnJlc2hUaWNrTnVtID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAoZSkgdGhpcy5kYXRhLmxvdHR5VGlja051bSArPSB0O1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEubG90dHlUaWNrTnVtIDwgdCkgcmV0dXJuICEgMTtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5sb3R0eVRpY2tOdW0gLT0gdFxuICAgICAgICB9XG4gICAgICAgIG4uRXZlbnRNZ3IuZ2V0SW5zdGFuY2UoKS5lbWl0KHUuQ29tbW9uRXZlbnROYW1lLlJlZnJlc2hUaWNrTnVtLCB0LCBlKSxcbiAgICAgICAgdGhpcy5zYXZlRGF0YSgpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5zYXZlTWFwRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdCA9IGMuVXRpbHMubWFwVG9Kc29uKHRoaXMubG90dHlJbmRleHMpO1xuICAgICAgICB0aGlzLmVjcnlwdCA/IHMuQ2FjaGVVdGlscy5zYXZlRGF0YUVuY3J5cHQodGhpcy5nYW1lS2V5ICsgdGhpcy5pbmRleFN0cmluZywgdCwgdGhpcy5wd2QpIDogcy5DYWNoZVV0aWxzLnNhdmVEYXRhKHRoaXMuZ2FtZUtleSArIHRoaXMuaW5kZXhTdHJpbmcsIHQpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5zYXZlTnVtTWFwRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdCA9IGMuVXRpbHMubWFwVG9Kc29uKHRoaXMubG90dHlJZE51bU1hcCk7XG4gICAgICAgIHRoaXMuZWNyeXB0ID8gcy5DYWNoZVV0aWxzLnNhdmVEYXRhRW5jcnlwdCh0aGlzLmdhbWVLZXkgKyB0aGlzLm51bVN0cmluZywgdCwgdGhpcy5wd2QpIDogcy5DYWNoZVV0aWxzLnNhdmVEYXRhKHRoaXMuZ2FtZUtleSArIHRoaXMubnVtU3RyaW5nLCB0KVxuICAgIH0sXG4gICAgZVxufSAoci5CYXNlRGF0YSk7XG5vLkNvbUxvdHR5RGF0YSA9IGQiXX0=