
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/UIPet.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7f9afAl3BFISYoLmYuwMhWL', 'UIPet');
// scripts/UIPet.js

"use strict";

var t = require;
var e = module;
var o = exports;

var _a,
    i = void 0 && (void 0).__extends || (_a = function a(t, e) {
  return (_a = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (t, e) {
    t.__proto__ = e;
  } || function (t, e) {
    for (var o in e) {
      Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
    }
  })(t, e);
}, function (t, e) {
  function o() {
    this.constructor = t;
  }

  _a(t, e), t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o());
}),
    r = void 0 && (void 0).__decorate || function (t, e, o, a) {
  var i,
      r = arguments.length,
      n = r < 3 ? e : null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);else for (var s = t.length - 1; s >= 0; s--) {
    (i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);
  }
  return r > 3 && n && Object.defineProperty(e, o, n), n;
};

Object.defineProperty(o, "__esModule", {
  value: !0
});

var n = t("BaseUI"),
    s = t("SdkMgr"),
    c = t("TimeUtils"),
    l = t("Utils"),
    u = t("Config"),
    p = t("TrackDataEvent"),
    g = t("DataMgr"),
    d = t("EquipMgr"),
    h = t("PetMgr"),
    f = t("PlayerMgr"),
    m = t("TimeMgr"),
    y = t("TipsMgr"),
    v = cc._decorator,
    I = v.ccclass,
    k = v.property,
    C = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    return e.BtnBack = null, e.BtnFalse = null, e.BtnTrue = null, e.BtnVideoGet = null, e.LabName = null, e.LabProp1 = null, e.LabProp2 = null, e.LabTime = null, e;
  }

  return i(e, t), e.prototype.onLoad = function () {
    this.registerEvent();
  }, e.prototype.start = function () {
    this.registerBtnEvent(), this.initData(), this.initView();
  }, e.prototype.onClose = function () {}, e.prototype.registerEvent = function () {
    this.addEvent(u.EventName.RefreshPetViewTime, this.refreshTime);
  }, e.prototype.registerBtnEvent = function () {
    var t = this;
    this.BtnBack.on(cc.Node.EventType.TOUCH_END, function () {
      f.PlayerMgr.getInstance().getTrackData().youmengTrack(p.TrackId.pet_cancel), t.closeView();
    }), this.BtnFalse.on(cc.Node.EventType.TOUCH_END, function () {
      f.PlayerMgr.getInstance().getTrackData().youmengTrack(p.TrackId.pet_cancel), t.closeView();
    }), this.BtnTrue.on(cc.Node.EventType.TOUCH_END, function () {
      t.closeView();
    }), this.BtnVideoGet.on(cc.Node.EventType.TOUCH_END, function () {
      var e = c.TimeUtils.GetTimeBySecond(),
          o = c.TimeUtils.GetTimeByHours2();
      s.SdkMgr.getInstance().playVideo(1, function () {
        var a = c.TimeUtils.GetTimeBySecond(),
            i = c.TimeUtils.GetTimeByHours2();
        f.PlayerMgr.getInstance().getTrackData().testTrackTime("pet", o, i, e, a), f.PlayerMgr.getInstance().getTrackData().youmengTrack(p.TrackId.pet), f.PlayerMgr.getInstance().getTrackData().youmengTrackNew("pet_b"), f.PlayerMgr.getInstance().getTrackData().youmengTrack(p.TrackId.pet_get);
        var r = f.PlayerMgr.getInstance().geUserData().getCurSec();
        f.PlayerMgr.getInstance().geUserData().getEnterSecCountForSecId(r) <= 0 && (r -= 1) < 1 && (r = 1), r <= 5 && f.PlayerMgr.getInstance().getTrackData().youmengTrack(p.TrackId.pet_X, r), f.PlayerMgr.getInstance().geUserData().addPetToList(1), t.controlBtn(!1, !1, !0), h["default"].getInstance().isOwnedPet = !0, m.TimeMgr.getInstance().closeTimer_pet(), t.refreshTime(0), y["default"].getInstance().playFightTips(t.node);
      });
    });
  }, e.prototype.initData = function () {
    this.curPetCfg = g.DataMgr.getInstance().getPetsCfg();
  }, e.prototype.initView = function () {
    this.initPetInfo(), this.initBtnShow(), this.refreshTime(m.TimeMgr.getInstance().time_pet);
  }, e.prototype.initPetInfo = function () {
    var t = d["default"].getInstance();
    this.LabName.string = this.curPetCfg.Name;
    var e = l.Utils.getTabelArr(this.curPetCfg.PetsAttribute1),
        o = l.Utils.getTabelArr(this.curPetCfg.PetsAttribute2);
    this.LabProp1.string = "<b>" + t.getPropNameForPropType(Number(e[0])) + "+" + Number(e[1]) + t.getPropPercent(Number(e[0])) + "</b>", this.LabProp2.string = "<b>" + t.getPropNameForPropType(Number(o[0])) + "+" + Number(o[1]) + t.getPropPercent(Number(o[0])) + "</b>";
  }, e.prototype.initBtnShow = function () {
    f.PlayerMgr.getInstance().geUserData().isExistPetFotId(1) ? this.controlBtn(!1, !1, !0) : this.controlBtn(!0, !0, !1);
  }, e.prototype.controlBtn = function (t, e, o) {
    this.BtnFalse.active = t, this.BtnVideoGet.active = e, this.BtnTrue.active = o;
  }, e.prototype.refreshTime = function (t) {
    (h["default"].getInstance().isOwnedPet || t >= 30 || t <= 0) && (this.LabTime.node.active = !1), this.LabTime.string = "<color = #ff0000>" + (30 - t) + "s</c>后离开";
  }, e.prototype.closeView = function () {
    this.closeUI();
  }, r([k(cc.Node)], e.prototype, "BtnBack", void 0), r([k(cc.Node)], e.prototype, "BtnFalse", void 0), r([k(cc.Node)], e.prototype, "BtnTrue", void 0), r([k(cc.Node)], e.prototype, "BtnVideoGet", void 0), r([k(cc.Label)], e.prototype, "LabName", void 0), r([k(cc.RichText)], e.prototype, "LabProp1", void 0), r([k(cc.RichText)], e.prototype, "LabProp2", void 0), r([k(cc.RichText)], e.prototype, "LabTime", void 0), r([I], e);
}(n["default"]);

o["default"] = C;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcVUlQZXQuanMiXSwibmFtZXMiOlsidCIsInJlcXVpcmUiLCJlIiwibW9kdWxlIiwibyIsImV4cG9ydHMiLCJhIiwiaSIsIl9fZXh0ZW5kcyIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJjb25zdHJ1Y3RvciIsImNyZWF0ZSIsInIiLCJfX2RlY29yYXRlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwibiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsInMiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiYyIsImwiLCJ1IiwicCIsImciLCJkIiwiaCIsImYiLCJtIiwieSIsInYiLCJjYyIsIl9kZWNvcmF0b3IiLCJJIiwiY2NjbGFzcyIsImsiLCJwcm9wZXJ0eSIsIkMiLCJhcHBseSIsIkJ0bkJhY2siLCJCdG5GYWxzZSIsIkJ0blRydWUiLCJCdG5WaWRlb0dldCIsIkxhYk5hbWUiLCJMYWJQcm9wMSIsIkxhYlByb3AyIiwiTGFiVGltZSIsIm9uTG9hZCIsInJlZ2lzdGVyRXZlbnQiLCJzdGFydCIsInJlZ2lzdGVyQnRuRXZlbnQiLCJpbml0RGF0YSIsImluaXRWaWV3Iiwib25DbG9zZSIsImFkZEV2ZW50IiwiRXZlbnROYW1lIiwiUmVmcmVzaFBldFZpZXdUaW1lIiwicmVmcmVzaFRpbWUiLCJvbiIsIk5vZGUiLCJFdmVudFR5cGUiLCJUT1VDSF9FTkQiLCJQbGF5ZXJNZ3IiLCJnZXRJbnN0YW5jZSIsImdldFRyYWNrRGF0YSIsInlvdW1lbmdUcmFjayIsIlRyYWNrSWQiLCJwZXRfY2FuY2VsIiwiY2xvc2VWaWV3IiwiVGltZVV0aWxzIiwiR2V0VGltZUJ5U2Vjb25kIiwiR2V0VGltZUJ5SG91cnMyIiwiU2RrTWdyIiwicGxheVZpZGVvIiwidGVzdFRyYWNrVGltZSIsInBldCIsInlvdW1lbmdUcmFja05ldyIsInBldF9nZXQiLCJnZVVzZXJEYXRhIiwiZ2V0Q3VyU2VjIiwiZ2V0RW50ZXJTZWNDb3VudEZvclNlY0lkIiwicGV0X1giLCJhZGRQZXRUb0xpc3QiLCJjb250cm9sQnRuIiwiaXNPd25lZFBldCIsIlRpbWVNZ3IiLCJjbG9zZVRpbWVyX3BldCIsInBsYXlGaWdodFRpcHMiLCJub2RlIiwiY3VyUGV0Q2ZnIiwiRGF0YU1nciIsImdldFBldHNDZmciLCJpbml0UGV0SW5mbyIsImluaXRCdG5TaG93IiwidGltZV9wZXQiLCJzdHJpbmciLCJOYW1lIiwiVXRpbHMiLCJnZXRUYWJlbEFyciIsIlBldHNBdHRyaWJ1dGUxIiwiUGV0c0F0dHJpYnV0ZTIiLCJnZXRQcm9wTmFtZUZvclByb3BUeXBlIiwiTnVtYmVyIiwiZ2V0UHJvcFBlcmNlbnQiLCJpc0V4aXN0UGV0Rm90SWQiLCJhY3RpdmUiLCJjbG9zZVVJIiwiTGFiZWwiLCJSaWNoVGV4dCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxDQUFDLEdBQUdDLE9BQVI7QUFDQSxJQUFJQyxDQUFDLEdBQUdDLE1BQVI7QUFDQSxJQUFJQyxDQUFDLEdBQUdDLE9BQVI7O0FBQ0EsSUFBSUMsRUFBSjtBQUFBLElBQU9DLENBQUMsR0FBRyxVQUFRLFNBQUtDLFNBQWIsS0FBMkJGLEVBQUMsR0FBRyxXQUFTTixDQUFULEVBQVlFLENBQVosRUFBZTtFQUNyRCxPQUFPLENBQUNJLEVBQUMsR0FBR0csTUFBTSxDQUFDQyxjQUFQLElBQXlCO0lBQ2pDQyxTQUFTLEVBQUU7RUFEc0IsYUFHMUJDLEtBSDBCLElBSXJDLFVBQVNaLENBQVQsRUFBWUUsQ0FBWixFQUFlO0lBQ1hGLENBQUMsQ0FBQ1csU0FBRixHQUFjVCxDQUFkO0VBQ0gsQ0FOVyxJQU9aLFVBQVNGLENBQVQsRUFBWUUsQ0FBWixFQUFlO0lBQ1gsS0FBSyxJQUFJRSxDQUFULElBQWNGLENBQWQ7TUFBaUJPLE1BQU0sQ0FBQ0ksU0FBUCxDQUFpQkMsY0FBakIs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UEssQ0FBQyxDQUFDLENBQUMwQixDQUFDLENBQUNKLEVBQUUsQ0FBQzZFLFFBQUosQ0FBRixDQUFELEVBQW1CbkgsQ0FBQyxDQUFDVyxTQUFyQixFQUFnQyxTQUFoQyxFQUEyQyxLQUFLLENBQWhELENBMUZNLEVBMkZQSyxDQUFDLENBQUMsQ0FBQ3dCLENBQUQsQ0FBRCxFQUFNeEMsQ0FBTixDQTNGRDtBQTRGSCxDQXpHRyxDQXlHRG9CLENBQUMsV0F6R0EsQ0FmSjs7QUF5SEFsQixDQUFDLFdBQUQsR0FBWTBDLENBQVoiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0ID0gcmVxdWlyZTtcbnZhciBlID0gbW9kdWxlO1xudmFyIG8gPSBleHBvcnRzO1xudmFyIGEsIGkgPSB0aGlzICYmIHRoaXMuX19leHRlbmRzIHx8IChhID0gZnVuY3Rpb24odCwgZSkge1xuICAgIHJldHVybiAoYSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7XG4gICAgICAgIF9fcHJvdG9fXzogW11cbiAgICB9XG4gICAgaW5zdGFuY2VvZiBBcnJheSAmJlxuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgdC5fX3Byb3RvX18gPSBlXG4gICAgfSB8fFxuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yICh2YXIgbyBpbiBlKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgbykgJiYgKHRbb10gPSBlW29dKVxuICAgIH0pKHQsIGUpXG59LFxuZnVuY3Rpb24odCwgZSkge1xuICAgIGZ1bmN0aW9uIG8oKSB7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSB0XG4gICAgfVxuICAgIGEodCwgZSksXG4gICAgdC5wcm90b3R5cGUgPSBudWxsID09PSBlID8gT2JqZWN0LmNyZWF0ZShlKSA6IChvLnByb3RvdHlwZSA9IGUucHJvdG90eXBlLCBuZXcgbylcbn0pLFxuciA9IHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlIHx8XG5mdW5jdGlvbih0LCBlLCBvLCBhKSB7XG4gICAgdmFyIGksIHIgPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgIG4gPSByIDwgMyA/IGU6IG51bGwgPT09IGEgPyBhID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCBvKSA6IGE7XG4gICAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIFJlZmxlY3QgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKSBuID0gUmVmbGVjdC5kZWNvcmF0ZSh0LCBlLCBvLCBhKTtcbiAgICBlbHNlIGZvciAodmFyIHMgPSB0Lmxlbmd0aCAtIDE7IHMgPj0gMDsgcy0tKShpID0gdFtzXSkgJiYgKG4gPSAociA8IDMgPyBpKG4pIDogciA+IDMgPyBpKGUsIG8sIG4pIDogaShlLCBvKSkgfHwgbik7XG4gICAgcmV0dXJuIHIgPiAzICYmIG4gJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIG8sIG4pLFxuICAgIG5cbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogITBcbn0pO1xudmFyIG4gPSB0KFwiQmFzZVVJXCIpLFxucyA9IHQoXCJTZGtNZ3JcIiksXG5jID0gdChcIlRpbWVVdGlsc1wiKSxcbmwgPSB0KFwiVXRpbHNcIiksXG51ID0gdChcIkNvbmZpZ1wiKSxcbnAgPSB0KFwiVHJhY2tEYXRhRXZlbnRcIiksXG5nID0gdChcIkRhdGFNZ3JcIiksXG5kID0gdChcIkVxdWlwTWdyXCIpLFxuaCA9IHQoXCJQZXRNZ3JcIiksXG5mID0gdChcIlBsYXllck1nclwiKSxcbm0gPSB0KFwiVGltZU1nclwiKSxcbnkgPSB0KFwiVGlwc01nclwiKSxcbnYgPSBjYy5fZGVjb3JhdG9yLFxuSSA9IHYuY2NjbGFzcyxcbmsgPSB2LnByb3BlcnR5LFxuQyA9IGZ1bmN0aW9uKHQpIHtcbiAgICBmdW5jdGlvbiBlKCkge1xuICAgICAgICB2YXIgZSA9IG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIHJldHVybiBlLkJ0bkJhY2sgPSBudWxsLFxuICAgICAgICBlLkJ0bkZhbHNlID0gbnVsbCxcbiAgICAgICAgZS5CdG5UcnVlID0gbnVsbCxcbiAgICAgICAgZS5CdG5WaWRlb0dldCA9IG51bGwsXG4gICAgICAgIGUuTGFiTmFtZSA9IG51bGwsXG4gICAgICAgIGUuTGFiUHJvcDEgPSBudWxsLFxuICAgICAgICBlLkxhYlByb3AyID0gbnVsbCxcbiAgICAgICAgZS5MYWJUaW1lID0gbnVsbCxcbiAgICAgICAgZVxuICAgIH1cbiAgICByZXR1cm4gaShlLCB0KSxcbiAgICBlLnByb3RvdHlwZS5vbkxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KClcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJCdG5FdmVudCgpLFxuICAgICAgICB0aGlzLmluaXREYXRhKCksXG4gICAgICAgIHRoaXMuaW5pdFZpZXcoKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUub25DbG9zZSA9IGZ1bmN0aW9uKCkge30sXG4gICAgZS5wcm90b3R5cGUucmVnaXN0ZXJFdmVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmFkZEV2ZW50KHUuRXZlbnROYW1lLlJlZnJlc2hQZXRWaWV3VGltZSwgdGhpcy5yZWZyZXNoVGltZSlcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnJlZ2lzdGVyQnRuRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICB0aGlzLkJ0bkJhY2sub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELFxuICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGYuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2V0VHJhY2tEYXRhKCkueW91bWVuZ1RyYWNrKHAuVHJhY2tJZC5wZXRfY2FuY2VsKSxcbiAgICAgICAgICAgIHQuY2xvc2VWaWV3KClcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMuQnRuRmFsc2Uub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELFxuICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGYuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2V0VHJhY2tEYXRhKCkueW91bWVuZ1RyYWNrKHAuVHJhY2tJZC5wZXRfY2FuY2VsKSxcbiAgICAgICAgICAgIHQuY2xvc2VWaWV3KClcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMuQnRuVHJ1ZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdC5jbG9zZVZpZXcoKVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy5CdG5WaWRlb0dldC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGUgPSBjLlRpbWVVdGlscy5HZXRUaW1lQnlTZWNvbmQoKSxcbiAgICAgICAgICAgIG8gPSBjLlRpbWVVdGlscy5HZXRUaW1lQnlIb3VyczIoKTtcbiAgICAgICAgICAgIHMuU2RrTWdyLmdldEluc3RhbmNlKCkucGxheVZpZGVvKDEsXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGMuVGltZVV0aWxzLkdldFRpbWVCeVNlY29uZCgpLFxuICAgICAgICAgICAgICAgIGkgPSBjLlRpbWVVdGlscy5HZXRUaW1lQnlIb3VyczIoKTtcbiAgICAgICAgICAgICAgICBmLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdldFRyYWNrRGF0YSgpLnRlc3RUcmFja1RpbWUoXCJwZXRcIiwgbywgaSwgZSwgYSksXG4gICAgICAgICAgICAgICAgZi5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRUcmFja0RhdGEoKS55b3VtZW5nVHJhY2socC5UcmFja0lkLnBldCksXG4gICAgICAgICAgICAgICAgZi5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRUcmFja0RhdGEoKS55b3VtZW5nVHJhY2tOZXcoXCJwZXRfYlwiKSxcbiAgICAgICAgICAgICAgICBmLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdldFRyYWNrRGF0YSgpLnlvdW1lbmdUcmFjayhwLlRyYWNrSWQucGV0X2dldCk7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSBmLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5nZXRDdXJTZWMoKTtcbiAgICAgICAgICAgICAgICBmLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5nZXRFbnRlclNlY0NvdW50Rm9yU2VjSWQocikgPD0gMCAmJiAociAtPSAxKSA8IDEgJiYgKHIgPSAxKSxcbiAgICAgICAgICAgICAgICByIDw9IDUgJiYgZi5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRUcmFja0RhdGEoKS55b3VtZW5nVHJhY2socC5UcmFja0lkLnBldF9YLCByKSxcbiAgICAgICAgICAgICAgICBmLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5hZGRQZXRUb0xpc3QoMSksXG4gICAgICAgICAgICAgICAgdC5jb250cm9sQnRuKCExLCAhMSwgITApLFxuICAgICAgICAgICAgICAgIGguZGVmYXVsdC5nZXRJbnN0YW5jZSgpLmlzT3duZWRQZXQgPSAhMCxcbiAgICAgICAgICAgICAgICBtLlRpbWVNZ3IuZ2V0SW5zdGFuY2UoKS5jbG9zZVRpbWVyX3BldCgpLFxuICAgICAgICAgICAgICAgIHQucmVmcmVzaFRpbWUoMCksXG4gICAgICAgICAgICAgICAgeS5kZWZhdWx0LmdldEluc3RhbmNlKCkucGxheUZpZ2h0VGlwcyh0Lm5vZGUpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuaW5pdERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jdXJQZXRDZmcgPSBnLkRhdGFNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRQZXRzQ2ZnKClcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmluaXRWaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuaW5pdFBldEluZm8oKSxcbiAgICAgICAgdGhpcy5pbml0QnRuU2hvdygpLFxuICAgICAgICB0aGlzLnJlZnJlc2hUaW1lKG0uVGltZU1nci5nZXRJbnN0YW5jZSgpLnRpbWVfcGV0KVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuaW5pdFBldEluZm8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQgPSBkLmRlZmF1bHQuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgdGhpcy5MYWJOYW1lLnN0cmluZyA9IHRoaXMuY3VyUGV0Q2ZnLk5hbWU7XG4gICAgICAgIHZhciBlID0gbC5VdGlscy5nZXRUYWJlbEFycih0aGlzLmN1clBldENmZy5QZXRzQXR0cmlidXRlMSksXG4gICAgICAgIG8gPSBsLlV0aWxzLmdldFRhYmVsQXJyKHRoaXMuY3VyUGV0Q2ZnLlBldHNBdHRyaWJ1dGUyKTtcbiAgICAgICAgdGhpcy5MYWJQcm9wMS5zdHJpbmcgPSBcIjxiPlwiICsgdC5nZXRQcm9wTmFtZUZvclByb3BUeXBlKE51bWJlcihlWzBdKSkgKyBcIitcIiArIE51bWJlcihlWzFdKSArIHQuZ2V0UHJvcFBlcmNlbnQoTnVtYmVyKGVbMF0pKSArIFwiPC9iPlwiLFxuICAgICAgICB0aGlzLkxhYlByb3AyLnN0cmluZyA9IFwiPGI+XCIgKyB0LmdldFByb3BOYW1lRm9yUHJvcFR5cGUoTnVtYmVyKG9bMF0pKSArIFwiK1wiICsgTnVtYmVyKG9bMV0pICsgdC5nZXRQcm9wUGVyY2VudChOdW1iZXIob1swXSkpICsgXCI8L2I+XCJcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmluaXRCdG5TaG93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGYuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2VVc2VyRGF0YSgpLmlzRXhpc3RQZXRGb3RJZCgxKSA/IHRoaXMuY29udHJvbEJ0bighMSwgITEsICEwKSA6IHRoaXMuY29udHJvbEJ0bighMCwgITAsICExKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuY29udHJvbEJ0biA9IGZ1bmN0aW9uKHQsIGUsIG8pIHtcbiAgICAgICAgdGhpcy5CdG5GYWxzZS5hY3RpdmUgPSB0LFxuICAgICAgICB0aGlzLkJ0blZpZGVvR2V0LmFjdGl2ZSA9IGUsXG4gICAgICAgIHRoaXMuQnRuVHJ1ZS5hY3RpdmUgPSBvXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5yZWZyZXNoVGltZSA9IGZ1bmN0aW9uKHQpIHsgKGguZGVmYXVsdC5nZXRJbnN0YW5jZSgpLmlzT3duZWRQZXQgfHwgdCA+PSAzMCB8fCB0IDw9IDApICYmICh0aGlzLkxhYlRpbWUubm9kZS5hY3RpdmUgPSAhMSksXG4gICAgICAgIHRoaXMuTGFiVGltZS5zdHJpbmcgPSBcIjxjb2xvciA9ICNmZjAwMDA+XCIgKyAoMzAgLSB0KSArIFwiczwvYz7lkI7nprvlvIBcIlxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuY2xvc2VWaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY2xvc2VVSSgpXG4gICAgfSxcbiAgICByKFtrKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiQnRuQmFja1wiLCB2b2lkIDApLFxuICAgIHIoW2soY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJCdG5GYWxzZVwiLCB2b2lkIDApLFxuICAgIHIoW2soY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJCdG5UcnVlXCIsIHZvaWQgMCksXG4gICAgcihbayhjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcIkJ0blZpZGVvR2V0XCIsIHZvaWQgMCksXG4gICAgcihbayhjYy5MYWJlbCldLCBlLnByb3RvdHlwZSwgXCJMYWJOYW1lXCIsIHZvaWQgMCksXG4gICAgcihbayhjYy5SaWNoVGV4dCldLCBlLnByb3RvdHlwZSwgXCJMYWJQcm9wMVwiLCB2b2lkIDApLFxuICAgIHIoW2soY2MuUmljaFRleHQpXSwgZS5wcm90b3R5cGUsIFwiTGFiUHJvcDJcIiwgdm9pZCAwKSxcbiAgICByKFtrKGNjLlJpY2hUZXh0KV0sIGUucHJvdG90eXBlLCBcIkxhYlRpbWVcIiwgdm9pZCAwKSxcbiAgICByKFtJXSwgZSlcbn0gKG4uZGVmYXVsdCk7XG5vLmRlZmF1bHQgPSBDIl19