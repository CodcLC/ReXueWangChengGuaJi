
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ComCollectionData.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5fd77fRSB1HOak8Rvk3nmDC', 'ComCollectionData');
// scripts/ComCollectionData.js

"use strict";

var t = require;
var e = module;
var o = exports;

var _a,
    i = void 0 && (void 0).__extends || (_a = function a(t, e) {
  return (_a = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (t, e) {
    t.__proto__ = e;
  } || function (t, e) {
    for (var o in e) {
      Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
    }
  })(t, e);
}, function (t, e) {
  function o() {
    this.constructor = t;
  }

  _a(t, e), t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o());
});

Object.defineProperty(o, "__esModule", {
  value: !0
}), o.ComCollectionData = void 0;

var r = t("BaseData"),
    n = t("EventMgr"),
    s = t("LogMgr"),
    c = t("TimeUtils"),
    l = t("UIUtils"),
    u = t("Config"),
    p = t("CommonCfg"),
    g = t("ComDataMgr"),
    d = function d() {
  this.isGet = !1, this.finished = !1, this.adTip = !1, this.isTips = !1;
},
    h = function h() {
  this.index = 1, this.itemData = [], this.isGet = !1, this.endtime = -1, this.process = 0;
},
    f = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    return e.ecrypt = !1, e.gameKey = u.GameConfig.AppCacheName + "collection", e.showRed = !1, e;
  }

  return i(e, t), e.prototype.createData = function () {
    this.data = new h();
    var t = Number(g.ComDataMgr.getInstance().getCommonParam(g.CommonParamType.colloctionTime));
    return t > 0 && (this.data.endtime = c.TimeUtils.GetTimeBySecond() + 60 * t), this.data;
  }, e.prototype.initData = function (t) {
    if (t) {
      for (var e = g.ComDataMgr.getInstance().getCollectionCfgById(this.data.index).itemId.split(u.GameConfig.splitNum), o = 0; o < e.length; o++) {
        var a = Number(e[o]),
            i = new d();
        i.id = o, i.itemId = a;
        var r = g.ComDataMgr.getInstance().getCollectionItemById(a);
        null == r.tips ? i.adTip = !1 : i.adTip = !0, i.goodId = r.goodId, i.isGet = !1, i.num = 0, i.finished = !1, this.data.itemData.push(i);
      }

      this.saveData();
    } else this.refreData();
  }, e.prototype.getCurrentReward = function () {
    var t = g.ComDataMgr.getInstance().getCollectionCfgById(this.data.index);
    return t ? t.rewards : null;
  }, e.prototype.refreData = function () {
    if (this.checkCanRefresh() && this.data.endtime > 1) if (this.data.endtime - c.TimeUtils.GetTimeBySecond() <= 0) this.nextData();else {
      var t = this.data.endtime - c.TimeUtils.GetTimeBySecond();
      l.UIUtils.scheduleOnce(this.nextData, this, t);
    }
  }, e.prototype.getCollectionData = function (t) {
    for (var e = 0; e < this.data.itemData.length; e++) {
      var o = this.data.itemData[e];
      if (o.id == t) return o;
    }

    return null;
  }, e.prototype.getAllCollectionData = function () {
    return this.data.itemData;
  }, e.prototype.checkCanRefresh = function () {
    var t = g.ComDataMgr.getInstance();
    if (Number(t.getCommonParam(g.CommonParamType.colloctionCanNext)) <= 0) return !1;
    var e = t.getAllCollectionCfg();

    if (this.data.index == e.length) {
      if (Number(t.getCommonParam(g.CommonParamType.colloctionRepet)) <= 0) return !1;
      this.data.index = 1;
    }

    if (this.data.isGet) return !0;
    if (this.data.process == this.data.itemData.length) return !1;

    for (var o = [], a = 0; a < this.data.itemData.length; a++) {
      var i = this.data.itemData[a];
      (i.isGet || i.finished) && o.push(!0);
    }

    return o.length != this.data.itemData.length && (s.LogMgr.getInstance().debug("其他情况 可以清掉"), !0);
  }, e.prototype.nextData = function () {
    var t = g.ComDataMgr.getInstance().getAllCollectionCfg();
    this.data.index >= t.length && (this.data.index = 0);
    var e = g.ComDataMgr.getInstance().getCollectionCfgById(this.data.index + 1).itemId.split(u.GameConfig.splitNum);
    this.data.itemData.splice(0, this.data.itemData.length);

    for (var o = 0; o < e.length; o++) {
      var a = Number(e[o]),
          i = new d();
      i.id = o, i.itemId = a, i.isGet = !1, i.num = 0;
      var r = g.ComDataMgr.getInstance().getCollectionItemById(a);
      i.goodId = r.goodId, i.finished = !1, this.data.itemData.push(i);
    }

    var n = Number(g.ComDataMgr.getInstance().getCommonParam(g.CommonParamType.colloctionTime));
    this.data.endtime = n > 0 ? c.TimeUtils.GetTimeBySecond() + 60 * n : -1, this.data.process = 0, this.data.index += 1, this.data.isGet = !1, this.saveData(), this.checkShowRed();
  }, e.prototype.receiveTaskReward = function (t) {
    if (this.data.isGet = !0, this.checkCanRefresh()) {
      if (this.data.endtime > 1) if (this.data.endtime - c.TimeUtils.GetTimeBySecond() <= 0) this.nextData(), t && t(!0);else {
        var e = this.data.endtime - c.TimeUtils.GetTimeBySecond();
        l.UIUtils.unSchedule(this.nextData, this), l.UIUtils.scheduleOnce(this.nextData, this, e), t && t(!1);
      }
    } else t && t(!1);

    this.checkShowRed(), this.saveData();
  }, e.prototype.checkFinshed = function () {
    if (this.data.isGet) return !0;

    for (var t = [], e = 0; e < this.data.itemData.length; e++) {
      var o = this.data.itemData[e];
      if (o.isGet || o.finished) t.push(!0);else {
        var a = g.ComDataMgr.getInstance().getCollectionItemById(o.itemId);
        a && o.num >= a.needNum && (t.push(!0), o.finished = !0);
      }
    }

    return t.length >= this.data.itemData.length;
  }, e.prototype.checkShowRed = function () {
    for (var t = !1, e = 0; e < this.data.itemData.length; e++) {
      var o = this.data.itemData[e];
      !o.isGet && o.finished && (t = !0);
    }

    t || this.data.isGet || this.data.process != this.data.itemData.length || (t = !0), t ? this.showRed || (this.showRed = !0, n.EventMgr.getInstance().emit(p.CommonEventName.RefreshCollectionRed, !0)) : this.showRed && (this.showRed = !1, n.EventMgr.getInstance().emit(p.CommonEventName.RefreshCollectionRed, !1));
  }, e.prototype.addAdTips = function (t) {
    var e = this.getCollectionData(t);
    e.adTip && (e.isTips = !0, this.saveData());
  }, e.prototype.addData = function (t, e, o) {
    void 0 === o && (o = !0);

    for (var a = [], i = 0; i < this.data.itemData.length; i++) {
      var r = this.data.itemData[i];

      if (r.goodId == t) {
        r.num += e;
        var s = g.ComDataMgr.getInstance().getCollectionItemById(r.itemId);
        s && r.num >= s.needNum && (r.finished = !0), a.push(r.id);
      }
    }

    a.length > 0 && (this.saveData(), o && n.EventMgr.getInstance().emit(p.CommonEventName.RefreshCollection, a)), this.checkShowRed();
  }, e.prototype.getProcess = function () {
    return this.data.process;
  }, e.prototype.getEndtime = function () {
    return this.data.endtime;
  }, e.prototype.finishData = function (t) {
    var e = this.getCollectionData(t);
    e && (e.finished = !0, e.isGet = !0, this.data.process += 1, this.saveData()), this.checkShowRed();
  }, e;
}(r.BaseData);

o.ComCollectionData = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQ29tQ29sbGVjdGlvbkRhdGEuanMiXSwibmFtZXMiOlsidCIsInJlcXVpcmUiLCJlIiwibW9kdWxlIiwibyIsImV4cG9ydHMiLCJhIiwiaSIsIl9fZXh0ZW5kcyIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJjb25zdHJ1Y3RvciIsImNyZWF0ZSIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJDb21Db2xsZWN0aW9uRGF0YSIsInIiLCJuIiwicyIsImMiLCJsIiwidSIsInAiLCJnIiwiZCIsImlzR2V0IiwiZmluaXNoZWQiLCJhZFRpcCIsImlzVGlwcyIsImgiLCJpbmRleCIsIml0ZW1EYXRhIiwiZW5kdGltZSIsInByb2Nlc3MiLCJmIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJlY3J5cHQiLCJnYW1lS2V5IiwiR2FtZUNvbmZpZyIsIkFwcENhY2hlTmFtZSIsInNob3dSZWQiLCJjcmVhdGVEYXRhIiwiZGF0YSIsIk51bWJlciIsIkNvbURhdGFNZ3IiLCJnZXRJbnN0YW5jZSIsImdldENvbW1vblBhcmFtIiwiQ29tbW9uUGFyYW1UeXBlIiwiY29sbG9jdGlvblRpbWUiLCJUaW1lVXRpbHMiLCJHZXRUaW1lQnlTZWNvbmQiLCJpbml0RGF0YSIsImdldENvbGxlY3Rpb25DZmdCeUlkIiwiaXRlbUlkIiwic3BsaXQiLCJzcGxpdE51bSIsImxlbmd0aCIsImlkIiwiZ2V0Q29sbGVjdGlvbkl0ZW1CeUlkIiwidGlwcyIsImdvb2RJZCIsIm51bSIsInB1c2giLCJzYXZlRGF0YSIsInJlZnJlRGF0YSIsImdldEN1cnJlbnRSZXdhcmQiLCJyZXdhcmRzIiwiY2hlY2tDYW5SZWZyZXNoIiwibmV4dERhdGEiLCJVSVV0aWxzIiwic2NoZWR1bGVPbmNlIiwiZ2V0Q29sbGVjdGlvbkRhdGEiLCJnZXRBbGxDb2xsZWN0aW9uRGF0YSIsImNvbGxvY3Rpb25DYW5OZXh0IiwiZ2V0QWxsQ29sbGVjdGlvbkNmZyIsImNvbGxvY3Rpb25SZXBldCIsIkxvZ01nciIsImRlYnVnIiwic3BsaWNlIiwiY2hlY2tTaG93UmVkIiwicmVjZWl2ZVRhc2tSZXdhcmQiLCJ1blNjaGVkdWxlIiwiY2hlY2tGaW5zaGVkIiwibmVlZE51bSIsIkV2ZW50TWdyIiwiZW1pdCIsIkNvbW1vbkV2ZW50TmFtZSIsIlJlZnJlc2hDb2xsZWN0aW9uUmVkIiwiYWRkQWRUaXBzIiwiYWRkRGF0YSIsIlJlZnJlc2hDb2xsZWN0aW9uIiwiZ2V0UHJvY2VzcyIsImdldEVuZHRpbWUiLCJmaW5pc2hEYXRhIiwiQmFzZURhdGEiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBQyxHQUFHQyxPQUFSO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHQyxNQUFSO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHQyxPQUFSOztBQUNBLElBQUlDLEVBQUo7QUFBQSxJQUFPQyxDQUFDLEdBQUcsVUFBUSxTQUFLQyxTQUFiLEtBQTJCRixFQUFDLEdBQUcsV0FBU04sQ0FBVCxFQUFZRSxDQUFaLEVBQWU7RUFDckQsT0FBTyxDQUFDSSxFQUFDLEdBQUdHLE1BQU0sQ0FBQ0MsY0FBUCxJQUF5QjtJQUNqQ0MsU0FBUyxFQUFFO0VBRHNCLGFBRzFCQyxLQUgwQixJQUlyQyxVQUFTWixDQUFULEVBQVlFLENBQVosRUFBZTtJQUNYRixDQUFDLENBQUNXLFNBQUYsR0FBY1QsQ0FBZDtFQUNILENBTlcsSUFPWixVQUFTRixDQUFULEVBQVlFLENBQVosRUFBZTtJQUNYLEtBQUssSUFBSUUsQ0FBVCxJQUFjRixDQUFkO01BQWlCTyxNQUFNLENBQUNJLFNBQVAsQ0FBaUJDLGNBQWpCLENBQWdDQyxJQUFoQyxDQUFxQ2IsQ0FBckMsRUFBd0NFLENBQXhDLE1BQStDSixDQUFDLENBQUNJLENBQUQsQ0FBRCxHQUFPRixDQUFDLENBQUNFLENBQUQsQ0FBdkQ7SUFBakI7RUFDSCxDQVRNLEVBU0pKLENBVEks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Q0F6SU0sRUEwSVBuRixDQUFDLENBQUNXLFNBQUYsQ0FBWW9GLFVBQVosR0FBeUIsWUFBVztJQUNoQyxPQUFPLEtBQUtqRCxJQUFMLENBQVVWLE9BQWpCO0VBQ0gsQ0E1SU0sRUE2SVBwQyxDQUFDLENBQUNXLFNBQUYsQ0FBWXFGLFVBQVosR0FBeUIsWUFBVztJQUNoQyxPQUFPLEtBQUtsRCxJQUFMLENBQVVYLE9BQWpCO0VBQ0gsQ0EvSU0sRUFnSlBuQyxDQUFDLENBQUNXLFNBQUYsQ0FBWXNGLFVBQVosR0FBeUIsVUFBU25HLENBQVQsRUFBWTtJQUNqQyxJQUFJRSxDQUFDLEdBQUcsS0FBSzJFLGlCQUFMLENBQXVCN0UsQ0FBdkIsQ0FBUjtJQUNBRSxDQUFDLEtBQUtBLENBQUMsQ0FBQzZCLFFBQUYsR0FBYSxDQUFDLENBQWQsRUFBaUI3QixDQUFDLENBQUM0QixLQUFGLEdBQVUsQ0FBQyxDQUE1QixFQUErQixLQUFLa0IsSUFBTCxDQUFVVixPQUFWLElBQXFCLENBQXBELEVBQXVELEtBQUsrQixRQUFMLEVBQTVELENBQUQsRUFDQSxLQUFLZ0IsWUFBTCxFQURBO0VBRUgsQ0FwSk0sRUFxSlBuRixDQXJKQTtBQXNKSCxDQTlKRyxDQThKRG1CLENBQUMsQ0FBQytFLFFBOUpELENBckJKOztBQW9MQWhHLENBQUMsQ0FBQ2dCLGlCQUFGLEdBQXNCbUIsQ0FBdEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0ID0gcmVxdWlyZTtcbnZhciBlID0gbW9kdWxlO1xudmFyIG8gPSBleHBvcnRzO1xudmFyIGEsIGkgPSB0aGlzICYmIHRoaXMuX19leHRlbmRzIHx8IChhID0gZnVuY3Rpb24odCwgZSkge1xuICAgIHJldHVybiAoYSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7XG4gICAgICAgIF9fcHJvdG9fXzogW11cbiAgICB9XG4gICAgaW5zdGFuY2VvZiBBcnJheSAmJlxuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgdC5fX3Byb3RvX18gPSBlXG4gICAgfSB8fFxuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yICh2YXIgbyBpbiBlKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgbykgJiYgKHRbb10gPSBlW29dKVxuICAgIH0pKHQsIGUpXG59LFxuZnVuY3Rpb24odCwgZSkge1xuICAgIGZ1bmN0aW9uIG8oKSB7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSB0XG4gICAgfVxuICAgIGEodCwgZSksXG4gICAgdC5wcm90b3R5cGUgPSBudWxsID09PSBlID8gT2JqZWN0LmNyZWF0ZShlKSA6IChvLnByb3RvdHlwZSA9IGUucHJvdG90eXBlLCBuZXcgbylcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6ICEwXG59KSxcbm8uQ29tQ29sbGVjdGlvbkRhdGEgPSB2b2lkIDA7XG52YXIgciA9IHQoXCJCYXNlRGF0YVwiKSxcbm4gPSB0KFwiRXZlbnRNZ3JcIiksXG5zID0gdChcIkxvZ01nclwiKSxcbmMgPSB0KFwiVGltZVV0aWxzXCIpLFxubCA9IHQoXCJVSVV0aWxzXCIpLFxudSA9IHQoXCJDb25maWdcIiksXG5wID0gdChcIkNvbW1vbkNmZ1wiKSxcbmcgPSB0KFwiQ29tRGF0YU1nclwiKSxcbmQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmlzR2V0ID0gITEsXG4gICAgdGhpcy5maW5pc2hlZCA9ICExLFxuICAgIHRoaXMuYWRUaXAgPSAhMSxcbiAgICB0aGlzLmlzVGlwcyA9ICExXG59LFxuaCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5kZXggPSAxLFxuICAgIHRoaXMuaXRlbURhdGEgPSBbXSxcbiAgICB0aGlzLmlzR2V0ID0gITEsXG4gICAgdGhpcy5lbmR0aW1lID0gLTEsXG4gICAgdGhpcy5wcm9jZXNzID0gMFxufSxcbmYgPSBmdW5jdGlvbih0KSB7XG4gICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgdmFyIGUgPSBudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gZS5lY3J5cHQgPSAhMSxcbiAgICAgICAgZS5nYW1lS2V5ID0gdS5HYW1lQ29uZmlnLkFwcENhY2hlTmFtZSArIFwiY29sbGVjdGlvblwiLFxuICAgICAgICBlLnNob3dSZWQgPSAhMSxcbiAgICAgICAgZVxuICAgIH1cbiAgICByZXR1cm4gaShlLCB0KSxcbiAgICBlLnByb3RvdHlwZS5jcmVhdGVEYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBoO1xuICAgICAgICB2YXIgdCA9IE51bWJlcihnLkNvbURhdGFNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRDb21tb25QYXJhbShnLkNvbW1vblBhcmFtVHlwZS5jb2xsb2N0aW9uVGltZSkpO1xuICAgICAgICByZXR1cm4gdCA+IDAgJiYgKHRoaXMuZGF0YS5lbmR0aW1lID0gYy5UaW1lVXRpbHMuR2V0VGltZUJ5U2Vjb25kKCkgKyA2MCAqIHQpLFxuICAgICAgICB0aGlzLmRhdGFcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmluaXREYXRhID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgZm9yICh2YXIgZSA9IGcuQ29tRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldENvbGxlY3Rpb25DZmdCeUlkKHRoaXMuZGF0YS5pbmRleCkuaXRlbUlkLnNwbGl0KHUuR2FtZUNvbmZpZy5zcGxpdE51bSksIG8gPSAwOyBvIDwgZS5sZW5ndGg7IG8rKykge1xuICAgICAgICAgICAgICAgIHZhciBhID0gTnVtYmVyKGVbb10pLFxuICAgICAgICAgICAgICAgIGkgPSBuZXcgZDtcbiAgICAgICAgICAgICAgICBpLmlkID0gbyxcbiAgICAgICAgICAgICAgICBpLml0ZW1JZCA9IGE7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSBnLkNvbURhdGFNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRDb2xsZWN0aW9uSXRlbUJ5SWQoYSk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PSByLnRpcHMgPyBpLmFkVGlwID0gITEgOiBpLmFkVGlwID0gITAsXG4gICAgICAgICAgICAgICAgaS5nb29kSWQgPSByLmdvb2RJZCxcbiAgICAgICAgICAgICAgICBpLmlzR2V0ID0gITEsXG4gICAgICAgICAgICAgICAgaS5udW0gPSAwLFxuICAgICAgICAgICAgICAgIGkuZmluaXNoZWQgPSAhMSxcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuaXRlbURhdGEucHVzaChpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zYXZlRGF0YSgpXG4gICAgICAgIH0gZWxzZSB0aGlzLnJlZnJlRGF0YSgpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5nZXRDdXJyZW50UmV3YXJkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0ID0gZy5Db21EYXRhTWdyLmdldEluc3RhbmNlKCkuZ2V0Q29sbGVjdGlvbkNmZ0J5SWQodGhpcy5kYXRhLmluZGV4KTtcbiAgICAgICAgcmV0dXJuIHQgPyB0LnJld2FyZHM6IG51bGxcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnJlZnJlRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5jaGVja0NhblJlZnJlc2goKSAmJiB0aGlzLmRhdGEuZW5kdGltZSA+IDEpIGlmICh0aGlzLmRhdGEuZW5kdGltZSAtIGMuVGltZVV0aWxzLkdldFRpbWVCeVNlY29uZCgpIDw9IDApIHRoaXMubmV4dERhdGEoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuZGF0YS5lbmR0aW1lIC0gYy5UaW1lVXRpbHMuR2V0VGltZUJ5U2Vjb25kKCk7XG4gICAgICAgICAgICBsLlVJVXRpbHMuc2NoZWR1bGVPbmNlKHRoaXMubmV4dERhdGEsIHRoaXMsIHQpXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmdldENvbGxlY3Rpb25EYXRhID0gZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IHRoaXMuZGF0YS5pdGVtRGF0YS5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgdmFyIG8gPSB0aGlzLmRhdGEuaXRlbURhdGFbZV07XG4gICAgICAgICAgICBpZiAoby5pZCA9PSB0KSByZXR1cm4gb1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5nZXRBbGxDb2xsZWN0aW9uRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLml0ZW1EYXRhXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5jaGVja0NhblJlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQgPSBnLkNvbURhdGFNZ3IuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgaWYgKE51bWJlcih0LmdldENvbW1vblBhcmFtKGcuQ29tbW9uUGFyYW1UeXBlLmNvbGxvY3Rpb25DYW5OZXh0KSkgPD0gMCkgcmV0dXJuICEgMTtcbiAgICAgICAgdmFyIGUgPSB0LmdldEFsbENvbGxlY3Rpb25DZmcoKTtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5pbmRleCA9PSBlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKE51bWJlcih0LmdldENvbW1vblBhcmFtKGcuQ29tbW9uUGFyYW1UeXBlLmNvbGxvY3Rpb25SZXBldCkpIDw9IDApIHJldHVybiAhIDE7XG4gICAgICAgICAgICB0aGlzLmRhdGEuaW5kZXggPSAxXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGF0YS5pc0dldCkgcmV0dXJuICEgMDtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5wcm9jZXNzID09IHRoaXMuZGF0YS5pdGVtRGF0YS5sZW5ndGgpIHJldHVybiAhIDE7XG4gICAgICAgIGZvciAodmFyIG8gPSBbXSwgYSA9IDA7IGEgPCB0aGlzLmRhdGEuaXRlbURhdGEubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5kYXRhLml0ZW1EYXRhW2FdOyAoaS5pc0dldCB8fCBpLmZpbmlzaGVkKSAmJiBvLnB1c2goITApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG8ubGVuZ3RoICE9IHRoaXMuZGF0YS5pdGVtRGF0YS5sZW5ndGggJiYgKHMuTG9nTWdyLmdldEluc3RhbmNlKCkuZGVidWcoXCLlhbbku5bmg4XlhrUg5Y+v5Lul5riF5o6JXCIpLCAhMClcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLm5leHREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0ID0gZy5Db21EYXRhTWdyLmdldEluc3RhbmNlKCkuZ2V0QWxsQ29sbGVjdGlvbkNmZygpO1xuICAgICAgICB0aGlzLmRhdGEuaW5kZXggPj0gdC5sZW5ndGggJiYgKHRoaXMuZGF0YS5pbmRleCA9IDApO1xuICAgICAgICB2YXIgZSA9IGcuQ29tRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldENvbGxlY3Rpb25DZmdCeUlkKHRoaXMuZGF0YS5pbmRleCArIDEpLml0ZW1JZC5zcGxpdCh1LkdhbWVDb25maWcuc3BsaXROdW0pO1xuICAgICAgICB0aGlzLmRhdGEuaXRlbURhdGEuc3BsaWNlKDAsIHRoaXMuZGF0YS5pdGVtRGF0YS5sZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IGUubGVuZ3RoOyBvKyspIHtcbiAgICAgICAgICAgIHZhciBhID0gTnVtYmVyKGVbb10pLFxuICAgICAgICAgICAgaSA9IG5ldyBkO1xuICAgICAgICAgICAgaS5pZCA9IG8sXG4gICAgICAgICAgICBpLml0ZW1JZCA9IGEsXG4gICAgICAgICAgICBpLmlzR2V0ID0gITEsXG4gICAgICAgICAgICBpLm51bSA9IDA7XG4gICAgICAgICAgICB2YXIgciA9IGcuQ29tRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldENvbGxlY3Rpb25JdGVtQnlJZChhKTtcbiAgICAgICAgICAgIGkuZ29vZElkID0gci5nb29kSWQsXG4gICAgICAgICAgICBpLmZpbmlzaGVkID0gITEsXG4gICAgICAgICAgICB0aGlzLmRhdGEuaXRlbURhdGEucHVzaChpKVxuICAgICAgICB9XG4gICAgICAgIHZhciBuID0gTnVtYmVyKGcuQ29tRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldENvbW1vblBhcmFtKGcuQ29tbW9uUGFyYW1UeXBlLmNvbGxvY3Rpb25UaW1lKSk7XG4gICAgICAgIHRoaXMuZGF0YS5lbmR0aW1lID0gbiA+IDAgPyBjLlRpbWVVdGlscy5HZXRUaW1lQnlTZWNvbmQoKSArIDYwICogbjogLTEsXG4gICAgICAgIHRoaXMuZGF0YS5wcm9jZXNzID0gMCxcbiAgICAgICAgdGhpcy5kYXRhLmluZGV4ICs9IDEsXG4gICAgICAgIHRoaXMuZGF0YS5pc0dldCA9ICExLFxuICAgICAgICB0aGlzLnNhdmVEYXRhKCksXG4gICAgICAgIHRoaXMuY2hlY2tTaG93UmVkKClcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnJlY2VpdmVUYXNrUmV3YXJkID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhLmlzR2V0ID0gITAsIHRoaXMuY2hlY2tDYW5SZWZyZXNoKCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuZW5kdGltZSA+IDEpIGlmICh0aGlzLmRhdGEuZW5kdGltZSAtIGMuVGltZVV0aWxzLkdldFRpbWVCeVNlY29uZCgpIDw9IDApIHRoaXMubmV4dERhdGEoKSxcbiAgICAgICAgICAgIHQgJiYgdCghMCk7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuZGF0YS5lbmR0aW1lIC0gYy5UaW1lVXRpbHMuR2V0VGltZUJ5U2Vjb25kKCk7XG4gICAgICAgICAgICAgICAgbC5VSVV0aWxzLnVuU2NoZWR1bGUodGhpcy5uZXh0RGF0YSwgdGhpcyksXG4gICAgICAgICAgICAgICAgbC5VSVV0aWxzLnNjaGVkdWxlT25jZSh0aGlzLm5leHREYXRhLCB0aGlzLCBlKSxcbiAgICAgICAgICAgICAgICB0ICYmIHQoITEpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB0ICYmIHQoITEpO1xuICAgICAgICB0aGlzLmNoZWNrU2hvd1JlZCgpLFxuICAgICAgICB0aGlzLnNhdmVEYXRhKClcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmNoZWNrRmluc2hlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhLmlzR2V0KSByZXR1cm4gISAwO1xuICAgICAgICBmb3IgKHZhciB0ID0gW10sIGUgPSAwOyBlIDwgdGhpcy5kYXRhLml0ZW1EYXRhLmxlbmd0aDsgZSsrKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMuZGF0YS5pdGVtRGF0YVtlXTtcbiAgICAgICAgICAgIGlmIChvLmlzR2V0IHx8IG8uZmluaXNoZWQpIHQucHVzaCghMCk7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGcuQ29tRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldENvbGxlY3Rpb25JdGVtQnlJZChvLml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgYSAmJiBvLm51bSA+PSBhLm5lZWROdW0gJiYgKHQucHVzaCghMCksIG8uZmluaXNoZWQgPSAhMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5sZW5ndGggPj0gdGhpcy5kYXRhLml0ZW1EYXRhLmxlbmd0aFxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuY2hlY2tTaG93UmVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIHQgPSAhMSxcbiAgICAgICAgZSA9IDA7IGUgPCB0aGlzLmRhdGEuaXRlbURhdGEubGVuZ3RoOyBlKyspIHtcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5kYXRhLml0ZW1EYXRhW2VdOyAhIG8uaXNHZXQgJiYgby5maW5pc2hlZCAmJiAodCA9ICEwKVxuICAgICAgICB9XG4gICAgICAgIHQgfHwgdGhpcy5kYXRhLmlzR2V0IHx8IHRoaXMuZGF0YS5wcm9jZXNzICE9IHRoaXMuZGF0YS5pdGVtRGF0YS5sZW5ndGggfHwgKHQgPSAhMCksXG4gICAgICAgIHQgPyB0aGlzLnNob3dSZWQgfHwgKHRoaXMuc2hvd1JlZCA9ICEwLCBuLkV2ZW50TWdyLmdldEluc3RhbmNlKCkuZW1pdChwLkNvbW1vbkV2ZW50TmFtZS5SZWZyZXNoQ29sbGVjdGlvblJlZCwgITApKSA6IHRoaXMuc2hvd1JlZCAmJiAodGhpcy5zaG93UmVkID0gITEsIG4uRXZlbnRNZ3IuZ2V0SW5zdGFuY2UoKS5lbWl0KHAuQ29tbW9uRXZlbnROYW1lLlJlZnJlc2hDb2xsZWN0aW9uUmVkLCAhMSkpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5hZGRBZFRpcHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHZhciBlID0gdGhpcy5nZXRDb2xsZWN0aW9uRGF0YSh0KTtcbiAgICAgICAgZS5hZFRpcCAmJiAoZS5pc1RpcHMgPSAhMCwgdGhpcy5zYXZlRGF0YSgpKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuYWRkRGF0YSA9IGZ1bmN0aW9uKHQsIGUsIG8pIHtcbiAgICAgICAgdm9pZCAwID09PSBvICYmIChvID0gITApO1xuICAgICAgICBmb3IgKHZhciBhID0gW10sIGkgPSAwOyBpIDwgdGhpcy5kYXRhLml0ZW1EYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgciA9IHRoaXMuZGF0YS5pdGVtRGF0YVtpXTtcbiAgICAgICAgICAgIGlmIChyLmdvb2RJZCA9PSB0KSB7XG4gICAgICAgICAgICAgICAgci5udW0gKz0gZTtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IGcuQ29tRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldENvbGxlY3Rpb25JdGVtQnlJZChyLml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgcyAmJiByLm51bSA+PSBzLm5lZWROdW0gJiYgKHIuZmluaXNoZWQgPSAhMCksXG4gICAgICAgICAgICAgICAgYS5wdXNoKHIuaWQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYS5sZW5ndGggPiAwICYmICh0aGlzLnNhdmVEYXRhKCksIG8gJiYgbi5FdmVudE1nci5nZXRJbnN0YW5jZSgpLmVtaXQocC5Db21tb25FdmVudE5hbWUuUmVmcmVzaENvbGxlY3Rpb24sIGEpKSxcbiAgICAgICAgdGhpcy5jaGVja1Nob3dSZWQoKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuZ2V0UHJvY2VzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnByb2Nlc3NcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmdldEVuZHRpbWUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5lbmR0aW1lXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5maW5pc2hEYXRhID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgZSA9IHRoaXMuZ2V0Q29sbGVjdGlvbkRhdGEodCk7XG4gICAgICAgIGUgJiYgKGUuZmluaXNoZWQgPSAhMCwgZS5pc0dldCA9ICEwLCB0aGlzLmRhdGEucHJvY2VzcyArPSAxLCB0aGlzLnNhdmVEYXRhKCkpLFxuICAgICAgICB0aGlzLmNoZWNrU2hvd1JlZCgpXG4gICAgfSxcbiAgICBlXG59IChyLkJhc2VEYXRhKTtcbm8uQ29tQ29sbGVjdGlvbkRhdGEgPSBmIl19