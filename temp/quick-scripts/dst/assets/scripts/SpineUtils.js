
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/SpineUtils.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '13366sIhypKi7rqHbO0qedQ', 'SpineUtils');
// scripts/SpineUtils.js

"use strict";

var t = require;
var e = module;
var o = exports;
Object.defineProperty(o, "__esModule", {
  value: !0
}), o.SpineUtils = o.SpineInfo = void 0;
var a = t("ResourceMgr");

o.SpineInfo = function () {};

var i = function () {
  function t() {}

  return t.changePartImgBundle = function (t, e, o, i) {
    var r = this;
    a.ResourceMgr.getInstance().loadRes(i.imgbundle, i.imgPath, cc.Texture2D, function (a) {
      if (cc.sys.isNative) {
        var n = new middleware.Texture2D();
        n.setPixelsHigh(a.height), n.setPixelsWide(a.width), n.setNativeTexture(a.getImpl()), t.updateRegion(e, n, i.diffWidth, i.diffHeight, i.offsetX, i.offsetY);
      } else {
        a.handleLoadedTexture(!0);
        var s = r.getAtt(t, e, o),
            c = r.CreateRegion(a, i);
        s.region = c, s && (s.setRegion(c), s.updateOffset());
      }
    });
  }, t.changePartImgTexture = function (t, e, o, a, i) {
    if (a.handleLoadedTexture(!0), cc.sys.isNative) {
      var r = new middleware.Texture2D();
      r.setPixelsHigh(a.height), r.setPixelsWide(a.width), r.setNativeTexture(a.getImpl()), t.updateRegion(e, r, i.diffWidth, i.diffHeight, i.offsetX, i.offsetY);
    } else {
      var n = this.getAtt(t, e, o),
          s = this.CreateRegion(a, i);
      n.region = s, n && (n.setRegion(s), this.updateSize(n), n.updateOffset());
    }
  }, t.getAtt = function (t, e, o) {
    t.findSlot(e);
    var a = t.skeletonData.getRuntimeData(),
        i = a.findSlotIndex(e);
    return a.findSkin("default").getAttachment(i, o);
  }, t.CreateRegion = function (t, e) {
    var o = new sp.SkeletonTexture();
    o.setRealTexture(t);
    var a = new sp.spine.TextureAtlasPage();
    a.name = t.name, a.uWrap = sp.spine.TextureWrap.ClampToEdge, a.vWrap = sp.spine.TextureWrap.ClampToEdge, a.texture = o, a.texture.setWraps(a.uWrap, a.vWrap), a.width = t.width, a.height = t.height;
    var i = new sp.spine.TextureAtlasRegion();
    return i.page = a, i.width = t.width, i.height = t.height, i.originalWidth = e.diffWidth ? t.width + e.diffWidth : t.width, i.originalHeight = e.diffHeight ? t.height + e.diffHeight : t.height, i.offsetX = e.offsetX ? e.offsetX : 0, i.offsetY = e.offsetY ? e.offsetY : 0, i.rotate = !1, i.u = 0, i.v = 0, i.u2 = 1, i.v2 = 1, i.texture = o, i;
  }, t.updateSize = function () {}, t;
}();

o.SpineUtils = i;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcU3BpbmVVdGlscy5qcyJdLCJuYW1lcyI6WyJ0IiwicmVxdWlyZSIsImUiLCJtb2R1bGUiLCJvIiwiZXhwb3J0cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJTcGluZVV0aWxzIiwiU3BpbmVJbmZvIiwiYSIsImkiLCJjaGFuZ2VQYXJ0SW1nQnVuZGxlIiwiciIsIlJlc291cmNlTWdyIiwiZ2V0SW5zdGFuY2UiLCJsb2FkUmVzIiwiaW1nYnVuZGxlIiwiaW1nUGF0aCIsImNjIiwiVGV4dHVyZTJEIiwic3lzIiwiaXNOYXRpdmUiLCJuIiwibWlkZGxld2FyZSIsInNldFBpeGVsc0hpZ2giLCJoZWlnaHQiLCJzZXRQaXhlbHNXaWRlIiwid2lkdGgiLCJzZXROYXRpdmVUZXh0dXJlIiwiZ2V0SW1wbCIsInVwZGF0ZVJlZ2lvbiIsImRpZmZXaWR0aCIsImRpZmZIZWlnaHQiLCJvZmZzZXRYIiwib2Zmc2V0WSIsImhhbmRsZUxvYWRlZFRleHR1cmUiLCJzIiwiZ2V0QXR0IiwiYyIsIkNyZWF0ZVJlZ2lvbiIsInJlZ2lvbiIsInNldFJlZ2lvbiIsInVwZGF0ZU9mZnNldCIsImNoYW5nZVBhcnRJbWdUZXh0dXJlIiwidXBkYXRlU2l6ZSIsImZpbmRTbG90Iiwic2tlbGV0b25EYXRhIiwiZ2V0UnVudGltZURhdGEiLCJmaW5kU2xvdEluZGV4IiwiZmluZFNraW4iLCJnZXRBdHRhY2htZW50Iiwic3AiLCJTa2VsZXRvblRleHR1cmUiLCJzZXRSZWFsVGV4dHVyZSIsInNwaW5lIiwiVGV4dHVyZUF0bGFzUGFnZSIsIm5hbWUiLCJ1V3JhcCIsIlRleHR1cmVXcmFwIiwiQ2xhbXBUb0VkZ2UiLCJ2V3JhcCIsInRleHR1cmUiLCJzZXRXcmFwcyIsIlRleHR1cmVBdGxhc1JlZ2lvbiIsInBhZ2UiLCJvcmlnaW5hbFdpZHRoIiwib3JpZ2luYWxIZWlnaHQiLCJyb3RhdGUiLCJ1IiwidiIsInUyIiwidjIiXSwibWFwcGluZ3Mi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QUFDLENBQUNnQyxVQUE1QixHQUF3Q2xDLENBQUMsQ0FBQzJCLE1BSnRELEVBS1BmLENBQUMsQ0FBQ3VCLE9BQUYsR0FBWWpDLENBQUMsQ0FBQ2lDLE9BQUYsR0FBWWpDLENBQUMsQ0FBQ2lDLE9BQWQsR0FBdUIsQ0FMNUIsRUFNUHZCLENBQUMsQ0FBQ3dCLE9BQUYsR0FBWWxDLENBQUMsQ0FBQ2tDLE9BQUYsR0FBWWxDLENBQUMsQ0FBQ2tDLE9BQWQsR0FBdUIsQ0FONUIsRUFPUHhCLENBQUMsQ0FBQ3lELE1BQUYsR0FBVyxDQUFDLENBUEwsRUFRUHpELENBQUMsQ0FBQzBELENBQUYsR0FBTSxDQVJDLEVBU1AxRCxDQUFDLENBQUMyRCxDQUFGLEdBQU0sQ0FUQyxFQVVQM0QsQ0FBQyxDQUFDNEQsRUFBRixHQUFPLENBVkEsRUFXUDVELENBQUMsQ0FBQzZELEVBQUYsR0FBTyxDQVhBLEVBWVA3RCxDQUFDLENBQUNtRCxPQUFGLEdBQVkzRCxDQVpMLEVBYVBRLENBYkE7RUFjSCxDQWpFTSxFQWtFUFosQ0FBQyxDQUFDOEMsVUFBRixHQUFlLFlBQVcsQ0FBRSxDQWxFckIsRUFtRVA5QyxDQW5FQTtBQW9FSCxDQXRFTyxFQUFSOztBQXVFQUksQ0FBQyxDQUFDSyxVQUFGLEdBQWVHLENBQWYiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0ID0gcmVxdWlyZTtcbnZhciBlID0gbW9kdWxlO1xudmFyIG8gPSBleHBvcnRzO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6ICEwXG59KSxcbm8uU3BpbmVVdGlscyA9IG8uU3BpbmVJbmZvID0gdm9pZCAwO1xudmFyIGEgPSB0KFwiUmVzb3VyY2VNZ3JcIik7XG5vLlNwaW5lSW5mbyA9IGZ1bmN0aW9uKCkge307XG52YXIgaSA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIHQoKSB7fVxuICAgIHJldHVybiB0LmNoYW5nZVBhcnRJbWdCdW5kbGUgPSBmdW5jdGlvbih0LCBlLCBvLCBpKSB7XG4gICAgICAgIHZhciByID0gdGhpcztcbiAgICAgICAgYS5SZXNvdXJjZU1nci5nZXRJbnN0YW5jZSgpLmxvYWRSZXMoaS5pbWdidW5kbGUsIGkuaW1nUGF0aCwgY2MuVGV4dHVyZTJELFxuICAgICAgICBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICBpZiAoY2Muc3lzLmlzTmF0aXZlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBuZXcgbWlkZGxld2FyZS5UZXh0dXJlMkQ7XG4gICAgICAgICAgICAgICAgbi5zZXRQaXhlbHNIaWdoKGEuaGVpZ2h0KSxcbiAgICAgICAgICAgICAgICBuLnNldFBpeGVsc1dpZGUoYS53aWR0aCksXG4gICAgICAgICAgICAgICAgbi5zZXROYXRpdmVUZXh0dXJlKGEuZ2V0SW1wbCgpKSxcbiAgICAgICAgICAgICAgICB0LnVwZGF0ZVJlZ2lvbihlLCBuLCBpLmRpZmZXaWR0aCwgaS5kaWZmSGVpZ2h0LCBpLm9mZnNldFgsIGkub2Zmc2V0WSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYS5oYW5kbGVMb2FkZWRUZXh0dXJlKCEwKTtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHIuZ2V0QXR0KHQsIGUsIG8pLFxuICAgICAgICAgICAgICAgIGMgPSByLkNyZWF0ZVJlZ2lvbihhLCBpKTtcbiAgICAgICAgICAgICAgICBzLnJlZ2lvbiA9IGMsXG4gICAgICAgICAgICAgICAgcyAmJiAocy5zZXRSZWdpb24oYyksIHMudXBkYXRlT2Zmc2V0KCkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSxcbiAgICB0LmNoYW5nZVBhcnRJbWdUZXh0dXJlID0gZnVuY3Rpb24odCwgZSwgbywgYSwgaSkge1xuICAgICAgICBpZiAoYS5oYW5kbGVMb2FkZWRUZXh0dXJlKCEwKSwgY2Muc3lzLmlzTmF0aXZlKSB7XG4gICAgICAgICAgICB2YXIgciA9IG5ldyBtaWRkbGV3YXJlLlRleHR1cmUyRDtcbiAgICAgICAgICAgIHIuc2V0UGl4ZWxzSGlnaChhLmhlaWdodCksXG4gICAgICAgICAgICByLnNldFBpeGVsc1dpZGUoYS53aWR0aCksXG4gICAgICAgICAgICByLnNldE5hdGl2ZVRleHR1cmUoYS5nZXRJbXBsKCkpLFxuICAgICAgICAgICAgdC51cGRhdGVSZWdpb24oZSwgciwgaS5kaWZmV2lkdGgsIGkuZGlmZkhlaWdodCwgaS5vZmZzZXRYLCBpLm9mZnNldFkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgbiA9IHRoaXMuZ2V0QXR0KHQsIGUsIG8pLFxuICAgICAgICAgICAgcyA9IHRoaXMuQ3JlYXRlUmVnaW9uKGEsIGkpO1xuICAgICAgICAgICAgbi5yZWdpb24gPSBzLFxuICAgICAgICAgICAgbiAmJiAobi5zZXRSZWdpb24ocyksIHRoaXMudXBkYXRlU2l6ZShuKSwgbi51cGRhdGVPZmZzZXQoKSlcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdC5nZXRBdHQgPSBmdW5jdGlvbih0LCBlLCBvKSB7XG4gICAgICAgIHQuZmluZFNsb3QoZSk7XG4gICAgICAgIHZhciBhID0gdC5za2VsZXRvbkRhdGEuZ2V0UnVudGltZURhdGEoKSxcbiAgICAgICAgaSA9IGEuZmluZFNsb3RJbmRleChlKTtcbiAgICAgICAgcmV0dXJuIGEuZmluZFNraW4oXCJkZWZhdWx0XCIpLmdldEF0dGFjaG1lbnQoaSwgbylcbiAgICB9LFxuICAgIHQuQ3JlYXRlUmVnaW9uID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB2YXIgbyA9IG5ldyBzcC5Ta2VsZXRvblRleHR1cmU7XG4gICAgICAgIG8uc2V0UmVhbFRleHR1cmUodCk7XG4gICAgICAgIHZhciBhID0gbmV3IHNwLnNwaW5lLlRleHR1cmVBdGxhc1BhZ2U7XG4gICAgICAgIGEubmFtZSA9IHQubmFtZSxcbiAgICAgICAgYS51V3JhcCA9IHNwLnNwaW5lLlRleHR1cmVXcmFwLkNsYW1wVG9FZGdlLFxuICAgICAgICBhLnZXcmFwID0gc3Auc3BpbmUuVGV4dHVyZVdyYXAuQ2xhbXBUb0VkZ2UsXG4gICAgICAgIGEudGV4dHVyZSA9IG8sXG4gICAgICAgIGEudGV4dHVyZS5zZXRXcmFwcyhhLnVXcmFwLCBhLnZXcmFwKSxcbiAgICAgICAgYS53aWR0aCA9IHQud2lkdGgsXG4gICAgICAgIGEuaGVpZ2h0ID0gdC5oZWlnaHQ7XG4gICAgICAgIHZhciBpID0gbmV3IHNwLnNwaW5lLlRleHR1cmVBdGxhc1JlZ2lvbjtcbiAgICAgICAgcmV0dXJuIGkucGFnZSA9IGEsXG4gICAgICAgIGkud2lkdGggPSB0LndpZHRoLFxuICAgICAgICBpLmhlaWdodCA9IHQuaGVpZ2h0LFxuICAgICAgICBpLm9yaWdpbmFsV2lkdGggPSBlLmRpZmZXaWR0aCA/IHQud2lkdGggKyBlLmRpZmZXaWR0aDogdC53aWR0aCxcbiAgICAgICAgaS5vcmlnaW5hbEhlaWdodCA9IGUuZGlmZkhlaWdodCA/IHQuaGVpZ2h0ICsgZS5kaWZmSGVpZ2h0OiB0LmhlaWdodCxcbiAgICAgICAgaS5vZmZzZXRYID0gZS5vZmZzZXRYID8gZS5vZmZzZXRYOiAwLFxuICAgICAgICBpLm9mZnNldFkgPSBlLm9mZnNldFkgPyBlLm9mZnNldFk6IDAsXG4gICAgICAgIGkucm90YXRlID0gITEsXG4gICAgICAgIGkudSA9IDAsXG4gICAgICAgIGkudiA9IDAsXG4gICAgICAgIGkudTIgPSAxLFxuICAgICAgICBpLnYyID0gMSxcbiAgICAgICAgaS50ZXh0dXJlID0gbyxcbiAgICAgICAgaVxuICAgIH0sXG4gICAgdC51cGRhdGVTaXplID0gZnVuY3Rpb24oKSB7fSxcbiAgICB0XG59ICgpO1xuby5TcGluZVV0aWxzID0gaSJdfQ==