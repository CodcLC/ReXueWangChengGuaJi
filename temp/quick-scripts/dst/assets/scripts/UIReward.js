
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/UIReward.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'ce127ZVqwlHa50pVzn6oYN+', 'UIReward');
// scripts/UIReward.js

"use strict";

var t = require;
var e = module;
var o = exports;

var _a,
    i = void 0 && (void 0).__extends || (_a = function a(t, e) {
  return (_a = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (t, e) {
    t.__proto__ = e;
  } || function (t, e) {
    for (var o in e) {
      Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
    }
  })(t, e);
}, function (t, e) {
  function o() {
    this.constructor = t;
  }

  _a(t, e), t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o());
}),
    r = void 0 && (void 0).__decorate || function (t, e, o, a) {
  var i,
      r = arguments.length,
      n = r < 3 ? e : null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);else for (var s = t.length - 1; s >= 0; s--) {
    (i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);
  }
  return r > 3 && n && Object.defineProperty(e, o, n), n;
};

Object.defineProperty(o, "__esModule", {
  value: !0
});

var n = t("BaseUI"),
    s = t("AudioMgr"),
    c = t("CommonCfg"),
    l = t("ComDataMgr"),
    u = t("ComPlayerMgr"),
    p = cc._decorator,
    g = p.ccclass,
    d = p.property,
    h = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    return e.root = null, e.btnOk = null, e.num = null, e.icon = null, e.quanLight = null, e.muiltNode = null, e.item = null, e.addCollection = !0, e;
  }

  return i(e, t), e.prototype.init = function (t, e, o) {
    if (void 0 === o && (o = !0), -1 != t.indexOf(c.CommonCfg.splitNum)) {
      if (this.rewardStr = t, 1 == this.rewardStr.split(c.CommonCfg.splitCount).length) {
        var a = this.rewardStr.split(c.CommonCfg.splitNum);
        this.rewardId = Number(a[0]), this.rewardNum = Number(a[1]), this.rewardStr = null;
      }
    } else this.rewardId = Number(t);

    this.rewardNum = e, this.addCollection = o, s.AudioMgr.getInstance().playEffect(c.ComAudioId.reward);
  }, e.prototype.start = function () {
    var t = this;

    if (this.btnOk.on(cc.Node.EventType.TOUCH_END, function () {
      var e = t.rewardStr;
      null == e && (e = t.rewardId + c.CommonCfg.splitNum + t.rewardNum), u.ComPlayerMgr.getInstance().addReward(e, 1, t.addCollection), t.closeUI();
    }), null == this.rewardStr) {
      this.muiltNode.active = !1;
      var e = l.ComDataMgr.getInstance().getGoodsById(this.rewardId);
      this.loadSpriteFrame(e.bundleName, e.rewardIcon, function (e) {
        t.icon.spriteFrame = e;
      }), 1 == e.rewardtype ? this.num.string = "+" + this.rewardNum : this.num.string = e.name;
    } else {
      this.muiltNode.active = !0;

      for (var o = this.rewardStr.split(c.CommonCfg.splitCount), a = function a(t) {
        var e = cc.instantiate(i.item);
        e.parent = i.muiltNode;
        var a = o[t].split(c.CommonCfg.splitNum),
            r = Number(a[0]),
            n = Number(a[1]);
        e.active = !0;
        var s = e.getChildByName("icon").getComponent(cc.Sprite),
            u = e.getChildByName("num").getComponent(cc.Label),
            p = l.ComDataMgr.getInstance().getGoodsById(r);
        i.loadSpriteFrame(p.bundleName, p.rewardIcon, function (t) {
          s.spriteFrame = t;
        }), 1 == p.rewardtype ? u.string = "+" + n : u.string = p.name;
      }, i = this, r = 0; r < o.length; r++) {
        a(r);
      }
    }

    this.root.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED, function () {
      t.quanLight.opacity = 225, t.quanLight.active = !0, cc.tween(t.quanLight).by(.2, {
        angle: 10
      }).repeatForever().start();
    });
  }, e.prototype.onClose = function () {
    s.AudioMgr.getInstance().stopEffect();
  }, r([d(cc.Node)], e.prototype, "root", void 0), r([d(cc.Node)], e.prototype, "btnOk", void 0), r([d(cc.Label)], e.prototype, "num", void 0), r([d(cc.Sprite)], e.prototype, "icon", void 0), r([d(cc.Node)], e.prototype, "quanLight", void 0), r([d(cc.Node)], e.prototype, "muiltNode", void 0), r([d(cc.Node)], e.prototype, "item", void 0), r([g], e);
}(n["default"]);

o["default"] = h;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcVUlSZXdhcmQuanMiXSwibmFtZXMiOlsidCIsInJlcXVpcmUiLCJlIiwibW9kdWxlIiwibyIsImV4cG9ydHMiLCJhIiwiaSIsIl9fZXh0ZW5kcyIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJjb25zdHJ1Y3RvciIsImNyZWF0ZSIsInIiLCJfX2RlY29yYXRlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwibiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsInMiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiYyIsImwiLCJ1IiwicCIsImNjIiwiX2RlY29yYXRvciIsImciLCJjY2NsYXNzIiwiZCIsInByb3BlcnR5IiwiaCIsImFwcGx5Iiwicm9vdCIsImJ0bk9rIiwibnVtIiwiaWNvbiIsInF1YW5MaWdodCIsIm11aWx0Tm9kZSIsIml0ZW0iLCJhZGRDb2xsZWN0aW9uIiwiaW5pdCIsImluZGV4T2YiLCJDb21tb25DZmciLCJzcGxpdE51bSIsInJld2FyZFN0ciIsInNwbGl0Iiwic3BsaXRDb3VudCIsInJld2FyZElkIiwiTnVtYmVyIiwicmV3YXJkTnVtIiwiQXVkaW9NZ3IiLCJnZXRJbnN0YW5jZSIsInBsYXlFZmZlY3QiLCJDb21BdWRpb0lkIiwicmV3YXJkIiwic3RhcnQiLCJvbiIsIk5vZGUiLCJFdmVudFR5cGUiLCJUT1VDSF9FTkQiLCJDb21QbGF5ZXJNZ3IiLCJhZGRSZXdhcmQiLCJjbG9zZVVJIiwiYWN0aXZlIiwiQ29tRGF0YU1nciIsImdldEdvb2RzQnlJZCIsImxvYWRTcHJpdGVGcmFtZSIsImJ1bmRsZU5hbWUiLCJyZXdhcmRJY29uIiwic3ByaXRlRnJhbWUiLCJyZXdhcmR0eXBlIiwic3RyaW5nIiwibmFtZSIsImluc3RhbnRpYXRlIiwicGFyZW50IiwiZ2V0Q2hpbGRCeU5hbWUiLCJnZXRDb21wb25lbnQiLCJTcHJpdGUiLCJMYWJlbCIsIkFuaW1hdGlvbiIsIkZJTklTSEVEIiwib3BhY2l0eSIsInR3ZWVuIiwiYnkiLCJhbmdsZSIsInJlcGVhdEZvcmV2ZXIiLCJvbkNsb3NlIiwic3RvcEVmZmVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxDQUFDLEdBQUdDLE9BQVI7QUFDQSxJQUFJQyxDQUFDLEdBQUdDLE1BQVI7QUFDQSxJQUFJQyxDQUFDLEdBQUdDLE9BQVI7O0FBQ0EsSUFBSUMsRUFBSjtBQUFBLElBQU9DLENBQUMsR0FBRyxVQUFRLFNBQUtDLFNBQWIsS0FBMkJGLEVBQUMsR0FBRyxXQUFTTixDQUFULEVBQVlFLENBQVosRUFBZTtFQUNyRCxPQUFPLENBQUNJLEVBQUMsR0FBR0csTUFBTSxDQUFDQyxjQUFQLElBQXlCO0lBQ2pDQyxTQUFTLEVBQUU7RUFEc0IsYUFHMUJDLEtBSDBCLElBSXJDLFVBQVNaLENBQVQsRUFBWUUsQ0FBWixFQUFlO0lBQ1hGLENBQUMsQ0FBQ1csU0FBRixHQUFjVCxDQUFkO0VBQ0gsQ0FOVyxJQU9aLFVBQVNGLENBQVQsRUFBWUUsQ0FBWixFQUFlO0lBQ1gsS0FBSyxJQUFJRSxDQUFULElBQWNGLENBQWQ7TUFBaUJPLE1BQU0sQ0FBQ0ksU0FBUCxDQUFpQkMsY0FBakIsQ0FBZ0NDLElBQWhDLENBQXFDYixDQUFyQyxFQUF3Q0UsQ0FBeEMsTUFBK0NKLENBQUMsQ0FBQ0ksQ0FBRCxDQUFELEdBQU9GLENBQUMsQ0FBQ0UsQ0FBRCxDQUF2RDtJQUFqQjtFQUNILENBVE0sRUFTSkosQ0FUSSxFQVNERSxDQVRDLENBQVA7QUFVSCxDQVhxQyxFQVl0QyxVQUFTRixDQUFULEVBQVlFLENBQVosRUFBZTtFQUNYLFNBQVNFLENBQVQsR0FBYTtJQUNULEtBQUtZLFdBQUwsR0FBbUJoQixDQUFuQjtFQUNIOztFQUNETSxFQUFDLENBQUNOLENBQUQsRUFBSUUsQ0FBSixDQUFELEVBQ0FGLENBQUMsQ0FBQ2Es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LFNBQWpCLEVBQTRCLE1BQTVCLEVBQW9DLEtBQUssQ0FBekMsQ0FwRU0sRUFxRVBLLENBQUMsQ0FBQyxDQUFDaUIsQ0FBRCxDQUFELEVBQU1qQyxDQUFOLENBckVEO0FBc0VILENBbkZHLENBbUZEb0IsQ0FBQyxXQW5GQSxDQVJKOztBQTRGQWxCLENBQUMsV0FBRCxHQUFZbUMsQ0FBWiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHQgPSByZXF1aXJlO1xudmFyIGUgPSBtb2R1bGU7XG52YXIgbyA9IGV4cG9ydHM7XG52YXIgYSwgaSA9IHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMgfHwgKGEgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgcmV0dXJuIChhID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IHtcbiAgICAgICAgX19wcm90b19fOiBbXVxuICAgIH1cbiAgICBpbnN0YW5jZW9mIEFycmF5ICYmXG4gICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB0Ll9fcHJvdG9fXyA9IGVcbiAgICB9IHx8XG4gICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKHZhciBvIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBvKSAmJiAodFtvXSA9IGVbb10pXG4gICAgfSkodCwgZSlcbn0sXG5mdW5jdGlvbih0LCBlKSB7XG4gICAgZnVuY3Rpb24gbygpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IHRcbiAgICB9XG4gICAgYSh0LCBlKSxcbiAgICB0LnByb3RvdHlwZSA9IG51bGwgPT09IGUgPyBPYmplY3QuY3JlYXRlKGUpIDogKG8ucHJvdG90eXBlID0gZS5wcm90b3R5cGUsIG5ldyBvKVxufSksXG5yID0gdGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUgfHxcbmZ1bmN0aW9uKHQsIGUsIG8sIGEpIHtcbiAgICB2YXIgaSwgciA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgbiA9IHIgPCAzID8gZTogbnVsbCA9PT0gYSA/IGEgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIG8pIDogYTtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgUmVmbGVjdCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpIG4gPSBSZWZsZWN0LmRlY29yYXRlKHQsIGUsIG8sIGEpO1xuICAgIGVsc2UgZm9yICh2YXIgcyA9IHQubGVuZ3RoIC0gMTsgcyA+PSAwOyBzLS0pKGkgPSB0W3NdKSAmJiAobiA9IChyIDwgMyA/IGkobikgOiByID4gMyA/IGkoZSwgbywgbikgOiBpKGUsIG8pKSB8fCBuKTtcbiAgICByZXR1cm4gciA+IDMgJiYgbiAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgbywgbiksXG4gICAgblxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiAhMFxufSk7XG52YXIgbiA9IHQoXCJCYXNlVUlcIiksXG5zID0gdChcIkF1ZGlvTWdyXCIpLFxuYyA9IHQoXCJDb21tb25DZmdcIiksXG5sID0gdChcIkNvbURhdGFNZ3JcIiksXG51ID0gdChcIkNvbVBsYXllck1nclwiKSxcbnAgPSBjYy5fZGVjb3JhdG9yLFxuZyA9IHAuY2NjbGFzcyxcbmQgPSBwLnByb3BlcnR5LFxuaCA9IGZ1bmN0aW9uKHQpIHtcbiAgICBmdW5jdGlvbiBlKCkge1xuICAgICAgICB2YXIgZSA9IG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIHJldHVybiBlLnJvb3QgPSBudWxsLFxuICAgICAgICBlLmJ0bk9rID0gbnVsbCxcbiAgICAgICAgZS5udW0gPSBudWxsLFxuICAgICAgICBlLmljb24gPSBudWxsLFxuICAgICAgICBlLnF1YW5MaWdodCA9IG51bGwsXG4gICAgICAgIGUubXVpbHROb2RlID0gbnVsbCxcbiAgICAgICAgZS5pdGVtID0gbnVsbCxcbiAgICAgICAgZS5hZGRDb2xsZWN0aW9uID0gITAsXG4gICAgICAgIGVcbiAgICB9XG4gICAgcmV0dXJuIGkoZSwgdCksXG4gICAgZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKHQsIGUsIG8pIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbyAmJiAobyA9ICEwKSwgLTEgIT0gdC5pbmRleE9mKGMuQ29tbW9uQ2ZnLnNwbGl0TnVtKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmV3YXJkU3RyID0gdCwgMSA9PSB0aGlzLnJld2FyZFN0ci5zcGxpdChjLkNvbW1vbkNmZy5zcGxpdENvdW50KS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IHRoaXMucmV3YXJkU3RyLnNwbGl0KGMuQ29tbW9uQ2ZnLnNwbGl0TnVtKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJld2FyZElkID0gTnVtYmVyKGFbMF0pLFxuICAgICAgICAgICAgICAgIHRoaXMucmV3YXJkTnVtID0gTnVtYmVyKGFbMV0pLFxuICAgICAgICAgICAgICAgIHRoaXMucmV3YXJkU3RyID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgdGhpcy5yZXdhcmRJZCA9IE51bWJlcih0KTtcbiAgICAgICAgdGhpcy5yZXdhcmROdW0gPSBlLFxuICAgICAgICB0aGlzLmFkZENvbGxlY3Rpb24gPSBvLFxuICAgICAgICBzLkF1ZGlvTWdyLmdldEluc3RhbmNlKCkucGxheUVmZmVjdChjLkNvbUF1ZGlvSWQucmV3YXJkKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5idG5Pay5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGUgPSB0LnJld2FyZFN0cjtcbiAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoZSA9IHQucmV3YXJkSWQgKyBjLkNvbW1vbkNmZy5zcGxpdE51bSArIHQucmV3YXJkTnVtKSxcbiAgICAgICAgICAgIHUuQ29tUGxheWVyTWdyLmdldEluc3RhbmNlKCkuYWRkUmV3YXJkKGUsIDEsIHQuYWRkQ29sbGVjdGlvbiksXG4gICAgICAgICAgICB0LmNsb3NlVUkoKVxuICAgICAgICB9KSwgbnVsbCA9PSB0aGlzLnJld2FyZFN0cikge1xuICAgICAgICAgICAgdGhpcy5tdWlsdE5vZGUuYWN0aXZlID0gITE7XG4gICAgICAgICAgICB2YXIgZSA9IGwuQ29tRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldEdvb2RzQnlJZCh0aGlzLnJld2FyZElkKTtcbiAgICAgICAgICAgIHRoaXMubG9hZFNwcml0ZUZyYW1lKGUuYnVuZGxlTmFtZSwgZS5yZXdhcmRJY29uLFxuICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHQuaWNvbi5zcHJpdGVGcmFtZSA9IGVcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgMSA9PSBlLnJld2FyZHR5cGUgPyB0aGlzLm51bS5zdHJpbmcgPSBcIitcIiArIHRoaXMucmV3YXJkTnVtOiB0aGlzLm51bS5zdHJpbmcgPSBlLm5hbWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubXVpbHROb2RlLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgZm9yICh2YXIgbyA9IHRoaXMucmV3YXJkU3RyLnNwbGl0KGMuQ29tbW9uQ2ZnLnNwbGl0Q291bnQpLCBhID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gY2MuaW5zdGFudGlhdGUoaS5pdGVtKTtcbiAgICAgICAgICAgICAgICBlLnBhcmVudCA9IGkubXVpbHROb2RlO1xuICAgICAgICAgICAgICAgIHZhciBhID0gb1t0XS5zcGxpdChjLkNvbW1vbkNmZy5zcGxpdE51bSksXG4gICAgICAgICAgICAgICAgciA9IE51bWJlcihhWzBdKSxcbiAgICAgICAgICAgICAgICBuID0gTnVtYmVyKGFbMV0pO1xuICAgICAgICAgICAgICAgIGUuYWN0aXZlID0gITA7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSBlLmdldENoaWxkQnlOYW1lKFwiaWNvblwiKS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSxcbiAgICAgICAgICAgICAgICB1ID0gZS5nZXRDaGlsZEJ5TmFtZShcIm51bVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLFxuICAgICAgICAgICAgICAgIHAgPSBsLkNvbURhdGFNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRHb29kc0J5SWQocik7XG4gICAgICAgICAgICAgICAgaS5sb2FkU3ByaXRlRnJhbWUocC5idW5kbGVOYW1lLCBwLnJld2FyZEljb24sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICBzLnNwcml0ZUZyYW1lID0gdFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIDEgPT0gcC5yZXdhcmR0eXBlID8gdS5zdHJpbmcgPSBcIitcIiArIG46IHUuc3RyaW5nID0gcC5uYW1lXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaSA9IHRoaXMsIHIgPSAwOyByIDwgby5sZW5ndGg7IHIrKykgYShyKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucm9vdC5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKS5vbihjYy5BbmltYXRpb24uRXZlbnRUeXBlLkZJTklTSEVELFxuICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHQucXVhbkxpZ2h0Lm9wYWNpdHkgPSAyMjUsXG4gICAgICAgICAgICB0LnF1YW5MaWdodC5hY3RpdmUgPSAhMCxcbiAgICAgICAgICAgIGNjLnR3ZWVuKHQucXVhbkxpZ2h0KS5ieSguMiwge1xuICAgICAgICAgICAgICAgIGFuZ2xlOiAxMFxuICAgICAgICAgICAgfSkucmVwZWF0Rm9yZXZlcigpLnN0YXJ0KClcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLm9uQ2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcy5BdWRpb01nci5nZXRJbnN0YW5jZSgpLnN0b3BFZmZlY3QoKVxuICAgIH0sXG4gICAgcihbZChjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcInJvb3RcIiwgdm9pZCAwKSxcbiAgICByKFtkKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiYnRuT2tcIiwgdm9pZCAwKSxcbiAgICByKFtkKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcIm51bVwiLCB2b2lkIDApLFxuICAgIHIoW2QoY2MuU3ByaXRlKV0sIGUucHJvdG90eXBlLCBcImljb25cIiwgdm9pZCAwKSxcbiAgICByKFtkKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwicXVhbkxpZ2h0XCIsIHZvaWQgMCksXG4gICAgcihbZChjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcIm11aWx0Tm9kZVwiLCB2b2lkIDApLFxuICAgIHIoW2QoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJpdGVtXCIsIHZvaWQgMCksXG4gICAgcihbZ10sIGUpXG59IChuLmRlZmF1bHQpO1xuby5kZWZhdWx0ID0gaCJdfQ==