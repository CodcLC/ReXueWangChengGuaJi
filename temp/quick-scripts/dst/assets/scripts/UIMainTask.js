
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/UIMainTask.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e76b9frSjRAuqDt0IZTkpli', 'UIMainTask');
// scripts/UIMainTask.js

"use strict";

var t = require;
var e = module;
var o = exports;

var _a,
    i = void 0 && (void 0).__extends || (_a = function a(t, e) {
  return (_a = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (t, e) {
    t.__proto__ = e;
  } || function (t, e) {
    for (var o in e) {
      Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
    }
  })(t, e);
}, function (t, e) {
  function o() {
    this.constructor = t;
  }

  _a(t, e), t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o());
}),
    r = void 0 && (void 0).__decorate || function (t, e, o, a) {
  var i,
      r = arguments.length,
      n = r < 3 ? e : null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);else for (var s = t.length - 1; s >= 0; s--) {
    (i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);
  }
  return r > 3 && n && Object.defineProperty(e, o, n), n;
};

Object.defineProperty(o, "__esModule", {
  value: !0
}), o.UIMainTask = void 0;

var n = t("BaseUI"),
    s = t("ResourceMgr"),
    c = t("SdkMgr"),
    l = t("UIMgr"),
    u = t("Config"),
    p = t("TrackDataEvent"),
    g = t("DataMgr"),
    d = t("GoodsManager"),
    h = t("PlayerMgr"),
    f = t("TimeMgr"),
    m = cc._decorator,
    y = m.ccclass,
    v = m.property,
    I = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    return e.spBar = null, e.labTaskProgress = null, e.labTaskDec = null, e.btnGet = null, e.btnVideoGet = null, e.btnGoto = null, e.btnClose = null, e.rewardItem = null, e.curTaskId = 1, e;
  }

  return i(e, t), e.prototype.start = function () {
    this.registerBtnEvent(), this.initData(), this.initView();
  }, e.prototype.registerBtnEvent = function () {
    var t = this;
    this.btnClose.on(cc.Node.EventType.TOUCH_END, function () {
      t.closeView();
    }), this.btnGoto.on(cc.Node.EventType.TOUCH_END, function () {
      var e = h.PlayerMgr.getInstance().getMainTaskData().getCurrentId(),
          o = g.DataMgr.getInstance().getMission(e);

      if (u.UIID.UIHome != o.JumpRoute) {
        var a = u.UIID.UIHomeNew;
        u.UIID.UIOnlineReward == o.JumpRoute ? f.TimeMgr.getInstance().time_online < 60 ? l.UIMgr.getInstance().openUI(u.UIID.UITips, -1, "还未获得奖励") : l.UIMgr.getInstance().openUI(u.UIID.UIOnlineReward, -1) : (u.UIID.UIMysticalShop != o.JumpRoute && l.UIMgr.getInstance().closeById(a), l.UIMgr.getInstance().openUI(o.JumpRoute, -1));
      }

      t.closeView();
    }), this.btnGet.on(cc.Node.EventType.TOUCH_END, function () {
      t.curTaskId <= 30 && h.PlayerMgr.getInstance().getTrackData().youmengTrack(p.TrackId.mainlinetask_X, t.curTaskId), h.PlayerMgr.getInstance().getMainTaskData().addTaskId(), t.getReward(), t.closeView();
    }), this.btnVideoGet.on(cc.Node.EventType.TOUCH_END, function () {
      c.SdkMgr.getInstance().playVideo(1, function () {
        t.curTaskId <= 30 && h.PlayerMgr.getInstance().getTrackData().youmengTrack(p.TrackId.mainlinetask_X, t.curTaskId), h.PlayerMgr.getInstance().getTrackData().youmengTrack(p.TrackId.task_doubleaward), h.PlayerMgr.getInstance().getMainTaskData().addTaskId(), t.getReward(!0), t.closeView();
      });
    });
  }, e.prototype.initData = function () {
    this.curTaskId = h.PlayerMgr.getInstance().getMainTaskData().getCurrentId();
  }, e.prototype.initView = function () {
    this.refreshView(), this.initRewardView();
  }, e.prototype.refreshView = function () {
    var t = g.DataMgr.getInstance().getMission(this.curTaskId);

    if (t) {
      this.labTaskDec.string = "" + t.Desc1 + t.TaskParameter + t.Desc2, this.spBar.fillRange = h.PlayerMgr.getInstance().getMainTaskData().getCurrentParameter() / t.TaskParameter, this.labTaskProgress.string = h.PlayerMgr.getInstance().getMainTaskData().getCurrentParameter() + "/" + t.TaskParameter;
      var e = h.PlayerMgr.getInstance().getMainTaskData().getCurrentState();
      this.btnGoto.active = !e, this.btnGet.active = e, this.btnVideoGet.active = e;
    }
  }, e.prototype.initRewardView = function () {
    var t,
        e = this,
        o = h.PlayerMgr.getInstance().getMainTaskData().getCurrentId(),
        a = g.DataMgr.getInstance().getMission(o),
        i = g.DataMgr.getInstance().getGoodsCfg(a.RewardType);

    switch (s.ResourceMgr.getInstance().loadSpriteframe(i.bundleQuality, i.iconQuality, function (t) {
      e.rewardItem.getChildByName("SpIconBg").getComponent(cc.Sprite).spriteFrame = t;
    }), this.rewardItem.getChildByName("LabIconName").getComponent(cc.Label).string = i.goodsName + "x" + a.RewardNum, this.rewardItem.getChildByName("LabIconName").color = d["default"].getInstance().seleColor(i.goodsQualityId), i.goodsType) {
      case "gold":
      case "inGot":
      case "power":
        t = g.DataMgr.getInstance().getGoodsCfg(a.RewardType), s.ResourceMgr.getInstance().loadSpriteframe(t.bundle, t.goodsGameIcon, function (t) {
          e.rewardItem.getChildByName("SpIcon").getComponent(cc.Sprite).spriteFrame = t;
        });
    }
  }, e.prototype.getReward = function (t) {
    void 0 === t && (t = !1);
    var e = h.PlayerMgr.getInstance().getMainTaskData().getCurrentId(),
        o = g.DataMgr.getInstance().getMission(e),
        a = g.DataMgr.getInstance().getGoodsCfg(o.RewardType),
        i = h.PlayerMgr.getInstance().geUserData(),
        r = t ? 2 * o.RewardNum : o.RewardNum;

    switch (a.goodsType) {
      case "gold":
        i.addGoldNum(r), l.UIMgr.getInstance().openUI(u.UIID.UITips, -1, "成功领取 金币x" + r);
        break;

      case "inGot":
        i.addInGotNum(r), l.UIMgr.getInstance().openUI(u.UIID.UITips, -1, "成功领取 元宝x" + r);
        break;

      case "power":
        i.addPowerNum(r), l.UIMgr.getInstance().openUI(u.UIID.UITips, -1, "成功领取 体力x" + r);
    }
  }, e.prototype.closeView = function () {
    this.closeUI();
  }, r([v({
    type: cc.Sprite,
    displayName: ""
  })], e.prototype, "spBar", void 0), r([v({
    type: cc.Label,
    displayName: ""
  })], e.prototype, "labTaskProgress", void 0), r([v({
    type: cc.Label,
    displayName: ""
  })], e.prototype, "labTaskDec", void 0), r([v({
    type: cc.Node,
    displayName: ""
  })], e.prototype, "btnGet", void 0), r([v({
    type: cc.Node,
    displayName: ""
  })], e.prototype, "btnVideoGet", void 0), r([v({
    type: cc.Node,
    displayName: ""
  })], e.prototype, "btnGoto", void 0), r([v({
    type: cc.Node,
    displayName: ""
  })], e.prototype, "btnClose", void 0), r([v(cc.Node)], e.prototype, "rewardItem", void 0), r([y("UIMainTask")], e);
}(n["default"]);

o.UIMainTask = I;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcVUlNYWluVGFzay5qcyJdLCJuYW1lcyI6WyJ0IiwicmVxdWlyZSIsImUiLCJtb2R1bGUiLCJvIiwiZXhwb3J0cyIsImEiLCJpIiwiX19leHRlbmRzIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiciIsIl9fZGVjb3JhdGUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJuIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwicyIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJVSU1haW5UYXNrIiwiYyIsImwiLCJ1IiwicCIsImciLCJkIiwiaCIsImYiLCJtIiwiY2MiLCJfZGVjb3JhdG9yIiwieSIsImNjY2xhc3MiLCJ2IiwicHJvcGVydHkiLCJJIiwiYXBwbHkiLCJzcEJhciIsImxhYlRhc2tQcm9ncmVzcyIsImxhYlRhc2tEZWMiLCJidG5HZXQiLCJidG5WaWRlb0dldCIsImJ0bkdvdG8iLCJidG5DbG9zZSIsInJld2FyZEl0ZW0iLCJjdXJUYXNrSWQiLCJzdGFydCIsInJlZ2lzdGVyQnRuRXZlbnQiLCJpbml0RGF0YSIsImluaXRWaWV3Iiwib24iLCJOb2RlIiwiRXZlbnRUeXBlIiwiVE9VQ0hfRU5EIiwiY2xvc2VWaWV3IiwiUGxheWVyTWdyIiwiZ2V0SW5zdGFuY2UiLCJnZXRNYWluVGFza0RhdGEiLCJnZXRDdXJyZW50SWQiLCJEYXRhTWdyIiwiZ2V0TWlzc2lvbiIsIlVJSUQiLCJVSUhvbWUiLCJKdW1wUm91dGUiLCJVSUhvbWVOZXciLCJVSU9ubGluZVJld2FyZCIsIlRpbWVNZ3IiLCJ0aW1lX29ubGluZSIsIlVJTWdyIiwib3BlblVJIiwiVUlUaXBzIiwiVUlNeXN0aWNhbFNob3AiLCJjbG9zZUJ5SWQiLCJnZXRUcmFja0RhdGEiLCJ5b3VtZW5nVHJhY2siLCJUcmFja0lkIiwibWFpbmxpbmV0YXNrX1giLCJhZGRUYXNrSWQiLCJnZXRSZXdhcmQiLCJTZGtNZ3IiLCJwbGF5VmlkZW8iLCJ0YXNrX2RvdWJsZWF3YXJkIiwicmVmcmVzaFZpZXciLCJpbml0UmV3YXJkVmlldyIsInN0cmluZyIsIkRlc2MxIiwiVGFza1BhcmFtZXRlciIsIkRlc2MyIiwiZmlsbFJhbmdlIiwiZ2V0Q3VycmVudFBhcmFtZXRlciIsImdldEN1cnJlbnRTdGF0ZSIsImFjdGl2ZSIsImdldEdvb2RzQ2ZnIiwiUmV3YXJkVHlwZSIsIlJlc291cmNlTWdyIiwibG9hZFNwcml0ZWZyYW1lIiwiYnVuZGxlUXVhbGl0eSIsImljb25RdWFsaXR5IiwiZ2V0Q2hpbGRCeU5hbWUiLCJnZXRDb21wb25lbnQiLCJTcHJpdGUiLCJzcHJpdGVGcmFtZSIsIkxhYmVsIiwiZ29vZHNOYW1lIiwiUmV3YXJkTnVtIiwiY29sb3IiLCJzZWxlQ29sb3IiLCJnb29kc1F1YWxpdHlJZCIsImdvb2RzVHlwZSIsImJ1bmRsZSIsImdvb2RzR2FtZUljb24iLCJnZVVzZXJEYXRhIiwiYWRkR29sZE51bSIsImFkZEluR290TnVtIiwiYWRkUG93ZXJOdW0iLCJjbG9zZVVJIiwidHlwZSIsImRpc3BsYXlOYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUMsR0FBR0MsT0FBUjtBQUNBLElBQUlDLENBQUMsR0FBR0MsTUFBUjtBQUNBLElBQUlDLENBQUMsR0FBR0MsT0FBUjs7QUFDQSxJQUFJQyxFQUFKO0FBQUEsSUFBT0MsQ0FBQyxHQUFHLFVBQVEsU0FBS0MsU0FBYixLQUEyQkYsRUFBQyxHQUFHLFdBQVNOLENBQVQsRUFBWUUsQ0FBWixFQUFlO0VBQ3JELE9BQU8sQ0FBQ0ksRUFBQyxHQUFHRyxNQUFNLENBQUNDLGNBQVAsSUFBeUI7SUFDakNDLFNBQVMsRUFBRTtFQURzQixhQUcxQkMsS0FIMEIsSUFJckMsVUFBU1osQ0FBVCxFQUFZRSxDQUFaLEVBQWU7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RDtBQXFJSCxDQW5KRyxDQW1KRG9CLENBQUMsV0FuSkEsQ0FiSjs7QUFpS0FsQixDQUFDLENBQUN5QixVQUFGLEdBQWVnQixDQUFmIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdCA9IHJlcXVpcmU7XG52YXIgZSA9IG1vZHVsZTtcbnZhciBvID0gZXhwb3J0cztcbnZhciBhLCBpID0gdGhpcyAmJiB0aGlzLl9fZXh0ZW5kcyB8fCAoYSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICByZXR1cm4gKGEgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwge1xuICAgICAgICBfX3Byb3RvX186IFtdXG4gICAgfVxuICAgIGluc3RhbmNlb2YgQXJyYXkgJiZcbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHQuX19wcm90b19fID0gZVxuICAgIH0gfHxcbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAodmFyIG8gaW4gZSkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIG8pICYmICh0W29dID0gZVtvXSlcbiAgICB9KSh0LCBlKVxufSxcbmZ1bmN0aW9uKHQsIGUpIHtcbiAgICBmdW5jdGlvbiBvKCkge1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gdFxuICAgIH1cbiAgICBhKHQsIGUpLFxuICAgIHQucHJvdG90eXBlID0gbnVsbCA9PT0gZSA/IE9iamVjdC5jcmVhdGUoZSkgOiAoby5wcm90b3R5cGUgPSBlLnByb3RvdHlwZSwgbmV3IG8pXG59KSxcbnIgPSB0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSB8fFxuZnVuY3Rpb24odCwgZSwgbywgYSkge1xuICAgIHZhciBpLCByID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICBuID0gciA8IDMgPyBlOiBudWxsID09PSBhID8gYSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgbykgOiBhO1xuICAgIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiBSZWZsZWN0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSkgbiA9IFJlZmxlY3QuZGVjb3JhdGUodCwgZSwgbywgYSk7XG4gICAgZWxzZSBmb3IgKHZhciBzID0gdC5sZW5ndGggLSAxOyBzID49IDA7IHMtLSkoaSA9IHRbc10pICYmIChuID0gKHIgPCAzID8gaShuKSA6IHIgPiAzID8gaShlLCBvLCBuKSA6IGkoZSwgbykpIHx8IG4pO1xuICAgIHJldHVybiByID4gMyAmJiBuICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBvLCBuKSxcbiAgICBuXG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6ICEwXG59KSxcbm8uVUlNYWluVGFzayA9IHZvaWQgMDtcbnZhciBuID0gdChcIkJhc2VVSVwiKSxcbnMgPSB0KFwiUmVzb3VyY2VNZ3JcIiksXG5jID0gdChcIlNka01nclwiKSxcbmwgPSB0KFwiVUlNZ3JcIiksXG51ID0gdChcIkNvbmZpZ1wiKSxcbnAgPSB0KFwiVHJhY2tEYXRhRXZlbnRcIiksXG5nID0gdChcIkRhdGFNZ3JcIiksXG5kID0gdChcIkdvb2RzTWFuYWdlclwiKSxcbmggPSB0KFwiUGxheWVyTWdyXCIpLFxuZiA9IHQoXCJUaW1lTWdyXCIpLFxubSA9IGNjLl9kZWNvcmF0b3IsXG55ID0gbS5jY2NsYXNzLFxudiA9IG0ucHJvcGVydHksXG5JID0gZnVuY3Rpb24odCkge1xuICAgIGZ1bmN0aW9uIGUoKSB7XG4gICAgICAgIHZhciBlID0gbnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgcmV0dXJuIGUuc3BCYXIgPSBudWxsLFxuICAgICAgICBlLmxhYlRhc2tQcm9ncmVzcyA9IG51bGwsXG4gICAgICAgIGUubGFiVGFza0RlYyA9IG51bGwsXG4gICAgICAgIGUuYnRuR2V0ID0gbnVsbCxcbiAgICAgICAgZS5idG5WaWRlb0dldCA9IG51bGwsXG4gICAgICAgIGUuYnRuR290byA9IG51bGwsXG4gICAgICAgIGUuYnRuQ2xvc2UgPSBudWxsLFxuICAgICAgICBlLnJld2FyZEl0ZW0gPSBudWxsLFxuICAgICAgICBlLmN1clRhc2tJZCA9IDEsXG4gICAgICAgIGVcbiAgICB9XG4gICAgcmV0dXJuIGkoZSwgdCksXG4gICAgZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlckJ0bkV2ZW50KCksXG4gICAgICAgIHRoaXMuaW5pdERhdGEoKSxcbiAgICAgICAgdGhpcy5pbml0VmlldygpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5yZWdpc3RlckJ0bkV2ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgdGhpcy5idG5DbG9zZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdC5jbG9zZVZpZXcoKVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy5idG5Hb3RvLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCxcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZSA9IGguUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2V0TWFpblRhc2tEYXRhKCkuZ2V0Q3VycmVudElkKCksXG4gICAgICAgICAgICBvID0gZy5EYXRhTWdyLmdldEluc3RhbmNlKCkuZ2V0TWlzc2lvbihlKTtcbiAgICAgICAgICAgIGlmICh1LlVJSUQuVUlIb21lICE9IG8uSnVtcFJvdXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSB1LlVJSUQuVUlIb21lTmV3O1xuICAgICAgICAgICAgICAgIHUuVUlJRC5VSU9ubGluZVJld2FyZCA9PSBvLkp1bXBSb3V0ZSA/IGYuVGltZU1nci5nZXRJbnN0YW5jZSgpLnRpbWVfb25saW5lIDwgNjAgPyBsLlVJTWdyLmdldEluc3RhbmNlKCkub3BlblVJKHUuVUlJRC5VSVRpcHMsIC0xLCBcIui/mOacquiOt+W+l+WlluWKsVwiKSA6IGwuVUlNZ3IuZ2V0SW5zdGFuY2UoKS5vcGVuVUkodS5VSUlELlVJT25saW5lUmV3YXJkLCAtMSkgOiAodS5VSUlELlVJTXlzdGljYWxTaG9wICE9IG8uSnVtcFJvdXRlICYmIGwuVUlNZ3IuZ2V0SW5zdGFuY2UoKS5jbG9zZUJ5SWQoYSksIGwuVUlNZ3IuZ2V0SW5zdGFuY2UoKS5vcGVuVUkoby5KdW1wUm91dGUsIC0xKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQuY2xvc2VWaWV3KClcbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMuYnRuR2V0Lm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCxcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0LmN1clRhc2tJZCA8PSAzMCAmJiBoLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdldFRyYWNrRGF0YSgpLnlvdW1lbmdUcmFjayhwLlRyYWNrSWQubWFpbmxpbmV0YXNrX1gsIHQuY3VyVGFza0lkKSxcbiAgICAgICAgICAgIGguUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2V0TWFpblRhc2tEYXRhKCkuYWRkVGFza0lkKCksXG4gICAgICAgICAgICB0LmdldFJld2FyZCgpLFxuICAgICAgICAgICAgdC5jbG9zZVZpZXcoKVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy5idG5WaWRlb0dldC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYy5TZGtNZ3IuZ2V0SW5zdGFuY2UoKS5wbGF5VmlkZW8oMSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHQuY3VyVGFza0lkIDw9IDMwICYmIGguUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2V0VHJhY2tEYXRhKCkueW91bWVuZ1RyYWNrKHAuVHJhY2tJZC5tYWlubGluZXRhc2tfWCwgdC5jdXJUYXNrSWQpLFxuICAgICAgICAgICAgICAgIGguUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2V0VHJhY2tEYXRhKCkueW91bWVuZ1RyYWNrKHAuVHJhY2tJZC50YXNrX2RvdWJsZWF3YXJkKSxcbiAgICAgICAgICAgICAgICBoLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdldE1haW5UYXNrRGF0YSgpLmFkZFRhc2tJZCgpLFxuICAgICAgICAgICAgICAgIHQuZ2V0UmV3YXJkKCEwKSxcbiAgICAgICAgICAgICAgICB0LmNsb3NlVmlldygpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuaW5pdERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jdXJUYXNrSWQgPSBoLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdldE1haW5UYXNrRGF0YSgpLmdldEN1cnJlbnRJZCgpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5pbml0VmlldyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KCksXG4gICAgICAgIHRoaXMuaW5pdFJld2FyZFZpZXcoKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUucmVmcmVzaFZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQgPSBnLkRhdGFNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRNaXNzaW9uKHRoaXMuY3VyVGFza0lkKTtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIHRoaXMubGFiVGFza0RlYy5zdHJpbmcgPSBcIlwiICsgdC5EZXNjMSArIHQuVGFza1BhcmFtZXRlciArIHQuRGVzYzIsXG4gICAgICAgICAgICB0aGlzLnNwQmFyLmZpbGxSYW5nZSA9IGguUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2V0TWFpblRhc2tEYXRhKCkuZ2V0Q3VycmVudFBhcmFtZXRlcigpIC8gdC5UYXNrUGFyYW1ldGVyLFxuICAgICAgICAgICAgdGhpcy5sYWJUYXNrUHJvZ3Jlc3Muc3RyaW5nID0gaC5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRNYWluVGFza0RhdGEoKS5nZXRDdXJyZW50UGFyYW1ldGVyKCkgKyBcIi9cIiArIHQuVGFza1BhcmFtZXRlcjtcbiAgICAgICAgICAgIHZhciBlID0gaC5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRNYWluVGFza0RhdGEoKS5nZXRDdXJyZW50U3RhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuYnRuR290by5hY3RpdmUgPSAhZSxcbiAgICAgICAgICAgIHRoaXMuYnRuR2V0LmFjdGl2ZSA9IGUsXG4gICAgICAgICAgICB0aGlzLmJ0blZpZGVvR2V0LmFjdGl2ZSA9IGVcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuaW5pdFJld2FyZFZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQsIGUgPSB0aGlzLFxuICAgICAgICBvID0gaC5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRNYWluVGFza0RhdGEoKS5nZXRDdXJyZW50SWQoKSxcbiAgICAgICAgYSA9IGcuRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldE1pc3Npb24obyksXG4gICAgICAgIGkgPSBnLkRhdGFNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRHb29kc0NmZyhhLlJld2FyZFR5cGUpO1xuICAgICAgICBzd2l0Y2ggKHMuUmVzb3VyY2VNZ3IuZ2V0SW5zdGFuY2UoKS5sb2FkU3ByaXRlZnJhbWUoaS5idW5kbGVRdWFsaXR5LCBpLmljb25RdWFsaXR5LFxuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBlLnJld2FyZEl0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJTcEljb25CZ1wiKS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRcbiAgICAgICAgfSksIHRoaXMucmV3YXJkSXRlbS5nZXRDaGlsZEJ5TmFtZShcIkxhYkljb25OYW1lXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gaS5nb29kc05hbWUgKyBcInhcIiArIGEuUmV3YXJkTnVtLCB0aGlzLnJld2FyZEl0ZW0uZ2V0Q2hpbGRCeU5hbWUoXCJMYWJJY29uTmFtZVwiKS5jb2xvciA9IGQuZGVmYXVsdC5nZXRJbnN0YW5jZSgpLnNlbGVDb2xvcihpLmdvb2RzUXVhbGl0eUlkKSwgaS5nb29kc1R5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJnb2xkXCI6XG4gICAgICAgICAgICBjYXNlIFwiaW5Hb3RcIjpcbiAgICAgICAgICAgIGNhc2UgXCJwb3dlclwiOlxuICAgICAgICAgICAgICAgIHQgPSBnLkRhdGFNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRHb29kc0NmZyhhLlJld2FyZFR5cGUpLFxuICAgICAgICAgICAgcy5SZXNvdXJjZU1nci5nZXRJbnN0YW5jZSgpLmxvYWRTcHJpdGVmcmFtZSh0LmJ1bmRsZSwgdC5nb29kc0dhbWVJY29uLFxuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGUucmV3YXJkSXRlbS5nZXRDaGlsZEJ5TmFtZShcIlNwSWNvblwiKS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5nZXRSZXdhcmQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHZvaWQgMCA9PT0gdCAmJiAodCA9ICExKTtcbiAgICAgICAgdmFyIGUgPSBoLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdldE1haW5UYXNrRGF0YSgpLmdldEN1cnJlbnRJZCgpLFxuICAgICAgICBvID0gZy5EYXRhTWdyLmdldEluc3RhbmNlKCkuZ2V0TWlzc2lvbihlKSxcbiAgICAgICAgYSA9IGcuRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldEdvb2RzQ2ZnKG8uUmV3YXJkVHlwZSksXG4gICAgICAgIGkgPSBoLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKSxcbiAgICAgICAgciA9IHQgPyAyICogby5SZXdhcmROdW06IG8uUmV3YXJkTnVtO1xuICAgICAgICBzd2l0Y2ggKGEuZ29vZHNUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiZ29sZFwiOlxuICAgICAgICAgICAgICAgIGkuYWRkR29sZE51bShyKSxcbiAgICAgICAgICAgIGwuVUlNZ3IuZ2V0SW5zdGFuY2UoKS5vcGVuVUkodS5VSUlELlVJVGlwcywgLTEsIFwi5oiQ5Yqf6aKG5Y+WIOmHkeW4gXhcIiArIHIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiaW5Hb3RcIjpcbiAgICAgICAgICAgICAgICBpLmFkZEluR290TnVtKHIpLFxuICAgICAgICAgICAgbC5VSU1nci5nZXRJbnN0YW5jZSgpLm9wZW5VSSh1LlVJSUQuVUlUaXBzLCAtMSwgXCLmiJDlip/pooblj5Yg5YWD5a6deFwiICsgcik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJwb3dlclwiOlxuICAgICAgICAgICAgICAgIGkuYWRkUG93ZXJOdW0ociksXG4gICAgICAgICAgICBsLlVJTWdyLmdldEluc3RhbmNlKCkub3BlblVJKHUuVUlJRC5VSVRpcHMsIC0xLCBcIuaIkOWKn+mihuWPliDkvZPlipt4XCIgKyByKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuY2xvc2VWaWV3ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuY2xvc2VVSSgpXG4gICAgfSxcbiAgICByKFt2KHtcbiAgICAgICAgdHlwZTogY2MuU3ByaXRlLFxuICAgICAgICBkaXNwbGF5TmFtZTogXCJcIlxuICAgIH0pXSwgZS5wcm90b3R5cGUsIFwic3BCYXJcIiwgdm9pZCAwKSxcbiAgICByKFt2KHtcbiAgICAgICAgdHlwZTogY2MuTGFiZWwsXG4gICAgICAgIGRpc3BsYXlOYW1lOiBcIlwiXG4gICAgfSldLCBlLnByb3RvdHlwZSwgXCJsYWJUYXNrUHJvZ3Jlc3NcIiwgdm9pZCAwKSxcbiAgICByKFt2KHtcbiAgICAgICAgdHlwZTogY2MuTGFiZWwsXG4gICAgICAgIGRpc3BsYXlOYW1lOiBcIlwiXG4gICAgfSldLCBlLnByb3RvdHlwZSwgXCJsYWJUYXNrRGVjXCIsIHZvaWQgMCksXG4gICAgcihbdih7XG4gICAgICAgIHR5cGU6IGNjLk5vZGUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiBcIlwiXG4gICAgfSldLCBlLnByb3RvdHlwZSwgXCJidG5HZXRcIiwgdm9pZCAwKSxcbiAgICByKFt2KHtcbiAgICAgICAgdHlwZTogY2MuTm9kZSxcbiAgICAgICAgZGlzcGxheU5hbWU6IFwiXCJcbiAgICB9KV0sIGUucHJvdG90eXBlLCBcImJ0blZpZGVvR2V0XCIsIHZvaWQgMCksXG4gICAgcihbdih7XG4gICAgICAgIHR5cGU6IGNjLk5vZGUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiBcIlwiXG4gICAgfSldLCBlLnByb3RvdHlwZSwgXCJidG5Hb3RvXCIsIHZvaWQgMCksXG4gICAgcihbdih7XG4gICAgICAgIHR5cGU6IGNjLk5vZGUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiBcIlwiXG4gICAgfSldLCBlLnByb3RvdHlwZSwgXCJidG5DbG9zZVwiLCB2b2lkIDApLFxuICAgIHIoW3YoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJyZXdhcmRJdGVtXCIsIHZvaWQgMCksXG4gICAgcihbeShcIlVJTWFpblRhc2tcIildLCBlKVxufSAobi5kZWZhdWx0KTtcbm8uVUlNYWluVGFzayA9IEkiXX0=