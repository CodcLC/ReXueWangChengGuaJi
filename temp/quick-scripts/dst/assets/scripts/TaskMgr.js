
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/TaskMgr.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '6d6abU/a09Nb438Bch67aQk', 'TaskMgr');
// scripts/TaskMgr.js

"use strict";

var t = require;
var e = module;
var o = exports;
Object.defineProperty(o, "__esModule", {
  value: !0
});

var a = t("DataMgr"),
    i = t("PlayerMgr"),
    r = function () {
  function t() {
    this.taskList = [], this.taskNeedCountList = [];
  }

  return t.getInstance = function () {
    return null == this.instance && (this.instance = new t()), this.instance;
  }, t.prototype.initTaskData = function () {
    if (!(this.taskList.length > 0)) {
      this.taskList = [];
      var t = i.PlayerMgr.getInstance().geUserData();
      if (t.getCurTaskList().length <= 0) for (var e = a.DataMgr.getInstance().getTaskCfg(), o = 0; o < e.length; o++) {
        if (1 == e[o].FirstTask) {
          var r = {
            id: e[o].ID,
            type: e[o].Type,
            state: 0,
            needCount: e[o].TaskParameter
          };
          t.setTaskList(r);
        }
      }
      this.taskList = t.getCurTaskList(), this.initTaskNeedCountData();
    }
  }, t.prototype.refreshTaskData = function (t) {
    var e = i.PlayerMgr.getInstance().geUserData();
    e.getCurTaskList()[t.type - 1] && (i.PlayerMgr.getInstance().geUserData().setTaskList(t), this.taskList = e.getCurTaskList());
  }, t.prototype.refreshTaskDataForState = function (t) {
    this.taskList[t.type - 1].state = t.state, i.PlayerMgr.getInstance().geUserData().setTaskList(this.taskList[t.type - 1]);
  }, t.prototype.getTaskList = function () {
    return (!this.taskList || this.taskList.length <= 0) && this.initTaskData(), this.taskList;
  }, t.prototype.getTaskNeedCountList = function () {
    return (!this.taskNeedCountList || this.taskNeedCountList.length <= 0) && this.initTaskData(), this.taskNeedCountList;
  }, t.prototype.initTaskNeedCountData = function () {
    if (!(this.taskNeedCountList.length > 0)) {
      var t = i.PlayerMgr.getInstance().geUserData();
      if (t.getTaskNeedCountArr().length <= 0) for (var e = 0; e < this.taskList.length; e++) {
        t.setTaskNeedCountArr(e + 1, 0);
      }
      this.taskNeedCountList = t.getTaskNeedCountArr();
    }
  }, t.prototype.addUpLoginForTask = function () {
    this.getTaskNeedCountList()[0] += 1, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(1, this.getTaskNeedCountList()[0]), this.refreshTaskState(1);
  }, t.prototype.costPowerForTask = function (t) {
    this.getTaskNeedCountList()[1] += t, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(2, this.getTaskNeedCountList()[1]), this.refreshTaskState(2);
  }, t.prototype.upFightNumForTask = function (t) {
    t > this.getTaskNeedCountList()[2] && (this.getTaskNeedCountList()[2] = t, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(3, this.getTaskNeedCountList()[2]), this.refreshTaskState(3));
  }, t.prototype.addOnHookCountForTask = function () {
    this.getTaskNeedCountList()[3] += 1, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(4, this.getTaskNeedCountList()[3]), this.refreshTaskState(4);
  }, t.prototype.addSkillBookCountForTask = function (t) {
    void 0 === t && (t = 1);
    var e = i.PlayerMgr.getInstance().geUserData().getSkillBookArr();
    this.getTaskNeedCountList()[4] = e.length, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(5, this.getTaskNeedCountList()[4]), this.refreshTaskState(5);
  }, t.prototype.skillBookMaxLvforTask = function (t) {
    t > this.getTaskNeedCountList()[5] && (this.getTaskNeedCountList()[5] = t, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(6, this.getTaskNeedCountList()[5]), this.refreshTaskState(6));
  }, t.prototype.addEquipCountForTask = function (t) {
    void 0 === t && (t = 1), this.getTaskNeedCountList()[6] += t, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(7, this.getTaskNeedCountList()[6]), this.refreshTaskState(7);
  }, t.prototype.wearEquipQualityForTask = function (t) {
    for (var e = 0, o = a.DataMgr.getInstance().getTaskCfgForId(t, 8).TaskParameterType, r = i.PlayerMgr.getInstance().geUserData().getWearedEquipQualityList(), n = 0; n < r.length; n++) {
      r[n] >= o && (e += 1);
    }

    this.getTaskNeedCountList()[7] = e, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(8, this.getTaskNeedCountList()[7]), this.refreshTaskState(8);
  }, t.prototype.addDrawRewardCountForCount = function () {
    this.getTaskNeedCountList()[8] += 1, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(9, this.getTaskNeedCountList()[8]), this.refreshTaskState(9);
  }, t.prototype.addLookVideoCountForTask = function () {
    this.getTaskNeedCountList()[9] += 1, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(10, this.getTaskNeedCountList()[9]), this.refreshTaskState(10);
  }, t.prototype.passSecForTask = function (t) {
    this.getTaskNeedCountList()[10] = t, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(11, this.getTaskNeedCountList()[10]), this.refreshTaskState(11);
  }, t.prototype.addEquipStrengthenCountForTask = function () {
    this.getTaskNeedCountList()[11] += 1, i.PlayerMgr.getInstance().geUserData().setTaskNeedCountArr(12, this.getTaskNeedCountList()[11]), this.refreshTaskState(12);
  }, t.prototype.refreshTaskState = function (t) {
    var e = this.taskList[t - 1].needCount;

    if (this.getTaskNeedCountList()[t - 1] >= e) {
      if (0 != this.taskList[t - 1].state) return;
      this.taskList[t - 1].state = 1, i.PlayerMgr.getInstance().geUserData().setTaskList(this.taskList[t - 1]);
    }
  }, t;
}();

o["default"] = r;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcVGFza01nci5qcyJdLCJuYW1lcyI6WyJ0IiwicmVxdWlyZSIsImUiLCJtb2R1bGUiLCJvIiwiZXhwb3J0cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJhIiwiaSIsInIiLCJ0YXNrTGlzdCIsInRhc2tOZWVkQ291bnRMaXN0IiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsInByb3RvdHlwZSIsImluaXRUYXNrRGF0YSIsImxlbmd0aCIsIlBsYXllck1nciIsImdlVXNlckRhdGEiLCJnZXRDdXJUYXNrTGlzdCIsIkRhdGFNZ3IiLCJnZXRUYXNrQ2ZnIiwiRmlyc3RUYXNrIiwiaWQiLCJJRCIsInR5cGUiLCJUeXBlIiwic3RhdGUiLCJuZWVkQ291bnQiLCJUYXNrUGFyYW1ldGVyIiwic2V0VGFza0xpc3QiLCJpbml0VGFza05lZWRDb3VudERhdGEiLCJyZWZyZXNoVGFza0RhdGEiLCJyZWZyZXNoVGFza0RhdGFGb3JTdGF0ZSIsImdldFRhc2tMaXN0IiwiZ2V0VGFza05lZWRDb3VudExpc3QiLCJnZXRUYXNrTmVlZENvdW50QXJyIiwic2V0VGFza05lZWRDb3VudEFyciIsImFkZFVwTG9naW5Gb3JUYXNrIiwicmVmcmVzaFRhc2tTdGF0ZSIsImNvc3RQb3dlckZvclRhc2siLCJ1cEZpZ2h0TnVtRm9yVGFzayIsImFkZE9uSG9va0NvdW50Rm9yVGFzayIsImFkZFNraWxsQm9va0NvdW50Rm9yVGFzayIsImdldFNraWxsQm9va0FyciIsInNraWxsQm9va01heEx2Zm9yVGFzayIsImFkZEVxdWlwQ291bnRGb3JUYXNrIiwid2VhckVxdWlwUXVhbGl0eUZvclRhc2siLCJnZXRUYXNrQ2ZnRm9ySWQiLCJUYXNrUGFyYW1ldGVyVHlwZSIsImdldFdlYXJlZEVxdWlwUXVhbGl0eUxpc3QiLCJuIiwiYWRkRHJhd1Jld2FyZENvdW50Rm9yQ291bnQiLCJhZGRMb29rVmlkZW9Db3VudEZvclRhc2siLCJwYXNzU2VjRm9y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Q2dCLFNBQUYsQ0FBWXlDLDhCQUFaLEdBQTZDLFlBQVc7SUFDcEQsS0FBS3BCLG9CQUFMLEdBQTRCLEVBQTVCLEtBQW1DLENBQW5DLEVBQ0EzQixDQUFDLENBQUNTLFNBQUYsQ0FBWUwsV0FBWixHQUEwQk0sVUFBMUIsR0FBdUNtQixtQkFBdkMsQ0FBMkQsRUFBM0QsRUFBK0QsS0FBS0Ysb0JBQUwsR0FBNEIsRUFBNUIsQ0FBL0QsQ0FEQSxFQUVBLEtBQUtJLGdCQUFMLENBQXNCLEVBQXRCLENBRkE7RUFHSCxDQXhHTSxFQXlHUHpDLENBQUMsQ0FBQ2dCLFNBQUYsQ0FBWXlCLGdCQUFaLEdBQStCLFVBQVN6QyxDQUFULEVBQVk7SUFDdkMsSUFBSUUsQ0FBQyxHQUFHLEtBQUtVLFFBQUwsQ0FBY1osQ0FBQyxHQUFHLENBQWxCLEVBQXFCOEIsU0FBN0I7O0lBQ0EsSUFBSSxLQUFLTyxvQkFBTCxHQUE0QnJDLENBQUMsR0FBRyxDQUFoQyxLQUFzQ0UsQ0FBMUMsRUFBNkM7TUFDekMsSUFBSSxLQUFLLEtBQUtVLFFBQUwsQ0FBY1osQ0FBQyxHQUFHLENBQWxCLEVBQXFCNkIsS0FBOUIsRUFBcUM7TUFDckMsS0FBS2pCLFFBQUwsQ0FBY1osQ0FBQyxHQUFHLENBQWxCLEVBQXFCNkIsS0FBckIsR0FBNkIsQ0FBN0IsRUFDQW5CLENBQUMsQ0FBQ1MsU0FBRixDQUFZTCxXQUFaLEdBQTBCTSxVQUExQixHQUF1Q1ksV0FBdkMsQ0FBbUQsS0FBS3BCLFFBQUwsQ0FBY1osQ0FBQyxHQUFHLENBQWxCLENBQW5ELENBREE7SUFFSDtFQUNKLENBaEhNLEVBaUhQQSxDQWpIQTtBQWtISCxDQXZIRyxFQUZKOztBQTBIQUksQ0FBQyxXQUFELEdBQVlPLENBQVoiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0ID0gcmVxdWlyZTtcbnZhciBlID0gbW9kdWxlO1xudmFyIG8gPSBleHBvcnRzO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6ICEwXG59KTtcbnZhciBhID0gdChcIkRhdGFNZ3JcIiksXG5pID0gdChcIlBsYXllck1nclwiKSxcbnIgPSBmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICB0aGlzLnRhc2tMaXN0ID0gW10sXG4gICAgICAgIHRoaXMudGFza05lZWRDb3VudExpc3QgPSBbXVxuICAgIH1cbiAgICByZXR1cm4gdC5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmluc3RhbmNlICYmICh0aGlzLmluc3RhbmNlID0gbmV3IHQpLFxuICAgICAgICB0aGlzLmluc3RhbmNlXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5pbml0VGFza0RhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCEgKHRoaXMudGFza0xpc3QubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgICAgIHRoaXMudGFza0xpc3QgPSBbXTtcbiAgICAgICAgICAgIHZhciB0ID0gaS5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZVVzZXJEYXRhKCk7XG4gICAgICAgICAgICBpZiAodC5nZXRDdXJUYXNrTGlzdCgpLmxlbmd0aCA8PSAwKSBmb3IgKHZhciBlID0gYS5EYXRhTWdyLmdldEluc3RhbmNlKCkuZ2V0VGFza0NmZygpLCBvID0gMDsgbyA8IGUubGVuZ3RoOyBvKyspIGlmICgxID09IGVbb10uRmlyc3RUYXNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBlW29dLklELFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBlW29dLlR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiAwLFxuICAgICAgICAgICAgICAgICAgICBuZWVkQ291bnQ6IGVbb10uVGFza1BhcmFtZXRlclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdC5zZXRUYXNrTGlzdChyKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXNrTGlzdCA9IHQuZ2V0Q3VyVGFza0xpc3QoKSxcbiAgICAgICAgICAgIHRoaXMuaW5pdFRhc2tOZWVkQ291bnREYXRhKClcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUucmVmcmVzaFRhc2tEYXRhID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgZSA9IGkuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2VVc2VyRGF0YSgpO1xuICAgICAgICBlLmdldEN1clRhc2tMaXN0KClbdC50eXBlIC0gMV0gJiYgKGkuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2VVc2VyRGF0YSgpLnNldFRhc2tMaXN0KHQpLCB0aGlzLnRhc2tMaXN0ID0gZS5nZXRDdXJUYXNrTGlzdCgpKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUucmVmcmVzaFRhc2tEYXRhRm9yU3RhdGUgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHRoaXMudGFza0xpc3RbdC50eXBlIC0gMV0uc3RhdGUgPSB0LnN0YXRlLFxuICAgICAgICBpLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5zZXRUYXNrTGlzdCh0aGlzLnRhc2tMaXN0W3QudHlwZSAtIDFdKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuZ2V0VGFza0xpc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICghdGhpcy50YXNrTGlzdCB8fCB0aGlzLnRhc2tMaXN0Lmxlbmd0aCA8PSAwKSAmJiB0aGlzLmluaXRUYXNrRGF0YSgpLFxuICAgICAgICB0aGlzLnRhc2tMaXN0XG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5nZXRUYXNrTmVlZENvdW50TGlzdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKCF0aGlzLnRhc2tOZWVkQ291bnRMaXN0IHx8IHRoaXMudGFza05lZWRDb3VudExpc3QubGVuZ3RoIDw9IDApICYmIHRoaXMuaW5pdFRhc2tEYXRhKCksXG4gICAgICAgIHRoaXMudGFza05lZWRDb3VudExpc3RcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLmluaXRUYXNrTmVlZENvdW50RGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoISAodGhpcy50YXNrTmVlZENvdW50TGlzdC5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgdmFyIHQgPSBpLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKTtcbiAgICAgICAgICAgIGlmICh0LmdldFRhc2tOZWVkQ291bnRBcnIoKS5sZW5ndGggPD0gMCkgZm9yICh2YXIgZSA9IDA7IGUgPCB0aGlzLnRhc2tMaXN0Lmxlbmd0aDsgZSsrKSB0LnNldFRhc2tOZWVkQ291bnRBcnIoZSArIDEsIDApO1xuICAgICAgICAgICAgdGhpcy50YXNrTmVlZENvdW50TGlzdCA9IHQuZ2V0VGFza05lZWRDb3VudEFycigpXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHQucHJvdG90eXBlLmFkZFVwTG9naW5Gb3JUYXNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZ2V0VGFza05lZWRDb3VudExpc3QoKVswXSArPSAxLFxuICAgICAgICBpLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5zZXRUYXNrTmVlZENvdW50QXJyKDEsIHRoaXMuZ2V0VGFza05lZWRDb3VudExpc3QoKVswXSksXG4gICAgICAgIHRoaXMucmVmcmVzaFRhc2tTdGF0ZSgxKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuY29zdFBvd2VyRm9yVGFzayA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdGhpcy5nZXRUYXNrTmVlZENvdW50TGlzdCgpWzFdICs9IHQsXG4gICAgICAgIGkuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2VVc2VyRGF0YSgpLnNldFRhc2tOZWVkQ291bnRBcnIoMiwgdGhpcy5nZXRUYXNrTmVlZENvdW50TGlzdCgpWzFdKSxcbiAgICAgICAgdGhpcy5yZWZyZXNoVGFza1N0YXRlKDIpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS51cEZpZ2h0TnVtRm9yVGFzayA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdCA+IHRoaXMuZ2V0VGFza05lZWRDb3VudExpc3QoKVsyXSAmJiAodGhpcy5nZXRUYXNrTmVlZENvdW50TGlzdCgpWzJdID0gdCwgaS5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZVVzZXJEYXRhKCkuc2V0VGFza05lZWRDb3VudEFycigzLCB0aGlzLmdldFRhc2tOZWVkQ291bnRMaXN0KClbMl0pLCB0aGlzLnJlZnJlc2hUYXNrU3RhdGUoMykpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5hZGRPbkhvb2tDb3VudEZvclRhc2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5nZXRUYXNrTmVlZENvdW50TGlzdCgpWzNdICs9IDEsXG4gICAgICAgIGkuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2VVc2VyRGF0YSgpLnNldFRhc2tOZWVkQ291bnRBcnIoNCwgdGhpcy5nZXRUYXNrTmVlZENvdW50TGlzdCgpWzNdKSxcbiAgICAgICAgdGhpcy5yZWZyZXNoVGFza1N0YXRlKDQpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5hZGRTa2lsbEJvb2tDb3VudEZvclRhc2sgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHZvaWQgMCA9PT0gdCAmJiAodCA9IDEpO1xuICAgICAgICB2YXIgZSA9IGkuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2VVc2VyRGF0YSgpLmdldFNraWxsQm9va0FycigpO1xuICAgICAgICB0aGlzLmdldFRhc2tOZWVkQ291bnRMaXN0KClbNF0gPSBlLmxlbmd0aCxcbiAgICAgICAgaS5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZVVzZXJEYXRhKCkuc2V0VGFza05lZWRDb3VudEFycig1LCB0aGlzLmdldFRhc2tOZWVkQ291bnRMaXN0KClbNF0pLFxuICAgICAgICB0aGlzLnJlZnJlc2hUYXNrU3RhdGUoNSlcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLnNraWxsQm9va01heEx2Zm9yVGFzayA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdCA+IHRoaXMuZ2V0VGFza05lZWRDb3VudExpc3QoKVs1XSAmJiAodGhpcy5nZXRUYXNrTmVlZENvdW50TGlzdCgpWzVdID0gdCwgaS5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZVVzZXJEYXRhKCkuc2V0VGFza05lZWRDb3VudEFycig2LCB0aGlzLmdldFRhc2tOZWVkQ291bnRMaXN0KClbNV0pLCB0aGlzLnJlZnJlc2hUYXNrU3RhdGUoNikpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5hZGRFcXVpcENvdW50Rm9yVGFzayA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gMSksXG4gICAgICAgIHRoaXMuZ2V0VGFza05lZWRDb3VudExpc3QoKVs2XSArPSB0LFxuICAgICAgICBpLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5zZXRUYXNrTmVlZENvdW50QXJyKDcsIHRoaXMuZ2V0VGFza05lZWRDb3VudExpc3QoKVs2XSksXG4gICAgICAgIHRoaXMucmVmcmVzaFRhc2tTdGF0ZSg3KVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUud2VhckVxdWlwUXVhbGl0eUZvclRhc2sgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIGUgPSAwLFxuICAgICAgICBvID0gYS5EYXRhTWdyLmdldEluc3RhbmNlKCkuZ2V0VGFza0NmZ0ZvcklkKHQsIDgpLlRhc2tQYXJhbWV0ZXJUeXBlLCByID0gaS5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZVVzZXJEYXRhKCkuZ2V0V2VhcmVkRXF1aXBRdWFsaXR5TGlzdCgpLCBuID0gMDsgbiA8IHIubGVuZ3RoOyBuKyspIHJbbl0gPj0gbyAmJiAoZSArPSAxKTtcbiAgICAgICAgdGhpcy5nZXRUYXNrTmVlZENvdW50TGlzdCgpWzddID0gZSxcbiAgICAgICAgaS5QbGF5ZXJNZ3IuZ2V0SW5zdGFuY2UoKS5nZVVzZXJEYXRhKCkuc2V0VGFza05lZWRDb3VudEFycig4LCB0aGlzLmdldFRhc2tOZWVkQ291bnRMaXN0KClbN10pLFxuICAgICAgICB0aGlzLnJlZnJlc2hUYXNrU3RhdGUoOClcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLmFkZERyYXdSZXdhcmRDb3VudEZvckNvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZ2V0VGFza05lZWRDb3VudExpc3QoKVs4XSArPSAxLFxuICAgICAgICBpLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5zZXRUYXNrTmVlZENvdW50QXJyKDksIHRoaXMuZ2V0VGFza05lZWRDb3VudExpc3QoKVs4XSksXG4gICAgICAgIHRoaXMucmVmcmVzaFRhc2tTdGF0ZSg5KVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuYWRkTG9va1ZpZGVvQ291bnRGb3JUYXNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuZ2V0VGFza05lZWRDb3VudExpc3QoKVs5XSArPSAxLFxuICAgICAgICBpLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5zZXRUYXNrTmVlZENvdW50QXJyKDEwLCB0aGlzLmdldFRhc2tOZWVkQ291bnRMaXN0KClbOV0pLFxuICAgICAgICB0aGlzLnJlZnJlc2hUYXNrU3RhdGUoMTApXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5wYXNzU2VjRm9yVGFzayA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdGhpcy5nZXRUYXNrTmVlZENvdW50TGlzdCgpWzEwXSA9IHQsXG4gICAgICAgIGkuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2VVc2VyRGF0YSgpLnNldFRhc2tOZWVkQ291bnRBcnIoMTEsIHRoaXMuZ2V0VGFza05lZWRDb3VudExpc3QoKVsxMF0pLFxuICAgICAgICB0aGlzLnJlZnJlc2hUYXNrU3RhdGUoMTEpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5hZGRFcXVpcFN0cmVuZ3RoZW5Db3VudEZvclRhc2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5nZXRUYXNrTmVlZENvdW50TGlzdCgpWzExXSArPSAxLFxuICAgICAgICBpLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5zZXRUYXNrTmVlZENvdW50QXJyKDEyLCB0aGlzLmdldFRhc2tOZWVkQ291bnRMaXN0KClbMTFdKSxcbiAgICAgICAgdGhpcy5yZWZyZXNoVGFza1N0YXRlKDEyKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUucmVmcmVzaFRhc2tTdGF0ZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzLnRhc2tMaXN0W3QgLSAxXS5uZWVkQ291bnQ7XG4gICAgICAgIGlmICh0aGlzLmdldFRhc2tOZWVkQ291bnRMaXN0KClbdCAtIDFdID49IGUpIHtcbiAgICAgICAgICAgIGlmICgwICE9IHRoaXMudGFza0xpc3RbdCAtIDFdLnN0YXRlKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnRhc2tMaXN0W3QgLSAxXS5zdGF0ZSA9IDEsXG4gICAgICAgICAgICBpLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5zZXRUYXNrTGlzdCh0aGlzLnRhc2tMaXN0W3QgLSAxXSlcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdFxufSAoKTtcbm8uZGVmYXVsdCA9IHIiXX0=