
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/NodeEquip.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5192d4NeC1IqrhQloAh2fVX', 'NodeEquip');
// scripts/NodeEquip.js

"use strict";

var t = require;
var e = module;
var o = exports;

var _a,
    i = void 0 && (void 0).__extends || (_a = function a(t, e) {
  return (_a = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (t, e) {
    t.__proto__ = e;
  } || function (t, e) {
    for (var o in e) {
      Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
    }
  })(t, e);
}, function (t, e) {
  function o() {
    this.constructor = t;
  }

  _a(t, e), t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o());
}),
    r = void 0 && (void 0).__decorate || function (t, e, o, a) {
  var i,
      r = arguments.length,
      n = r < 3 ? e : null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);else for (var s = t.length - 1; s >= 0; s--) {
    (i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);
  }
  return r > 3 && n && Object.defineProperty(e, o, n), n;
};

Object.defineProperty(o, "__esModule", {
  value: !0
});

var n = t("EventMgr"),
    s = t("UIMgr"),
    c = t("Utils"),
    l = t("Config"),
    u = t("EquipMgr"),
    p = t("PlayerMgr"),
    g = cc._decorator,
    d = g.ccclass,
    h = g.property,
    f = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    return e.LabStrengthenLv = null, e.uiView = l.UIID.UIEquip, e.curBagIndex = 1, e.equipData = null, e;
  }

  return i(e, t), e.prototype.start = function () {}, e.prototype.registerEvent = function () {
    n.EventMgr.getInstance().on(l.EventName.RefreshStrengthenLv, this, this.strengthenEquip);
  }, e.prototype.strengthenEquip = function (t) {
    this.equipData && t && t.id == this.equipData.id && t.type == this.equipData.type && t.IDCard == this.equipData.IDCard && (this.equipData.strengthenLv = t.strengthenLv, this.refreshStrengthenLv());
  }, e.prototype.refreshStrengthenLv = function () {
    this.equipData.strengthenLv > 0 ? (this.LabStrengthenLv.node.active = !0, this.LabStrengthenLv.string = "+" + this.equipData.strengthenLv) : this.LabStrengthenLv.node.active = !1;
  }, e.prototype.registerBtnEvent = function () {
    var t = this;
    this.node.on(cc.Node.EventType.TOUCH_END, function () {
      if (console.log("当前点击坑位：", t.curBagIndex), !(p.PlayerMgr.getInstance().geUserData().getBagIndexCount() < t.curBagIndex + 1)) {
        var e = u["default"].getInstance().getWearEquipData(t.equipData.type),
            o = c.Utils.posTransform(t.node.parent, t.node.getPosition(), s.UIMgr.getInstance().getUIRoot(t.uiView)),
            a = p.PlayerMgr.getInstance().getAbType(),
            i = "D" == a || "B" == a ? l.UIID.UIEquipInfoNew : l.UIID.UIEquipInfo;
        s.UIMgr.getInstance().openUI(i, -1, e, t.equipData, o, u.EnumEquipInfo.EnumSell, t.curBagIndex);
      }
    });
  }, e.prototype.initData = function (t, e, o) {
    this.curBagIndex = t, this.equipData = e, this.uiView = o, this.registerEvent(), this.registerBtnEvent(), this.refreshStrengthenRedDot();
  }, e.prototype.refresData = function (t, e) {
    this.curBagIndex = t, this.equipData = e;
  }, e.prototype.refreshStrengthenRedDot = function () {
    if ("D" == p.PlayerMgr.getInstance().getAbType()) {
      for (var t = !1, e = u["default"].getInstance().getOwmedEquipForEquipType(this.equipData.type), o = 0; o < e.length; o++) {
        if (e[o].IDCard != this.equipData.IDCard && e[o].id == this.equipData.id && e[o].type == this.equipData.type && e[o].starLevel == this.equipData.starLevel) {
          t = !0;
          break;
        }
      }

      this.node.getChildByName("SpRedDot").active = t;
    }
  }, e.prototype.onDestroy = function () {
    n.EventMgr.getInstance().off(l.EventName.RefreshStrengthenLv, this, this.strengthenEquip);
  }, r([h(cc.Label)], e.prototype, "LabStrengthenLv", void 0), r([d], e);
}(cc.Component);

o["default"] = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcTm9kZUVxdWlwLmpzIl0sIm5hbWVzIjpbInQiLCJyZXF1aXJlIiwiZSIsIm1vZHVsZSIsIm8iLCJleHBvcnRzIiwiYSIsImkiLCJfX2V4dGVuZHMiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJyIiwiX19kZWNvcmF0ZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsIm4iLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJSZWZsZWN0IiwiZGVjb3JhdGUiLCJzIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsImMiLCJsIiwidSIsInAiLCJnIiwiY2MiLCJfZGVjb3JhdG9yIiwiZCIsImNjY2xhc3MiLCJoIiwicHJvcGVydHkiLCJmIiwiYXBwbHkiLCJMYWJTdHJlbmd0aGVuTHYiLCJ1aVZpZXciLCJVSUlEIiwiVUlFcXVpcCIsImN1ckJhZ0luZGV4IiwiZXF1aXBEYXRhIiwic3RhcnQiLCJyZWdpc3RlckV2ZW50IiwiRXZlbnRNZ3IiLCJnZXRJbnN0YW5jZSIsIm9uIiwiRXZlbnROYW1lIiwiUmVmcmVzaFN0cmVuZ3RoZW5MdiIsInN0cmVuZ3RoZW5FcXVpcCIsImlkIiwidHlwZSIsIklEQ2FyZCIsInN0cmVuZ3RoZW5MdiIsInJlZnJlc2hTdHJlbmd0aGVuTHYiLCJub2RlIiwiYWN0aXZlIiwic3RyaW5nIiwicmVnaXN0ZXJCdG5FdmVudCIsIk5vZGUiLCJFdmVudFR5cGUiLCJUT1VDSF9FTkQiLCJjb25zb2xlIiwibG9nIiwiUGxheWVyTWdyIiwiZ2VVc2VyRGF0YSIsImdldEJhZ0luZGV4Q291bnQiLCJnZXRXZWFyRXF1aXBEYXRhIiwiVXRpbHMiLCJwb3NUcmFuc2Zvcm0iLCJwYXJlbnQiLCJnZXRQb3NpdGlvbiIsIlVJTWdyIiwiZ2V0VUlSb290IiwiZ2V0QWJUeXBlIiwiVUlFcXVpcEluZm9OZXciLCJVSUVxdWlwSW5mbyIsIm9wZW5VSSIsIkVudW1FcXVpcEluZm8iLCJFbnVtU2VsbCIsImluaXREYXRhIiwicmVmcmVzaFN0cmVuZ3RoZW5SZWREb3QiLCJyZWZyZXNEYXRhIiwiZ2V0T3dtZWRFcXVpcEZvckVxdWlwVHlwZSIsInN0YXJMZXZlbCIsImdldENoaWxkQnlOYW1lIiwib25EZXN0cm95Iiwib2ZmIiwiTGFiZWwiLCJDb21wb25lbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBQyxHQUFHQyxPQUFSO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHQyxNQUFSO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHQyxPQUFSOztBQUNBLElBQUlDLEVBQUo7QUFBQSxJQUFPQyxDQUFDLEdBQUcsVUFBUSxTQUFLQyxTQUFiLEtBQTJCRixFQUFDLEdBQUcsV0FBU04sQ0FBVCxFQUFZRSxDQUFaLEVBQWU7RUFDckQsT0FBTyxDQUFDSSxFQUFDLEdBQUdHLE1BQU0sQ0FBQ0MsY0FBUCxJQUF5QjtJQUNqQ0MsU0FBUyxFQUFFO0VBRHNCLGFBRzFCQyxLQUgwQixJQUlyQyxVQUFTWixDQUFULEVBQVlFLENBQVosRUFBZTtJQUNYRixDQUFDLENBQUNXLFNBQUYsR0FBY1QsQ0FBZDtFQUNILENBTlcsSUFPWixVQUFTRixDQUFULEVBQVlFLENBQVosRUFBZTtJQUNYLEtBQUssSUFBSUUsQ0FBVCxJQUFjRixDQUFkO01BQWlCTyxNQUFNLENBQUNJLFNBQVAsQ0FBaUJDLGNBQWpCLENBQWdDQyxJQUFoQyxDQUFxQ2IsQ0FBckMsRUFBd0NFLENBQXhDLE1BQStDSixDQUFDLENBQUNJLENBQUQsQ0FBRCxHQUFPRixDQUFDLENBQUNFLENBQUQsQ0FBdkQ7SUFBakI7RUFDSCxDQVRNLEVBU0pKLENBVEksRUFTREUsQ0FUQyxDQUFQO0FBVUgsQ0FYcUMsRUFZdEMsVUFBU0YsQ0FBVCxFQUFZRSxDQUFaLEVBQWU7RUFDWCxTQUFTRSxDQUFULEdBQWE7SUFDVCxLQUFLWSxXQUFMLEdB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QUFELENBQUQsRUFBTWxDLENBQU4sQ0FsREQ7QUFtREgsQ0E1REcsQ0E0RERnQyxFQUFFLENBQUM2RCxTQTVERixDQVRKOztBQXNFQTNGLENBQUMsV0FBRCxHQUFZb0MsQ0FBWiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHQgPSByZXF1aXJlO1xudmFyIGUgPSBtb2R1bGU7XG52YXIgbyA9IGV4cG9ydHM7XG52YXIgYSwgaSA9IHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMgfHwgKGEgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgcmV0dXJuIChhID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IHtcbiAgICAgICAgX19wcm90b19fOiBbXVxuICAgIH1cbiAgICBpbnN0YW5jZW9mIEFycmF5ICYmXG4gICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB0Ll9fcHJvdG9fXyA9IGVcbiAgICB9IHx8XG4gICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKHZhciBvIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBvKSAmJiAodFtvXSA9IGVbb10pXG4gICAgfSkodCwgZSlcbn0sXG5mdW5jdGlvbih0LCBlKSB7XG4gICAgZnVuY3Rpb24gbygpIHtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IHRcbiAgICB9XG4gICAgYSh0LCBlKSxcbiAgICB0LnByb3RvdHlwZSA9IG51bGwgPT09IGUgPyBPYmplY3QuY3JlYXRlKGUpIDogKG8ucHJvdG90eXBlID0gZS5wcm90b3R5cGUsIG5ldyBvKVxufSksXG5yID0gdGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUgfHxcbmZ1bmN0aW9uKHQsIGUsIG8sIGEpIHtcbiAgICB2YXIgaSwgciA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgbiA9IHIgPCAzID8gZTogbnVsbCA9PT0gYSA/IGEgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIG8pIDogYTtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgUmVmbGVjdCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpIG4gPSBSZWZsZWN0LmRlY29yYXRlKHQsIGUsIG8sIGEpO1xuICAgIGVsc2UgZm9yICh2YXIgcyA9IHQubGVuZ3RoIC0gMTsgcyA+PSAwOyBzLS0pKGkgPSB0W3NdKSAmJiAobiA9IChyIDwgMyA/IGkobikgOiByID4gMyA/IGkoZSwgbywgbikgOiBpKGUsIG8pKSB8fCBuKTtcbiAgICByZXR1cm4gciA+IDMgJiYgbiAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgbywgbiksXG4gICAgblxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiAhMFxufSk7XG52YXIgbiA9IHQoXCJFdmVudE1nclwiKSxcbnMgPSB0KFwiVUlNZ3JcIiksXG5jID0gdChcIlV0aWxzXCIpLFxubCA9IHQoXCJDb25maWdcIiksXG51ID0gdChcIkVxdWlwTWdyXCIpLFxucCA9IHQoXCJQbGF5ZXJNZ3JcIiksXG5nID0gY2MuX2RlY29yYXRvcixcbmQgPSBnLmNjY2xhc3MsXG5oID0gZy5wcm9wZXJ0eSxcbmYgPSBmdW5jdGlvbih0KSB7XG4gICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgdmFyIGUgPSBudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gZS5MYWJTdHJlbmd0aGVuTHYgPSBudWxsLFxuICAgICAgICBlLnVpVmlldyA9IGwuVUlJRC5VSUVxdWlwLFxuICAgICAgICBlLmN1ckJhZ0luZGV4ID0gMSxcbiAgICAgICAgZS5lcXVpcERhdGEgPSBudWxsLFxuICAgICAgICBlXG4gICAgfVxuICAgIHJldHVybiBpKGUsIHQpLFxuICAgIGUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24oKSB7fSxcbiAgICBlLnByb3RvdHlwZS5yZWdpc3RlckV2ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG4uRXZlbnRNZ3IuZ2V0SW5zdGFuY2UoKS5vbihsLkV2ZW50TmFtZS5SZWZyZXNoU3RyZW5ndGhlbkx2LCB0aGlzLCB0aGlzLnN0cmVuZ3RoZW5FcXVpcClcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnN0cmVuZ3RoZW5FcXVpcCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdGhpcy5lcXVpcERhdGEgJiYgdCAmJiB0LmlkID09IHRoaXMuZXF1aXBEYXRhLmlkICYmIHQudHlwZSA9PSB0aGlzLmVxdWlwRGF0YS50eXBlICYmIHQuSURDYXJkID09IHRoaXMuZXF1aXBEYXRhLklEQ2FyZCAmJiAodGhpcy5lcXVpcERhdGEuc3RyZW5ndGhlbkx2ID0gdC5zdHJlbmd0aGVuTHYsIHRoaXMucmVmcmVzaFN0cmVuZ3RoZW5MdigpKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUucmVmcmVzaFN0cmVuZ3RoZW5MdiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmVxdWlwRGF0YS5zdHJlbmd0aGVuTHYgPiAwID8gKHRoaXMuTGFiU3RyZW5ndGhlbkx2Lm5vZGUuYWN0aXZlID0gITAsIHRoaXMuTGFiU3RyZW5ndGhlbkx2LnN0cmluZyA9IFwiK1wiICsgdGhpcy5lcXVpcERhdGEuc3RyZW5ndGhlbkx2KSA6IHRoaXMuTGFiU3RyZW5ndGhlbkx2Lm5vZGUuYWN0aXZlID0gITFcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnJlZ2lzdGVyQnRuRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELFxuICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjb25zb2xlLmxvZyhcIuW9k+WJjeeCueWHu+WdkeS9je+8mlwiLCB0LmN1ckJhZ0luZGV4KSwgIShwLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5nZXRCYWdJbmRleENvdW50KCkgPCB0LmN1ckJhZ0luZGV4ICsgMSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IHUuZGVmYXVsdC5nZXRJbnN0YW5jZSgpLmdldFdlYXJFcXVpcERhdGEodC5lcXVpcERhdGEudHlwZSksXG4gICAgICAgICAgICAgICAgbyA9IGMuVXRpbHMucG9zVHJhbnNmb3JtKHQubm9kZS5wYXJlbnQsIHQubm9kZS5nZXRQb3NpdGlvbigpLCBzLlVJTWdyLmdldEluc3RhbmNlKCkuZ2V0VUlSb290KHQudWlWaWV3KSksXG4gICAgICAgICAgICAgICAgYSA9IHAuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2V0QWJUeXBlKCksXG4gICAgICAgICAgICAgICAgaSA9IFwiRFwiID09IGEgfHwgXCJCXCIgPT0gYSA/IGwuVUlJRC5VSUVxdWlwSW5mb05ldzogbC5VSUlELlVJRXF1aXBJbmZvO1xuICAgICAgICAgICAgICAgIHMuVUlNZ3IuZ2V0SW5zdGFuY2UoKS5vcGVuVUkoaSwgLTEsIGUsIHQuZXF1aXBEYXRhLCBvLCB1LkVudW1FcXVpcEluZm8uRW51bVNlbGwsIHQuY3VyQmFnSW5kZXgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5pbml0RGF0YSA9IGZ1bmN0aW9uKHQsIGUsIG8pIHtcbiAgICAgICAgdGhpcy5jdXJCYWdJbmRleCA9IHQsXG4gICAgICAgIHRoaXMuZXF1aXBEYXRhID0gZSxcbiAgICAgICAgdGhpcy51aVZpZXcgPSBvLFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoKSxcbiAgICAgICAgdGhpcy5yZWdpc3RlckJ0bkV2ZW50KCksXG4gICAgICAgIHRoaXMucmVmcmVzaFN0cmVuZ3RoZW5SZWREb3QoKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUucmVmcmVzRGF0YSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jdXJCYWdJbmRleCA9IHQsXG4gICAgICAgIHRoaXMuZXF1aXBEYXRhID0gZVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUucmVmcmVzaFN0cmVuZ3RoZW5SZWREb3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKFwiRFwiID09IHAuUGxheWVyTWdyLmdldEluc3RhbmNlKCkuZ2V0QWJUeXBlKCkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHQgPSAhMSxcbiAgICAgICAgICAgIGUgPSB1LmRlZmF1bHQuZ2V0SW5zdGFuY2UoKS5nZXRPd21lZEVxdWlwRm9yRXF1aXBUeXBlKHRoaXMuZXF1aXBEYXRhLnR5cGUpLCBvID0gMDsgbyA8IGUubGVuZ3RoOyBvKyspIGlmIChlW29dLklEQ2FyZCAhPSB0aGlzLmVxdWlwRGF0YS5JRENhcmQgJiYgZVtvXS5pZCA9PSB0aGlzLmVxdWlwRGF0YS5pZCAmJiBlW29dLnR5cGUgPT0gdGhpcy5lcXVpcERhdGEudHlwZSAmJiBlW29dLnN0YXJMZXZlbCA9PSB0aGlzLmVxdWlwRGF0YS5zdGFyTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICB0ID0gITA7XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcIlNwUmVkRG90XCIpLmFjdGl2ZSA9IHRcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUub25EZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG4uRXZlbnRNZ3IuZ2V0SW5zdGFuY2UoKS5vZmYobC5FdmVudE5hbWUuUmVmcmVzaFN0cmVuZ3RoZW5MdiwgdGhpcywgdGhpcy5zdHJlbmd0aGVuRXF1aXApXG4gICAgfSxcbiAgICByKFtoKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcIkxhYlN0cmVuZ3RoZW5MdlwiLCB2b2lkIDApLFxuICAgIHIoW2RdLCBlKVxufSAoY2MuQ29tcG9uZW50KTtcbm8uZGVmYXVsdCA9IGYiXX0=