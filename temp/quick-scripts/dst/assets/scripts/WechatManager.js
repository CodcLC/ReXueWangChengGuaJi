
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/WechatManager.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '19fbbH59GlI3pQ7lmXK5gwM', 'WechatManager');
// scripts/WechatManager.js

"use strict";

var t = require;
var e = module;
var o = exports;
Object.defineProperty(o, "__esModule", {
  value: !0
}), o.WechatManager = void 0;

var a = t("LogMgr"),
    i = function () {
  function t() {
    this.showAlert = !0, this.hasAd = !0, this.hasBanner = !0, this.hasInsertAd = !0, this.hasVideoAd = !0, this.BannerAd = null, this.BannerAdHight = 0, this.customAdMap = new Map(), this.sdkVersion = "", this.videoAd = null;
  }

  return t.prototype.hasVerify = function () {
    return !1;
  }, t.prototype.canCare = function () {
    return !1;
  }, t.prototype.canShowwBtnMore = function () {
    return !1;
  }, t.prototype.showBlockAd = function (t) {
    console.log("--------showBlock-------");
    var e = this.customAdMap.get(t);
    (e = 1 === t ? this.customAdMap.get(1) : this.customAdMap.get(2)) && e.show();
  }, t.prototype.hideBlockAd = function (t) {
    var e = this.customAdMap.get(t);
    (e = 1 === t ? this.customAdMap.get(1) : this.customAdMap.get(2)) && e.hide();
  }, t.prototype.showFloatIconAd = function () {}, t.prototype.hideFloatIconAd = function () {}, t.prototype.addShortcut = function () {}, t.prototype.checkShortcut = function () {}, t.prototype.shareImg = function () {}, t.prototype.getUserInfo = function (t) {
    t && t(null, null);
  }, t.prototype.initNativeAd = function () {}, t.prototype.showNativeAd = function () {}, t.prototype.showGamePortalAd = function () {
    a.LogMgr.getInstance().debug("更多游戏");
  }, t.prototype.initTrack = function () {}, t.prototype.youmengTrack = function (t, e, o) {
    wx.uma && (e && o ? "userA" == e ? wx.uma.trackEvent(t, {
      userA: o
    }) : "userB" == e ? wx.uma.trackEvent(t, {
      userB: o
    }) : "userD" == e ? wx.uma.trackEvent(t, {
      userD: o
    }) : wx.uma.trackEvent(t, {
      userC: o
    }) : wx.uma.trackEvent(t));
  }, t.prototype.canShare = function () {
    return !0;
  }, t.prototype.initSdk = function () {
    var t = this,
        e = wx.getSystemInfoSync();
    this.sdkVersion = e.SDKVersion;
    var o = e.screenWidth,
        a = e.screenHeight;
    this.compareVersion(this.sdkVersion, "1.1.0") >= 0 && (wx.showShareMenu({
      withShareTicket: !0,
      menus: ["shareAppMessage", "shareTimeline"]
    }), wx.onShareAppMessage(function () {
      var t = Math.floor(2 * Math.random());
      return {
        title: ["我这套装备，一刀999！", "局内掉落一把屠龙刀，1分钟后消失！", "真的打不过了，帮帮我！"][Math.floor(3 * Math.random())],
        imageUrl: "https://game.sfplay.net/knife/wechat/" + ["1.jpeg", "2.jpeg"][t]
      };
    })), this.compareVersion(this.sdkVersion, "2.0.4") >= 0 && (this.videoAd = wx.createRewardedVideoAd({
      adUnitId: "adunit-61681feb644afbc6"
    }), this.videoAd.onError(function (t) {
      console.log(t);
    })), this.compareVersion(this.sdkVersion, "2.0.4") >= 0 && (this.BannerAd = wx.createBannerAd({
      adUnitId: "adunit-d208baeb29ec3299",
      adIntervals: 30,
      style: {
        left: 0,
        top: 0,
        width: 320
      }
    }), this.BannerAd.onResize(function (e) {
      t.BannerAdHight = e.height, t.BannerAd.style.top = a - t.BannerAdHight, t.BannerAd.style.left = (o - 320) / 2;
    }), this.BannerAd.onError(function () {}), this.BannerAd.onLoad(function () {}));
    var i = wx.createCustomAd({
      adUnitId: "adunit-e15fc561db927d89",
      style: {
        left: 5,
        top: a / 3
      }
    }),
        r = wx.createCustomAd({
      adUnitId: "adunit-a90247322a12da9b",
      style: {
        left: o / 2 - 150,
        top: a - 100,
        fixed: !0
      }
    });
    this.customAdMap.set(2, i), this.customAdMap.set(1, r);
  }, t.prototype.login = function (t, e) {
    e && e();
  }, t.prototype.showWxNativeAD = function (t) {
    var e = this.customAdMap.get(t);
    e && e.show();
  }, t.prototype.hideWxNativeAD = function (t) {
    var e = this.customAdMap.get(t);
    e && e.hide();
  }, t.prototype.pay = function (t, e) {
    e && e();
  }, t.prototype.share = function (t, e) {
    var o = Math.floor(3 * Math.random());
    wx.shareAppMessage({
      title: ["帮我看看哪个字错了？", "你是逃不过我的眼睛的！", "帮我看看哪一只不是企鹅"][o],
      desc: "",
      imageUrl: "https://game2.sfplay.net/werid_assets/wechat/shareIcon/" + ["1.jpeg", "2.jpeg", "3.jpeg"][o],
      query: "",
      success: function success() {},
      fail: function fail() {}
    }), setTimeout(function () {
      e && e();
    }, 3500);
  }, t.prototype.showBanner = function (t, e) {
    null != this.BannerAd && (this.BannerAd.show().then(function () {})["catch"](function () {}), e && e());
  }, t.prototype.hideBanner = function () {
    null != this.BannerAd && this.BannerAd.hide();
  }, t.prototype.showInsertAd = function (t, e) {
    if (this.compareVersion(this.sdkVersion, "2.6.0") >= 0) {
      var o = wx.createInterstitialAd({
        adUnitId: "adunit-d208baeb29ec3299"
      });
      o.onLoad(function () {
        o.show().then(function () {
          console.log("插屏广告展示完成"), e && e();
        })["catch"](function (t) {
          console.log("插屏广告展示失败", JSON.stringify(t));
        });
      });

      var a = function a() {
        o.offClose(a), o.destroy();
      };

      o.onClose(a), o.onError(function (t) {
        console.log("插屏广告加载失败", t), o.offError();
      }), o.onLoad(function (t) {
        console.log("插屏广告onLoad失败", t), o.offLoad();
      });
    }
  }, t.prototype.showVideoAd = function (t, e, o) {
    var a = this.videoAd;
    a.show().then()["catch"](function (t) {
      console.log(t.errMsg), a.load().then(function () {
        return a.show();
      });
    });

    var i = function i(t) {
      t && t.isEnded || void 0 === t ? e && e() : o && o(), a.load(), a.offClose(i);
    };

    a.onClose(i);
  }, t.prototype.otherFun = function (t, e) {
    e && e();
  }, t.prototype.shark = function (t, e) {
    e && e();
  }, t.prototype.recordVideo = function (t, e) {
    e && e();
  }, t.prototype.shareVideo = function (t, e) {
    e && e();
  }, t.prototype.stopRecorderManager = function (t, e) {
    e && e("test.png");
  }, t.prototype.setLanguage = function (t, e) {
    return e && e(), "zh";
  }, t.prototype.compareVersion = function (t, e) {
    t = t.split("."), e = e.split(".");

    for (var o = Math.max(t.length, e.length); t.length < o;) {
      t.push("0");
    }

    for (; e.length < o;) {
      e.push("0");
    }

    for (var a = 0; a < o; a++) {
      var i = parseInt(t[a]),
          r = parseInt(e[a]);
      if (i > r) return 1;
      if (i < r) return -1;
    }

    return 0;
  }, t;
}();

o.WechatManager = i;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcV2VjaGF0TWFuYWdlci5qcyJdLCJuYW1lcyI6WyJ0IiwicmVxdWlyZSIsImUiLCJtb2R1bGUiLCJvIiwiZXhwb3J0cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJXZWNoYXRNYW5hZ2VyIiwiYSIsImkiLCJzaG93QWxlcnQiLCJoYXNBZCIsImhhc0Jhbm5lciIsImhhc0luc2VydEFkIiwiaGFzVmlkZW9BZCIsIkJhbm5lckFkIiwiQmFubmVyQWRIaWdodCIsImN1c3RvbUFkTWFwIiwiTWFwIiwic2RrVmVyc2lvbiIsInZpZGVvQWQiLCJwcm90b3R5cGUiLCJoYXNWZXJpZnkiLCJjYW5DYXJlIiwiY2FuU2hvd3dCdG5Nb3JlIiwic2hvd0Jsb2NrQWQiLCJjb25zb2xlIiwibG9nIiwiZ2V0Iiwic2hvdyIsImhpZGVCbG9ja0FkIiwiaGlkZSIsInNob3dGbG9hdEljb25BZCIsImhpZGVGbG9hdEljb25BZCIsImFkZFNob3J0Y3V0IiwiY2hlY2tTaG9ydGN1dCIsInNoYXJlSW1nIiwiZ2V0VXNlckluZm8iLCJpbml0TmF0aXZlQWQiLCJzaG93TmF0aXZlQWQiLCJzaG93R2FtZVBvcnRhbEFkIiwiTG9nTWdyIiwiZ2V0SW5zdGFuY2UiLCJkZWJ1ZyIsImluaXRUcmFjayIsInlvdW1lbmdUcmFjayIsInd4IiwidW1hIiwidHJhY2tFdmVudCIsInVzZXJBIiwidXNlckIiLCJ1c2VyRCIsInVzZXJDIiwiY2FuU2hhcmUiLCJpbml0U2RrIiwiZ2V0U3lzdGVtSW5mb1N5bmMiLCJTREtWZXJzaW9uIiwic2NyZWVuV2lkdGgiLCJzY3JlZW5IZWlnaHQiLCJjb21wYXJlVmVyc2lvbiIsInNob3dTaGFyZU1lbnUiLCJ3aXRoU2hhcmVUaWNrZXQiLCJtZW51cyIsIm9uU2hhcmVBcHBNZXNzYWdlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidGl0bGUiLCJpbWFnZVVybCIsImNyZWF0ZVJld2FyZGVkVmlkZW9BZCIsImFkVW5pdElkIiwib25FcnJvciIsImNyZWF0ZUJhbm5lckFkIiwiYWRJbnRlcnZhbHMiLCJzdHlsZSIsImxlZnQiLCJ0b3AiLCJ3aWR0aCIsIm9uUmVzaXplIiwiaGVpZ2h0Iiwib25Mb2FkIiwiY3JlYXRlQ3VzdG9tQWQiLCJyIiwiZml4ZWQiLCJzZXQiLCJsb2dpbiIsInNob3dXeE5hdGl2ZUFEIiwiaGlkZVd4TmF0aXZlQUQiLCJwYXkiLCJzaGFyZSIsInNoYXJlQXBwTWVzc2FnZSIsImRlc2MiLCJxdWVyeSIsInN1Y2Nlc3MiLCJmYWlsIiwic2V0VGltZW91dCIsInNob3dCYW5uZXIiLCJ0aGVuIiwiaGlkZUJhbm5lciIsInNob3dJbnNlcnRBZCIsImNyZWF0ZUludGVyc3RpdGlhbEFkIiwiSlNPTiIsInN0cmluZ2lmeSIsIm9mZkNsb3NlIiwiZGVzdHJveSIsIm9uQ2xvc2UiLCJvZmZFcnJvciIsIm9mZkxvYWQiLCJzaG93VmlkZW9BZCIsImVyck1zZyIsImxvYWQiLCJpc0VuZGVkIiwib3RoZXJGdW4iLCJzaGFyayIsInJlY29yZFZpZGVvIiwic2hhcmVWaWRlbyIsInN0b3BSZWNvcmRlck1hbmFnZXIiLCJzZXRMYW5ndWFnZSIsInNwbGl0IiwibWF4IiwibGVuZ3RoIiwicHVzaCIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUMsR0FBR0MsT0FBUjtBQUNBLElBQUlDLENBQUMsR0FBR0MsTUFBUjtBQUNBLElBQUlDLENBQUMsR0FBR0MsT0FBUjtBQUNBQyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JILENBQXRCLEVBQXlCLFlBQXpCLEVBQXVDO0VBQ25DSSxLQUFLLEVBQUUsQ0FBQztBQUQyQixDQUF2QyxHQUdBSixDQUFDLENBQUNLLGFBQUYsR0FBa0IsS0FBSyxDQUh2Qjs7QUFJQSxJQUFJQyxDQUFDLEdBQUdWLENBQUMsQ0FBQyxRQUFELENBQVQ7QUFBQSxJQUNBVyxDQUFDLEdBQUcsWUFBVztFQUNYLFNBQVNYLENBQVQsR0FBYTtJQUNULEtB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Q0FBRCxDQUFGLENBRFo7TUFFQSxJQUFJQyxDQUFDLEdBQUd5RSxDQUFSLEVBQVcsT0FBTyxDQUFQO01BQ1gsSUFBSXpFLENBQUMsR0FBR3lFLENBQVIsRUFBVyxPQUFPLENBQUUsQ0FBVDtJQUNkOztJQUNELE9BQU8sQ0FBUDtFQUNILENBaE5NLEVBaU5QcEYsQ0FqTkE7QUFrTkgsQ0EvTkcsRUFESjs7QUFpT0FJLENBQUMsQ0FBQ0ssYUFBRixHQUFrQkUsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0ID0gcmVxdWlyZTtcbnZhciBlID0gbW9kdWxlO1xudmFyIG8gPSBleHBvcnRzO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6ICEwXG59KSxcbm8uV2VjaGF0TWFuYWdlciA9IHZvaWQgMDtcbnZhciBhID0gdChcIkxvZ01nclwiKSxcbmkgPSBmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICB0aGlzLnNob3dBbGVydCA9ICEwLFxuICAgICAgICB0aGlzLmhhc0FkID0gITAsXG4gICAgICAgIHRoaXMuaGFzQmFubmVyID0gITAsXG4gICAgICAgIHRoaXMuaGFzSW5zZXJ0QWQgPSAhMCxcbiAgICAgICAgdGhpcy5oYXNWaWRlb0FkID0gITAsXG4gICAgICAgIHRoaXMuQmFubmVyQWQgPSBudWxsLFxuICAgICAgICB0aGlzLkJhbm5lckFkSGlnaHQgPSAwLFxuICAgICAgICB0aGlzLmN1c3RvbUFkTWFwID0gbmV3IE1hcCxcbiAgICAgICAgdGhpcy5zZGtWZXJzaW9uID0gXCJcIixcbiAgICAgICAgdGhpcy52aWRlb0FkID0gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gdC5wcm90b3R5cGUuaGFzVmVyaWZ5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhIDFcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLmNhbkNhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEgMVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuY2FuU2hvd3dCdG5Nb3JlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhIDFcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLnNob3dCbG9ja0FkID0gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tc2hvd0Jsb2NrLS0tLS0tLVwiKTtcbiAgICAgICAgdmFyIGUgPSB0aGlzLmN1c3RvbUFkTWFwLmdldCh0KTsgKGUgPSAxID09PSB0ID8gdGhpcy5jdXN0b21BZE1hcC5nZXQoMSkgOiB0aGlzLmN1c3RvbUFkTWFwLmdldCgyKSkgJiYgZS5zaG93KClcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLmhpZGVCbG9ja0FkID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgZSA9IHRoaXMuY3VzdG9tQWRNYXAuZ2V0KHQpOyAoZSA9IDEgPT09IHQgPyB0aGlzLmN1c3RvbUFkTWFwLmdldCgxKSA6IHRoaXMuY3VzdG9tQWRNYXAuZ2V0KDIpKSAmJiBlLmhpZGUoKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuc2hvd0Zsb2F0SWNvbkFkID0gZnVuY3Rpb24oKSB7fSxcbiAgICB0LnByb3RvdHlwZS5oaWRlRmxvYXRJY29uQWQgPSBmdW5jdGlvbigpIHt9LFxuICAgIHQucHJvdG90eXBlLmFkZFNob3J0Y3V0ID0gZnVuY3Rpb24oKSB7fSxcbiAgICB0LnByb3RvdHlwZS5jaGVja1Nob3J0Y3V0ID0gZnVuY3Rpb24oKSB7fSxcbiAgICB0LnByb3RvdHlwZS5zaGFyZUltZyA9IGZ1bmN0aW9uKCkge30sXG4gICAgdC5wcm90b3R5cGUuZ2V0VXNlckluZm8gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHQgJiYgdChudWxsLCBudWxsKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuaW5pdE5hdGl2ZUFkID0gZnVuY3Rpb24oKSB7fSxcbiAgICB0LnByb3RvdHlwZS5zaG93TmF0aXZlQWQgPSBmdW5jdGlvbigpIHt9LFxuICAgIHQucHJvdG90eXBlLnNob3dHYW1lUG9ydGFsQWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgYS5Mb2dNZ3IuZ2V0SW5zdGFuY2UoKS5kZWJ1ZyhcIuabtOWkmua4uOaIj1wiKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuaW5pdFRyYWNrID0gZnVuY3Rpb24oKSB7fSxcbiAgICB0LnByb3RvdHlwZS55b3VtZW5nVHJhY2sgPSBmdW5jdGlvbih0LCBlLCBvKSB7XG4gICAgICAgIHd4LnVtYSAmJiAoZSAmJiBvID8gXCJ1c2VyQVwiID09IGUgPyB3eC51bWEudHJhY2tFdmVudCh0LCB7XG4gICAgICAgICAgICB1c2VyQTogb1xuICAgICAgICB9KSA6IFwidXNlckJcIiA9PSBlID8gd3gudW1hLnRyYWNrRXZlbnQodCwge1xuICAgICAgICAgICAgdXNlckI6IG9cbiAgICAgICAgfSkgOiBcInVzZXJEXCIgPT0gZSA/IHd4LnVtYS50cmFja0V2ZW50KHQsIHtcbiAgICAgICAgICAgIHVzZXJEOiBvXG4gICAgICAgIH0pIDogd3gudW1hLnRyYWNrRXZlbnQodCwge1xuICAgICAgICAgICAgdXNlckM6IG9cbiAgICAgICAgfSkgOiB3eC51bWEudHJhY2tFdmVudCh0KSlcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLmNhblNoYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhIDBcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLmluaXRTZGsgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzLFxuICAgICAgICBlID0gd3guZ2V0U3lzdGVtSW5mb1N5bmMoKTtcbiAgICAgICAgdGhpcy5zZGtWZXJzaW9uID0gZS5TREtWZXJzaW9uO1xuICAgICAgICB2YXIgbyA9IGUuc2NyZWVuV2lkdGgsXG4gICAgICAgIGEgPSBlLnNjcmVlbkhlaWdodDtcbiAgICAgICAgdGhpcy5jb21wYXJlVmVyc2lvbih0aGlzLnNka1ZlcnNpb24sIFwiMS4xLjBcIikgPj0gMCAmJiAod3guc2hvd1NoYXJlTWVudSh7XG4gICAgICAgICAgICB3aXRoU2hhcmVUaWNrZXQ6ICEwLFxuICAgICAgICAgICAgbWVudXM6IFtcInNoYXJlQXBwTWVzc2FnZVwiLCBcInNoYXJlVGltZWxpbmVcIl1cbiAgICAgICAgfSksIHd4Lm9uU2hhcmVBcHBNZXNzYWdlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHQgPSBNYXRoLmZsb29yKDIgKiBNYXRoLnJhbmRvbSgpKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFtcIuaIkei/meWll+ijheWkh++8jOS4gOWIgDk5Oe+8gVwiLCBcIuWxgOWGheaOieiQveS4gOaKiuWxoOm+meWIgO+8jDHliIbpkp/lkI7mtojlpLHvvIFcIiwgXCLnnJ/nmoTmiZPkuI3ov4fkuobvvIzluK7luK7miJHvvIFcIl1bTWF0aC5mbG9vcigzICogTWF0aC5yYW5kb20oKSldLFxuICAgICAgICAgICAgICAgIGltYWdlVXJsOiBcImh0dHBzOi8vZ2FtZS5zZnBsYXkubmV0L2tuaWZlL3dlY2hhdC9cIiArIFtcIjEuanBlZ1wiLCBcIjIuanBlZ1wiXVt0XVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSksXG4gICAgICAgIHRoaXMuY29tcGFyZVZlcnNpb24odGhpcy5zZGtWZXJzaW9uLCBcIjIuMC40XCIpID49IDAgJiYgKHRoaXMudmlkZW9BZCA9IHd4LmNyZWF0ZVJld2FyZGVkVmlkZW9BZCh7XG4gICAgICAgICAgICBhZFVuaXRJZDogXCJhZHVuaXQtNjE2ODFmZWI2NDRhZmJjNlwiXG4gICAgICAgIH0pLCB0aGlzLnZpZGVvQWQub25FcnJvcihmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0KVxuICAgICAgICB9KSksXG4gICAgICAgIHRoaXMuY29tcGFyZVZlcnNpb24odGhpcy5zZGtWZXJzaW9uLCBcIjIuMC40XCIpID49IDAgJiYgKHRoaXMuQmFubmVyQWQgPSB3eC5jcmVhdGVCYW5uZXJBZCh7XG4gICAgICAgICAgICBhZFVuaXRJZDogXCJhZHVuaXQtZDIwOGJhZWIyOWVjMzI5OVwiLFxuICAgICAgICAgICAgYWRJbnRlcnZhbHM6IDMwLFxuICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICB3aWR0aDogMzIwXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCB0aGlzLkJhbm5lckFkLm9uUmVzaXplKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHQuQmFubmVyQWRIaWdodCA9IGUuaGVpZ2h0LFxuICAgICAgICAgICAgdC5CYW5uZXJBZC5zdHlsZS50b3AgPSBhIC0gdC5CYW5uZXJBZEhpZ2h0LFxuICAgICAgICAgICAgdC5CYW5uZXJBZC5zdHlsZS5sZWZ0ID0gKG8gLSAzMjApIC8gMlxuICAgICAgICB9KSwgdGhpcy5CYW5uZXJBZC5vbkVycm9yKGZ1bmN0aW9uKCkge30pLCB0aGlzLkJhbm5lckFkLm9uTG9hZChmdW5jdGlvbigpIHt9KSk7XG4gICAgICAgIHZhciBpID0gd3guY3JlYXRlQ3VzdG9tQWQoe1xuICAgICAgICAgICAgYWRVbml0SWQ6IFwiYWR1bml0LWUxNWZjNTYxZGI5MjdkODlcIixcbiAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgbGVmdDogNSxcbiAgICAgICAgICAgICAgICB0b3A6IGEgLyAzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICByID0gd3guY3JlYXRlQ3VzdG9tQWQoe1xuICAgICAgICAgICAgYWRVbml0SWQ6IFwiYWR1bml0LWE5MDI0NzMyMmExMmRhOWJcIixcbiAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgbGVmdDogbyAvIDIgLSAxNTAsXG4gICAgICAgICAgICAgICAgdG9wOiBhIC0gMTAwLFxuICAgICAgICAgICAgICAgIGZpeGVkOiAhMFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jdXN0b21BZE1hcC5zZXQoMiwgaSksXG4gICAgICAgIHRoaXMuY3VzdG9tQWRNYXAuc2V0KDEsIHIpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5sb2dpbiA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZSAmJiBlKClcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLnNob3dXeE5hdGl2ZUFEID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgZSA9IHRoaXMuY3VzdG9tQWRNYXAuZ2V0KHQpO1xuICAgICAgICBlICYmIGUuc2hvdygpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5oaWRlV3hOYXRpdmVBRCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzLmN1c3RvbUFkTWFwLmdldCh0KTtcbiAgICAgICAgZSAmJiBlLmhpZGUoKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUucGF5ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBlICYmIGUoKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuc2hhcmUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHZhciBvID0gTWF0aC5mbG9vcigzICogTWF0aC5yYW5kb20oKSk7XG4gICAgICAgIHd4LnNoYXJlQXBwTWVzc2FnZSh7XG4gICAgICAgICAgICB0aXRsZTogW1wi5biu5oiR55yL55yL5ZOq5Liq5a2X6ZSZ5LqG77yfXCIsIFwi5L2g5piv6YCD5LiN6L+H5oiR55qE55y8552b55qE77yBXCIsIFwi5biu5oiR55yL55yL5ZOq5LiA5Y+q5LiN5piv5LyB6bmFXCJdW29dLFxuICAgICAgICAgICAgZGVzYzogXCJcIixcbiAgICAgICAgICAgIGltYWdlVXJsOiBcImh0dHBzOi8vZ2FtZTIuc2ZwbGF5Lm5ldC93ZXJpZF9hc3NldHMvd2VjaGF0L3NoYXJlSWNvbi9cIiArIFtcIjEuanBlZ1wiLCBcIjIuanBlZ1wiLCBcIjMuanBlZ1wiXVtvXSxcbiAgICAgICAgICAgIHF1ZXJ5OiBcIlwiLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgfSksXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBlICYmIGUoKVxuICAgICAgICB9LFxuICAgICAgICAzNTAwKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuc2hvd0Jhbm5lciA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgbnVsbCAhPSB0aGlzLkJhbm5lckFkICYmICh0aGlzLkJhbm5lckFkLnNob3coKS50aGVuKGZ1bmN0aW9uKCkge30pLlxuICAgICAgICBjYXRjaChmdW5jdGlvbigpIHt9KSwgZSAmJiBlKCkpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5oaWRlQmFubmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG51bGwgIT0gdGhpcy5CYW5uZXJBZCAmJiB0aGlzLkJhbm5lckFkLmhpZGUoKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuc2hvd0luc2VydEFkID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAodGhpcy5jb21wYXJlVmVyc2lvbih0aGlzLnNka1ZlcnNpb24sIFwiMi42LjBcIikgPj0gMCkge1xuICAgICAgICAgICAgdmFyIG8gPSB3eC5jcmVhdGVJbnRlcnN0aXRpYWxBZCh7XG4gICAgICAgICAgICAgICAgYWRVbml0SWQ6IFwiYWR1bml0LWQyMDhiYWViMjllYzMyOTlcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvLm9uTG9hZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBvLnNob3coKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaPkuWxj+W5v+WRiuWxleekuuWujOaIkFwiKSxcbiAgICAgICAgICAgICAgICAgICAgZSAmJiBlKClcbiAgICAgICAgICAgICAgICB9KS5cbiAgICAgICAgICAgICAgICBjYXRjaChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5o+S5bGP5bm/5ZGK5bGV56S65aSx6LSlXCIsIEpTT04uc3RyaW5naWZ5KHQpKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgby5vZmZDbG9zZShhKSxcbiAgICAgICAgICAgICAgICBvLmRlc3Ryb3koKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG8ub25DbG9zZShhKSxcbiAgICAgICAgICAgIG8ub25FcnJvcihmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmj5LlsY/lub/lkYrliqDovb3lpLHotKVcIiwgdCksXG4gICAgICAgICAgICAgICAgby5vZmZFcnJvcigpXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG8ub25Mb2FkKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaPkuWxj+W5v+WRim9uTG9hZOWksei0pVwiLCB0KSxcbiAgICAgICAgICAgICAgICBvLm9mZkxvYWQoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuc2hvd1ZpZGVvQWQgPSBmdW5jdGlvbih0LCBlLCBvKSB7XG4gICAgICAgIHZhciBhID0gdGhpcy52aWRlb0FkO1xuICAgICAgICBhLnNob3coKS50aGVuKCkuXG4gICAgICAgIGNhdGNoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHQuZXJyTXNnKSxcbiAgICAgICAgICAgIGEubG9hZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEuc2hvdygpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGkgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0ICYmIHQuaXNFbmRlZCB8fCB2b2lkIDAgPT09IHQgPyBlICYmIGUoKSA6IG8gJiYgbygpLFxuICAgICAgICAgICAgYS5sb2FkKCksXG4gICAgICAgICAgICBhLm9mZkNsb3NlKGkpXG4gICAgICAgIH07XG4gICAgICAgIGEub25DbG9zZShpKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUub3RoZXJGdW4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGUgJiYgZSgpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5zaGFyayA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZSAmJiBlKClcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLnJlY29yZFZpZGVvID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBlICYmIGUoKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuc2hhcmVWaWRlbyA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZSAmJiBlKClcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLnN0b3BSZWNvcmRlck1hbmFnZXIgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGUgJiYgZShcInRlc3QucG5nXCIpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5zZXRMYW5ndWFnZSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGUgJiYgZSgpLFxuICAgICAgICBcInpoXCJcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLmNvbXBhcmVWZXJzaW9uID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB0ID0gdC5zcGxpdChcIi5cIiksXG4gICAgICAgIGUgPSBlLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgZm9yICh2YXIgbyA9IE1hdGgubWF4KHQubGVuZ3RoLCBlLmxlbmd0aCk7IHQubGVuZ3RoIDwgbzspIHQucHVzaChcIjBcIik7XG4gICAgICAgIGZvciAoOyBlLmxlbmd0aCA8IG87KSBlLnB1c2goXCIwXCIpO1xuICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IG87IGErKykge1xuICAgICAgICAgICAgdmFyIGkgPSBwYXJzZUludCh0W2FdKSxcbiAgICAgICAgICAgIHIgPSBwYXJzZUludChlW2FdKTtcbiAgICAgICAgICAgIGlmIChpID4gcikgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAoaSA8IHIpIHJldHVybiAtIDFcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMFxuICAgIH0sXG4gICAgdFxufSAoKTtcbm8uV2VjaGF0TWFuYWdlciA9IGkiXX0=