
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/MysticalShopData.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '18804saWkJDZrNx9dZ8J/by', 'MysticalShopData');
// scripts/MysticalShopData.js

"use strict";

var t = require;
var e = module;
var o = exports;

var _a,
    i = void 0 && (void 0).__extends || (_a = function a(t, e) {
  return (_a = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (t, e) {
    t.__proto__ = e;
  } || function (t, e) {
    for (var o in e) {
      Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
    }
  })(t, e);
}, function (t, e) {
  function o() {
    this.constructor = t;
  }

  _a(t, e), t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o());
});

Object.defineProperty(o, "__esModule", {
  value: !0
}), o.MysticalItemData = o.MysticalShopData = void 0;

var r = t("BaseData"),
    n = t("TimeUtils"),
    s = t("Config"),
    c = t("GameMgr"),
    l = function l() {
  this.lastLoginTime = 0, this.mysticalShopTime = 86400, this.mysticalShopList = [];
},
    u = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    return e.ecrypt = !1, e.gameKey = s.GameConfig.AppCacheName + "MysticalShopData", e.isNewUser = !1, e;
  }

  return i(e, t), e.prototype.createData = function () {
    return this.data = new l(), this.data;
  }, e.prototype.initData = function (t) {
    t && (this.isNewUser = !0);
  }, e.prototype.getIsNewUser = function () {
    return this.isNewUser;
  }, e.prototype.getLastLoginTime = function () {
    return null == this.data.lastLoginTime && (this.data.lastLoginTime = 0), this.data.lastLoginTime;
  }, e.prototype.refreshLastLoginTime = function () {
    var t = n.TimeUtils.GetTimeBySecond();
    this.data.lastLoginTime = t, this.saveData();
  }, e.prototype.getMysticalShopTime = function () {
    return null == this.data.mysticalShopTime && (this.data.mysticalShopTime = 86400), this.data.mysticalShopTime;
  }, e.prototype.subMysticalShopTime = function (t) {
    null == this.data.mysticalShopTime && (this.data.mysticalShopTime = 86400), t <= 0 || (this.data.mysticalShopTime -= t, this.data.mysticalShopTime <= 0 && c["default"].getInstance().refreshMysticalShopData(), this.saveData());
  }, e.prototype.setMysticalShopTime = function (t) {
    null == this.data.mysticalShopTime && (this.data.mysticalShopTime = 86400), this.data.mysticalShopTime = t, this.saveData();
  }, e.prototype.getMysticalShopList = function () {
    return null == this.data.mysticalShopList && (this.data.mysticalShopList = []), this.data.mysticalShopList;
  }, e.prototype.addMysticalShopList = function (t) {
    null == this.data.mysticalShopList && (this.data.mysticalShopList = []), this.data.mysticalShopList.push(t), this.saveData();
  }, e.prototype.setMysticalShopList = function (t, e, o) {
    void 0 === o && (o = 0), null == this.data.mysticalShopList && (this.data.mysticalShopList = []);

    for (var a = 0; a < this.data.mysticalShopList.length; a++) {
      if (this.data.mysticalShopList[a].id == t) return this.data.mysticalShopList[a].isBuy = e, this.data.mysticalShopList[a].videoCount = o, void this.saveData();
    }
  }, e.prototype.refreshMysticalShopList = function (t, e) {
    null == this.data.mysticalShopList && (this.data.mysticalShopList = []), this.data.mysticalShopList[t] = e, this.saveData();
  }, e;
}(r.BaseData);

o.MysticalShopData = u;

o.MysticalItemData = function () {};

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcTXlzdGljYWxTaG9wRGF0YS5qcyJdLCJuYW1lcyI6WyJ0IiwicmVxdWlyZSIsImUiLCJtb2R1bGUiLCJvIiwiZXhwb3J0cyIsImEiLCJpIiwiX19leHRlbmRzIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIk15c3RpY2FsSXRlbURhdGEiLCJNeXN0aWNhbFNob3BEYXRhIiwiciIsIm4iLCJzIiwiYyIsImwiLCJsYXN0TG9naW5UaW1lIiwibXlzdGljYWxTaG9wVGltZSIsIm15c3RpY2FsU2hvcExpc3QiLCJ1IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJlY3J5cHQiLCJnYW1lS2V5IiwiR2FtZUNvbmZpZyIsIkFwcENhY2hlTmFtZSIsImlzTmV3VXNlciIsImNyZWF0ZURhdGEiLCJkYXRhIiwiaW5pdERhdGEiLCJnZXRJc05ld1VzZXIiLCJnZXRMYXN0TG9naW5UaW1lIiwicmVmcmVzaExhc3RMb2dpblRpbWUiLCJUaW1lVXRpbHMiLCJHZXRUaW1lQnlTZWNvbmQiLCJzYXZlRGF0YSIsImdldE15c3RpY2FsU2hvcFRpbWUiLCJzdWJNeXN0aWNhbFNob3BUaW1lIiwiZ2V0SW5zdGFuY2UiLCJyZWZyZXNoTXlzdGljYWxTaG9wRGF0YSIsInNldE15c3RpY2FsU2hvcFRpbWUiLCJnZXRNeXN0aWNhbFNob3BMaXN0IiwiYWRkTXlzdGljYWxTaG9wTGlzdCIsInB1c2giLCJzZXRNeXN0aWNhbFNob3BMaXN0IiwibGVuZ3RoIiwiaWQiLCJpc0J1eSIsInZpZGVvQ291bnQiLCJyZWZyZXNoTXlzdGljYWxTaG9wTGlzdCIsIkJhc2VEYXRhIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUMsR0FBR0MsT0FBUjtBQUNB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QUFMLENBQVVWLGdCQUFsQixLQUF1QyxLQUFLVSxJQUFMLENBQVVWLGdCQUFWLEdBQTZCLEVBQXBFLENBREE7O0lBRUEsS0FBSyxJQUFJdkIsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRyxLQUFLaUMsSUFBTCxDQUFVVixnQkFBVixDQUEyQjJCLE1BQS9DLEVBQXVEbEQsQ0FBQyxFQUF4RDtNQUE0RCxJQUFJLEtBQUtpQyxJQUFMLENBQVVWLGdCQUFWLENBQTJCdkIsQ0FBM0IsRUFBOEJtRCxFQUE5QixJQUFvQ3pELENBQXhDLEVBQTJDLE9BQU8sS0FBS3VDLElBQUwsQ0FBVVYsZ0JBQVYsQ0FBMkJ2QixDQUEzQixFQUE4Qm9ELEtBQTlCLEdBQXNDeEQsQ0FBdEMsRUFDOUcsS0FBS3FDLElBQUwsQ0FBVVYsZ0JBQVYsQ0FBMkJ2QixDQUEzQixFQUE4QnFELFVBQTlCLEdBQTJDdkQsQ0FEbUUsRUFFOUcsS0FBSyxLQUFLMEMsUUFBTCxFQUZrRztJQUF2RztFQUdILENBaERNLEVBaURQNUMsQ0FBQyxDQUFDVyxTQUFGLENBQVkrQyx1QkFBWixHQUFzQyxVQUFTNUQsQ0FBVCxFQUFZRSxDQUFaLEVBQWU7SUFDakQsUUFBUSxLQUFLcUMsSUFBTCxDQUFVVixnQkFBbEIsS0FBdUMsS0FBS1UsSUFBTCxDQUFVVixnQkFBVixHQUE2QixFQUFwRSxHQUNBLEtBQUtVLElBQUwsQ0FBVVYsZ0JBQVYsQ0FBMkI3QixDQUEzQixJQUFnQ0UsQ0FEaEMsRUFFQSxLQUFLNEMsUUFBTCxFQUZBO0VBR0gsQ0FyRE0sRUFzRFA1QyxDQXREQTtBQXVESCxDQS9ERyxDQStERG9CLENBQUMsQ0FBQ3VDLFFBL0RELENBVEo7O0FBeUVBekQsQ0FBQyxDQUFDaUIsZ0JBQUYsR0FBcUJTLENBQXJCOztBQUNBMUIsQ0FBQyxDQUFDZ0IsZ0JBQUYsR0FBcUIsWUFBVyxDQUFFLENBQWxDIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgdCA9IHJlcXVpcmU7XG52YXIgZSA9IG1vZHVsZTtcbnZhciBvID0gZXhwb3J0cztcbnZhciBhLCBpID0gdGhpcyAmJiB0aGlzLl9fZXh0ZW5kcyB8fCAoYSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICByZXR1cm4gKGEgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwge1xuICAgICAgICBfX3Byb3RvX186IFtdXG4gICAgfVxuICAgIGluc3RhbmNlb2YgQXJyYXkgJiZcbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHQuX19wcm90b19fID0gZVxuICAgIH0gfHxcbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAodmFyIG8gaW4gZSkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIG8pICYmICh0W29dID0gZVtvXSlcbiAgICB9KSh0LCBlKVxufSxcbmZ1bmN0aW9uKHQsIGUpIHtcbiAgICBmdW5jdGlvbiBvKCkge1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gdFxuICAgIH1cbiAgICBhKHQsIGUpLFxuICAgIHQucHJvdG90eXBlID0gbnVsbCA9PT0gZSA/IE9iamVjdC5jcmVhdGUoZSkgOiAoby5wcm90b3R5cGUgPSBlLnByb3RvdHlwZSwgbmV3IG8pXG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiAhMFxufSksXG5vLk15c3RpY2FsSXRlbURhdGEgPSBvLk15c3RpY2FsU2hvcERhdGEgPSB2b2lkIDA7XG52YXIgciA9IHQoXCJCYXNlRGF0YVwiKSxcbm4gPSB0KFwiVGltZVV0aWxzXCIpLFxucyA9IHQoXCJDb25maWdcIiksXG5jID0gdChcIkdhbWVNZ3JcIiksXG5sID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5sYXN0TG9naW5UaW1lID0gMCxcbiAgICB0aGlzLm15c3RpY2FsU2hvcFRpbWUgPSA4NjQwMCxcbiAgICB0aGlzLm15c3RpY2FsU2hvcExpc3QgPSBbXVxufSxcbnUgPSBmdW5jdGlvbih0KSB7XG4gICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgdmFyIGUgPSBudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gZS5lY3J5cHQgPSAhMSxcbiAgICAgICAgZS5nYW1lS2V5ID0gcy5HYW1lQ29uZmlnLkFwcENhY2hlTmFtZSArIFwiTXlzdGljYWxTaG9wRGF0YVwiLFxuICAgICAgICBlLmlzTmV3VXNlciA9ICExLFxuICAgICAgICBlXG4gICAgfVxuICAgIHJldHVybiBpKGUsIHQpLFxuICAgIGUucHJvdG90eXBlLmNyZWF0ZURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSA9IG5ldyBsLFxuICAgICAgICB0aGlzLmRhdGFcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmluaXREYXRhID0gZnVuY3Rpb24odCkge1xuICAgICAgICB0ICYmICh0aGlzLmlzTmV3VXNlciA9ICEwKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuZ2V0SXNOZXdVc2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzTmV3VXNlclxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuZ2V0TGFzdExvZ2luVGltZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmRhdGEubGFzdExvZ2luVGltZSAmJiAodGhpcy5kYXRhLmxhc3RMb2dpblRpbWUgPSAwKSxcbiAgICAgICAgdGhpcy5kYXRhLmxhc3RMb2dpblRpbWVcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnJlZnJlc2hMYXN0TG9naW5UaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0ID0gbi5UaW1lVXRpbHMuR2V0VGltZUJ5U2Vjb25kKCk7XG4gICAgICAgIHRoaXMuZGF0YS5sYXN0TG9naW5UaW1lID0gdCxcbiAgICAgICAgdGhpcy5zYXZlRGF0YSgpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5nZXRNeXN0aWNhbFNob3BUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBudWxsID09IHRoaXMuZGF0YS5teXN0aWNhbFNob3BUaW1lICYmICh0aGlzLmRhdGEubXlzdGljYWxTaG9wVGltZSA9IDg2NDAwKSxcbiAgICAgICAgdGhpcy5kYXRhLm15c3RpY2FsU2hvcFRpbWVcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnN1Yk15c3RpY2FsU2hvcFRpbWUgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIG51bGwgPT0gdGhpcy5kYXRhLm15c3RpY2FsU2hvcFRpbWUgJiYgKHRoaXMuZGF0YS5teXN0aWNhbFNob3BUaW1lID0gODY0MDApLFxuICAgICAgICB0IDw9IDAgfHwgKHRoaXMuZGF0YS5teXN0aWNhbFNob3BUaW1lIC09IHQsIHRoaXMuZGF0YS5teXN0aWNhbFNob3BUaW1lIDw9IDAgJiYgYy5kZWZhdWx0LmdldEluc3RhbmNlKCkucmVmcmVzaE15c3RpY2FsU2hvcERhdGEoKSwgdGhpcy5zYXZlRGF0YSgpKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuc2V0TXlzdGljYWxTaG9wVGltZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbnVsbCA9PSB0aGlzLmRhdGEubXlzdGljYWxTaG9wVGltZSAmJiAodGhpcy5kYXRhLm15c3RpY2FsU2hvcFRpbWUgPSA4NjQwMCksXG4gICAgICAgIHRoaXMuZGF0YS5teXN0aWNhbFNob3BUaW1lID0gdCxcbiAgICAgICAgdGhpcy5zYXZlRGF0YSgpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5nZXRNeXN0aWNhbFNob3BMaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBudWxsID09IHRoaXMuZGF0YS5teXN0aWNhbFNob3BMaXN0ICYmICh0aGlzLmRhdGEubXlzdGljYWxTaG9wTGlzdCA9IFtdKSxcbiAgICAgICAgdGhpcy5kYXRhLm15c3RpY2FsU2hvcExpc3RcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmFkZE15c3RpY2FsU2hvcExpc3QgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIG51bGwgPT0gdGhpcy5kYXRhLm15c3RpY2FsU2hvcExpc3QgJiYgKHRoaXMuZGF0YS5teXN0aWNhbFNob3BMaXN0ID0gW10pLFxuICAgICAgICB0aGlzLmRhdGEubXlzdGljYWxTaG9wTGlzdC5wdXNoKHQpLFxuICAgICAgICB0aGlzLnNhdmVEYXRhKClcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnNldE15c3RpY2FsU2hvcExpc3QgPSBmdW5jdGlvbih0LCBlLCBvKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gbyAmJiAobyA9IDApLFxuICAgICAgICBudWxsID09IHRoaXMuZGF0YS5teXN0aWNhbFNob3BMaXN0ICYmICh0aGlzLmRhdGEubXlzdGljYWxTaG9wTGlzdCA9IFtdKTtcbiAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCB0aGlzLmRhdGEubXlzdGljYWxTaG9wTGlzdC5sZW5ndGg7IGErKykgaWYgKHRoaXMuZGF0YS5teXN0aWNhbFNob3BMaXN0W2FdLmlkID09IHQpIHJldHVybiB0aGlzLmRhdGEubXlzdGljYWxTaG9wTGlzdFthXS5pc0J1eSA9IGUsXG4gICAgICAgIHRoaXMuZGF0YS5teXN0aWNhbFNob3BMaXN0W2FdLnZpZGVvQ291bnQgPSBvLFxuICAgICAgICB2b2lkIHRoaXMuc2F2ZURhdGEoKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUucmVmcmVzaE15c3RpY2FsU2hvcExpc3QgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIG51bGwgPT0gdGhpcy5kYXRhLm15c3RpY2FsU2hvcExpc3QgJiYgKHRoaXMuZGF0YS5teXN0aWNhbFNob3BMaXN0ID0gW10pLFxuICAgICAgICB0aGlzLmRhdGEubXlzdGljYWxTaG9wTGlzdFt0XSA9IGUsXG4gICAgICAgIHRoaXMuc2F2ZURhdGEoKVxuICAgIH0sXG4gICAgZVxufSAoci5CYXNlRGF0YSk7XG5vLk15c3RpY2FsU2hvcERhdGEgPSB1O1xuby5NeXN0aWNhbEl0ZW1EYXRhID0gZnVuY3Rpb24oKSB7fSJdfQ==