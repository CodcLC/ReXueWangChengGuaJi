
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ShareData.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '90466l0F3VEWIXC8W/h3RV2', 'ShareData');
// scripts/ShareData.js

"use strict";

var t = require;
var e = module;
var o = exports;

var _a,
    i = void 0 && (void 0).__extends || (_a = function a(t, e) {
  return (_a = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (t, e) {
    t.__proto__ = e;
  } || function (t, e) {
    for (var o in e) {
      Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
    }
  })(t, e);
}, function (t, e) {
  function o() {
    this.constructor = t;
  }

  _a(t, e), t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o());
});

Object.defineProperty(o, "__esModule", {
  value: !0
}), o.ShareData = void 0;

var r = t("BaseData"),
    n = t("LogMgr"),
    s = t("SdkMgr"),
    c = t("TimeUtils"),
    l = t("UIUtils"),
    u = t("Config"),
    p = function p() {
  this.path = "", this.dayShareNum = 0, this.daylastShareTime = -1;
},
    g = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    return e.gameKey = u.GameConfig.AppCacheName + "shareData", e.timeTotalStop = 15, e.needRecordVideo = !0, e.recordTime = 0, e.canShare = !1, e.isStart = !1, e.isPause = !1, e.isStop = !1, e;
  }

  return i(e, t), e.prototype.createData = function () {
    return this.data = new p(), this.data;
  }, e.prototype.initData = function (t) {
    t || -1 != this.data.daylastShareTime && (c.TimeUtils.compareIsToday(this.data.daylastShareTime) || (this.data.daylastShareTime = -1, this.data.dayShareNum = 0, this.saveData()));
  }, e.prototype.startRecord = function () {
    this.needRecordVideo && (n.LogMgr.getInstance().debug("开始录屏"), this.isStart = !0, this.isPause = !1, s.SdkMgr.getInstance().recordScreen(), this.needRecordVideo = !1, this.canShare = !1, l.UIUtils.schedule(this.secondUpdate, this, 1), this.data.path = "", this.saveData());
  }, e.prototype.playRecord = function () {
    this.isStart ? this.isPause ? this.restartRecord() : this.pauseRecord() : this.startRecord();
  }, e.prototype.pauseRecord = function () {
    this.isStart && (s.SdkMgr.getInstance().pauseRecord(), this.isPause = !0, n.LogMgr.getInstance().debug("暂停录屏"));
  }, e.prototype.restartRecord = function () {
    this.isPause && (this.isPause = !1, s.SdkMgr.getInstance().restartRecord(), n.LogMgr.getInstance().debug("重新录屏"));
  }, e.prototype.stopRecord = function (t, e) {
    var o = this;
    this.recordTime <= 0 || (n.LogMgr.getInstance().debug("停止录屏"), l.UIUtils.unSchedule(this.secondUpdate, this), this.isStart = !1, this.isPause = !1, s.SdkMgr.getInstance().stopRecord(t, function (t) {
      o.data.path = t, o.recordTime >= 15 && (o.canShare = !0), o.isStop = !0, o.recordTime = 0, o.saveData(), e && e();
    }));
  }, e.prototype.getSharePath = function () {
    return this.data.path;
  }, e.prototype.getCanShare = function () {
    return this.recordTime >= 15 || this.canShare;
  }, e.prototype.getRecordTime = function () {
    return this.recordTime;
  }, e.prototype.toShare = function (t, e) {
    var o = this;
    s.SdkMgr.getInstance().share(this.data.path, function () {
      o.data.path = "", t && o.data.dayShareNum++, o.needRecordVideo = !0, o.canShare = !1, o.isStop = !1, o.clearData(), o.saveData(), e && e();
    });
  }, e.prototype.getTodayCanShare = function () {
    return !0;
  }, e.prototype.secondUpdate = function () {
    this.isPause || (this.recordTime++, this.recordTime >= 290 && this.stopRecord(!1));
  }, e.prototype.checkStop = function (t) {
    return this.isStop ? (t && t(), !0) : (this.recordTime >= this.timeTotalStop || this.recordTime >= 290) && (this.stopRecord(!1, t), !0);
  }, e.prototype.clearData = function () {
    this.isStop = !1, this.isStart = !1, this.needRecordVideo = !0, this.data.path = "", this.recordTime = 0, this.saveData();
  }, e;
}(r.BaseData);

o.ShareData = g;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcU2hhcmVEYXRhLmpzIl0sIm5hbWVzIjpbInQiLCJyZXF1aXJlIiwiZSIsIm1vZHVsZSIsIm8iLCJleHBvcnRzIiwiYSIsImkiLCJfX2V4dGVuZHMiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiU2hhcmVEYXRhIiwiciIsIm4iLCJzIiwiYyIsImwiLCJ1IiwicCIsInBhdGgiLCJkYXlTaGFyZU51bSIsImRheWxhc3RTaGFyZVRpbWUiLCJnIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJnYW1lS2V5IiwiR2FtZUNvbmZpZyIsIkFwcENhY2hlTmFtZSIsInRpbWVUb3RhbFN0b3AiLCJuZWVkUmVjb3JkVmlkZW8iLCJyZWNvcmRUaW1lIiwiY2FuU2hhcmUiLCJpc1N0YXJ0IiwiaXNQYXVzZSIsImlzU3RvcCIsImNyZWF0ZURhdGEiLCJkYXRhIiwiaW5pdERhdGEiLCJUaW1lVXRpbHMiLCJjb21wYXJlSXNUb2RheSIsInNhdmVEYXRhIiwic3RhcnRSZWNvcmQiLCJMb2dNZ3IiLCJnZXRJbnN0YW5jZSIsImRlYnVnIiwiU2RrTWdyIiwicmVjb3JkU2NyZWVuIiwiVUlVdGlscyIsInNjaGVkdWxlIiwic2Vjb25kVXBkYXRlIiwicGxheVJlY29yZCIsInJlc3RhcnRSZWNvcmQiLCJwYXVzZVJlY29yZCIsInN0b3BSZWNvcmQiLCJ1blNjaGVkdWxlIiwiZ2V0U2hhcmVQYXRoIiwiZ2V0Q2FuU2hhcmUiLCJnZXRSZWNvcmRUaW1lIiwidG9TaGFyZSIsInNoYXJlIiwiY2xlYXJEYXRhIiwiZ2V0VG9kYXlDYW5TaGFyZSIsImNoZWNrU3RvcCIsIkJhc2VEYXRhIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUMsR0FBR0MsT0FBUjtBQUNBLElBQUlDLENBQUMsR0FBR0MsTUFBUjtBQUNBLElBQUlDLENBQUMsR0FBR0MsT0FBUjs7QUFDQSxJQUFJQyxFQUFKO0FBQUEsSUFBT0MsQ0FBQyxHQUFHLFVBQVEsU0FBS0MsU0FBYixLQUEyQkYsRUFBQyxHQUFHLFdBQVNOLENBQVQsRUFBWUUsQ0FBWixFQUFlO0VBQ3JELE9BQU8sQ0FBQ0ksRUFBQyxHQUFHRyxNQUFNLENBQUNDLGNBQVAsSUFBeUI7SUFDakNDLFNBQVMsRUFBRTtFQURzQixhQUcxQkMsS0FIMEIsSUFJckMsVUFBU1osQ0FBVCxFQUFZRSxDQUFaLEVBQWU7SUFDWEYsQ0FBQyxDQUFDVyxTQUFGLEdBQWNULENBQWQ7RUFDSCxDQU5XLElBT1osVUFBU0YsQ0FBVCxFQUFZRSxDQUFaLEVBQWU7SUFDWCxLQUFLLElBQUlFLENBQVQsSUFBY0YsQ0FBZDtNQUFpQk8sTUFBTSxDQUFDSSxTQUFQLENBQWlCQyxjQUFqQixDQUFnQ0MsSUFBaEMsQ0FBcUNiLENBQXJDLEVBQXdDRSxDQUF4QyxNQUErQ0osQ0FBQyxDQUFDSSxDQUFELENBQUQsR0FBT0YsQ0FBQyxDQUFDRSxDQUFELENBQXZEO0lBQWpCO0VBQ0gsQ0FUTSxFQVNKSixDQVRJLEVBU0RFLENBVEMsQ0FBUDtBQVVILENBWHFDLEVBWXRDLFVBQVNGLENBQVQsRUFBWUUsQ0FBWixFQUFlO0VBQ1gsU0FBU0UsQ0FBVCxHQUFhO0lBQ1QsS0FBS1ksV0FBTCxHQUFtQmhCLENBQW5CO0VBQ0g7O0VBQ0RNLEVBQUMsQ0FBQ04sQ0FBRCxFQUFJRSxDQUFKLENBQUQsRUFDQUYsQ0FBQyxDQUFDYSxTQUFGLEdBQWMsU0FBU1gsQ0FBVCxHQUFhTyxNQUFNLENBQUNRLE1BQVAsQ0FBY2YsQ0FBZCxDQUFiLElBQWlDRSxDQUFDLENBQUNTLFNBQUYsR0FBY1gsQ0FBQyxDQUFDVyxTQUFoQixFQUEyQixJQUFJVCxDQUFKLEVBQTVELENBRGQ7QUFFSCxDQWxCVSxDQUFYOztBQW1CQUssTUFBTSxDQUFDUyxjQUFQLENBQXNCZCxDQUF0QixFQUF5QixZQUF6QixFQUF1QztFQUNuQ2UsS0FBSyxFQUFFLENBQUM7QUFEMkIsQ0FBdkMsR0FHQWYsQ0FBQyxDQUFDZ0IsU0FBRixHQUFjLEtBQUssQ0FIbkI7O0FBSUEsSUFBSUMsQ0FBQyxHQUFHckIsQ0FBQyxDQUFDLFVBQUQsQ0FBVDtBQUFBLElBQ0FzQixDQUFDLEdBQUd0QixDQUFDLENBQUMsUUFBRCxDQURMO0FBQUEsSUFFQXVCLENBQUMsR0FBR3ZCLENBQUMsQ0FBQyxRQUFELENBRkw7QUFBQSxJQUdBd0IsQ0FBQyxHQUFHeEIsQ0FBQyxDQUFDLFdBQUQsQ0FITDtBQUFBLElBSUF5QixDQUFDLEdBQUd6QixDQUFDLENBQUMsU0FBRCxDQUpMO0FBQUEsSUFLQTBCLENBQUMsR0FBRzFCLENBQUMsQ0FBQyxRQUFELENBTEw7QUFBQSxJQU1BMkIsQ0FBQyxHQUFHLFNBQUpBLENBQUksR0FBVztFQUNYLEtBQUtDLElBQUwsR0FBWSxFQUFaLEVBQ0EsS0FBS0MsV0FBTCxHQUFtQixDQURuQixFQUVBLEtBQUtDLGdCQUFMLEdBQXdCLENBQUMsQ0FGekI7QUFHSCxDQVZEO0FBQUEsSUFXQUMsQ0FBQyxHQUFHLFVBQVMvQixDQUFULEVBQVk7RUFDWixTQUFTRSxDQUFULEdBQWE7SUFDVCxJQUFJQSxDQUFDLEdBQUcsU0FBU0YsQ0FBVCxJQUFjQSxDQUFDLENBQUNnQyxLQUFGLENBQVEsSUFBUixFQUFjQyxTQUFkLENBQWQsSUFBMEMsSUFBbEQ7SUFDQSxPQUFPL0IsQ0FBQyxDQUFDZ0MsT0FBRixHQUFZUixDQUFDLENBQUNTLFVBQUYsQ0FBYUMsWUFBYixHQUE0QixXQUF4QyxFQUNQbEMsQ0FBQyxDQUFDbUMsYUFBRixHQUFrQixFQURYLEVBRVBuQyxDQUFDLENBQUNvQyxlQUFGLEdBQW9CLENBQUMsQ0FGZCxFQUdQcEMsQ0FBQyxDQUFDcUMsVUFBRixHQUFlLENBSFIsRUFJUHJDLENBQUMsQ0FBQ3NDLFFBQUYsR0FBYSxDQUFDLENBSlAsRUFLUHRDLENBQUMsQ0FBQ3VDLE9BQUYsR0FBWSxDQUFDLENBTE4sRUFNUHZDLENBQUMsQ0FBQ3dDLE9BQUYsR0FBWSxDQUFDLENBTk4sRUFPUHhDLENBQUMsQ0FBQ3lDLE1BQUYsR0FBVyxDQUFDLENBUEwsRUFRUHpDLENBUkE7RUFTSDs7RUFDRCxPQUFPSyxDQUFDLENBQUNMLENBQUQsRUFBSUYsQ0FBSixDQUFELEVBQ1BFLENBQUMsQ0FBQ1csU0FBRixDQUFZK0IsVUFBWixHQUF5QixZQUFXO0lBQ2hDLE9BQU8sS0FBS0MsSUFBTCxHQUFZLElBQUlsQixDQUFKLEVBQVosRUFDUCxLQUFLa0IsSUFETDtFQUVILENBSk0sRUFLUDNDLENBQUMsQ0FBQ1csU0FBRixDQUFZaUMsUUFBWixHQUF1QixVQUFTOUMsQ0FBVCxFQUFZO0lBQy9CQSxDQUFDLElBQUksQ0FBQyxDQUFELElBQU0sS0FBSzZDLElBQUwsQ0FBVWYsZ0JBQWhCLEtBQXFDTixDQUFDLENBQUN1QixTQUFGLENBQVlDLGNBQVosQ0FBMkIsS0FBS0gsSUFBTCxDQUFVZixnQkFBckMsTUFBMkQsS0FBS2UsSUFBTCxDQUFVZixnQkFBVixHQUE2QixDQUFDLENBQTlCLEVBQWlDLEtBQUtlLElBQUwsQ0FBVWhCLFdBQVYsR0FBd0IsQ0FBekQsRUFBNEQsS0FBS29CLFFBQUwsRUFBdkgsQ0FBckMsQ0FBTDtFQUNILENBUE0sRUFRUC9DLENBQUMsQ0FBQ1csU0FBRixDQUFZcUMsV0FBWixHQUEwQixZQUFXO0lBQ2pDLEtBQUtaLGVBQUwsS0FBeUJoQixDQUFDLENBQUM2QixNQUFGLENBQVNDLFdBQVQsR0FBdUJDLEtBQXZCLENBQTZCLE1BQTdCLEdBQXNDLEtBQUtaLE9BQUwsR0FBZSxDQUFDLENBQXRELEVBQXlELEtBQUtDLE9BQUwsR0FBZSxDQUFDLENBQXpFLEVBQTRFbkIsQ0FBQyxDQUFDK0IsTUFBRixDQUFTRixXQUFULEdBQXVCRyxZQUF2QixFQUE1RSxFQUFtSCxLQUFLakIsZUFBTCxHQUF1QixDQUFDLENBQTNJLEVBQThJLEtBQUtFLFFBQUwsR0FBZ0IsQ0FBQyxDQUEvSixFQUFrS2YsQ0FBQyxDQUFDK0IsT0FBRixDQUFVQyxRQUFWLENBQW1CLEtBQUtDLFlBQXhCLEVBQXNDLElBQXRDLEVBQTRDLENBQTVDLENBQWxLLEVBQWtOLEtBQUtiLElBQUwsQ0FBVWpCLElBQVYsR0FBaUIsRUFBbk8sRUFBdU8sS0FBS3FCLFFBQUwsRUFBaFE7RUFDSCxDQVZNLEVBV1AvQyxDQUFDLENBQUNXLFNBQUYsQ0FBWThDLFVBQVosR0FBeUIsWUFBVztJQUNoQyxLQUFLbEIsT0FBTCxHQUFlLEtBQUtDLE9BQUwsR0FBZSxLQUFLa0IsYUFBTCxFQUFmLEdBQXNDLEtBQUtDLFdBQUwsRUFBckQsR0FBMEUsS0FBS1gsV0FBTCxFQUExRTtFQUNILENBYk0sRUFjUGhELENBQUMsQ0FBQ1csU0FBRixDQUFZZ0QsV0FBWixHQUEwQixZQUFXO0lBQ2pDLEtBQUtwQixPQUFMLEtBQWlCbEIsQ0FBQyxDQUFDK0IsTUFBRixDQUFTRixXQUFULEdBQXVCUyxXQUF2QixJQUFzQyxLQUFLbkIsT0FBTCxHQUFlLENBQUMsQ0FBdEQsRUFBeURwQixDQUFDLENBQUM2QixNQUFGLENBQVNDLFdBQVQsR0FBdUJDLEtBQXZCLENBQTZCLE1BQTdCLENBQTFFO0VBQ0gsQ0FoQk0sRUFpQlBuRCxDQUFDLENBQUNXLFNBQUYsQ0FBWStDLGFBQVosR0FBNEIsWUFBVztJQUNuQyxLQUFLbEIsT0FBTCxLQUFpQixLQUFLQSxPQUFMLEdBQWUsQ0FBQyxDQUFoQixFQUFtQm5CLENBQUMsQ0FBQytCLE1BQUYsQ0FBU0YsV0FBVCxHQUF1QlEsYUFBdkIsRUFBbkIsRUFBMkR0QyxDQUFDLENBQUM2QixNQUFGLENBQVNDLFdBQVQsR0FBdUJDLEtBQXZCLENBQTZCLE1BQTdCLENBQTVFO0VBQ0gsQ0FuQk0sRUFvQlBuRCxDQUFDLENBQUNXLFNBQUYsQ0FBWWlELFVBQVosR0FBeUIsVUFBUzlELENBQVQsRUFBWUUsQ0FBWixFQUFlO0lBQ3BDLElBQUlFLENBQUMsR0FBRyxJQUFSO0lBQ0EsS0FBS21DLFVBQUwsSUFBbUIsQ0FBbkIsS0FBeUJqQixDQUFDLENBQUM2QixNQUFGLENBQVNDLFdBQVQsR0FBdUJDLEtBQXZCLENBQTZCLE1BQTdCLEdBQXNDNUIsQ0FBQyxDQUFDK0IsT0FBRixDQUFVTyxVQUFWLENBQXFCLEtBQUtMLFlBQTFCLEVBQXdDLElBQXhDLENBQXRDLEVBQXFGLEtBQUtqQixPQUFMLEdBQWUsQ0FBQyxDQUFyRyxFQUF3RyxLQUFLQyxPQUFMLEdBQWUsQ0FBQyxDQUF4SCxFQUEySG5CLENBQUMsQ0FBQytCLE1BQUYsQ0FBU0YsV0FBVCxHQUF1QlUsVUFBdkIsQ0FBa0M5RCxDQUFsQyxFQUNwSixVQUFTQSxDQUFULEVBQVk7TUFDUkksQ0FBQyxDQUFDeUMsSUFBRixDQUFPakIsSUFBUCxHQUFjNUIsQ0FBZCxFQUNBSSxDQUFDLENBQUNtQyxVQUFGLElBQWdCLEVBQWhCLEtBQXVCbkMsQ0FBQyxDQUFDb0MsUUFBRixHQUFhLENBQUMsQ0FBckMsQ0FEQSxFQUVBcEMsQ0FBQyxDQUFDdUMsTUFBRixHQUFXLENBQUMsQ0FGWixFQUdBdkMsQ0FBQyxDQUFDbUMsVUFBRixHQUFlLENBSGYsRUFJQW5DLENBQUMsQ0FBQzZDLFFBQUYsRUFKQSxFQUtBL0MsQ0FBQyxJQUFJQSxDQUFDLEVBTE47SUFNSCxDQVJtSixDQUFwSjtFQVNILENBL0JNLEVBZ0NQQSxDQUFDLENBQUNXLFNBQUYsQ0FBWW1ELFlBQVosR0FBMkIsWUFBVztJQUNsQyxPQUFPLEtBQUtuQixJQUFMLENBQVVqQixJQUFqQjtFQUNILENBbENNLEVBbUNQMUIsQ0FBQyxDQUFDVyxTQUFGLENBQVlvRCxXQUFaLEdBQTBCLFlBQVc7SUFDakMsT0FBTyxLQUFLMUIsVUFBTCxJQUFtQixFQUFuQixJQUF5QixLQUFLQyxRQUFyQztFQUNILENBckNNLEVBc0NQdEMsQ0FBQyxDQUFDVyxTQUFGLENBQVlxRCxhQUFaLEdBQTRCLFlBQVc7SUFDbkMsT0FBTyxLQUFLM0IsVUFBWjtFQUNILENBeENNLEVBeUNQckMsQ0FBQyxDQUFDVyxTQUFGLENBQVlzRCxPQUFaLEdBQXNCLFVBQVNuRSxDQUFULEVBQVlFLENBQVosRUFBZTtJQUNqQyxJQUFJRSxDQUFDLEdBQUcsSUFBUjtJQUNBbUIsQ0FBQyxDQUFDK0IsTUFBRixDQUFTRixXQUFULEdBQXVCZ0IsS0FBdkIsQ0FBNkIsS0FBS3ZCLElBQUwsQ0FBVWpCLElBQXZDLEVBQ0EsWUFBVztNQUNQeEIsQ0FBQyxDQUFDeUMsSUFBRixDQUFPakIsSUFBUCxHQUFjLEVBQWQsRUFDQTVCLENBQUMsSUFBSUksQ0FBQyxDQUFDeUMsSUFBRixDQUFPaEIsV0FBUCxFQURMLEVBRUF6QixDQUFDLENBQUNrQyxlQUFGLEdBQW9CLENBQUMsQ0FGckIsRUFHQWxDLENBQUMsQ0FBQ29DLFFBQUYsR0FBYSxDQUFDLENBSGQsRUFJQXBDLENBQUMsQ0FBQ3VDLE1BQUYsR0FBVyxDQUFDLENBSlosRUFLQXZDLENBQUMsQ0FBQ2lFLFNBQUYsRUFMQSxFQU1BakUsQ0FBQyxDQUFDNkMsUUFBRixFQU5BLEVBT0EvQyxDQUFDLElBQUlBLENBQUMsRUFQTjtJQVFILENBVkQ7RUFXSCxDQXRETSxFQXVEUEEsQ0FBQyxDQUFDVyxTQUFGLENBQVl5RCxnQkFBWixHQUErQixZQUFXO0lBQ3RDLE9BQU8sQ0FBRSxDQUFUO0VBQ0gsQ0F6RE0sRUEwRFBwRSxDQUFDLENBQUNXLFNBQUYsQ0FBWTZDLFlBQVosR0FBMkIsWUFBVztJQUNsQyxLQUFLaEIsT0FBTCxLQUFpQixLQUFLSCxVQUFMLElBQW1CLEtBQUtBLFVBQUwsSUFBbUIsR0FBbkIsSUFBMEIsS0FBS3VCLFVBQUwsQ0FBZ0IsQ0FBQyxDQUFqQixDQUE5RDtFQUNILENBNURNLEVBNkRQNUQsQ0FBQyxDQUFDVyxTQUFGLENBQVkwRCxTQUFaLEdBQXdCLFVBQVN2RSxDQUFULEVBQVk7SUFDaEMsT0FBTyxLQUFLMkMsTUFBTCxJQUFlM0MsQ0FBQyxJQUFJQSxDQUFDLEVBQU4sRUFBVSxDQUFDLENBQTFCLElBQStCLENBQUMsS0FBS3VDLFVBQUwsSUFBbUIsS0FBS0YsYUFBeEIsSUFBeUMsS0FBS0UsVUFBTCxJQUFtQixHQUE3RCxNQUFzRSxLQUFLdUIsVUFBTCxDQUFnQixDQUFDLENBQWpCLEVBQW9COUQsQ0FBcEIsR0FBd0IsQ0FBQyxDQUEvRixDQUF0QztFQUNILENBL0RNLEVBZ0VQRSxDQUFDLENBQUNXLFNBQUYsQ0FBWXdELFNBQVosR0FBd0IsWUFBVztJQUMvQixLQUFLMUIsTUFBTCxHQUFjLENBQUMsQ0FBZixFQUNBLEtBQUtGLE9BQUwsR0FBZSxDQUFDLENBRGhCLEVBRUEsS0FBS0gsZUFBTCxHQUF1QixDQUFDLENBRnhCLEVBR0EsS0FBS08sSUFBTCxDQUFVakIsSUFBVixHQUFpQixFQUhqQixFQUlBLEtBQUtXLFVBQUwsR0FBa0IsQ0FKbEIsRUFLQSxLQUFLVSxRQUFMLEVBTEE7RUFNSCxDQXZFTSxFQXdFUC9DLENBeEVBO0FBeUVILENBdEZHLENBc0ZEbUIsQ0FBQyxDQUFDbUQsUUF0RkQsQ0FYSjs7QUFrR0FwRSxDQUFDLENBQUNnQixTQUFGLEdBQWNXLENBQWQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0ID0gcmVxdWlyZTtcbnZhciBlID0gbW9kdWxlO1xudmFyIG8gPSBleHBvcnRzO1xudmFyIGEsIGkgPSB0aGlzICYmIHRoaXMuX19leHRlbmRzIHx8IChhID0gZnVuY3Rpb24odCwgZSkge1xuICAgIHJldHVybiAoYSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7XG4gICAgICAgIF9fcHJvdG9fXzogW11cbiAgICB9XG4gICAgaW5zdGFuY2VvZiBBcnJheSAmJlxuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgdC5fX3Byb3RvX18gPSBlXG4gICAgfSB8fFxuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yICh2YXIgbyBpbiBlKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgbykgJiYgKHRbb10gPSBlW29dKVxuICAgIH0pKHQsIGUpXG59LFxuZnVuY3Rpb24odCwgZSkge1xuICAgIGZ1bmN0aW9uIG8oKSB7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSB0XG4gICAgfVxuICAgIGEodCwgZSksXG4gICAgdC5wcm90b3R5cGUgPSBudWxsID09PSBlID8gT2JqZWN0LmNyZWF0ZShlKSA6IChvLnByb3RvdHlwZSA9IGUucHJvdG90eXBlLCBuZXcgbylcbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6ICEwXG59KSxcbm8uU2hhcmVEYXRhID0gdm9pZCAwO1xudmFyIHIgPSB0KFwiQmFzZURhdGFcIiksXG5uID0gdChcIkxvZ01nclwiKSxcbnMgPSB0KFwiU2RrTWdyXCIpLFxuYyA9IHQoXCJUaW1lVXRpbHNcIiksXG5sID0gdChcIlVJVXRpbHNcIiksXG51ID0gdChcIkNvbmZpZ1wiKSxcbnAgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnBhdGggPSBcIlwiLFxuICAgIHRoaXMuZGF5U2hhcmVOdW0gPSAwLFxuICAgIHRoaXMuZGF5bGFzdFNoYXJlVGltZSA9IC0xXG59LFxuZyA9IGZ1bmN0aW9uKHQpIHtcbiAgICBmdW5jdGlvbiBlKCkge1xuICAgICAgICB2YXIgZSA9IG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIHJldHVybiBlLmdhbWVLZXkgPSB1LkdhbWVDb25maWcuQXBwQ2FjaGVOYW1lICsgXCJzaGFyZURhdGFcIixcbiAgICAgICAgZS50aW1lVG90YWxTdG9wID0gMTUsXG4gICAgICAgIGUubmVlZFJlY29yZFZpZGVvID0gITAsXG4gICAgICAgIGUucmVjb3JkVGltZSA9IDAsXG4gICAgICAgIGUuY2FuU2hhcmUgPSAhMSxcbiAgICAgICAgZS5pc1N0YXJ0ID0gITEsXG4gICAgICAgIGUuaXNQYXVzZSA9ICExLFxuICAgICAgICBlLmlzU3RvcCA9ICExLFxuICAgICAgICBlXG4gICAgfVxuICAgIHJldHVybiBpKGUsIHQpLFxuICAgIGUucHJvdG90eXBlLmNyZWF0ZURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSA9IG5ldyBwLFxuICAgICAgICB0aGlzLmRhdGFcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmluaXREYXRhID0gZnVuY3Rpb24odCkge1xuICAgICAgICB0IHx8IC0xICE9IHRoaXMuZGF0YS5kYXlsYXN0U2hhcmVUaW1lICYmIChjLlRpbWVVdGlscy5jb21wYXJlSXNUb2RheSh0aGlzLmRhdGEuZGF5bGFzdFNoYXJlVGltZSkgfHwgKHRoaXMuZGF0YS5kYXlsYXN0U2hhcmVUaW1lID0gLTEsIHRoaXMuZGF0YS5kYXlTaGFyZU51bSA9IDAsIHRoaXMuc2F2ZURhdGEoKSkpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5zdGFydFJlY29yZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLm5lZWRSZWNvcmRWaWRlbyAmJiAobi5Mb2dNZ3IuZ2V0SW5zdGFuY2UoKS5kZWJ1ZyhcIuW8gOWni+W9leWxj1wiKSwgdGhpcy5pc1N0YXJ0ID0gITAsIHRoaXMuaXNQYXVzZSA9ICExLCBzLlNka01nci5nZXRJbnN0YW5jZSgpLnJlY29yZFNjcmVlbigpLCB0aGlzLm5lZWRSZWNvcmRWaWRlbyA9ICExLCB0aGlzLmNhblNoYXJlID0gITEsIGwuVUlVdGlscy5zY2hlZHVsZSh0aGlzLnNlY29uZFVwZGF0ZSwgdGhpcywgMSksIHRoaXMuZGF0YS5wYXRoID0gXCJcIiwgdGhpcy5zYXZlRGF0YSgpKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUucGxheVJlY29yZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmlzU3RhcnQgPyB0aGlzLmlzUGF1c2UgPyB0aGlzLnJlc3RhcnRSZWNvcmQoKSA6IHRoaXMucGF1c2VSZWNvcmQoKSA6IHRoaXMuc3RhcnRSZWNvcmQoKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUucGF1c2VSZWNvcmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5pc1N0YXJ0ICYmIChzLlNka01nci5nZXRJbnN0YW5jZSgpLnBhdXNlUmVjb3JkKCksIHRoaXMuaXNQYXVzZSA9ICEwLCBuLkxvZ01nci5nZXRJbnN0YW5jZSgpLmRlYnVnKFwi5pqC5YGc5b2V5bGPXCIpKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUucmVzdGFydFJlY29yZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmlzUGF1c2UgJiYgKHRoaXMuaXNQYXVzZSA9ICExLCBzLlNka01nci5nZXRJbnN0YW5jZSgpLnJlc3RhcnRSZWNvcmQoKSwgbi5Mb2dNZ3IuZ2V0SW5zdGFuY2UoKS5kZWJ1ZyhcIumHjeaWsOW9leWxj1wiKSlcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnN0b3BSZWNvcmQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHZhciBvID0gdGhpcztcbiAgICAgICAgdGhpcy5yZWNvcmRUaW1lIDw9IDAgfHwgKG4uTG9nTWdyLmdldEluc3RhbmNlKCkuZGVidWcoXCLlgZzmraLlvZXlsY9cIiksIGwuVUlVdGlscy51blNjaGVkdWxlKHRoaXMuc2Vjb25kVXBkYXRlLCB0aGlzKSwgdGhpcy5pc1N0YXJ0ID0gITEsIHRoaXMuaXNQYXVzZSA9ICExLCBzLlNka01nci5nZXRJbnN0YW5jZSgpLnN0b3BSZWNvcmQodCxcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgby5kYXRhLnBhdGggPSB0LFxuICAgICAgICAgICAgby5yZWNvcmRUaW1lID49IDE1ICYmIChvLmNhblNoYXJlID0gITApLFxuICAgICAgICAgICAgby5pc1N0b3AgPSAhMCxcbiAgICAgICAgICAgIG8ucmVjb3JkVGltZSA9IDAsXG4gICAgICAgICAgICBvLnNhdmVEYXRhKCksXG4gICAgICAgICAgICBlICYmIGUoKVxuICAgICAgICB9KSlcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmdldFNoYXJlUGF0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnBhdGhcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLmdldENhblNoYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlY29yZFRpbWUgPj0gMTUgfHwgdGhpcy5jYW5TaGFyZVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuZ2V0UmVjb3JkVGltZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWNvcmRUaW1lXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS50b1NoYXJlID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB2YXIgbyA9IHRoaXM7XG4gICAgICAgIHMuU2RrTWdyLmdldEluc3RhbmNlKCkuc2hhcmUodGhpcy5kYXRhLnBhdGgsXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgby5kYXRhLnBhdGggPSBcIlwiLFxuICAgICAgICAgICAgdCAmJiBvLmRhdGEuZGF5U2hhcmVOdW0rKyxcbiAgICAgICAgICAgIG8ubmVlZFJlY29yZFZpZGVvID0gITAsXG4gICAgICAgICAgICBvLmNhblNoYXJlID0gITEsXG4gICAgICAgICAgICBvLmlzU3RvcCA9ICExLFxuICAgICAgICAgICAgby5jbGVhckRhdGEoKSxcbiAgICAgICAgICAgIG8uc2F2ZURhdGEoKSxcbiAgICAgICAgICAgIGUgJiYgZSgpXG4gICAgICAgIH0pXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5nZXRUb2RheUNhblNoYXJlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAhIDBcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLnNlY29uZFVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmlzUGF1c2UgfHwgKHRoaXMucmVjb3JkVGltZSsrLCB0aGlzLnJlY29yZFRpbWUgPj0gMjkwICYmIHRoaXMuc3RvcFJlY29yZCghMSkpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5jaGVja1N0b3AgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzU3RvcCA/ICh0ICYmIHQoKSwgITApIDogKHRoaXMucmVjb3JkVGltZSA+PSB0aGlzLnRpbWVUb3RhbFN0b3AgfHwgdGhpcy5yZWNvcmRUaW1lID49IDI5MCkgJiYgKHRoaXMuc3RvcFJlY29yZCghMSwgdCksICEwKVxuICAgIH0sXG4gICAgZS5wcm90b3R5cGUuY2xlYXJEYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wID0gITEsXG4gICAgICAgIHRoaXMuaXNTdGFydCA9ICExLFxuICAgICAgICB0aGlzLm5lZWRSZWNvcmRWaWRlbyA9ICEwLFxuICAgICAgICB0aGlzLmRhdGEucGF0aCA9IFwiXCIsXG4gICAgICAgIHRoaXMucmVjb3JkVGltZSA9IDAsXG4gICAgICAgIHRoaXMuc2F2ZURhdGEoKVxuICAgIH0sXG4gICAgZVxufSAoci5CYXNlRGF0YSk7XG5vLlNoYXJlRGF0YSA9IGciXX0=