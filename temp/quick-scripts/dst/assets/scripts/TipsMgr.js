
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/TipsMgr.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'b3b51Syzj5GG53lIaXh40+A', 'TipsMgr');
// scripts/TipsMgr.js

"use strict";

var t = require;
var e = module;
var o = exports;
Object.defineProperty(o, "__esModule", {
  value: !0
}), o.TipsData = void 0;

var a = t("PoolMgr"),
    i = t("ResourceMgr"),
    r = t("TweenMgr"),
    n = t("Utils"),
    s = t("DataMgr"),
    c = t("PlayerMgr"),
    l = t("RoleMgr"),
    u = function () {
  function t() {
    this.curTipsList = [], this.isExistTips = !1;
  }

  return t.getInstance = function () {
    return null == this.instance && (this.instance = new t()), this.instance;
  }, t.prototype.addTipsToTipsList = function (t, e, o, a) {
    var i = {
      type: t,
      parent: e,
      position: cc.Vec3.ZERO,
      id: o,
      count: a
    };
    this.isExistTips ? this.curTipsList.push(i) : (this.isExistTips = !0, 0 == i.type ? this.labTipsChangeFetter(i) : 1 == i.type && this.labTipsChangeSkillBook(i));
  }, t.prototype.againPlayTips = function () {
    if (this.curTipsList.length > 0 && !this.isExistTips) {
      var t = this.curTipsList[0];
      this.curTipsList.splice(0, 1), this.isExistTips = !0, 0 == t.type ? this.labTipsChangeFetter(t) : 1 == t.type && this.labTipsChangeSkillBook(t);
    }
  }, t.prototype.playTips = function (t, e, o) {
    var r = this,
        n = a.PoolMgr.getInstance().getNode("NodeTips");
    n ? (n.parent = t, n.active = !0, n.position = e, n.getChildByName("LayoutTips").active = !0, n.getChildByName("NodeFightUpTips").active = !1, n.getChildByName("LayoutTips").getChildByName("LabTips").getComponent(cc.RichText).string = o, this.tipsEff(n)) : i.ResourceMgr.getInstance().loadRes("prefabs", "widget/NodeTips", cc.Prefab, function (a) {
      (n = cc.instantiate(a)).active = !0, n.getChildByName("LayoutTips").active = !0, n.getChildByName("NodeFightUpTips").active = !1, n.parent = t, n.position = e, n.getChildByName("LayoutTips").getChildByName("LabTips").getComponent(cc.RichText).string = o, r.tipsEff(n);
    });
  }, t.prototype.tipsEff = function (t) {
    var e = this;
    cc.isValid(t) && (t.opacity = 255, cc.tween(t).by(1, {
      y: 10
    }).delay(1).parallel(cc.tween().by(1, {
      y: 10
    }), cc.tween().to(1, {
      opacity: 0
    })).call(function () {
      e.isExistTips = !1, e.tipsPool("NodeTips", t), e.againPlayTips();
    }).start());
  }, t.prototype.tipsPool = function (t, e) {
    cc.isValid(e) && a.PoolMgr.getInstance().freeNode(t, e);
  }, t.prototype.labTipsChangeSkillBook = function (t) {
    if (2 === t.count || 3 === t.count) {
      var e = s.DataMgr.getInstance().getSkillBook(t.id),
          o = c.PlayerMgr.getInstance().geUserData().getSkillBookForId(e.id),
          a = s.DataMgr.getInstance().getSkillBookLevelCfg1(e.StartLevelID, o.level),
          i = n.Utils.getTabelArr(a["addProp" + t.count]),
          r = n.Utils.getTabelArr(a["starProp" + t.count]),
          l = "" + a.skillBookDec;
      l = l.replace("%s", "<color = #fce445 >" + i[1] + "</color>");
      var u = "" + a["skillBookDec" + t.count + "Star"],
          p = r[1];
      0 == Number(r[0]) && (p = e.name), u = u.replace("%s", "<color = #fce445 >" + p + "</color>");
      var g = e.name + "<color = #fce445 >升至" + t.count + "星</color>，" + l + "\n" + u;
      this.playTips(t.parent, cc.v3(0, -100, 0), g);
    }
  }, t.prototype.labTipsChangeFetter = function (t) {
    var e = s.DataMgr.getInstance().getFetter(t.id),
        o = n.Utils.getTabelArr(e.fetterCount),
        a = n.Utils.getTabelArr(e.fetterFun),
        i = "" + e.fetterDec;
    i = i.replace("%s", "" + a[t.count - 1]);
    var r = "获得新羁绊 <color = #fce445 >" + e.name + ">" + o[t.count - 1] + "</color>\n<color = #fce445 >" + i + "</color>";
    this.playTips(t.parent, cc.v3(0, -100, 0), r);
  }, t.prototype.resetData = function () {
    this.isExistTips = !1, this.curTipsList = [];
  }, t.prototype.playFightnChangTips = function (t, e, o, r) {
    var n = this,
        s = a.PoolMgr.getInstance().getNode("NodeTips");
    s ? this.loadFightTipInfo(s, t, e, o, r) : i.ResourceMgr.getInstance().loadRes("prefabs", "widget/NodeTips", cc.Prefab, function (a) {
      s = cc.instantiate(a), n.loadFightTipInfo(s, t, e, o, r);
    });
  }, t.prototype.loadFightTipInfo = function (t, e, o, a, i) {
    var n = this,
        s = i - a > 0;
    t.parent = e, t.active = !0, t.position = o, t.getChildByName("LayoutTips").active = !1;
    var c = t.getChildByName("NodeFightUpTips");
    c.active = !0;
    var l = c.getChildByName("NodeFight"),
        u = l.getChildByName("LabFightNum");
    u.getComponent(cc.Label).string = "" + a;
    var p = l.getChildByName("NodeUp");
    p.x = u.x + u.getContentSize().width + 30, p.getChildByName("LabUp").getComponent(cc.Label).string = "" + Math.abs(i - a), p.getChildByName("LabUp").color = s ? cc.color(76, 220, 47) : cc.color(255, 0, 0), p.getChildByName("SpUp").active = s, p.getChildByName("SpDown").active = !s, c.getComponent(cc.Animation).on(cc.Animation.EventType.FINISHED, function () {
      n.animMove(p, function () {
        r.TweenMgr.getInstance().rollLabAnim(s, l.getChildByName("LabFightNum").getComponent(cc.Label), a, i, function () {
          setTimeout(function () {
            cc.isValid(t) && n.tipsPool("NodeTips", t);
          }, 500);
        });
      });
    });
  }, t.prototype.animMove = function (t, e) {
    cc.isValid(t) && (t.opacity = 255, cc.tween(t).delay(1).parallel(cc.tween().to(.5, {
      x: 30
    }), cc.tween().to(.5, {
      opacity: 0
    })).call(function () {
      e && e();
    }).start());
  }, t.prototype.playFightTips = function (e) {
    var o = l["default"].getInstance().curFightNumForPlayer,
        a = l["default"].getInstance().getPlayerFightNum();
    o != a && t.getInstance().playFightnChangTips(e, cc.v3(0, 450), o, a);
  }, t;
}();

o["default"] = u;

o.TipsData = function () {};

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcVGlwc01nci5qcyJdLCJuYW1lcyI6WyJ0IiwicmVxdWlyZSIsImUiLCJtb2R1bGUiLCJvIiwiZXhwb3J0cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJUaXBzRGF0YSIsImEiLCJpIiwiciIsIm4iLCJzIiwiYyIsImwiLCJ1IiwiY3VyVGlwc0xpc3QiLCJpc0V4aXN0VGlwcyIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UiLCJwcm90b3R5cGUiLCJhZGRUaXBzVG9UaXBzTGlzdCIsInR5cGUiLCJwYXJlbnQiLCJwb3NpdGlvbiIsImNjIiwiVmVjMyIsIlpFUk8iLCJpZCIsImNvdW50IiwicHVzaCIsImxhYlRpcHNDaGFuZ2VGZXR0ZXIiLCJsYWJUaXBzQ2hhbmdlU2tpbGxCb29rIiwiYWdhaW5QbGF5VGlwcyIsImxlbmd0aCIsInNwbGljZSIsInBsYXlUaXBzIiwiUG9vbE1nciIsImdldE5vZGUiLCJhY3RpdmUiLCJnZXRDaGlsZEJ5TmFtZSIsImdldENvbXBvbmVudCIsIlJpY2hUZXh0Iiwic3RyaW5nIiwidGlwc0VmZiIsIlJlc291cmNlTWdyIiwibG9hZFJlcyIsIlByZWZhYiIsImluc3RhbnRpYXRlIiwiaXNWYWxpZCIsIm9wYWNpdHkiLCJ0d2VlbiIsImJ5IiwieSIsImRlbGF5IiwicGFyYWxsZWwiLCJ0byIsImNhbGwiLCJ0aXBzUG9vbCIsInN0YXJ0IiwiZnJlZU5vZGUiLCJEYXRhTWdyIiwiZ2V0U2tpbGxCb29rIiwiUGxheWVyTWdyIiwiZ2VVc2VyRGF0YSIsImdldFNraWxsQm9va0ZvcklkIiwiZ2V0U2tpbGxCb29rTGV2ZWxDZmcxIiwiU3RhcnRMZXZlbElEIiwibGV2ZWwiLCJVdGlscyIsImdldFRhYmVsQXJyIiwic2tpbGxCb29rRGVjIiwicmVwbGFjZSIsInAiLCJOdW1iZXIiLCJuYW1lIiwiZyIsInYzIiwiZ2V0RmV0dGVyIiwiZmV0dGVyQ291bnQiLCJmZXR0ZXJGdW4iLCJmZXR0ZXJEZWMiLCJyZXNldERhdGEiLCJwbGF5RmlnaHRuQ2hhbmdUaXBzIiwibG9hZEZpZ2h0VGlwSW5mbyIsIkxhYmVsIiwieCIsImdldENvbnRlbnRTaXplIiwid2lkdGgiLCJNYXRoIiwiYWJzIiwiY29sb3IiLCJBbmltYXRpb24iLCJvbiIsIkV2ZW50VHlwZSIsIkZJTklTSEVEIiwiYW5pbU1vdmUiLCJUd2Vlbk1nciIsInJvbGxMYWJBbmltIiwic2V0VGltZW91dCIsInBsYXlGaWdodFRpcHMiLCJjdXJGaWdodE51bUZvclBsYXllciIsImdldFBsYXllckZpZ2h0TnVtIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUMsR0FBR0MsT0FBUjtBQUNBLElBQUlDLENBQUMsR0FBR0MsTUFBUjtBQUNBLElBQUlDLENBQUMsR0FBR0MsT0FBUjtBQUNBQyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JILENBQXRCLEVBQXlCLFlBQXpCLEVBQXVDO0VBQ25DSSxLQUFLLEVBQUUsQ0FBQztBQUQyQixDQUF2QyxHQUdBSixDQUFDLENBQUNLLFFBQUYsR0FBYSxLQUFLLENBSGxCOztBQUlBLElBQUlDLENBQUMsR0FBR1YsQ0FBQyxDQUFDLFNBQUQsQ0FBVDtBQUFBLElBQ0FXLENBQUMsR0FBR1gsQ0FBQyxDQUFDLGFBQUQsQ0FETDtBQUFBLElBRUFZLENBQUMsR0FBR1osQ0FBQyxDQUFDLFVBQUQsQ0FGTDtBQUFBLElBR0FhLENBQUMsR0FBR2IsQ0FBQyxDQUFDLE9BQUQsQ0FITDtBQUFBLElBSUFjLENBQUMsR0FBR2QsQ0FBQyxDQUFDLFNBQUQsQ0FKTDtBQUFBLElBS0FlLENBQUMsR0FBR2YsQ0FBQyxDQUFDLFdBQUQsQ0FMTDtBQUFBLElBTUFnQixDQUFDLEdBQUdoQixDQUFDLENBQUMsU0FBRCxDQU5MO0FBQUEsSUFPQWlCLENBQUMsR0FBRyxZQUFXO0VBQ1gsU0FBU2pCLENBQVQsR0FBYTtJQUNULEtBQUtrQixXQUFMLEdBQW1CLEVBQW5CLEVBQ0EsS0FBS0MsV0FBTCxHQUFtQixDQUFD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LEtBQUgsR0FBV0ssRUFBWCxDQUFjLEVBQWQsRUFBa0I7TUFDbEJOLE9BQU8sRUFBRTtJQURTLENBQWxCLENBRitCLEVBSS9CTyxJQUorQixDQUkxQixZQUFXO01BQ2hCekQsQ0FBQyxJQUFJQSxDQUFDLEVBQU47SUFDSCxDQU5rQyxFQU1oQzJELEtBTmdDLEVBQW5DO0VBT0gsQ0FuSU0sRUFvSVA3RCxDQUFDLENBQUNzQixTQUFGLENBQVlnRixhQUFaLEdBQTRCLFVBQVNwRyxDQUFULEVBQVk7SUFDcEMsSUFBSUUsQ0FBQyxHQUFHWSxDQUFDLFdBQUQsQ0FBVUksV0FBVixHQUF3Qm1GLG9CQUFoQztJQUFBLElBQ0E3RixDQUFDLEdBQUdNLENBQUMsV0FBRCxDQUFVSSxXQUFWLEdBQXdCb0YsaUJBQXhCLEVBREo7SUFFQXBHLENBQUMsSUFBSU0sQ0FBTCxJQUFVVixDQUFDLENBQUNvQixXQUFGLEdBQWdCaUUsbUJBQWhCLENBQW9DbkYsQ0FBcEMsRUFBdUN5QixFQUFFLENBQUNvRCxFQUFILENBQU0sQ0FBTixFQUFTLEdBQVQsQ0FBdkMsRUFBc0QzRSxDQUF0RCxFQUF5RE0sQ0FBekQsQ0FBVjtFQUNILENBeElNLEVBeUlQVixDQXpJQTtBQTBJSCxDQS9JRyxFQVBKOztBQXVKQUksQ0FBQyxXQUFELEdBQVlhLENBQVo7O0FBQ0FiLENBQUMsQ0FBQ0ssUUFBRixHQUFhLFlBQVcsQ0FBRSxDQUExQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHQgPSByZXF1aXJlO1xudmFyIGUgPSBtb2R1bGU7XG52YXIgbyA9IGV4cG9ydHM7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogITBcbn0pLFxuby5UaXBzRGF0YSA9IHZvaWQgMDtcbnZhciBhID0gdChcIlBvb2xNZ3JcIiksXG5pID0gdChcIlJlc291cmNlTWdyXCIpLFxuciA9IHQoXCJUd2Vlbk1nclwiKSxcbm4gPSB0KFwiVXRpbHNcIiksXG5zID0gdChcIkRhdGFNZ3JcIiksXG5jID0gdChcIlBsYXllck1nclwiKSxcbmwgPSB0KFwiUm9sZU1nclwiKSxcbnUgPSBmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICB0aGlzLmN1clRpcHNMaXN0ID0gW10sXG4gICAgICAgIHRoaXMuaXNFeGlzdFRpcHMgPSAhMVxuICAgIH1cbiAgICByZXR1cm4gdC5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmluc3RhbmNlICYmICh0aGlzLmluc3RhbmNlID0gbmV3IHQpLFxuICAgICAgICB0aGlzLmluc3RhbmNlXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5hZGRUaXBzVG9UaXBzTGlzdCA9IGZ1bmN0aW9uKHQsIGUsIG8sIGEpIHtcbiAgICAgICAgdmFyIGkgPSB7XG4gICAgICAgICAgICB0eXBlOiB0LFxuICAgICAgICAgICAgcGFyZW50OiBlLFxuICAgICAgICAgICAgcG9zaXRpb246IGNjLlZlYzMuWkVSTyxcbiAgICAgICAgICAgIGlkOiBvLFxuICAgICAgICAgICAgY291bnQ6IGFcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc0V4aXN0VGlwcyA/IHRoaXMuY3VyVGlwc0xpc3QucHVzaChpKSA6ICh0aGlzLmlzRXhpc3RUaXBzID0gITAsIDAgPT0gaS50eXBlID8gdGhpcy5sYWJUaXBzQ2hhbmdlRmV0dGVyKGkpIDogMSA9PSBpLnR5cGUgJiYgdGhpcy5sYWJUaXBzQ2hhbmdlU2tpbGxCb29rKGkpKVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUuYWdhaW5QbGF5VGlwcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJUaXBzTGlzdC5sZW5ndGggPiAwICYmICF0aGlzLmlzRXhpc3RUaXBzKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuY3VyVGlwc0xpc3RbMF07XG4gICAgICAgICAgICB0aGlzLmN1clRpcHNMaXN0LnNwbGljZSgwLCAxKSxcbiAgICAgICAgICAgIHRoaXMuaXNFeGlzdFRpcHMgPSAhMCxcbiAgICAgICAgICAgIDAgPT0gdC50eXBlID8gdGhpcy5sYWJUaXBzQ2hhbmdlRmV0dGVyKHQpIDogMSA9PSB0LnR5cGUgJiYgdGhpcy5sYWJUaXBzQ2hhbmdlU2tpbGxCb29rKHQpXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHQucHJvdG90eXBlLnBsYXlUaXBzID0gZnVuY3Rpb24odCwgZSwgbykge1xuICAgICAgICB2YXIgciA9IHRoaXMsXG4gICAgICAgIG4gPSBhLlBvb2xNZ3IuZ2V0SW5zdGFuY2UoKS5nZXROb2RlKFwiTm9kZVRpcHNcIik7XG4gICAgICAgIG4gPyAobi5wYXJlbnQgPSB0LCBuLmFjdGl2ZSA9ICEwLCBuLnBvc2l0aW9uID0gZSwgbi5nZXRDaGlsZEJ5TmFtZShcIkxheW91dFRpcHNcIikuYWN0aXZlID0gITAsIG4uZ2V0Q2hpbGRCeU5hbWUoXCJOb2RlRmlnaHRVcFRpcHNcIikuYWN0aXZlID0gITEsIG4uZ2V0Q2hpbGRCeU5hbWUoXCJMYXlvdXRUaXBzXCIpLmdldENoaWxkQnlOYW1lKFwiTGFiVGlwc1wiKS5nZXRDb21wb25lbnQoY2MuUmljaFRleHQpLnN0cmluZyA9IG8sIHRoaXMudGlwc0VmZihuKSkgOiBpLlJlc291cmNlTWdyLmdldEluc3RhbmNlKCkubG9hZFJlcyhcInByZWZhYnNcIiwgXCJ3aWRnZXQvTm9kZVRpcHNcIiwgY2MuUHJlZmFiLFxuICAgICAgICBmdW5jdGlvbihhKSB7IChuID0gY2MuaW5zdGFudGlhdGUoYSkpLmFjdGl2ZSA9ICEwLFxuICAgICAgICAgICAgbi5nZXRDaGlsZEJ5TmFtZShcIkxheW91dFRpcHNcIikuYWN0aXZlID0gITAsXG4gICAgICAgICAgICBuLmdldENoaWxkQnlOYW1lKFwiTm9kZUZpZ2h0VXBUaXBzXCIpLmFjdGl2ZSA9ICExLFxuICAgICAgICAgICAgbi5wYXJlbnQgPSB0LFxuICAgICAgICAgICAgbi5wb3NpdGlvbiA9IGUsXG4gICAgICAgICAgICBuLmdldENoaWxkQnlOYW1lKFwiTGF5b3V0VGlwc1wiKS5nZXRDaGlsZEJ5TmFtZShcIkxhYlRpcHNcIikuZ2V0Q29tcG9uZW50KGNjLlJpY2hUZXh0KS5zdHJpbmcgPSBvLFxuICAgICAgICAgICAgci50aXBzRWZmKG4pXG4gICAgICAgIH0pXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS50aXBzRWZmID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIGNjLmlzVmFsaWQodCkgJiYgKHQub3BhY2l0eSA9IDI1NSwgY2MudHdlZW4odCkuYnkoMSwge1xuICAgICAgICAgICAgeTogMTBcbiAgICAgICAgfSkuZGVsYXkoMSkucGFyYWxsZWwoY2MudHdlZW4oKS5ieSgxLCB7XG4gICAgICAgICAgICB5OiAxMFxuICAgICAgICB9KSwgY2MudHdlZW4oKS50bygxLCB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0pKS5jYWxsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZS5pc0V4aXN0VGlwcyA9ICExLFxuICAgICAgICAgICAgZS50aXBzUG9vbChcIk5vZGVUaXBzXCIsIHQpLFxuICAgICAgICAgICAgZS5hZ2FpblBsYXlUaXBzKClcbiAgICAgICAgfSkuc3RhcnQoKSlcbiAgICB9LFxuICAgIHQucHJvdG90eXBlLnRpcHNQb29sID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjYy5pc1ZhbGlkKGUpICYmIGEuUG9vbE1nci5nZXRJbnN0YW5jZSgpLmZyZWVOb2RlKHQsIGUpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5sYWJUaXBzQ2hhbmdlU2tpbGxCb29rID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMiA9PT0gdC5jb3VudCB8fCAzID09PSB0LmNvdW50KSB7XG4gICAgICAgICAgICB2YXIgZSA9IHMuRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldFNraWxsQm9vayh0LmlkKSxcbiAgICAgICAgICAgIG8gPSBjLlBsYXllck1nci5nZXRJbnN0YW5jZSgpLmdlVXNlckRhdGEoKS5nZXRTa2lsbEJvb2tGb3JJZChlLmlkKSxcbiAgICAgICAgICAgIGEgPSBzLkRhdGFNZ3IuZ2V0SW5zdGFuY2UoKS5nZXRTa2lsbEJvb2tMZXZlbENmZzEoZS5TdGFydExldmVsSUQsIG8ubGV2ZWwpLFxuICAgICAgICAgICAgaSA9IG4uVXRpbHMuZ2V0VGFiZWxBcnIoYVtcImFkZFByb3BcIiArIHQuY291bnRdKSxcbiAgICAgICAgICAgIHIgPSBuLlV0aWxzLmdldFRhYmVsQXJyKGFbXCJzdGFyUHJvcFwiICsgdC5jb3VudF0pLFxuICAgICAgICAgICAgbCA9IFwiXCIgKyBhLnNraWxsQm9va0RlYztcbiAgICAgICAgICAgIGwgPSBsLnJlcGxhY2UoXCIlc1wiLCBcIjxjb2xvciA9ICNmY2U0NDUgPlwiICsgaVsxXSArIFwiPC9jb2xvcj5cIik7XG4gICAgICAgICAgICB2YXIgdSA9IFwiXCIgKyBhW1wic2tpbGxCb29rRGVjXCIgKyB0LmNvdW50ICsgXCJTdGFyXCJdLFxuICAgICAgICAgICAgcCA9IHJbMV07XG4gICAgICAgICAgICAwID09IE51bWJlcihyWzBdKSAmJiAocCA9IGUubmFtZSksXG4gICAgICAgICAgICB1ID0gdS5yZXBsYWNlKFwiJXNcIiwgXCI8Y29sb3IgPSAjZmNlNDQ1ID5cIiArIHAgKyBcIjwvY29sb3I+XCIpO1xuICAgICAgICAgICAgdmFyIGcgPSBlLm5hbWUgKyBcIjxjb2xvciA9ICNmY2U0NDUgPuWNh+iHs1wiICsgdC5jb3VudCArIFwi5pifPC9jb2xvcj7vvIxcIiArIGwgKyBcIlxcblwiICsgdTtcbiAgICAgICAgICAgIHRoaXMucGxheVRpcHModC5wYXJlbnQsIGNjLnYzKDAsIC0xMDAsIDApLCBnKVxuICAgICAgICB9XG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5sYWJUaXBzQ2hhbmdlRmV0dGVyID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgZSA9IHMuRGF0YU1nci5nZXRJbnN0YW5jZSgpLmdldEZldHRlcih0LmlkKSxcbiAgICAgICAgbyA9IG4uVXRpbHMuZ2V0VGFiZWxBcnIoZS5mZXR0ZXJDb3VudCksXG4gICAgICAgIGEgPSBuLlV0aWxzLmdldFRhYmVsQXJyKGUuZmV0dGVyRnVuKSxcbiAgICAgICAgaSA9IFwiXCIgKyBlLmZldHRlckRlYztcbiAgICAgICAgaSA9IGkucmVwbGFjZShcIiVzXCIsIFwiXCIgKyBhW3QuY291bnQgLSAxXSk7XG4gICAgICAgIHZhciByID0gXCLojrflvpfmlrDnvoHnu4ogPGNvbG9yID0gI2ZjZTQ0NSA+XCIgKyBlLm5hbWUgKyBcIj5cIiArIG9bdC5jb3VudCAtIDFdICsgXCI8L2NvbG9yPlxcbjxjb2xvciA9ICNmY2U0NDUgPlwiICsgaSArIFwiPC9jb2xvcj5cIjtcbiAgICAgICAgdGhpcy5wbGF5VGlwcyh0LnBhcmVudCwgY2MudjMoMCwgLTEwMCwgMCksIHIpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5yZXNldERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5pc0V4aXN0VGlwcyA9ICExLFxuICAgICAgICB0aGlzLmN1clRpcHNMaXN0ID0gW11cbiAgICB9LFxuICAgIHQucHJvdG90eXBlLnBsYXlGaWdodG5DaGFuZ1RpcHMgPSBmdW5jdGlvbih0LCBlLCBvLCByKSB7XG4gICAgICAgIHZhciBuID0gdGhpcyxcbiAgICAgICAgcyA9IGEuUG9vbE1nci5nZXRJbnN0YW5jZSgpLmdldE5vZGUoXCJOb2RlVGlwc1wiKTtcbiAgICAgICAgcyA/IHRoaXMubG9hZEZpZ2h0VGlwSW5mbyhzLCB0LCBlLCBvLCByKSA6IGkuUmVzb3VyY2VNZ3IuZ2V0SW5zdGFuY2UoKS5sb2FkUmVzKFwicHJlZmFic1wiLCBcIndpZGdldC9Ob2RlVGlwc1wiLCBjYy5QcmVmYWIsXG4gICAgICAgIGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHMgPSBjYy5pbnN0YW50aWF0ZShhKSxcbiAgICAgICAgICAgIG4ubG9hZEZpZ2h0VGlwSW5mbyhzLCB0LCBlLCBvLCByKVxuICAgICAgICB9KVxuICAgIH0sXG4gICAgdC5wcm90b3R5cGUubG9hZEZpZ2h0VGlwSW5mbyA9IGZ1bmN0aW9uKHQsIGUsIG8sIGEsIGkpIHtcbiAgICAgICAgdmFyIG4gPSB0aGlzLFxuICAgICAgICBzID0gaSAtIGEgPiAwO1xuICAgICAgICB0LnBhcmVudCA9IGUsXG4gICAgICAgIHQuYWN0aXZlID0gITAsXG4gICAgICAgIHQucG9zaXRpb24gPSBvLFxuICAgICAgICB0LmdldENoaWxkQnlOYW1lKFwiTGF5b3V0VGlwc1wiKS5hY3RpdmUgPSAhMTtcbiAgICAgICAgdmFyIGMgPSB0LmdldENoaWxkQnlOYW1lKFwiTm9kZUZpZ2h0VXBUaXBzXCIpO1xuICAgICAgICBjLmFjdGl2ZSA9ICEwO1xuICAgICAgICB2YXIgbCA9IGMuZ2V0Q2hpbGRCeU5hbWUoXCJOb2RlRmlnaHRcIiksXG4gICAgICAgIHUgPSBsLmdldENoaWxkQnlOYW1lKFwiTGFiRmlnaHROdW1cIik7XG4gICAgICAgIHUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBcIlwiICsgYTtcbiAgICAgICAgdmFyIHAgPSBsLmdldENoaWxkQnlOYW1lKFwiTm9kZVVwXCIpO1xuICAgICAgICBwLnggPSB1LnggKyB1LmdldENvbnRlbnRTaXplKCkud2lkdGggKyAzMCxcbiAgICAgICAgcC5nZXRDaGlsZEJ5TmFtZShcIkxhYlVwXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gXCJcIiArIE1hdGguYWJzKGkgLSBhKSxcbiAgICAgICAgcC5nZXRDaGlsZEJ5TmFtZShcIkxhYlVwXCIpLmNvbG9yID0gcyA/IGNjLmNvbG9yKDc2LCAyMjAsIDQ3KSA6IGNjLmNvbG9yKDI1NSwgMCwgMCksXG4gICAgICAgIHAuZ2V0Q2hpbGRCeU5hbWUoXCJTcFVwXCIpLmFjdGl2ZSA9IHMsXG4gICAgICAgIHAuZ2V0Q2hpbGRCeU5hbWUoXCJTcERvd25cIikuYWN0aXZlID0gIXMsXG4gICAgICAgIGMuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbikub24oY2MuQW5pbWF0aW9uLkV2ZW50VHlwZS5GSU5JU0hFRCxcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuLmFuaW1Nb3ZlKHAsXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByLlR3ZWVuTWdyLmdldEluc3RhbmNlKCkucm9sbExhYkFuaW0ocywgbC5nZXRDaGlsZEJ5TmFtZShcIkxhYkZpZ2h0TnVtXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCksIGEsIGksXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5pc1ZhbGlkKHQpICYmIG4udGlwc1Bvb2woXCJOb2RlVGlwc1wiLCB0KVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICA1MDApXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5hbmltTW92ZSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY2MuaXNWYWxpZCh0KSAmJiAodC5vcGFjaXR5ID0gMjU1LCBjYy50d2Vlbih0KS5kZWxheSgxKS5wYXJhbGxlbChjYy50d2VlbigpLnRvKC41LCB7XG4gICAgICAgICAgICB4OiAzMFxuICAgICAgICB9KSwgY2MudHdlZW4oKS50byguNSwge1xuICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICB9KSkuY2FsbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGUgJiYgZSgpXG4gICAgICAgIH0pLnN0YXJ0KCkpXG4gICAgfSxcbiAgICB0LnByb3RvdHlwZS5wbGF5RmlnaHRUaXBzID0gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgbyA9IGwuZGVmYXVsdC5nZXRJbnN0YW5jZSgpLmN1ckZpZ2h0TnVtRm9yUGxheWVyLFxuICAgICAgICBhID0gbC5kZWZhdWx0LmdldEluc3RhbmNlKCkuZ2V0UGxheWVyRmlnaHROdW0oKTtcbiAgICAgICAgbyAhPSBhICYmIHQuZ2V0SW5zdGFuY2UoKS5wbGF5RmlnaHRuQ2hhbmdUaXBzKGUsIGNjLnYzKDAsIDQ1MCksIG8sIGEpXG4gICAgfSxcbiAgICB0XG59ICgpO1xuby5kZWZhdWx0ID0gdTtcbm8uVGlwc0RhdGEgPSBmdW5jdGlvbigpIHt9Il19