
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/BaseButton.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '08526eaTJpCXYM9VKuRXAnP', 'BaseButton');
// scripts/BaseButton.js

"use strict";

var t = require;
var e = module;
var o = exports;

var _a,
    i = void 0 && (void 0).__extends || (_a = function a(t, e) {
  return (_a = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (t, e) {
    t.__proto__ = e;
  } || function (t, e) {
    for (var o in e) {
      Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
    }
  })(t, e);
}, function (t, e) {
  function o() {
    this.constructor = t;
  }

  _a(t, e), t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o());
}),
    r = void 0 && (void 0).__decorate || function (t, e, o, a) {
  var i,
      r = arguments.length,
      n = r < 3 ? e : null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);else for (var s = t.length - 1; s >= 0; s--) {
    (i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);
  }
  return r > 3 && n && Object.defineProperty(e, o, n), n;
};

Object.defineProperty(o, "__esModule", {
  value: !0
}), o.BaseButton = void 0;

var n = t("AudioMgr"),
    s = cc._decorator,
    c = s.ccclass,
    l = s.property,
    u = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    return e.invertTime = 1, e.touched = !1, e.touchmil = 0, e;
  }

  return i(e, t), e.prototype._onTouchBegan = function (e) {
    this.interactable && this.enabledInHierarchy && (this.touched ? this._resetState() : t.prototype._onTouchBegan.call(this, e));
  }, e.prototype._onTouchEnded = function (e) {
    if (this.interactable && this.enabledInHierarchy) {
      if (this.touched) return this.node.pauseSystemEvents(!0), void this._resetState();
      n.AudioMgr.getInstance().playAudioButtonClicked(), this.touched = !0, this.touchmil = 0, t.prototype._onTouchEnded.call(this, e);
    }
  }, e.prototype.update = function (e) {
    t.prototype.update.call(this, e), this.touched && (this.touchmil = this.touchmil + e, this.touchmil > this.invertTime && (this.touchmil = 0, this.touched = !1, this.node.resumeSystemEvents(!0)));
  }, e.prototype.onDestroy = function () {
    this.touched = !1;
  }, e.prototype.onDisable = function () {
    t.prototype.onDisable.call(this), this.touched = !1;
  }, e.prototype.onEnable = function () {
    t.prototype.onEnable.call(this), this.touched = !1;
  }, r([l], e.prototype, "invertTime", void 0), r([c], e);
}(cc.Button);

o.BaseButton = u;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQmFzZUJ1dHRvbi5qcyJdLCJuYW1lcyI6WyJ0IiwicmVxdWlyZSIsImUiLCJtb2R1bGUiLCJvIiwiZXhwb3J0cyIsImEiLCJpIiwiX19leHRlbmRzIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiciIsIl9fZGVjb3JhdGUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJuIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwicyIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJCYXNlQnV0dG9uIiwiY2MiLCJfZGVjb3JhdG9yIiwiYyIsImNjY2xhc3MiLCJsIiwicHJvcGVydHkiLCJ1IiwiYXBwbHkiLCJpbnZlcnRUaW1lIiwidG91Y2hlZCIsInRvdWNobWlsIiwiX29uVG91Y2hCZWdhbiIsImludGVyYWN0YWJsZSIsImVuYWJsZWRJbkhpZXJhcmNoeSIsIl9yZXNldFN0YXRlIiwiX29uVG91Y2hFbmRlZCIsIm5vZGUiLCJwYXVzZVN5c3RlbUV2ZW50cyIsIkF1ZGlvTWdyIiwiZ2V0SW5zdGFuY2UiLCJwbGF5QXVkaW9CdXR0b25DbGlja2VkIiwidXBkYXRlIiwicmVzdW1lU3lzdGVtRXZlbnRzIiwib25EZXN0cm95Iiwib25EaXNhYmxlIiwib25FbmFibGUiLCJCdXR0b24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBQyxHQUFHQyxPQUFSO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHQyxNQUFSO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHQyxPQUFSOztBQUNBLElBQUlDLEVBQUo7QUFBQSxJQUFPQyxDQUFDLEdBQUcsVUFBUSxTQUFLQyxTQUFiLEtBQTJCRixFQUFDLEdBQUcsV0FBU04sQ0FBVCxFQUFZRSxDQUFaLEVBQWU7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QUNBLEtBQUt3QixPQUFMLEdBQWUsQ0FBQyxDQURoQjtFQUVILENBNUJNLEVBNkJQckIsQ0FBQyxDQUFDLENBQUNnQixDQUFELENBQUQsRUFBTWhDLENBQUMsQ0FBQ1csU0FBUixFQUFtQixZQUFuQixFQUFpQyxLQUFLLENBQXRDLENBN0JNLEVBOEJQSyxDQUFDLENBQUMsQ0FBQ2MsQ0FBRCxDQUFELEVBQU05QixDQUFOLENBOUJEO0FBK0JILENBdkNHLENBdUNENEIsRUFBRSxDQUFDMEIsTUF2Q0YsQ0FKSjs7QUE0Q0FwRCxDQUFDLENBQUN5QixVQUFGLEdBQWVPLENBQWYiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0ID0gcmVxdWlyZTtcbnZhciBlID0gbW9kdWxlO1xudmFyIG8gPSBleHBvcnRzO1xudmFyIGEsIGkgPSB0aGlzICYmIHRoaXMuX19leHRlbmRzIHx8IChhID0gZnVuY3Rpb24odCwgZSkge1xuICAgIHJldHVybiAoYSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7XG4gICAgICAgIF9fcHJvdG9fXzogW11cbiAgICB9XG4gICAgaW5zdGFuY2VvZiBBcnJheSAmJlxuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgdC5fX3Byb3RvX18gPSBlXG4gICAgfSB8fFxuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yICh2YXIgbyBpbiBlKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgbykgJiYgKHRbb10gPSBlW29dKVxuICAgIH0pKHQsIGUpXG59LFxuZnVuY3Rpb24odCwgZSkge1xuICAgIGZ1bmN0aW9uIG8oKSB7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSB0XG4gICAgfVxuICAgIGEodCwgZSksXG4gICAgdC5wcm90b3R5cGUgPSBudWxsID09PSBlID8gT2JqZWN0LmNyZWF0ZShlKSA6IChvLnByb3RvdHlwZSA9IGUucHJvdG90eXBlLCBuZXcgbylcbn0pLFxuciA9IHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlIHx8XG5mdW5jdGlvbih0LCBlLCBvLCBhKSB7XG4gICAgdmFyIGksIHIgPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgIG4gPSByIDwgMyA/IGU6IG51bGwgPT09IGEgPyBhID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCBvKSA6IGE7XG4gICAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIFJlZmxlY3QgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKSBuID0gUmVmbGVjdC5kZWNvcmF0ZSh0LCBlLCBvLCBhKTtcbiAgICBlbHNlIGZvciAodmFyIHMgPSB0Lmxlbmd0aCAtIDE7IHMgPj0gMDsgcy0tKShpID0gdFtzXSkgJiYgKG4gPSAociA8IDMgPyBpKG4pIDogciA+IDMgPyBpKGUsIG8sIG4pIDogaShlLCBvKSkgfHwgbik7XG4gICAgcmV0dXJuIHIgPiAzICYmIG4gJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIG8sIG4pLFxuICAgIG5cbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogITBcbn0pLFxuby5CYXNlQnV0dG9uID0gdm9pZCAwO1xudmFyIG4gPSB0KFwiQXVkaW9NZ3JcIiksXG5zID0gY2MuX2RlY29yYXRvcixcbmMgPSBzLmNjY2xhc3MsXG5sID0gcy5wcm9wZXJ0eSxcbnUgPSBmdW5jdGlvbih0KSB7XG4gICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgdmFyIGUgPSBudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gZS5pbnZlcnRUaW1lID0gMSxcbiAgICAgICAgZS50b3VjaGVkID0gITEsXG4gICAgICAgIGUudG91Y2htaWwgPSAwLFxuICAgICAgICBlXG4gICAgfVxuICAgIHJldHVybiBpKGUsIHQpLFxuICAgIGUucHJvdG90eXBlLl9vblRvdWNoQmVnYW4gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHRoaXMuaW50ZXJhY3RhYmxlICYmIHRoaXMuZW5hYmxlZEluSGllcmFyY2h5ICYmICh0aGlzLnRvdWNoZWQgPyB0aGlzLl9yZXNldFN0YXRlKCkgOiB0LnByb3RvdHlwZS5fb25Ub3VjaEJlZ2FuLmNhbGwodGhpcywgZSkpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5fb25Ub3VjaEVuZGVkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAodGhpcy5pbnRlcmFjdGFibGUgJiYgdGhpcy5lbmFibGVkSW5IaWVyYXJjaHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRvdWNoZWQpIHJldHVybiB0aGlzLm5vZGUucGF1c2VTeXN0ZW1FdmVudHMoITApLFxuICAgICAgICAgICAgdm9pZCB0aGlzLl9yZXNldFN0YXRlKCk7XG4gICAgICAgICAgICBuLkF1ZGlvTWdyLmdldEluc3RhbmNlKCkucGxheUF1ZGlvQnV0dG9uQ2xpY2tlZCgpLFxuICAgICAgICAgICAgdGhpcy50b3VjaGVkID0gITAsXG4gICAgICAgICAgICB0aGlzLnRvdWNobWlsID0gMCxcbiAgICAgICAgICAgIHQucHJvdG90eXBlLl9vblRvdWNoRW5kZWQuY2FsbCh0aGlzLCBlKVxuICAgICAgICB9XG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHQucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMsIGUpLFxuICAgICAgICB0aGlzLnRvdWNoZWQgJiYgKHRoaXMudG91Y2htaWwgPSB0aGlzLnRvdWNobWlsICsgZSwgdGhpcy50b3VjaG1pbCA+IHRoaXMuaW52ZXJ0VGltZSAmJiAodGhpcy50b3VjaG1pbCA9IDAsIHRoaXMudG91Y2hlZCA9ICExLCB0aGlzLm5vZGUucmVzdW1lU3lzdGVtRXZlbnRzKCEwKSkpXG4gICAgfSxcbiAgICBlLnByb3RvdHlwZS5vbkRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy50b3VjaGVkID0gITFcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLm9uRGlzYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0LnByb3RvdHlwZS5vbkRpc2FibGUuY2FsbCh0aGlzKSxcbiAgICAgICAgdGhpcy50b3VjaGVkID0gITFcbiAgICB9LFxuICAgIGUucHJvdG90eXBlLm9uRW5hYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHQucHJvdG90eXBlLm9uRW5hYmxlLmNhbGwodGhpcyksXG4gICAgICAgIHRoaXMudG91Y2hlZCA9ICExXG4gICAgfSxcbiAgICByKFtsXSwgZS5wcm90b3R5cGUsIFwiaW52ZXJ0VGltZVwiLCB2b2lkIDApLFxuICAgIHIoW2NdLCBlKVxufSAoY2MuQnV0dG9uKTtcbm8uQmFzZUJ1dHRvbiA9IHUiXX0=