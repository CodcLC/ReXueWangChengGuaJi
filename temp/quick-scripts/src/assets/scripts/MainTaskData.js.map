{"version":3,"sources":["assets\\scripts\\MainTaskData.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","defineProperty","value","MainTaskData","r","n","s","c","l","u","p","g","d","curTaskId","curTaskState","curTaskParameter","h","apply","arguments","ecrypt","gameKey","GameConfig","AppCacheName","endTaskId","recordTaskCount","addRecordTaskCount","PlatformManager","currentPlatform","Platform","BYTEDANCE","PlayerMgr","getInstance","getShareData","stopRecord","getCanShare","UIMgr","openUI","UIID","UIShareVideo","resetRecordTaskCount","createData","data","initData","DataMgr","getMissionCfg","length","getCurrentId","getCurrentState","getCurrentParameter","setCurTaskState","EventMgr","emit","EventName","RefreshMainTaskFinished","saveData","addCurTaskParameter","getMission","RefreshMainTaskDec","TaskParameter","completeTask","trackEvent","addTaskId","resetTaskData","RefreshMainTask","getMainTaskData","carrayTaskForType","Type","getTaskEnd","geUserData","getCurSec","mainTask","BaseData"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n});\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n}),\no.MainTaskData = void 0;\nvar r = t(\"BaseData\"),\nn = t(\"BasePlatform\"),\ns = t(\"EventMgr\"),\nc = t(\"PlatformManager\"),\nl = t(\"UIMgr\"),\nu = t(\"Config\"),\np = t(\"DataMgr\"),\ng = t(\"PlayerMgr\"),\nd = function() {\n    this.curTaskId = 1,\n    this.curTaskState = !1,\n    this.curTaskParameter = 0\n},\nh = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.ecrypt = !1,\n        e.gameKey = u.GameConfig.AppCacheName + \"taskData\",\n        e.endTaskId = 10,\n        e.recordTaskCount = 0,\n        e\n    }\n    return i(e, t),\n    e.prototype.addRecordTaskCount = function(t) {\n        if (void 0 === t && (t = function() {}), this.recordTaskCount += 1, this.recordTaskCount >= 4) {\n            if (t && t(), c.PlatformManager.currentPlatform == n.Platform.BYTEDANCE) {\n                var e = g.PlayerMgr.getInstance().getShareData();\n                e.stopRecord(!1),\n                e.getCanShare() && l.UIMgr.getInstance().openUI(u.UIID.UIShareVideo, -1)\n            }\n            this.resetRecordTaskCount()\n        }\n    },\n    e.prototype.resetRecordTaskCount = function() {\n        this.recordTaskCount = 0\n    },\n    e.prototype.createData = function() {\n        return this.data = new d,\n        this.data\n    },\n    e.prototype.initData = function(t) {\n        t || (this.endTaskId = p.DataMgr.getInstance().getMissionCfg().length)\n    },\n    e.prototype.getCurrentId = function() {\n        return this.data.curTaskId\n    },\n    e.prototype.getCurrentState = function() {\n        return this.data.curTaskState\n    },\n    e.prototype.getCurrentParameter = function() {\n        return this.data.curTaskParameter\n    },\n    e.prototype.setCurTaskState = function(t) {\n        void 0 === t && (t = !0),\n        this.data.curTaskState = t,\n        s.EventMgr.getInstance().emit(u.EventName.RefreshMainTaskFinished, t),\n        this.saveData()\n    },\n    e.prototype.addCurTaskParameter = function(t, e) {\n        if (void 0 === t && (t = 1), void 0 === e && (e = !1), 1 != this.data.curTaskState) {\n            e ? this.data.curTaskParameter = t: this.data.curTaskParameter += t;\n            var o = p.DataMgr.getInstance().getMission(this.getCurrentId());\n            o && (s.EventMgr.getInstance().emit(u.EventName.RefreshMainTaskDec), this.data.curTaskParameter >= o.TaskParameter && this.completeTask(), this.saveData())\n        }\n    },\n    e.prototype.trackEvent = function() {},\n    e.prototype.addTaskId = function(t) {\n        void 0 === t && (t = !0),\n        this.data.curTaskId += 1,\n        this.resetTaskData();\n        var e = p.DataMgr.getInstance().getMission(this.data.curTaskId);\n        s.EventMgr.getInstance().emit(u.EventName.RefreshMainTask, !1),\n        e && (this.data.curTaskState || g.PlayerMgr.getInstance().getMainTaskData().carrayTaskForType(this.data.curTaskId, e.Type)),\n        t && this.saveData()\n    },\n    e.prototype.completeTask = function() {\n        p.DataMgr.getInstance().getMission(g.PlayerMgr.getInstance().getMainTaskData().getCurrentId()) && g.PlayerMgr.getInstance().getMainTaskData().setCurTaskState()\n    },\n    e.prototype.getTaskEnd = function() {\n        return this.data.curTaskId >= this.endTaskId\n    },\n    e.prototype.resetTaskData = function() {\n        this.data.curTaskState = !1,\n        this.data.curTaskParameter = 0\n    },\n    e.prototype.carrayTaskForType = function(t) {\n        var e = p.DataMgr.getInstance().getMission(t);\n        if (e && 1 == e.Type) {\n            var o = g.PlayerMgr.getInstance().geUserData().getCurSec();\n            this.addCurTaskParameter(o - 1, !0)\n        }\n    },\n    e.prototype.mainTask = function(t, e, o) {\n        void 0 === e && (e = 1),\n        void 0 === o && (o = !1);\n        var a = p.DataMgr.getInstance().getMission(g.PlayerMgr.getInstance().getMainTaskData().getCurrentId());\n        a && a.Type == t && g.PlayerMgr.getInstance().getMainTaskData().addCurTaskParameter(e, o)\n    },\n    e\n} (r.BaseData);\no.MainTaskData = h"]}