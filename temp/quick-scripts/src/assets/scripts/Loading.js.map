{"version":3,"sources":["assets\\scripts\\Loading.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","r","__decorate","arguments","length","n","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","u","p","g","d","h","f","m","y","v","I","k","C","cc","_decorator","S","ccclass","M","property","_","apply","uiRoot","tips","progressBar","process","sceneName","onLoad","director","preloadScene","start","game","addPersistRootNode","progress","string","PlatformManager","getInstance","init","EventMgr","on","BaseEventName","GoGame","goGame","ResCacheMgr","preloadUI","UIMgr","addUICnf","UICF","Init","AudioMgr","AudioCF","Loading","setProcessLoad","SdkMgr","requestCheckVersion","LoadingProcess","StartLoading","trackEvent","PlayerMgr","getTrackData","youmengTrack","TrackId","guide1","DataMgr","preload","ExcelCfg","PlayerCfg","CommonModel","Instance","initCommon","EndLoading","hasVerify","isWCN","openUI","UIID","UIExit","isVerify","toGame","UIRealName","loadScene","ResourceMgr","loadRes","Prefab","PoolMgr","creatrePool","instantiate","Node","Label","ProgressBar","Component"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n}),\nr = this && this.__decorate ||\nfunction(t, e, o, a) {\n    var i, r = arguments.length,\n    n = r < 3 ? e: null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);\n    else for (var s = t.length - 1; s >= 0; s--)(i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);\n    return r > 3 && n && Object.defineProperty(e, o, n),\n    n\n};\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n});\nvar n = t(\"CommonModel\"),\ns = t(\"Appcfg\"),\nc = t(\"AudioMgr\"),\nl = t(\"EventMgr\"),\nu = t(\"PlatformManager\"),\np = t(\"PoolMgr\"),\ng = t(\"ResCacheMgr\"),\nd = t(\"ResourceMgr\"),\nh = t(\"SdkMgr\"),\nf = t(\"UIMgr\"),\nm = t(\"Config\"),\ny = t(\"TrackDataEvent\"),\nv = t(\"CardMgr\"),\nI = t(\"DataMgr\"),\nk = t(\"PlayerMgr\"),\nC = cc._decorator,\nS = C.ccclass,\nM = C.property,\n_ = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.uiRoot = null,\n        e.tips = null,\n        e.progressBar = null,\n        e.process = 0,\n        e.sceneName = \"Main\",\n        e\n    }\n    return i(e, t),\n    e.prototype.onLoad = function() {\n        cc.director.preloadScene(this.sceneName)\n    },\n    e.prototype.start = function() {\n        var t = this;\n        cc.game.addPersistRootNode(this.uiRoot),\n        this.progressBar.progress = 0,\n        this.tips.string = \"资源加载中...\",\n        u.PlatformManager.getInstance().init(),\n        l.EventMgr.getInstance().on(s.BaseEventName.GoGame, this, this.goGame),\n        g.ResCacheMgr.getInstance().init(),\n        this.preloadUI(),\n        f.UIMgr.getInstance().addUICnf(m.UICF),\n        f.UIMgr.getInstance().Init(this.uiRoot),\n        c.AudioMgr.getInstance().init(m.AudioCF),\n        l.EventMgr.getInstance().on(s.BaseEventName.Loading, this, this.setProcessLoad),\n        h.SdkMgr.getInstance().requestCheckVersion(function() {\n            t.setProcessLoad(s.LoadingProcess.StartLoading)\n        })\n    },\n    e.prototype.trackEvent = function() {\n        k.PlayerMgr.getInstance().getTrackData().youmengTrack(y.TrackId.guide1)\n    },\n    e.prototype.setProcessLoad = function(t) {\n        var e = this;\n        switch (this.process = t / 100, t) {\n            case s.LoadingProcess.StartLoading:\n                I.DataMgr.getInstance().preload();\n            break;\n            case s.LoadingProcess.ExcelCfg:\n                k.PlayerMgr.getInstance().preload();\n            break;\n            case s.LoadingProcess.PlayerCfg:\n                n.CommonModel.Instance().initCommon(function() {\n                e.setProcessLoad(s.LoadingProcess.EndLoading)\n            });\n            break;\n            case s.LoadingProcess.EndLoading:\n                h.SdkMgr.getInstance().hasVerify() ? (v.default.getInstance().isWCN() && f.UIMgr.getInstance().openUI(m.UIID.UIExit, -1), v.default.getInstance().isVerify() ? v.default.getInstance().toGame(function() {\n                e.goGame()\n            }) : f.UIMgr.getInstance().openUI(m.UIID.UIRealName, -1,\n            function() {\n                e.goGame()\n            })) : this.goGame();\n        }\n        this.progressBar.progress = this.process\n    },\n    e.prototype.goGame = function() {\n        cc.director.loadScene(this.sceneName),\n        this.trackEvent()\n    },\n    e.prototype.preloadUI = function() {\n        d.ResourceMgr.getInstance().preload(\"prefabs\", [\"UIHome\", \"UIHomeNew\", \"UITop\", \"UIGuide\"]),\n        d.ResourceMgr.getInstance().loadRes(\"objects\", \"player/Player\", cc.Prefab,\n        function(t) {\n            p.PoolMgr.getInstance().creatrePool(\"Player\", cc.instantiate(t), 2)\n        })\n    },\n    r([M(cc.Node)], e.prototype, \"uiRoot\", void 0),\n    r([M(cc.Label)], e.prototype, \"tips\", void 0),\n    r([M(cc.ProgressBar)], e.prototype, \"progressBar\", void 0),\n    r([S], e)\n} (cc.Component);\no.default = _"]}