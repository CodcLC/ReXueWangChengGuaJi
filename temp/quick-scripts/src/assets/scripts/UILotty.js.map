{"version":3,"sources":["assets\\scripts\\UILotty.js"],"names":["t","require","e","module","o","exports","a","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","r","__decorate","arguments","length","n","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","u","p","g","d","h","f","cc","_decorator","m","ccclass","y","property","v","apply","quanNum","rewardLayout","startLuck","freeStart","quanStart","starting","btnClose","startingSpriteFrame","normalSpriteFrame","state","itemNodes","index","repeat","finishNum","passed_time","walk_time","needSecond","girdIndexNum","totalNum","oneRepetNum","isRuning","showGetNumText","playNum","gildReward","isFree","needplayVideo","totalFreeNum","onLoad","addEvent","BaseEventName","CloseUI","eventCloseUI","CommonEventName","GetRewardEnd","refreshRewardEnd","RefreshTickNum","refreshTickNum","string","lottyData","getLottyTickNum","start","ComPlayerMgr","getInstance","getLottyData","getComponent","Sprite","spriteFrame","getLottyNum","ComDataMgr","getCommonParam","CommonParamType","freeLottyNum","checkCurrentFree","on","Node","EventType","TOUCH_END","closeUI","getLottyGoodsByGirldId","LogMgr","error","getGirldIdIndex","id","getLottyGoodsById","push","children","scheduleOnce","tween","to","eulerAngles","Vec3","getGoodsById","goodId","loadSpriteFrame","bundleName","rewardIcon","getChildByName","Label","rewardNum","getInDontMust","mustNum","girdId","getLottyIdOutNum","active","initBtnListener","TOUCH_START","AudioMgr","playEffect","ComAudioId","lottyDown","SdkMgr","playVideo","AdType","FreeLotty","startLotty","TOUCH_CANCEL","curNode","stopAllActions","getCurentReward","refreshState","update","playMusic","ding","opacity","selectNode","selectNodeTween","scale","union","repeatForever","parallel","by","position","finishEnd","goodNum","lottyGoodCfg","WeightObject","weight","Utils","weight_rand","convertToWorldSpaceAR","Vec2","ZERO","checkOpenReward","CommonCfg","splitNum","ComUIID","UIReward","stop","addLottyIdOutNum","addLottyNum","addInDontMust","replace","setGirldReward","debug","onClose","stopMusic","type","displayName","SpriteFrame"],"mappings":"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","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nvar a, i = this && this.__extends || (a = function(t, e) {\n    return (a = Object.setPrototypeOf || {\n        __proto__: []\n    }\n    instanceof Array &&\n    function(t, e) {\n        t.__proto__ = e\n    } ||\n    function(t, e) {\n        for (var o in e) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o])\n    })(t, e)\n},\nfunction(t, e) {\n    function o() {\n        this.constructor = t\n    }\n    a(t, e),\n    t.prototype = null === e ? Object.create(e) : (o.prototype = e.prototype, new o)\n}),\nr = this && this.__decorate ||\nfunction(t, e, o, a) {\n    var i, r = arguments.length,\n    n = r < 3 ? e: null === a ? a = Object.getOwnPropertyDescriptor(e, o) : a;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) n = Reflect.decorate(t, e, o, a);\n    else for (var s = t.length - 1; s >= 0; s--)(i = t[s]) && (n = (r < 3 ? i(n) : r > 3 ? i(e, o, n) : i(e, o)) || n);\n    return r > 3 && n && Object.defineProperty(e, o, n),\n    n\n};\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n});\nvar n = t(\"BaseUI\"),\ns = t(\"Appcfg\"),\nc = t(\"AudioMgr\"),\nl = t(\"LogMgr\"),\nu = t(\"SdkMgr\"),\np = t(\"Utils\"),\ng = t(\"CommonCfg\"),\nd = t(\"ComDataMgr\"),\nh = t(\"ComPlayerMgr\"),\nf = cc._decorator,\nm = f.ccclass,\ny = f.property,\nv = function(t) {\n    function e() {\n        var e = null !== t && t.apply(this, arguments) || this;\n        return e.quanNum = null,\n        e.rewardLayout = null,\n        e.startLuck = null,\n        e.freeStart = null,\n        e.quanStart = null,\n        e.starting = null,\n        e.btnClose = null,\n        e.startingSpriteFrame = null,\n        e.normalSpriteFrame = null,\n        e.state = 0,\n        e.itemNodes = [],\n        e.index = 4,\n        e.repeat = 3,\n        e.i = 0,\n        e.finishNum = 0,\n        e.passed_time = 0,\n        e.walk_time = .2,\n        e.needSecond = !1,\n        e.girdIndexNum = 1,\n        e.totalNum = 0,\n        e.oneRepetNum = 10,\n        e.isRuning = !1,\n        e.showGetNumText = !1,\n        e.playNum = 0,\n        e.gildReward = [],\n        e.isFree = !1,\n        e.needplayVideo = !1,\n        e.totalFreeNum = 0,\n        e\n    }\n    return i(e, t),\n    e.prototype.onLoad = function() {\n        this.addEvent(s.BaseEventName.CloseUI, this.eventCloseUI),\n        this.addEvent(g.CommonEventName.GetRewardEnd, this.refreshRewardEnd),\n        this.addEvent(g.CommonEventName.RefreshTickNum, this.refreshTickNum)\n    },\n    e.prototype.refreshTickNum = function() {\n        this.quanNum.string = this.lottyData.getLottyTickNum() + \"\"\n    },\n    e.prototype.start = function() {\n        var t = this;\n        this.lottyData = h.ComPlayerMgr.getInstance().getLottyData(),\n        this.normalSpriteFrame = this.startLuck.getComponent(cc.Sprite).spriteFrame,\n        this.playNum = this.lottyData.getLottyNum(),\n        this.quanNum.string = this.lottyData.getLottyTickNum() + \"\",\n        this.totalFreeNum = d.ComDataMgr.getInstance().getCommonParam(d.CommonParamType.freeLottyNum),\n        this.checkCurrentFree(),\n        this.btnClose.on(cc.Node.EventType.TOUCH_END,\n        function() {\n            t.closeUI()\n        });\n        for (var e = 0,\n        o = function(o) {\n            var i = d.ComDataMgr.getInstance().getLottyGoodsByGirldId(o);\n            null == i && l.LogMgr.getInstance().error(\"cfg is null GirldId:\", o);\n            var r = i[a.lottyData.getGirldIdIndex(o)].id,\n            n = d.ComDataMgr.getInstance().getLottyGoodsById(r);\n            a.gildReward.push(n);\n            var s = a.rewardLayout.children[o - 1];\n            a.itemNodes.push(s),\n            a.scheduleOnce(function() {\n                cc.tween(s).to(.2, {\n                    eulerAngles: new cc.Vec3(0, 180, 0)\n                }).call(function() {\n                    s.eulerAngles = new cc.Vec3(0, 0, 0);\n                    var e = d.ComDataMgr.getInstance().getGoodsById(n.goodId);\n                    t.loadSpriteFrame(e.bundleName, e.rewardIcon,\n                    function(t) {\n                        s.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = t\n                    }),\n                    s.getChildByName(\"num\").getComponent(cc.Label).string = \"x\" + n.rewardNum;\n                    var o = s.getChildByName(\"numGet\");\n                    if (t.showGetNumText) {\n                        var a = t.lottyData.getInDontMust(n.id);\n                        if (n.mustNum > 0 && !a) {\n                            var i = t.itemNodes[n.girdId - 1].getChildByName(\"numGet\"),\n                            r = t.lottyData.getLottyIdOutNum(n.id),\n                            c = n.mustNum - r;\n                            i.getComponent(cc.Label).string = c + 1 + \"次必得\",\n                            i.active = !0\n                        } else o.active = !1\n                    } else o.active = !1\n                }).start()\n            },\n            .1 + e),\n            e += .1\n        },\n        a = this, i = 1; i < 11; i++) o(i);\n        this.initBtnListener()\n    },\n    e.prototype.initBtnListener = function() {\n        var t = this;\n        this.startLuck.on(cc.Node.EventType.TOUCH_START,\n        function() {\n            c.AudioMgr.getInstance().playEffect(g.ComAudioId.lottyDown),\n            t.startLuck.getComponent(cc.Sprite).spriteFrame = t.startingSpriteFrame,\n            t.checkCurrentFree(),\n            t.freeStart.active = !1,\n            t.quanStart.active = !1,\n            1 == t.state || t.isRuning || (t.playNum < t.totalFreeNum && (t.isFree = !0), !t.isFree && t.lottyData.getLottyTickNum() <= 0 ? u.SdkMgr.getInstance().playVideo(u.AdType.FreeLotty,\n            function() {\n                t.needplayVideo = !0,\n                t.isRuning = !0,\n                t.startLotty()\n            }) : (t.needplayVideo = !1, t.isRuning = !0, t.startLotty()))\n        }),\n        this.startLuck.on(cc.Node.EventType.TOUCH_END,\n        function() {\n            t.checkCurrentFree(),\n            t.startLuck.getComponent(cc.Sprite).spriteFrame = t.normalSpriteFrame\n        }),\n        this.startLuck.on(cc.Node.EventType.TOUCH_CANCEL,\n        function() {\n            t.startLuck.getComponent(cc.Sprite).spriteFrame = t.normalSpriteFrame\n        })\n    },\n    e.prototype.startLotty = function() {\n        var t = this;\n        if (this.curNode && this.curNode.stopAllActions(), this.index = this.getCurentReward() - 1, 0 == this.i) this.totalNum = (this.repeat - 1) * this.oneRepetNum + this.index + 1;\n        else {\n            var e;\n            e = this.i > this.index ? this.oneRepetNum - this.i + this.index: this.i == this.index ? this.oneRepetNum: this.index - this.i,\n            this.totalNum = (this.repeat - 1) * this.oneRepetNum + e\n        }\n        this.index < 5 ? this.needSecond = !0 : this.needSecond = !1,\n        this.refreshState(),\n        this.scheduleOnce(function() {\n            t.state = 1\n        }),\n        this.isFree || this.needplayVideo || (this.lottyData.refreshTickNum(1, !1), this.quanNum.string = this.lottyData.getLottyTickNum() + \"\")\n    },\n    e.prototype.checkCurrentFree = function() {\n        this.playNum < this.totalFreeNum ? (this.freeStart.active = !1, this.quanStart.active = !1, this.isFree = !0, this.needplayVideo = !1) : this.lottyData.getLottyTickNum() <= 0 ? (this.freeStart.active = !0, this.quanStart.active = !1, this.needplayVideo = !0, this.isFree = !1) : (this.freeStart.active = !1, this.quanStart.active = !0, this.needplayVideo = !1, this.isFree = !1)\n    },\n    e.prototype.refreshState = function() {\n        this.girdIndexNum = 1,\n        this.finishNum = 0,\n        this.passed_time = 0,\n        this.walk_time = .2,\n        this.curNode && (this.curNode.eulerAngles = new cc.Vec3(0, 0, 0));\n        for (var t = 0; t < this.itemNodes.length; t++) {\n            var e = this.itemNodes[t];\n            e.getChildByName(\"bg\").active = !1,\n            e.getChildByName(\"buttonLight\").active = !1\n        }\n    },\n    e.prototype.update = function(t) {\n        if (0 != this.state) {\n            if (1 == this.state && (this.passed_time += t, this.passed_time >= this.walk_time)) {\n                this.i >= this.itemNodes.length && (this.i = 0),\n                this.girdIndexNum % this.oneRepetNum == 0 && this.finishNum++,\n                0 == this.i || 3 == this.i || 6 == this.i || 9 == this.i ? c.AudioMgr.getInstance().playMusic(g.ComAudioId.ding, \"lottyRun1\", !1) : 1 == this.i || 4 == this.i || 7 == this.i || 10 == this.i ? c.AudioMgr.getInstance().playMusic(g.ComAudioId.ding, \"lottyRun2\", !1) : c.AudioMgr.getInstance().playMusic(g.ComAudioId.ding, \"lottyRun3\", !1);\n                var e = this.itemNodes[this.i];\n                e.getChildByName(\"bg\").active = !0,\n                e.getChildByName(\"buttonLight\").active = !0;\n                var o = void 0,\n                a = (o = this.i - 1 < 0 ? this.itemNodes[this.itemNodes.length - 1] : this.itemNodes[this.i - 1]).getChildByName(\"bg\");\n                cc.tween(a).to(.4, {\n                    opacity: 0\n                }).call(function() {\n                    a.active = !1,\n                    a.opacity = 255\n                }).start();\n                var i = o.getChildByName(\"buttonLight\");\n                if (cc.tween(a).to(.2, {\n                    opacity: 0\n                }).call(function() {\n                    i.active = !1,\n                    i.opacity = 255\n                }).start(), this.girdIndexNum > this.totalNum - 2 && this.i == this.index) return this.state = 2,\n                void this.selectNode();\n                this.passed_time = 0,\n                this.walk_time = .1,\n                this.girdIndexNum < 3 ? this.walk_time = .5 : this.girdIndexNum < 4 ? this.walk_time = .4 : this.girdIndexNum < 6 ? this.walk_time = .3 : this.girdIndexNum > this.totalNum - 1 ? this.walk_time = .8 : this.girdIndexNum > this.totalNum - 2 ? this.walk_time = .6 : this.girdIndexNum > this.totalNum - 3 ? this.walk_time = .5 : this.girdIndexNum > this.totalNum - 4 && (this.walk_time = .3),\n                this.i++,\n                this.girdIndexNum += 1\n            }\n            2 == this.state && (this.state = 0)\n        }\n    },\n    e.prototype.selectNode = function() {\n        var t = this;\n        this.curNode = this.itemNodes[this.index],\n        this.selectNodeTween = cc.tween(this.curNode).to(1, {\n            scale: 1.15\n        }).to(1, {\n            scale: 1\n        }).union().repeatForever(),\n        this.selectNodeTween.start(),\n        this.curNode.getChildByName(\"bg\").active = !0;\n        var e = this.curNode.getChildByName(\"icon\"),\n        o = e.scale;\n        cc.tween(e).parallel(cc.tween(e).by(.2, {\n            position: new cc.Vec3(0, 20, 0)\n        }).by(.2, {\n            position: new cc.Vec3(0, -20, 0)\n        }).start(), cc.tween(e).to(.2, {\n            scale: 1.02\n        }).to(.2, {\n            scale: o\n        }).start()).by(.2, {\n            position: new cc.Vec3(0, 10, 0)\n        }).by(.2, {\n            position: new cc.Vec3(0, -10, 0)\n        }).call(function() {\n            t.finishEnd()\n        }).start()\n    },\n    e.prototype.getCurentReward = function() {\n        for (var t = [], e = 0; e < this.gildReward.length; e++) if ((n = this.gildReward[e]).mustNum > 0) {\n            var o = this.lottyData.getLottyIdOutNum(n.id),\n            a = this.lottyData.getInDontMust(n.id);\n            if (n.mustNum <= o && !a) return this.goodId = n.goodId,\n            this.goodNum = n.rewardNum,\n            this.lottyGoodCfg = n,\n            e + 1\n        } else {\n            var i = new s.WeightObject;\n            i.id = n.id,\n            i.weight = n.weight,\n            t.push(i)\n        }\n        if (t.length > 0) {\n            var r = p.Utils.weight_rand(t),\n            n = d.ComDataMgr.getInstance().getLottyGoodsById(r.id);\n            return this.goodId = n.goodId,\n            this.goodNum = n.rewardNum,\n            this.lottyGoodCfg = n,\n            n.girdId\n        }\n    },\n    e.prototype.finishEnd = function() {\n        var t = this;\n        this.scheduleOnce(function() {\n            var e = t.curNode.convertToWorldSpaceAR(cc.Vec2.ZERO);\n            h.ComPlayerMgr.getInstance().checkOpenReward(t.goodId + g.CommonCfg.splitNum + t.goodNum, e)\n        },\n        .2)\n    },\n    e.prototype.refreshRewardEnd = function() {\n        this.eventCloseUI(g.ComUIID.UIReward)\n    },\n    e.prototype.eventCloseUI = function(t) {\n        var e = this;\n        if (t == g.ComUIID.UIReward) {\n            this.selectNodeTween && this.selectNodeTween.stop(),\n            cc.tween(this.curNode).to(.1, {\n                scale: 1\n            }).start();\n            for (var o = 0; o < this.gildReward.length; o++) {\n                var a = this.gildReward[o];\n                if (this.lottyData.addLottyIdOutNum(a.id), this.showGetNumText && a.mustNum > 0) {\n                    var i = this.itemNodes[a.girdId - 1].getChildByName(\"numGet\"),\n                    r = this.lottyData.getLottyIdOutNum(a.id),\n                    n = a.mustNum - r;\n                    i.getComponent(cc.Label).string = n + 1 + \"次必得\"\n                }\n            }\n            this.playNum++,\n            this.lottyData.addLottyNum(),\n            this.startLuck.active = !0,\n            this.starting.active = !1,\n            this.checkCurrentFree();\n            var s = this.lottyGoodCfg.girdId,\n            c = this.lottyData.getGirldIdIndex(s),\n            u = d.ComDataMgr.getInstance().getLottyGoodsByGirldId(s),\n            p = c;\n            c < u.length - 1 && (p += 1),\n            this.lottyGoodCfg.mustNum > 0 && this.lottyData.addInDontMust(this.lottyGoodCfg.id);\n            var h = this.itemNodes[this.lottyGoodCfg.girdId - 1],\n            f = h.getChildByName(\"numGet\");\n            if (1 == this.lottyGoodCfg.replace && p != c) {\n                this.lottyData.setGirldReward(s, p),\n                a = u[p];\n                var m = d.ComDataMgr.getInstance().getGoodsById(a.goodId);\n                this.loadSpriteFrame(m.bundleName, m.rewardIcon,\n                function(t) {\n                    h.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = t\n                }),\n                h.getChildByName(\"num\").getComponent(cc.Label).string = \"x\" + a.rewardNum,\n                this.showGetNumText && a.mustNum > 0 ? (f.getComponent(cc.Label).string = a.mustNum + \"次必得\", f.active = !0) : f.active = !1,\n                this.gildReward[this.lottyGoodCfg.girdId - 1] = a,\n                cc.tween(this.curNode).to(.4, {\n                    eulerAngles: new cc.Vec3(0, 180, 0)\n                }).call(function() {\n                    e.curNode.eulerAngles = new cc.Vec3(0, 0, 0)\n                }).start()\n            } else l.LogMgr.getInstance().debug(\"没有可替换的\"),\n            f.active = !1;\n            this.isRuning = !1\n        }\n    },\n    e.prototype.onClose = function() {\n        c.AudioMgr.getInstance().stopMusic(\"lottyMusic\")\n    },\n    r([y({\n        type: cc.Label,\n        displayName: \"券的数量\"\n    })], e.prototype, \"quanNum\", void 0),\n    r([y({\n        type: cc.Node\n    })], e.prototype, \"rewardLayout\", void 0),\n    r([y(cc.Node)], e.prototype, \"startLuck\", void 0),\n    r([y(cc.Node)], e.prototype, \"freeStart\", void 0),\n    r([y(cc.Node)], e.prototype, \"quanStart\", void 0),\n    r([y(cc.Node)], e.prototype, \"starting\", void 0),\n    r([y(cc.Node)], e.prototype, \"btnClose\", void 0),\n    r([y(cc.SpriteFrame)], e.prototype, \"startingSpriteFrame\", void 0),\n    r([m], e)\n} (n.default);\no.default = v"]}