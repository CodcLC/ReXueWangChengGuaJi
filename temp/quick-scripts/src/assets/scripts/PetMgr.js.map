{"version":3,"sources":["assets\\scripts\\PetMgr.js"],"names":["t","require","e","module","o","exports","Object","defineProperty","value","a","i","r","n","s","isOwnedPet","twenMap","Map","moveSpeedPet","enterPosX","leftPosX","rightPosX","idleTime","getInstance","instance","prototype","initPetData","PlayerMgr","geUserData","isExistPetFotId","getTween","has","uuid","stopTween","cc","tween","set","get","stop","petEnterAnim","isValid","Math","abs","x","getChildByName","getComponent","sp","Skeleton","setAnimation","to","call","getTrackData","youmengTrack","TrackId","pet_appear","petIdleAnim","start","petGoOutAnim","zIndex","scaleX","floor","Utils","randomRang","delay","petBackAnim","petGoAnim","TimeMgr","isOpenTimer_pet"],"mappings":";;;;;;AAAA,IAAIA,CAAC,GAAGC,OAAR;AACA,IAAIC,CAAC,GAAGC,MAAR;AACA,IAAIC,CAAC,GAAGC,OAAR;AACAC,MAAM,CAACC,cAAP,CAAsBH,CAAtB,EAAyB,YAAzB,EAAuC;EACnCI,KAAK,EAAE,CAAC;AAD2B,CAAvC;;AAGA,IAAIC,CAAC,GAAGT,CAAC,CAAC,OAAD,CAAT;AAAA,IACAU,CAAC,GAAGV,CAAC,CAAC,gBAAD,CADL;AAAA,IAEAW,CAAC,GAAGX,CAAC,CAAC,WAAD,CAFL;AAAA,IAGAY,CAAC,GAAGZ,CAAC,CAAC,SAAD,CAHL;AAAA,IAIAa,CAAC,GAAG,YAAW;EACX,SAASb,CAAT,GAAa;IACT,KAAKc,UAAL,GAAkB,CAAC,CAAnB,EACA,KAAKC,OAAL,GAAe,IAAIC,GAAJ,EADf,EAEA,KAAKC,YAAL,GAAoB,GAFpB,EAGA,KAAKC,SAAL,GAAiB,CAAC,GAHlB,EAIA,KAAKC,QAAL,GAAgB,CAAC,GAJjB,EAKA,KAAKC,SAAL,GAAiB,GALjB,EAMA,KAAKC,QAAL,GAAgB,CANhB;EAOH;;EACD,OAAOrB,CAAC,CAACsB,WAAF,GAAgB,YAAW;IAC9B,OAAO,QAAQ,KAAKC,QAAb,KAA0B,KAAKA,QAAL,GAAgB,IAAIvB,CAAJ,EAA1C,GACP,KAAKuB,QADL;EAEH,CAHM,EAIPvB,CAAC,CAACwB,SAAF,CAAYC,WAAZ,GAA0B,YAAW;IACjCd,CAAC,CAACe,SAAF,CAAYJ,WAAZ,GAA0BK,UAA1B,GAAuCC,eAAvC,CAAuD,CAAvD,MAA8D,KAAKd,UAAL,GAAkB,CAAC,CAAjF;EACH,CANM,EAOPd,CAAC,CAACwB,SAAF,CAAYK,QAAZ,GAAuB,UAAS7B,CAAT,EAAY;IAC/B,KAAKe,OAAL,CAAae,GAAb,CAAiB9B,CAAC,CAAC+B,IAAnB,KAA4B,KAAKC,SAAL,CAAehC,CAAf,CAA5B;IACA,IAAIE,CAAC,GAAG+B,EAAE,CAACC,KAAH,CAASlC,CAAT,CAAR;IACA,OAAO,KAAKe,OAAL,CAAaoB,GAAb,CAAiBnC,CAAC,CAAC+B,IAAnB,EAAyB7B,CAAzB,GACPA,CADA;EAEH,CAZM,EAaPF,CAAC,CAACwB,SAAF,CAAYQ,SAAZ,GAAwB,UAAShC,CAAT,EAAY;IAChC,KAAKe,OAAL,CAAae,GAAb,CAAiB9B,CAAC,CAAC+B,IAAnB,MAA6B,KAAKhB,OAAL,CAAaqB,GAAb,CAAiBpC,CAAC,CAAC+B,IAAnB,EAAyBM,IAAzB,IAAiC,KAAKtB,OAAL,WAAoBf,CAAC,CAAC+B,IAAtB,CAA9D;EACH,CAfM,EAgBP/B,CAAC,CAACwB,SAAF,CAAYc,YAAZ,GAA2B,UAAStC,CAAT,EAAY;IACnC,IAAIE,CAAC,GAAG,IAAR;;IACA,IAAI+B,EAAE,CAACM,OAAH,CAAWvC,CAAX,CAAJ,EAAmB;MACf,IAAII,CAAC,GAAGoC,IAAI,CAACC,GAAL,CAASzC,CAAC,CAAC0C,CAAF,GAAM,KAAKvB,QAApB,CAAR;MACAnB,CAAC,CAAC2C,cAAF,CAAiB,KAAjB,EAAwBC,YAAxB,CAAqCC,EAAE,CAACC,QAAxC,EAAkDC,YAAlD,CAA+D,CAA/D,EAAkE,MAAlE,EAA0E,CAAC,CAA3E,GACA,KAAKlB,QAAL,CAAc7B,CAAd,EAAiBgD,EAAjB,CAAoB5C,CAAC,GAAG,KAAKa,YAA7B,EAA2C;QACvCyB,CAAC,EAAE,KAAKvB;MAD+B,CAA3C,EAEG8B,IAFH,CAEQ,YAAW;QACftC,CAAC,CAACe,SAAF,CAAYJ,WAAZ,GAA0B4B,YAA1B,GAAyCC,YAAzC,CAAsDzC,CAAC,CAAC0C,OAAF,CAAUC,UAAhE,GACAnD,CAAC,CAACoD,WAAF,CAActD,CAAd,CADA;MAEH,CALD,EAKGuD,KALH,EADA;IAOH;EACJ,CA5BM,EA6BPvD,CAAC,CAACwB,SAAF,CAAYgC,YAAZ,GAA2B,UAASxD,CAAT,EAAY;IACnC,IAAIE,CAAC,GAAG,IAAR;;IACA,IAAI+B,EAAE,CAACM,OAAH,CAAWvC,CAAX,CAAJ,EAAmB;MACfA,CAAC,CAACyD,MAAF,GAAW,CAAX,EACAzD,CAAC,CAAC0D,MAAF,GAAW,CADX;MAEA,IAAItD,CAAC,GAAGoC,IAAI,CAACC,GAAL,CAASzC,CAAC,CAAC0C,CAAF,GAAM,KAAKxB,SAApB,CAAR;MACAlB,CAAC,CAAC2C,cAAF,CAAiB,KAAjB,EAAwBC,YAAxB,CAAqCC,EAAE,CAACC,QAAxC,EAAkDC,YAAlD,CAA+D,CAA/D,EAAkE,MAAlE,EAA0E,CAAC,CAA3E,GACA,KAAKlB,QAAL,CAAc7B,CAAd,EAAiBgD,EAAjB,CAAoB5C,CAAC,GAAG,KAAKa,YAA7B,EAA2C;QACvCyB,CAAC,EAAE,KAAKxB;MAD+B,CAA3C,EAEG+B,IAFH,CAEQ,YAAW;QACf/C,CAAC,CAACoD,WAAF,CAActD,CAAd;MACH,CAJD,EAIGuD,KAJH,EADA;IAMH;EACJ,CA1CM,EA2CPvD,CAAC,CAACwB,SAAF,CAAY8B,WAAZ,GAA0B,UAAStD,CAAT,EAAY;IAClC,IAAIE,CAAC,GAAG,IAAR;;IACA,IAAI+B,EAAE,CAACM,OAAH,CAAWvC,CAAX,CAAJ,EAAmB;MACf,IAAII,CAAC,GAAGJ,CAAC,CAAC2C,cAAF,CAAiB,KAAjB,EAAwBC,YAAxB,CAAqCC,EAAE,CAACC,QAAxC,CAAR;MAAA,IACApC,CAAC,GAAG,KAAK8B,IAAI,CAACmB,KAAL,CAAWlD,CAAC,CAACmD,KAAF,CAAQC,UAAR,CAAmB,CAAnB,EAAsB,CAAtB,CAAX,CAAL,GAA4C,MAA5C,GAAoD,OADxD;MAEAzD,CAAC,CAAC2C,YAAF,CAAe,CAAf,EAAkBrC,CAAlB,EAAqB,CAAC,CAAtB,GACA,KAAKmB,QAAL,CAAc7B,CAAd,EAAiB8D,KAAjB,CAAuB,KAAKzC,QAA5B,EAAsC4B,IAAtC,CAA2C,YAAW;QAClD/C,CAAC,CAACY,UAAF,GAAed,CAAC,CAAC0C,CAAF,GAAM,CAAN,GAAUxC,CAAC,CAAC6D,WAAF,CAAc/D,CAAd,CAAV,GAA6BE,CAAC,CAAC8D,SAAF,CAAYhE,CAAZ,CAA5C,GAA6DY,CAAC,CAACqD,OAAF,CAAU3C,WAAV,GAAwB4C,eAAxB,GAA0ClE,CAAC,CAAC0C,CAAF,GAAM,CAAN,GAAUxC,CAAC,CAAC6D,WAAF,CAAc/D,CAAd,CAAV,GAA6BE,CAAC,CAAC8D,SAAF,CAAYhE,CAAZ,CAAvE,GAAwFE,CAAC,CAACsD,YAAF,CAAexD,CAAf,CAArJ;MACH,CAFD,EAEGuD,KAFH,EADA;IAIH;EACJ,CArDM,EAsDPvD,CAAC,CAACwB,SAAF,CAAYwC,SAAZ,GAAwB,UAAShE,CAAT,EAAY;IAChC,IAAIE,CAAC,GAAG,IAAR;;IACA,IAAI+B,EAAE,CAACM,OAAH,CAAWvC,CAAX,CAAJ,EAAmB;MACfA,CAAC,CAACyD,MAAF,GAAW,CAAX,EACAzD,CAAC,CAAC0D,MAAF,GAAW,CAAC,CADZ;MAEA,IAAItD,CAAC,GAAGoC,IAAI,CAACC,GAAL,CAASzC,CAAC,CAAC0C,CAAF,GAAM,KAAKtB,SAApB,CAAR;MACApB,CAAC,CAAC2C,cAAF,CAAiB,KAAjB,EAAwBC,YAAxB,CAAqCC,EAAE,CAACC,QAAxC,EAAkDC,YAAlD,CAA+D,CAA/D,EAAkE,MAAlE,EAA0E,CAAC,CAA3E,GACA,KAAKlB,QAAL,CAAc7B,CAAd,EAAiBgD,EAAjB,CAAoB5C,CAAC,GAAG,KAAKa,YAA7B,EAA2C;QACvCyB,CAAC,EAAE,KAAKtB;MAD+B,CAA3C,EAEG6B,IAFH,CAEQ,YAAW;QACf/C,CAAC,CAACoD,WAAF,CAActD,CAAd;MACH,CAJD,EAIGuD,KAJH,EADA;IAMH;EACJ,CAnEM,EAoEPvD,CAAC,CAACwB,SAAF,CAAYuC,WAAZ,GAA0B,UAAS/D,CAAT,EAAY;IAClC,IAAIE,CAAC,GAAG,IAAR;;IACA,IAAI+B,EAAE,CAACM,OAAH,CAAWvC,CAAX,CAAJ,EAAmB;MACfA,CAAC,CAACyD,MAAF,GAAW,CAAX,EACAzD,CAAC,CAAC0D,MAAF,GAAW,CADX;MAEA,IAAItD,CAAC,GAAGoC,IAAI,CAACC,GAAL,CAASzC,CAAC,CAAC0C,CAAF,GAAM,KAAKvB,QAApB,CAAR;MACAnB,CAAC,CAAC2C,cAAF,CAAiB,KAAjB,EAAwBC,YAAxB,CAAqCC,EAAE,CAACC,QAAxC,EAAkDC,YAAlD,CAA+D,CAA/D,EAAkE,MAAlE,EAA0E,CAAC,CAA3E,GACA,KAAKlB,QAAL,CAAc7B,CAAd,EAAiBgD,EAAjB,CAAoB5C,CAAC,GAAG,KAAKa,YAA7B,EAA2C;QACvCyB,CAAC,EAAE,KAAKvB;MAD+B,CAA3C,EAEG8B,IAFH,CAEQ,YAAW;QACf/C,CAAC,CAACoD,WAAF,CAActD,CAAd;MACH,CAJD,EAIGuD,KAJH,EADA;IAMH;EACJ,CAjFM,EAkFPvD,CAlFA;AAmFH,CA7FG,EAJJ;;AAkGAI,CAAC,WAAD,GAAYS,CAAZ","sourceRoot":"/","sourcesContent":["var t = require;\nvar e = module;\nvar o = exports;\nObject.defineProperty(o, \"__esModule\", {\n    value: !0\n});\nvar a = t(\"Utils\"),\ni = t(\"TrackDataEvent\"),\nr = t(\"PlayerMgr\"),\nn = t(\"TimeMgr\"),\ns = function() {\n    function t() {\n        this.isOwnedPet = !1,\n        this.twenMap = new Map,\n        this.moveSpeedPet = 150,\n        this.enterPosX = -1e3,\n        this.leftPosX = -250,\n        this.rightPosX = 250,\n        this.idleTime = 3\n    }\n    return t.getInstance = function() {\n        return null == this.instance && (this.instance = new t),\n        this.instance\n    },\n    t.prototype.initPetData = function() {\n        r.PlayerMgr.getInstance().geUserData().isExistPetFotId(1) && (this.isOwnedPet = !0)\n    },\n    t.prototype.getTween = function(t) {\n        this.twenMap.has(t.uuid) && this.stopTween(t);\n        var e = cc.tween(t);\n        return this.twenMap.set(t.uuid, e),\n        e\n    },\n    t.prototype.stopTween = function(t) {\n        this.twenMap.has(t.uuid) && (this.twenMap.get(t.uuid).stop(), this.twenMap.delete(t.uuid))\n    },\n    t.prototype.petEnterAnim = function(t) {\n        var e = this;\n        if (cc.isValid(t)) {\n            var o = Math.abs(t.x - this.leftPosX);\n            t.getChildByName(\"pet\").getComponent(sp.Skeleton).setAnimation(0, \"move\", !0),\n            this.getTween(t).to(o / this.moveSpeedPet, {\n                x: this.leftPosX\n            }).call(function() {\n                r.PlayerMgr.getInstance().getTrackData().youmengTrack(i.TrackId.pet_appear),\n                e.petIdleAnim(t)\n            }).start()\n        }\n    },\n    t.prototype.petGoOutAnim = function(t) {\n        var e = this;\n        if (cc.isValid(t)) {\n            t.zIndex = 0,\n            t.scaleX = 1;\n            var o = Math.abs(t.x - this.enterPosX);\n            t.getChildByName(\"pet\").getComponent(sp.Skeleton).setAnimation(0, \"move\", !0),\n            this.getTween(t).to(o / this.moveSpeedPet, {\n                x: this.enterPosX\n            }).call(function() {\n                e.petIdleAnim(t)\n            }).start()\n        }\n    },\n    t.prototype.petIdleAnim = function(t) {\n        var e = this;\n        if (cc.isValid(t)) {\n            var o = t.getChildByName(\"pet\").getComponent(sp.Skeleton),\n            i = 0 == Math.floor(a.Utils.randomRang(0, 2)) ? \"idle\": \"idle2\";\n            o.setAnimation(0, i, !0),\n            this.getTween(t).delay(this.idleTime).call(function() {\n                e.isOwnedPet ? t.x > 0 ? e.petBackAnim(t) : e.petGoAnim(t) : n.TimeMgr.getInstance().isOpenTimer_pet ? t.x > 0 ? e.petBackAnim(t) : e.petGoAnim(t) : e.petGoOutAnim(t)\n            }).start()\n        }\n    },\n    t.prototype.petGoAnim = function(t) {\n        var e = this;\n        if (cc.isValid(t)) {\n            t.zIndex = 2,\n            t.scaleX = -1;\n            var o = Math.abs(t.x - this.rightPosX);\n            t.getChildByName(\"pet\").getComponent(sp.Skeleton).setAnimation(0, \"move\", !0),\n            this.getTween(t).to(o / this.moveSpeedPet, {\n                x: this.rightPosX\n            }).call(function() {\n                e.petIdleAnim(t)\n            }).start()\n        }\n    },\n    t.prototype.petBackAnim = function(t) {\n        var e = this;\n        if (cc.isValid(t)) {\n            t.zIndex = 0,\n            t.scaleX = 1;\n            var o = Math.abs(t.x - this.leftPosX);\n            t.getChildByName(\"pet\").getComponent(sp.Skeleton).setAnimation(0, \"move\", !0),\n            this.getTween(t).to(o / this.moveSpeedPet, {\n                x: this.leftPosX\n            }).call(function() {\n                e.petIdleAnim(t)\n            }).start()\n        }\n    },\n    t\n} ();\no.default = s"]}